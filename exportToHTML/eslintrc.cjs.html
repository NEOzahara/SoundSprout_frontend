<html>
<head>
<title>eslintrc.cjs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6aab73;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #cf8e6d;}
.s4 { color: #7a7e85;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #67a37c; font-style: italic;}
.s7 { color: #2aacb8;}
.s8 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
eslintrc.cjs</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s2">Object</span><span class="s1">.</span><span class="s2">defineProperty</span><span class="s1">(</span><span class="s2">exports</span><span class="s1">, </span><span class="s0">'__esModule'</span><span class="s1">, { </span><span class="s2">value</span><span class="s1">: </span><span class="s3">true </span><span class="s1">});</span>

<span class="s3">var </span><span class="s2">debugOrig </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'debug'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">fs </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'fs'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">importFresh </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'import-fresh'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">Module </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'module'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">path </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'path'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">stripComments </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'strip-json-comments'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">assert </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'assert'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">ignore </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'ignore'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">util </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'util'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">minimatch </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'minimatch'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">Ajv </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'ajv'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">globals </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'globals'</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">os </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'os'</span><span class="s1">);</span>

<span class="s3">function </span><span class="s2">_interopDefaultLegacy </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) { </span><span class="s3">return </span><span class="s2">e </span><span class="s1">&amp;&amp; </span><span class="s3">typeof </span><span class="s2">e </span><span class="s1">=== </span><span class="s0">'object' </span><span class="s1">&amp;&amp; </span><span class="s0">'default' </span><span class="s3">in </span><span class="s2">e </span><span class="s1">? </span><span class="s2">e </span><span class="s1">: { </span><span class="s0">'default'</span><span class="s1">: </span><span class="s2">e </span><span class="s1">}; }</span>

<span class="s3">var </span><span class="s2">debugOrig__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">debugOrig</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">fs__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">fs</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">importFresh__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">importFresh</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">Module__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">Module</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">path__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">path</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">stripComments__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">stripComments</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">assert__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">assert</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">ignore__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">ignore</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">util__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">util</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">minimatch__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">minimatch</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">Ajv__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">Ajv</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">globals__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">globals</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">os__default </span><span class="s1">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">os</span><span class="s1">);</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">`IgnorePattern` class.</span>
 <span class="s5">*</span>
 <span class="s5">* `IgnorePattern` class has the set of glob patterns and the base path.</span>
 <span class="s5">*</span>
 <span class="s5">* It provides two static methods.</span>
 <span class="s5">*</span>
 <span class="s5">* - `IgnorePattern.createDefaultIgnore(cwd)`</span>
 <span class="s5">*      Create the default predicate function.</span>
 <span class="s5">* - `IgnorePattern.createIgnore(ignorePatterns)`</span>
 <span class="s5">*      Create the predicate function from multiple `IgnorePattern` objects.</span>
 <span class="s5">*</span>
 <span class="s5">* It provides two properties and a method.</span>
 <span class="s5">*</span>
 <span class="s5">* - `patterns`</span>
 <span class="s5">*      The glob patterns that ignore to lint.</span>
 <span class="s5">* - `basePath`</span>
 <span class="s5">*      The base path of the glob patterns. If absolute paths existed in the</span>
 <span class="s5">*      glob patterns, those are handled as relative paths to the base path.</span>
 <span class="s5">* - `getPatternsRelativeTo(basePath)`</span>
 <span class="s5">*      Get `patterns` as modified for a given base path. It modifies the</span>
 <span class="s5">*      absolute paths in the patterns as prepending the difference of two base</span>
 <span class="s5">*      paths.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArrayFactory` creates `IgnorePattern` objects when it processes</span>
 <span class="s5">* `ignorePatterns` properties.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s3">const </span><span class="s2">debug$3 </span><span class="s1">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:ignore-pattern&quot;</span><span class="s1">);</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{ReturnType&lt;import(&quot;ignore&quot;).default&gt;} Ignore */</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Helpers</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s5">/**</span>
 <span class="s5">* Get the path to the common ancestor directory of given paths.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string[]} sourcePaths The paths to calculate the common ancestor.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The path to the common ancestor directory.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">getCommonAncestorPath</span><span class="s1">(</span><span class="s2">sourcePaths</span><span class="s1">) {</span>
    <span class="s3">let </span><span class="s2">result </span><span class="s1">= </span><span class="s2">sourcePaths</span><span class="s1">[</span><span class="s7">0</span><span class="s1">];</span>

    <span class="s3">for </span><span class="s1">(</span><span class="s3">let </span><span class="s2">i </span><span class="s1">= </span><span class="s7">1</span><span class="s1">; </span><span class="s2">i </span><span class="s1">&lt; </span><span class="s2">sourcePaths</span><span class="s1">.</span><span class="s2">length</span><span class="s1">; ++</span><span class="s2">i</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">a </span><span class="s1">= </span><span class="s2">result</span><span class="s1">;</span>
        <span class="s3">const </span><span class="s2">b </span><span class="s1">= </span><span class="s2">sourcePaths</span><span class="s1">[</span><span class="s2">i</span><span class="s1">];</span>

        <span class="s4">// Set the shorter one (it's the common ancestor if one includes the other).</span>
        <span class="s2">result </span><span class="s1">= </span><span class="s2">a</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&lt; </span><span class="s2">b</span><span class="s1">.</span><span class="s2">length </span><span class="s1">? </span><span class="s2">a </span><span class="s1">: </span><span class="s2">b</span><span class="s1">;</span>

        <span class="s4">// Set the common ancestor.</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">let </span><span class="s2">j </span><span class="s1">= </span><span class="s7">0</span><span class="s1">, </span><span class="s2">lastSepPos </span><span class="s1">= </span><span class="s7">0</span><span class="s1">; </span><span class="s2">j </span><span class="s1">&lt; </span><span class="s2">a</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&amp;&amp; </span><span class="s2">j </span><span class="s1">&lt; </span><span class="s2">b</span><span class="s1">.</span><span class="s2">length</span><span class="s1">; ++</span><span class="s2">j</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">a</span><span class="s1">[</span><span class="s2">j</span><span class="s1">] !== </span><span class="s2">b</span><span class="s1">[</span><span class="s2">j</span><span class="s1">]) {</span>
                <span class="s2">result </span><span class="s1">= </span><span class="s2">a</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">0</span><span class="s1">, </span><span class="s2">lastSepPos</span><span class="s1">);</span>
                <span class="s3">break</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">a</span><span class="s1">[</span><span class="s2">j</span><span class="s1">] === </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">) {</span>
                <span class="s2">lastSepPos </span><span class="s1">= </span><span class="s2">j</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">let </span><span class="s2">resolvedResult </span><span class="s1">= </span><span class="s2">result </span><span class="s1">|| </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">;</span>

    <span class="s4">// if Windows common ancestor is root of drive must have trailing slash to be absolute.</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">resolvedResult </span><span class="s1">&amp;&amp; </span><span class="s2">resolvedResult</span><span class="s1">.</span><span class="s2">endsWith</span><span class="s1">(</span><span class="s0">&quot;:&quot;</span><span class="s1">) &amp;&amp; </span><span class="s2">process</span><span class="s1">.</span><span class="s2">platform </span><span class="s1">=== </span><span class="s0">&quot;win32&quot;</span><span class="s1">) {</span>
        <span class="s2">resolvedResult </span><span class="s1">+= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s2">resolvedResult</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Make relative path.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} from The source path to get relative path.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} to The destination path to get relative path.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The relative path.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">relative</span><span class="s1">(</span><span class="s2">from</span><span class="s1">, </span><span class="s2">to</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">relPath </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">relative</span><span class="s1">(</span><span class="s2">from</span><span class="s1">, </span><span class="s2">to</span><span class="s1">);</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep </span><span class="s1">=== </span><span class="s0">&quot;/&quot;</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s2">relPath</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s2">relPath</span><span class="s1">.</span><span class="s2">split</span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">).</span><span class="s2">join</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Get the trailing slash if existed.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The path to check.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The trailing slash if existed.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">dirSuffix</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">isDir </span><span class="s1">= (</span>
        <span class="s2">filePath</span><span class="s1">.</span><span class="s2">endsWith</span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">) ||</span>
        <span class="s1">(</span><span class="s2">process</span><span class="s1">.</span><span class="s2">platform </span><span class="s1">=== </span><span class="s0">&quot;win32&quot; </span><span class="s1">&amp;&amp; </span><span class="s2">filePath</span><span class="s1">.</span><span class="s2">endsWith</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">))</span>
    <span class="s1">);</span>

    <span class="s3">return </span><span class="s2">isDir </span><span class="s1">? </span><span class="s0">&quot;/&quot; </span><span class="s1">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s3">const </span><span class="s2">DefaultPatterns </span><span class="s1">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">freeze</span><span class="s1">([</span><span class="s0">&quot;/**/node_modules/*&quot;</span><span class="s1">]);</span>
<span class="s3">const </span><span class="s2">DotPatterns </span><span class="s1">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">freeze</span><span class="s1">([</span><span class="s0">&quot;.*&quot;</span><span class="s1">, </span><span class="s0">&quot;!.eslintrc.*&quot;</span><span class="s1">, </span><span class="s0">&quot;!../&quot;</span><span class="s1">]);</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Public</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s3">class </span><span class="s2">IgnorePattern </span><span class="s1">{</span>

    <span class="s5">/**</span>
     <span class="s5">* The default patterns.</span>
     <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string[]}</span>
     <span class="s5">*/</span>
    <span class="s3">static </span><span class="s2">get DefaultPatterns</span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s2">DefaultPatterns</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Create the default predicate function.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} cwd The current working directory.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{((filePath:string, dot:boolean) =&gt; boolean) &amp; {basePath:string; patterns:string[]}}</span>
     <span class="s5">* The preficate function.</span>
     <span class="s5">* The first argument is an absolute path that is checked.</span>
     <span class="s5">* The second argument is the flag to not ignore dotfiles.</span>
     <span class="s5">* If the predicate function returned `true`, it means the path should be ignored.</span>
     <span class="s5">*/</span>
    <span class="s3">static </span><span class="s2">createDefaultIgnore</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">) {</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">createIgnore</span><span class="s1">([</span><span class="s3">new </span><span class="s2">IgnorePattern</span><span class="s1">(</span><span class="s2">DefaultPatterns</span><span class="s1">, </span><span class="s2">cwd</span><span class="s1">)]);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Create the predicate function from multiple `IgnorePattern` objects.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{IgnorePattern[]} ignorePatterns The list of ignore patterns.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{((filePath:string, dot?:boolean) =&gt; boolean) &amp; {basePath:string; patterns:string[]}}</span>
     <span class="s5">* The preficate function.</span>
     <span class="s5">* The first argument is an absolute path that is checked.</span>
     <span class="s5">* The second argument is the flag to not ignore dotfiles.</span>
     <span class="s5">* If the predicate function returned `true`, it means the path should be ignored.</span>
     <span class="s5">*/</span>
    <span class="s3">static </span><span class="s2">createIgnore</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">) {</span>
        <span class="s2">debug$3</span><span class="s1">(</span><span class="s0">&quot;Create with: %o&quot;</span><span class="s1">, </span><span class="s2">ignorePatterns</span><span class="s1">);</span>

        <span class="s3">const </span><span class="s2">basePath </span><span class="s1">= </span><span class="s2">getCommonAncestorPath</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">p </span><span class="s1">=&gt; </span><span class="s2">p</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">));</span>
        <span class="s3">const </span><span class="s2">patterns </span><span class="s1">= [].</span><span class="s2">concat</span><span class="s1">(</span>
            <span class="s2">...ignorePatterns</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">p </span><span class="s1">=&gt; </span><span class="s2">p</span><span class="s1">.</span><span class="s2">getPatternsRelativeTo</span><span class="s1">(</span><span class="s2">basePath</span><span class="s1">))</span>
        <span class="s1">);</span>
        <span class="s3">const </span><span class="s2">ig </span><span class="s1">= </span><span class="s2">ignore__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({ </span><span class="s2">allowRelativePaths</span><span class="s1">: </span><span class="s3">true </span><span class="s1">}).</span><span class="s2">add</span><span class="s1">([</span><span class="s2">...DotPatterns</span><span class="s1">, </span><span class="s2">...patterns</span><span class="s1">]);</span>
        <span class="s3">const </span><span class="s2">dotIg </span><span class="s1">= </span><span class="s2">ignore__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({ </span><span class="s2">allowRelativePaths</span><span class="s1">: </span><span class="s3">true </span><span class="s1">}).</span><span class="s2">add</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">);</span>

        <span class="s2">debug$3</span><span class="s1">(</span><span class="s0">&quot;  processed: %o&quot;</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">patterns </span><span class="s1">});</span>

        <span class="s3">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">assign</span><span class="s1">(</span>
            <span class="s1">(</span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">dot </span><span class="s1">= </span><span class="s3">false</span><span class="s1">) =&gt; {</span>
                <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">isAbsolute</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">), </span><span class="s0">&quot;'filePath' should be an absolute path.&quot;</span><span class="s1">);</span>
                <span class="s3">const </span><span class="s2">relPathRaw </span><span class="s1">= </span><span class="s2">relative</span><span class="s1">(</span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
                <span class="s3">const </span><span class="s2">relPath </span><span class="s1">= </span><span class="s2">relPathRaw </span><span class="s1">&amp;&amp; (</span><span class="s2">relPathRaw </span><span class="s1">+ </span><span class="s2">dirSuffix</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">));</span>
                <span class="s3">const </span><span class="s2">adoptedIg </span><span class="s1">= </span><span class="s2">dot </span><span class="s1">? </span><span class="s2">dotIg </span><span class="s1">: </span><span class="s2">ig</span><span class="s1">;</span>
                <span class="s3">const </span><span class="s2">result </span><span class="s1">= </span><span class="s2">relPath </span><span class="s1">!== </span><span class="s0">&quot;&quot; </span><span class="s1">&amp;&amp; </span><span class="s2">adoptedIg</span><span class="s1">.</span><span class="s2">ignores</span><span class="s1">(</span><span class="s2">relPath</span><span class="s1">);</span>

                <span class="s2">debug$3</span><span class="s1">(</span><span class="s0">&quot;Check&quot;</span><span class="s1">, { </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">dot</span><span class="s1">, </span><span class="s2">relativePath</span><span class="s1">: </span><span class="s2">relPath</span><span class="s1">, </span><span class="s2">result </span><span class="s1">});</span>
                <span class="s3">return </span><span class="s2">result</span><span class="s1">;</span>
            <span class="s1">},</span>
            <span class="s1">{ </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">patterns </span><span class="s1">}</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Initialize a new `IgnorePattern` instance.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string[]} patterns The glob patterns that ignore to lint.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} basePath The base path of `patterns`.</span>
     <span class="s5">*/</span>
    <span class="s2">constructor</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">) {</span>
        <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">isAbsolute</span><span class="s1">(</span><span class="s2">basePath</span><span class="s1">), </span><span class="s0">&quot;'basePath' should be an absolute path.&quot;</span><span class="s1">);</span>

        <span class="s5">/**</span>
         <span class="s5">* The glob patterns that ignore to lint.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string[]}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">patterns </span><span class="s1">= </span><span class="s2">patterns</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The base path of `patterns`.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">basePath </span><span class="s1">= </span><span class="s2">basePath</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* If `true` then patterns which don't start with `/` will match the paths to the outside of `basePath`. Defaults to `false`.</span>
         <span class="s5">*</span>
         <span class="s5">* It's set `true` for `.eslintignore`, `package.json`, and `--ignore-path` for backward compatibility.</span>
         <span class="s5">* It's `false` as-is for `ignorePatterns` property in config files.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{boolean}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">loose </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Get `patterns` as modified for a given base path. It modifies the</span>
     <span class="s5">* absolute paths in the patterns as prepending the difference of two base</span>
     <span class="s5">* paths.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} newBasePath The base path.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string[]} Modifired patterns.</span>
     <span class="s5">*/</span>
    <span class="s2">getPatternsRelativeTo</span><span class="s1">(</span><span class="s2">newBasePath</span><span class="s1">) {</span>
        <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">isAbsolute</span><span class="s1">(</span><span class="s2">newBasePath</span><span class="s1">), </span><span class="s0">&quot;'newBasePath' should be an absolute path.&quot;</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s1">{ </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">loose</span><span class="s1">, </span><span class="s2">patterns </span><span class="s1">} = </span><span class="s3">this</span><span class="s1">;</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">newBasePath </span><span class="s1">=== </span><span class="s2">basePath</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s2">patterns</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s3">const </span><span class="s2">prefix </span><span class="s1">= </span><span class="s0">`/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">relative</span><span class="s1">(</span><span class="s2">newBasePath</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">)}</span><span class="s0">`</span><span class="s1">;</span>

        <span class="s3">return </span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">pattern </span><span class="s1">=&gt; {</span>
            <span class="s3">const </span><span class="s2">negative </span><span class="s1">= </span><span class="s2">pattern</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;!&quot;</span><span class="s1">);</span>
            <span class="s3">const </span><span class="s2">head </span><span class="s1">= </span><span class="s2">negative </span><span class="s1">? </span><span class="s0">&quot;!&quot; </span><span class="s1">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
            <span class="s3">const </span><span class="s2">body </span><span class="s1">= </span><span class="s2">negative </span><span class="s1">? </span><span class="s2">pattern</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">) : </span><span class="s2">pattern</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">body</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">) || </span><span class="s2">body</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;../&quot;</span><span class="s1">)) {</span>
                <span class="s3">return </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">head</span><span class="s1">}</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s2">$</span><span class="s1">{</span><span class="s2">body</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s3">return </span><span class="s2">loose </span><span class="s1">? </span><span class="s2">pattern </span><span class="s1">: </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">head</span><span class="s1">}</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">/**/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">body</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">`ExtractedConfig` class.</span>
 <span class="s5">*</span>
 <span class="s5">* `ExtractedConfig` class expresses a final configuration for a specific file.</span>
 <span class="s5">*</span>
 <span class="s5">* It provides one method.</span>
 <span class="s5">*</span>
 <span class="s5">* - `toCompatibleObjectAsConfigFileContent()`</span>
 <span class="s5">*      Convert this configuration to the compatible object as the content of</span>
 <span class="s5">*      config files. It converts the loaded parser and plugins to strings.</span>
 <span class="s5">*      `CLIEngine#getConfigForFile(filePath)` method uses this method.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArray#extractConfig(filePath)` creates a `ExtractedConfig` instance.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s4">// For VSCode intellisense</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).ConfigData} ConfigData */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).GlobalConf} GlobalConf */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).SeverityConf} SeverityConf */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./config-dependency&quot;).DependentParser} DependentParser */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./config-dependency&quot;).DependentPlugin} DependentPlugin */</span>

<span class="s5">/**</span>
 <span class="s5">* Check if `xs` starts with `ys`.</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{T[]} xs The array to check.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{T[]} ys The array that may be the first part of `xs`.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if `xs` starts with `ys`.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">startsWith</span><span class="s1">(</span><span class="s2">xs</span><span class="s1">, </span><span class="s2">ys</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">xs</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt;= </span><span class="s2">ys</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&amp;&amp; </span><span class="s2">ys</span><span class="s1">.</span><span class="s2">every</span><span class="s1">((</span><span class="s2">y</span><span class="s1">, </span><span class="s2">i</span><span class="s1">) =&gt; </span><span class="s2">y </span><span class="s1">=== </span><span class="s2">xs</span><span class="s1">[</span><span class="s2">i</span><span class="s1">]);</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* The class for extracted config data.</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">ExtractedConfig </span><span class="s1">{</span>
    <span class="s2">constructor</span><span class="s1">() {</span>

        <span class="s5">/**</span>
         <span class="s5">* The config name what `noInlineConfig` setting came from.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">configNameOfNoInlineConfig </span><span class="s1">= </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* Environments.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{Record&lt;string, boolean&gt;}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">env </span><span class="s1">= {};</span>

        <span class="s5">/**</span>
         <span class="s5">* Global variables.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{Record&lt;string, GlobalConf&gt;}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">globals </span><span class="s1">= {};</span>

        <span class="s5">/**</span>
         <span class="s5">* The glob patterns that ignore to lint.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{(((filePath:string, dot?:boolean) =&gt; boolean) &amp; { basePath:string; patterns:string[] }) | undefined}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">ignores </span><span class="s1">= </span><span class="s3">void </span><span class="s7">0</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The flag that disables directive comments.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{boolean|undefined}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">noInlineConfig </span><span class="s1">= </span><span class="s3">void </span><span class="s7">0</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* Parser definition.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{DependentParser|null}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">parser </span><span class="s1">= </span><span class="s3">null</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* Options for the parser.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{Object}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">parserOptions </span><span class="s1">= {};</span>

        <span class="s5">/**</span>
         <span class="s5">* Plugin definitions.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{Record&lt;string, DependentPlugin&gt;}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">plugins </span><span class="s1">= {};</span>

        <span class="s5">/**</span>
         <span class="s5">* Processor ID.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string|null}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">processor </span><span class="s1">= </span><span class="s3">null</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The flag that reports unused `eslint-disable` directive comments.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{boolean|undefined}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives </span><span class="s1">= </span><span class="s3">void </span><span class="s7">0</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* Rule settings.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{Record&lt;string, [SeverityConf, ...any[]]&gt;}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">rules </span><span class="s1">= {};</span>

        <span class="s5">/**</span>
         <span class="s5">* Shared settings.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{Object}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">settings </span><span class="s1">= {};</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Convert this config to the compatible object as a config file content.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigData} The converted object.</span>
     <span class="s5">*/</span>
    <span class="s2">toCompatibleObjectAsConfigFileContent</span><span class="s1">() {</span>
        <span class="s3">const </span><span class="s1">{</span>
            <span class="s4">/* eslint-disable no-unused-vars */</span>
            <span class="s2">configNameOfNoInlineConfig</span><span class="s1">: </span><span class="s2">_ignore1</span><span class="s1">,</span>
            <span class="s2">processor</span><span class="s1">: </span><span class="s2">_ignore2</span><span class="s1">,</span>
            <span class="s4">/* eslint-enable no-unused-vars */</span>
            <span class="s2">ignores</span><span class="s1">,</span>
            <span class="s2">...config</span>
        <span class="s1">} = </span><span class="s3">this</span><span class="s1">;</span>

        <span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s1">= </span><span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s1">&amp;&amp; </span><span class="s2">config</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">;</span>
        <span class="s2">config</span><span class="s1">.</span><span class="s2">plugins </span><span class="s1">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">).</span><span class="s2">filter</span><span class="s1">(</span><span class="s2">Boolean</span><span class="s1">).</span><span class="s2">reverse</span><span class="s1">();</span>
        <span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns </span><span class="s1">= </span><span class="s2">ignores </span><span class="s1">? </span><span class="s2">ignores</span><span class="s1">.</span><span class="s2">patterns </span><span class="s1">: [];</span>

        <span class="s4">// Strip the default patterns from `ignorePatterns`.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns</span><span class="s1">, </span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s2">DefaultPatterns</span><span class="s1">)) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns </span><span class="s1">=</span>
                <span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s2">DefaultPatterns</span><span class="s1">.</span><span class="s2">length</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">return </span><span class="s2">config</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">`ConfigArray` class.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArray` class expresses the full of a configuration. It has the entry</span>
 <span class="s5">* config file, base config files that were extended, loaded parsers, and loaded</span>
 <span class="s5">* plugins.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArray` class provides three properties and two methods.</span>
 <span class="s5">*</span>
 <span class="s5">* - `pluginEnvironments`</span>
 <span class="s5">* - `pluginProcessors`</span>
 <span class="s5">* - `pluginRules`</span>
 <span class="s5">*      The `Map` objects that contain the members of all plugins that this</span>
 <span class="s5">*      config array contains. Those map objects don't have mutation methods.</span>
 <span class="s5">*      Those keys are the member ID such as `pluginId/memberName`.</span>
 <span class="s5">* - `isRoot()`</span>
 <span class="s5">*      If `true` then this configuration has `root:true` property.</span>
 <span class="s5">* - `extractConfig(filePath)`</span>
 <span class="s5">*      Extract the final configuration for a given file. This means merging</span>
 <span class="s5">*      every config array element which that `criteria` property matched. The</span>
 <span class="s5">*      `filePath` argument must be an absolute path.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArrayFactory` provides the loading logic of config files.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Helpers</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s4">// Define types for VSCode IntelliSense.</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).Environment} Environment */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).GlobalConf} GlobalConf */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).RuleConf} RuleConf */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).Rule} Rule */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).Plugin} Plugin */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).Processor} Processor */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./config-dependency&quot;).DependentParser} DependentParser */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./config-dependency&quot;).DependentPlugin} DependentPlugin */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./override-tester&quot;)[&quot;OverrideTester&quot;]} OverrideTester */</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} ConfigArrayElement</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} name The name of this config element.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} filePath The path to the source file of this config element.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{InstanceType&lt;OverrideTester&gt;|null} criteria The tester for the `files` and `excludedFiles` of this config element.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, boolean&gt;|undefined} env The environment settings.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, GlobalConf&gt;|undefined} globals The global variable settings.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{IgnorePattern|undefined} ignorePattern The ignore patterns.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean|undefined} noInlineConfig The flag that disables directive comments.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{DependentParser|undefined} parser The parser loader.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Object|undefined} parserOptions The parser options.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, DependentPlugin&gt;|undefined} plugins The plugin loaders.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string|undefined} processor The processor name to refer plugin's processor.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean|undefined} reportUnusedDisableDirectives The flag to report unused `eslint-disable` comments.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean|undefined} root The flag to express root.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, RuleConf&gt;|undefined} rules The rule settings</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Object|undefined} settings The shared settings.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot;} type The element type.</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} ConfigArrayInternalSlots</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string, ExtractedConfig&gt;} cache The cache to extract configs.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ReadonlyMap&lt;string, Environment&gt;|null} envMap The map from environment ID to environment definition.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ReadonlyMap&lt;string, Processor&gt;|null} processorMap The map from processor ID to environment definition.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ReadonlyMap&lt;string, Rule&gt;|null} ruleMap The map from rule ID to rule definition.</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{WeakMap&lt;ConfigArray, ConfigArrayInternalSlots&gt;} */</span>
<span class="s3">const </span><span class="s2">internalSlotsMap$2 </span><span class="s1">= </span><span class="s3">new class extends </span><span class="s2">WeakMap </span><span class="s1">{</span>
    <span class="s2">get</span><span class="s1">(</span><span class="s2">key</span><span class="s1">) {</span>
        <span class="s3">let </span><span class="s2">value </span><span class="s1">= </span><span class="s3">super</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">key</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">value</span><span class="s1">) {</span>
            <span class="s2">value </span><span class="s1">= {</span>
                <span class="s2">cache</span><span class="s1">: </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">(),</span>
                <span class="s2">envMap</span><span class="s1">: </span><span class="s3">null</span><span class="s1">,</span>
                <span class="s2">processorMap</span><span class="s1">: </span><span class="s3">null</span><span class="s1">,</span>
                <span class="s2">ruleMap</span><span class="s1">: </span><span class="s3">null</span>
            <span class="s1">};</span>
            <span class="s3">super</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s2">key</span><span class="s1">, </span><span class="s2">value</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">return </span><span class="s2">value</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}();</span>

<span class="s5">/**</span>
 <span class="s5">* Get the indices which are matched to a given file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayElement[]} elements The elements.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The path to a target file.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{number[]} The indices.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">getMatchedIndices</span><span class="s1">(</span><span class="s2">elements</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">indices </span><span class="s1">= [];</span>

    <span class="s3">for </span><span class="s1">(</span><span class="s3">let </span><span class="s2">i </span><span class="s1">= </span><span class="s2">elements</span><span class="s1">.</span><span class="s2">length </span><span class="s1">- </span><span class="s7">1</span><span class="s1">; </span><span class="s2">i </span><span class="s1">&gt;= </span><span class="s7">0</span><span class="s1">; --</span><span class="s2">i</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">element </span><span class="s1">= </span><span class="s2">elements</span><span class="s1">[</span><span class="s2">i</span><span class="s1">];</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria </span><span class="s1">|| (</span><span class="s2">filePath </span><span class="s1">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">))) {</span>
            <span class="s2">indices</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s2">i</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">indices</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Check if a value is a non-null object.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{any} x The value to check.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if the value is a non-null object.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">isNonNullObject</span><span class="s1">(</span><span class="s2">x</span><span class="s1">) {</span>
    <span class="s3">return typeof </span><span class="s2">x </span><span class="s1">=== </span><span class="s0">&quot;object&quot; </span><span class="s1">&amp;&amp; </span><span class="s2">x </span><span class="s1">!== </span><span class="s3">null</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Merge two objects.</span>
 <span class="s5">*</span>
 <span class="s5">* Assign every property values of `y` to `x` if `x` doesn't have the property.</span>
 <span class="s5">* If `x`'s property value is an object, it does recursive.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} target The destination to merge</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object|undefined} source The source to merge.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">target</span><span class="s1">, </span><span class="s2">source</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(!</span><span class="s2">isNonNullObject</span><span class="s1">(</span><span class="s2">source</span><span class="s1">)) {</span>
        <span class="s3">return</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">key of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">source</span><span class="s1">)) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">key </span><span class="s1">=== </span><span class="s0">&quot;__proto__&quot;</span><span class="s1">) {</span>
            <span class="s3">continue</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">isNonNullObject</span><span class="s1">(</span><span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">])) {</span>
            <span class="s2">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">], </span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">]);</span>
        <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] === </span><span class="s3">void </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">isNonNullObject</span><span class="s1">(</span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">])) {</span>
                <span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">]) ? [] : {};</span>
                <span class="s2">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">], </span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">]);</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] !== </span><span class="s3">void </span><span class="s7">0</span><span class="s1">) {</span>
                <span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* The error for plugin conflicts.</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">PluginConflictError </span><span class="s3">extends </span><span class="s2">Error </span><span class="s1">{</span>

    <span class="s5">/**</span>
     <span class="s5">* Initialize this error object.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} pluginId The plugin ID.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{{filePath:string, importerName:string}[]} plugins The resolved plugins.</span>
     <span class="s5">*/</span>
    <span class="s2">constructor</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">plugins</span><span class="s1">) {</span>
        <span class="s3">super</span><span class="s1">(</span><span class="s0">`Plugin &quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginId</span><span class="s1">}</span><span class="s0">&quot; was conflicted between </span><span class="s2">$</span><span class="s1">{</span><span class="s2">plugins</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">p </span><span class="s1">=&gt; </span><span class="s0">`&quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">p</span><span class="s1">.</span><span class="s2">importerName</span><span class="s1">}</span><span class="s0">&quot;`</span><span class="s1">).</span><span class="s2">join</span><span class="s1">(</span><span class="s0">&quot; and &quot;</span><span class="s1">)}</span><span class="s0">.`</span><span class="s1">);</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s1">= </span><span class="s0">&quot;plugin-conflict&quot;</span><span class="s1">;</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">messageData </span><span class="s1">= { </span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">plugins </span><span class="s1">};</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Merge plugins.</span>
 <span class="s5">* `target`'s definition is prior to `source`'s.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string, DependentPlugin&gt;} target The destination to merge</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string, DependentPlugin&gt;|undefined} source The source to merge.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">mergePlugins</span><span class="s1">(</span><span class="s2">target</span><span class="s1">, </span><span class="s2">source</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(!</span><span class="s2">isNonNullObject</span><span class="s1">(</span><span class="s2">source</span><span class="s1">)) {</span>
        <span class="s3">return</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">key of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">source</span><span class="s1">)) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">key </span><span class="s1">=== </span><span class="s0">&quot;__proto__&quot;</span><span class="s1">) {</span>
            <span class="s3">continue</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s3">const </span><span class="s2">targetValue </span><span class="s1">= </span><span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
        <span class="s3">const </span><span class="s2">sourceValue </span><span class="s1">= </span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>

        <span class="s4">// Adopt the plugin which was found at first.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">targetValue </span><span class="s1">=== </span><span class="s3">void </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">sourceValue</span><span class="s1">.</span><span class="s2">error</span><span class="s1">) {</span>
                <span class="s3">throw </span><span class="s2">sourceValue</span><span class="s1">.</span><span class="s2">error</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">sourceValue</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">sourceValue</span><span class="s1">.</span><span class="s2">filePath </span><span class="s1">!== </span><span class="s2">targetValue</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">) {</span>
            <span class="s3">throw new </span><span class="s2">PluginConflictError</span><span class="s1">(</span><span class="s2">key</span><span class="s1">, [</span>
                <span class="s1">{</span>
                    <span class="s2">filePath</span><span class="s1">: </span><span class="s2">targetValue</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>
                    <span class="s2">importerName</span><span class="s1">: </span><span class="s2">targetValue</span><span class="s1">.</span><span class="s2">importerName</span>
                <span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s2">filePath</span><span class="s1">: </span><span class="s2">sourceValue</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>
                    <span class="s2">importerName</span><span class="s1">: </span><span class="s2">sourceValue</span><span class="s1">.</span><span class="s2">importerName</span>
                <span class="s1">}</span>
            <span class="s1">]);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Merge rule configs.</span>
 <span class="s5">* `target`'s definition is prior to `source`'s.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string, Array&gt;} target The destination to merge</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string, RuleConf&gt;|undefined} source The source to merge.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">mergeRuleConfigs</span><span class="s1">(</span><span class="s2">target</span><span class="s1">, </span><span class="s2">source</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(!</span><span class="s2">isNonNullObject</span><span class="s1">(</span><span class="s2">source</span><span class="s1">)) {</span>
        <span class="s3">return</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">key of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">source</span><span class="s1">)) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">key </span><span class="s1">=== </span><span class="s0">&quot;__proto__&quot;</span><span class="s1">) {</span>
            <span class="s3">continue</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s3">const </span><span class="s2">targetDef </span><span class="s1">= </span><span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
        <span class="s3">const </span><span class="s2">sourceDef </span><span class="s1">= </span><span class="s2">source</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>

        <span class="s4">// Adopt the rule config which was found at first.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">targetDef </span><span class="s1">=== </span><span class="s3">void </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">sourceDef</span><span class="s1">)) {</span>
                <span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = [</span><span class="s2">...sourceDef</span><span class="s1">];</span>
            <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
                <span class="s2">target</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = [</span><span class="s2">sourceDef</span><span class="s1">];</span>
            <span class="s1">}</span>

        <span class="s4">/* 
         * If the first found rule config is severity only and the current rule 
         * config has options, merge the severity and the options. 
         */</span>
        <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span>
            <span class="s2">targetDef</span><span class="s1">.</span><span class="s2">length </span><span class="s1">=== </span><span class="s7">1 </span><span class="s1">&amp;&amp;</span>
            <span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">sourceDef</span><span class="s1">) &amp;&amp;</span>
            <span class="s2">sourceDef</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt;= </span><span class="s7">2</span>
        <span class="s1">) {</span>
            <span class="s2">targetDef</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s2">...sourceDef</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">));</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Create the extracted config.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArray} instance The config elements.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{number[]} indices The indices to use.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ExtractedConfig} The extracted config.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">createConfig</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">, </span><span class="s2">indices</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">config </span><span class="s1">= </span><span class="s3">new </span><span class="s2">ExtractedConfig</span><span class="s1">();</span>
    <span class="s3">const </span><span class="s2">ignorePatterns </span><span class="s1">= [];</span>

    <span class="s4">// Merge elements.</span>
    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">index of indices</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">element </span><span class="s1">= </span><span class="s2">instance</span><span class="s1">[</span><span class="s2">index</span><span class="s1">];</span>

        <span class="s4">// Adopt the parser which was found at first.</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s1">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">.</span><span class="s2">error</span><span class="s1">) {</span>
                <span class="s3">throw </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">.</span><span class="s2">error</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s1">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s4">// Adopt the processor which was found at first.</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">config</span><span class="s1">.</span><span class="s2">processor </span><span class="s1">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">processor</span><span class="s1">) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">processor </span><span class="s1">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">processor</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s4">// Adopt the noInlineConfig which was found at first.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">noInlineConfig </span><span class="s1">=== </span><span class="s3">void </span><span class="s7">0 </span><span class="s1">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">noInlineConfig </span><span class="s1">!== </span><span class="s3">void </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">noInlineConfig </span><span class="s1">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">noInlineConfig</span><span class="s1">;</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">configNameOfNoInlineConfig </span><span class="s1">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">name</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s4">// Adopt the reportUnusedDisableDirectives which was found at first.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives </span><span class="s1">=== </span><span class="s3">void </span><span class="s7">0 </span><span class="s1">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives </span><span class="s1">!== </span><span class="s3">void </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives </span><span class="s1">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s4">// Collect ignorePatterns</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">) {</span>
            <span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s4">// Merge others.</span>
        <span class="s2">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">env</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">env</span><span class="s1">);</span>
        <span class="s2">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">globals</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">globals</span><span class="s1">);</span>
        <span class="s2">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">);</span>
        <span class="s2">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">settings</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">settings</span><span class="s1">);</span>
        <span class="s2">mergePlugins</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">);</span>
        <span class="s2">mergeRuleConfigs</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s4">// Create the predicate function for ignore patterns.</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s2">config</span><span class="s1">.</span><span class="s2">ignores </span><span class="s1">= </span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s2">createIgnore</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s2">reverse</span><span class="s1">());</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">config</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Collect definitions.</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T, U</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} pluginId The plugin ID for prefix.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string,T&gt;} defs The definitions to collect.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Map&lt;string, U&gt;} map The map to output.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(T): U} [normalize] The normalize function for each value.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">collect</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">defs</span><span class="s1">, </span><span class="s2">map</span><span class="s1">, </span><span class="s2">normalize</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">defs</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">prefix </span><span class="s1">= </span><span class="s2">pluginId </span><span class="s1">&amp;&amp; </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginId</span><span class="s1">}</span><span class="s0">/`</span><span class="s1">;</span>

        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s1">[</span><span class="s2">key</span><span class="s1">, </span><span class="s2">value</span><span class="s1">] </span><span class="s2">of Object</span><span class="s1">.</span><span class="s2">entries</span><span class="s1">(</span><span class="s2">defs</span><span class="s1">)) {</span>
            <span class="s2">map</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span>
                <span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s2">$</span><span class="s1">{</span><span class="s2">key</span><span class="s1">}</span><span class="s0">`</span><span class="s1">,</span>
                <span class="s2">normalize </span><span class="s1">? </span><span class="s2">normalize</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) : </span><span class="s2">value</span>
            <span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Normalize a rule definition.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Function|Rule} rule The rule definition to normalize.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Rule} The normalized rule definition.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">normalizePluginRule</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">) {</span>
    <span class="s3">return typeof </span><span class="s2">rule </span><span class="s1">=== </span><span class="s0">&quot;function&quot; </span><span class="s1">? { </span><span class="s2">create</span><span class="s1">: </span><span class="s2">rule </span><span class="s1">} : </span><span class="s2">rule</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Delete the mutation methods from a given map.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Map&lt;any, any&gt;} map The map object to delete.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">deleteMutationMethods</span><span class="s1">(</span><span class="s2">map</span><span class="s1">) {</span>
    <span class="s2">Object</span><span class="s1">.</span><span class="s2">defineProperties</span><span class="s1">(</span><span class="s2">map</span><span class="s1">, {</span>
        <span class="s2">clear</span><span class="s1">: { </span><span class="s2">configurable</span><span class="s1">: </span><span class="s3">true</span><span class="s1">, </span><span class="s2">value</span><span class="s1">: </span><span class="s3">void </span><span class="s7">0 </span><span class="s1">},</span>
        <span class="s3">delete</span><span class="s1">: { </span><span class="s2">configurable</span><span class="s1">: </span><span class="s3">true</span><span class="s1">, </span><span class="s2">value</span><span class="s1">: </span><span class="s3">void </span><span class="s7">0 </span><span class="s1">},</span>
        <span class="s2">set</span><span class="s1">: { </span><span class="s2">configurable</span><span class="s1">: </span><span class="s3">true</span><span class="s1">, </span><span class="s2">value</span><span class="s1">: </span><span class="s3">void </span><span class="s7">0 </span><span class="s1">}</span>
    <span class="s1">});</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Create `envMap`, `processorMap`, `ruleMap` with the plugins in the config array.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayElement[]} elements The config elements.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayInternalSlots} slots The internal slots.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">initPluginMemberMaps</span><span class="s1">(</span><span class="s2">elements</span><span class="s1">, </span><span class="s2">slots</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">processed </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Set</span><span class="s1">();</span>

    <span class="s2">slots</span><span class="s1">.</span><span class="s2">envMap </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">();</span>
    <span class="s2">slots</span><span class="s1">.</span><span class="s2">processorMap </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">();</span>
    <span class="s2">slots</span><span class="s1">.</span><span class="s2">ruleMap </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">();</span>

    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">element of elements</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">element</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">) {</span>
            <span class="s3">continue</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s1">[</span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">value</span><span class="s1">] </span><span class="s2">of Object</span><span class="s1">.</span><span class="s2">entries</span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">)) {</span>
            <span class="s3">const </span><span class="s2">plugin </span><span class="s1">= </span><span class="s2">value</span><span class="s1">.</span><span class="s2">definition</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(!</span><span class="s2">plugin </span><span class="s1">|| </span><span class="s2">processed</span><span class="s1">.</span><span class="s2">has</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">)) {</span>
                <span class="s3">continue</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s2">processed</span><span class="s1">.</span><span class="s2">add</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">);</span>

            <span class="s2">collect</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">environments</span><span class="s1">, </span><span class="s2">slots</span><span class="s1">.</span><span class="s2">envMap</span><span class="s1">);</span>
            <span class="s2">collect</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">processors</span><span class="s1">, </span><span class="s2">slots</span><span class="s1">.</span><span class="s2">processorMap</span><span class="s1">);</span>
            <span class="s2">collect</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">, </span><span class="s2">slots</span><span class="s1">.</span><span class="s2">ruleMap</span><span class="s1">, </span><span class="s2">normalizePluginRule</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">deleteMutationMethods</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">envMap</span><span class="s1">);</span>
    <span class="s2">deleteMutationMethods</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">processorMap</span><span class="s1">);</span>
    <span class="s2">deleteMutationMethods</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">ruleMap</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Create `envMap`, `processorMap`, `ruleMap` with the plugins in the config array.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArray} instance The config elements.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArrayInternalSlots} The extracted config.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">ensurePluginMemberMaps</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap$2</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">);</span>

    <span class="s3">if </span><span class="s1">(!</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">ruleMap</span><span class="s1">) {</span>
        <span class="s2">initPluginMemberMaps</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">, </span><span class="s2">slots</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">slots</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Public Interface</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s5">/**</span>
 <span class="s5">* The Config Array.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArray` instance contains all settings, parsers, and plugins.</span>
 <span class="s5">* You need to call `ConfigArray#extractConfig(filePath)` method in order to</span>
 <span class="s5">* extract, merge and get only the config data which is related to an arbitrary</span>
 <span class="s5">* file.</span>
 <span class="s5">* </span><span class="s6">@extends </span><span class="s5">{Array&lt;ConfigArrayElement&gt;}</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">ConfigArray </span><span class="s3">extends </span><span class="s2">Array </span><span class="s1">{</span>

    <span class="s5">/**</span>
     <span class="s5">* Get the plugin environments.</span>
     <span class="s5">* The returned map cannot be mutated.</span>
     <span class="s5">* </span><span class="s6">@type </span><span class="s5">{ReadonlyMap&lt;string, Environment&gt;} The plugin environments.</span>
     <span class="s5">*/</span>
    <span class="s2">get pluginEnvironments</span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s2">ensurePluginMemberMaps</span><span class="s1">(</span><span class="s3">this</span><span class="s1">).</span><span class="s2">envMap</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Get the plugin processors.</span>
     <span class="s5">* The returned map cannot be mutated.</span>
     <span class="s5">* </span><span class="s6">@type </span><span class="s5">{ReadonlyMap&lt;string, Processor&gt;} The plugin processors.</span>
     <span class="s5">*/</span>
    <span class="s2">get pluginProcessors</span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s2">ensurePluginMemberMaps</span><span class="s1">(</span><span class="s3">this</span><span class="s1">).</span><span class="s2">processorMap</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Get the plugin rules.</span>
     <span class="s5">* The returned map cannot be mutated.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ReadonlyMap&lt;string, Rule&gt;} The plugin rules.</span>
     <span class="s5">*/</span>
    <span class="s2">get pluginRules</span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s2">ensurePluginMemberMaps</span><span class="s1">(</span><span class="s3">this</span><span class="s1">).</span><span class="s2">ruleMap</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Check if this config has `root` flag.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if this config array is root.</span>
     <span class="s5">*/</span>
    <span class="s2">isRoot</span><span class="s1">() {</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">let </span><span class="s2">i </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">length </span><span class="s1">- </span><span class="s7">1</span><span class="s1">; </span><span class="s2">i </span><span class="s1">&gt;= </span><span class="s7">0</span><span class="s1">; --</span><span class="s2">i</span><span class="s1">) {</span>
            <span class="s3">const </span><span class="s2">root </span><span class="s1">= </span><span class="s3">this</span><span class="s1">[</span><span class="s2">i</span><span class="s1">].</span><span class="s2">root</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">root </span><span class="s1">=== </span><span class="s0">&quot;boolean&quot;</span><span class="s1">) {</span>
                <span class="s3">return </span><span class="s2">root</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s3">return false</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Extract the config data which is related to a given file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The absolute path to the target file.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ExtractedConfig} The extracted config data.</span>
     <span class="s5">*/</span>
    <span class="s2">extractConfig</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{ </span><span class="s2">cache </span><span class="s1">} = </span><span class="s2">internalSlotsMap$2</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">indices </span><span class="s1">= </span><span class="s2">getMatchedIndices</span><span class="s1">(</span><span class="s3">this</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">cacheKey </span><span class="s1">= </span><span class="s2">indices</span><span class="s1">.</span><span class="s2">join</span><span class="s1">(</span><span class="s0">&quot;,&quot;</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">cache</span><span class="s1">.</span><span class="s2">has</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">)) {</span>
            <span class="s2">cache</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">, </span><span class="s2">createConfig</span><span class="s1">(</span><span class="s3">this</span><span class="s1">, </span><span class="s2">indices</span><span class="s1">));</span>
        <span class="s1">}</span>

        <span class="s3">return </span><span class="s2">cache</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Check if a given path is an additional lint target.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The absolute path to the target file.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if the file is an additional lint target.</span>
     <span class="s5">*/</span>
    <span class="s2">isAdditionalTargetPath</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s1">{ </span><span class="s2">criteria</span><span class="s1">, </span><span class="s2">type </span><span class="s1">} </span><span class="s2">of </span><span class="s3">this</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span>
                <span class="s2">type </span><span class="s1">=== </span><span class="s0">&quot;config&quot; </span><span class="s1">&amp;&amp;</span>
                <span class="s2">criteria </span><span class="s1">&amp;&amp;</span>
                <span class="s1">!</span><span class="s2">criteria</span><span class="s1">.</span><span class="s2">endsWithWildcard </span><span class="s1">&amp;&amp;</span>
                <span class="s2">criteria</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)</span>
            <span class="s1">) {</span>
                <span class="s3">return true</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s3">return false</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Get the used extracted configs.</span>
 <span class="s5">* CLIEngine will use this method to collect used deprecated rules.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArray} instance The config array object to get.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ExtractedConfig[]} The used extracted configs.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">getUsedExtractedConfigs</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s1">{ </span><span class="s2">cache </span><span class="s1">} = </span><span class="s2">internalSlotsMap$2</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">);</span>

    <span class="s3">return </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">from</span><span class="s1">(</span><span class="s2">cache</span><span class="s1">.</span><span class="s2">values</span><span class="s1">());</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">`ConfigDependency` class.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigDependency` class expresses a loaded parser or plugin.</span>
 <span class="s5">*</span>
 <span class="s5">* If the parser or plugin was loaded successfully, it has `definition` property</span>
 <span class="s5">* and `filePath` property. Otherwise, it has `error` property.</span>
 <span class="s5">*</span>
 <span class="s5">* When `JSON.stringify()` converted a `ConfigDependency` object to a JSON, it</span>
 <span class="s5">* omits `definition` property.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArrayFactory` creates `ConfigDependency` objects when it loads parsers</span>
 <span class="s5">* or plugins.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* The class is to store parsers or plugins.</span>
 <span class="s5">* This class hides the loaded object from `JSON.stringify()` and `console.log`.</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">ConfigDependency </span><span class="s1">{</span>

    <span class="s5">/**</span>
     <span class="s5">* Initialize this instance.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} data The dependency data.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{T} [data.definition] The dependency if the loading succeeded.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{T} [data.original] The original, non-normalized dependency if the loading succeeded.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Error} [data.error] The error object if the loading failed.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [data.filePath] The actual path to the dependency if the loading succeeded.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} data.id The ID of this dependency.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} data.importerName The name of the config file which loads this dependency.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} data.importerPath The path to the config file which loads this dependency.</span>
     <span class="s5">*/</span>
    <span class="s2">constructor</span><span class="s1">({</span>
        <span class="s2">definition </span><span class="s1">= </span><span class="s3">null</span><span class="s1">,</span>
        <span class="s2">original </span><span class="s1">= </span><span class="s3">null</span><span class="s1">,</span>
        <span class="s2">error </span><span class="s1">= </span><span class="s3">null</span><span class="s1">,</span>
        <span class="s2">filePath </span><span class="s1">= </span><span class="s3">null</span><span class="s1">,</span>
        <span class="s2">id</span><span class="s1">,</span>
        <span class="s2">importerName</span><span class="s1">,</span>
        <span class="s2">importerPath</span>
    <span class="s1">}) {</span>

        <span class="s5">/**</span>
         <span class="s5">* The loaded dependency if the loading succeeded.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{T|null}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">definition </span><span class="s1">= </span><span class="s2">definition</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The original dependency as loaded directly from disk if the loading succeeded.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{T|null}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">original </span><span class="s1">= </span><span class="s2">original</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The error object if the loading failed.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{Error|null}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">error </span><span class="s1">= </span><span class="s2">error</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The loaded dependency if the loading succeeded.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string|null}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">filePath </span><span class="s1">= </span><span class="s2">filePath</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The ID of this dependency.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">id </span><span class="s1">= </span><span class="s2">id</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The name of the config file which loads this dependency.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">importerName </span><span class="s1">= </span><span class="s2">importerName</span><span class="s1">;</span>

        <span class="s5">/**</span>
         <span class="s5">* The path to the config file which loads this dependency.</span>
         <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string}</span>
         <span class="s5">*/</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">importerPath </span><span class="s1">= </span><span class="s2">importerPath</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s4">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s5">/**</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} a JSON compatible object.</span>
     <span class="s5">*/</span>
    <span class="s2">toJSON</span><span class="s1">() {</span>
        <span class="s3">const </span><span class="s2">obj </span><span class="s1">= </span><span class="s3">this</span><span class="s1">[</span><span class="s2">util__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">inspect</span><span class="s1">.</span><span class="s2">custom</span><span class="s1">]();</span>

        <span class="s4">// Display `error.message` (`Error#message` is unenumerable).</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">obj</span><span class="s1">.</span><span class="s2">error </span><span class="s3">instanceof </span><span class="s2">Error</span><span class="s1">) {</span>
            <span class="s2">obj</span><span class="s1">.</span><span class="s2">error </span><span class="s1">= { </span><span class="s2">...obj</span><span class="s1">.</span><span class="s2">error</span><span class="s1">, </span><span class="s2">message</span><span class="s1">: </span><span class="s2">obj</span><span class="s1">.</span><span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s1">};</span>
        <span class="s1">}</span>

        <span class="s3">return </span><span class="s2">obj</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s4">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s5">/**</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} an object to display by `console.log()`.</span>
     <span class="s5">*/</span>
    <span class="s1">[</span><span class="s2">util__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">inspect</span><span class="s1">.</span><span class="s2">custom</span><span class="s1">]() {</span>
        <span class="s3">const </span><span class="s1">{</span>
            <span class="s2">definition</span><span class="s1">: </span><span class="s2">_ignore1</span><span class="s1">, </span><span class="s4">// eslint-disable-line no-unused-vars</span>
            <span class="s2">original</span><span class="s1">: </span><span class="s2">_ignore2</span><span class="s1">, </span><span class="s4">// eslint-disable-line no-unused-vars</span>
            <span class="s2">...obj</span>
        <span class="s1">} = </span><span class="s3">this</span><span class="s1">;</span>

        <span class="s3">return </span><span class="s2">obj</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">`OverrideTester` class.</span>
 <span class="s5">*</span>
 <span class="s5">* `OverrideTester` class handles `files` property and `excludedFiles` property</span>
 <span class="s5">* of `overrides` config.</span>
 <span class="s5">*</span>
 <span class="s5">* It provides one method.</span>
 <span class="s5">*</span>
 <span class="s5">* - `test(filePath)`</span>
 <span class="s5">*      Test if a file path matches the pair of `files` property and</span>
 <span class="s5">*      `excludedFiles` property. The `filePath` argument must be an absolute</span>
 <span class="s5">*      path.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArrayFactory` creates `OverrideTester` objects when it processes</span>
 <span class="s5">* `overrides` properties.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s3">const </span><span class="s1">{ </span><span class="s2">Minimatch </span><span class="s1">} = </span><span class="s2">minimatch__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">];</span>

<span class="s3">const </span><span class="s2">minimatchOpts </span><span class="s1">= { </span><span class="s2">dot</span><span class="s1">: </span><span class="s3">true</span><span class="s1">, </span><span class="s2">matchBase</span><span class="s1">: </span><span class="s3">true </span><span class="s1">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} Pattern</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{InstanceType&lt;Minimatch&gt;[] | null} includes The positive matchers.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{InstanceType&lt;Minimatch&gt;[] | null} excludes The negative matchers.</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* Normalize a given pattern to an array.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string|string[]|undefined} patterns A glob pattern or an array of glob patterns.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string[]|null} Normalized patterns.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">normalizePatterns</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">)) {</span>
        <span class="s3">return </span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">filter</span><span class="s1">(</span><span class="s2">Boolean</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">patterns </span><span class="s1">=== </span><span class="s0">&quot;string&quot; </span><span class="s1">&amp;&amp; </span><span class="s2">patterns</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s1">[</span><span class="s2">patterns</span><span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s1">[];</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Create the matchers of given patterns.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string[]} patterns The patterns.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{InstanceType&lt;Minimatch&gt;[] | null} The matchers.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">toMatcher</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">length </span><span class="s1">=== </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s3">return null</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">pattern </span><span class="s1">=&gt; {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s8">/^\.[/\\]/u</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">)) {</span>
            <span class="s3">return new </span><span class="s2">Minimatch</span><span class="s1">(</span>
                <span class="s2">pattern</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">2</span><span class="s1">),</span>

                <span class="s4">// `./*.js` should not match with `subdir/foo.js`</span>
                <span class="s1">{ </span><span class="s2">...minimatchOpts</span><span class="s1">, </span><span class="s2">matchBase</span><span class="s1">: </span><span class="s3">false </span><span class="s1">}</span>
            <span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s3">return new </span><span class="s2">Minimatch</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">, </span><span class="s2">minimatchOpts</span><span class="s1">);</span>
    <span class="s1">});</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Convert a given matcher to string.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Pattern} matchers The matchers.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The string expression of the matcher.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">patternToJson</span><span class="s1">({ </span><span class="s2">includes</span><span class="s1">, </span><span class="s2">excludes </span><span class="s1">}) {</span>
    <span class="s3">return </span><span class="s1">{</span>
        <span class="s2">includes</span><span class="s1">: </span><span class="s2">includes </span><span class="s1">&amp;&amp; </span><span class="s2">includes</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">m </span><span class="s1">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s2">pattern</span><span class="s1">),</span>
        <span class="s2">excludes</span><span class="s1">: </span><span class="s2">excludes </span><span class="s1">&amp;&amp; </span><span class="s2">excludes</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">m </span><span class="s1">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s2">pattern</span><span class="s1">)</span>
    <span class="s1">};</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* The class to test given paths are matched by the patterns.</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">OverrideTester </span><span class="s1">{</span>

    <span class="s5">/**</span>
     <span class="s5">* Create a tester with given criteria.</span>
     <span class="s5">* If there are no criteria, returns `null`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string|string[]} files The glob patterns for included files.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string|string[]} excludedFiles The glob patterns for excluded files.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} basePath The path to the base directory to test paths.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{OverrideTester|null} The created instance or `null`.</span>
     <span class="s5">*/</span>
    <span class="s3">static </span><span class="s2">create</span><span class="s1">(</span><span class="s2">files</span><span class="s1">, </span><span class="s2">excludedFiles</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">includePatterns </span><span class="s1">= </span><span class="s2">normalizePatterns</span><span class="s1">(</span><span class="s2">files</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">excludePatterns </span><span class="s1">= </span><span class="s2">normalizePatterns</span><span class="s1">(</span><span class="s2">excludedFiles</span><span class="s1">);</span>
        <span class="s3">let </span><span class="s2">endsWithWildcard </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">includePatterns</span><span class="s1">.</span><span class="s2">length </span><span class="s1">=== </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s3">return null</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s4">// Rejects absolute paths or relative paths to parents.</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">pattern of includePatterns</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">isAbsolute</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">) || </span><span class="s2">pattern</span><span class="s1">.</span><span class="s2">includes</span><span class="s1">(</span><span class="s0">&quot;..&quot;</span><span class="s1">)) {</span>
                <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`Invalid override pattern (expected relative path not containing '..'): </span><span class="s2">$</span><span class="s1">{</span><span class="s2">pattern</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">.</span><span class="s2">endsWith</span><span class="s1">(</span><span class="s0">&quot;*&quot;</span><span class="s1">)) {</span>
                <span class="s2">endsWithWildcard </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">pattern of excludePatterns</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">isAbsolute</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">) || </span><span class="s2">pattern</span><span class="s1">.</span><span class="s2">includes</span><span class="s1">(</span><span class="s0">&quot;..&quot;</span><span class="s1">)) {</span>
                <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`Invalid override pattern (expected relative path not containing '..'): </span><span class="s2">$</span><span class="s1">{</span><span class="s2">pattern</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s3">const </span><span class="s2">includes </span><span class="s1">= </span><span class="s2">toMatcher</span><span class="s1">(</span><span class="s2">includePatterns</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">excludes </span><span class="s1">= </span><span class="s2">toMatcher</span><span class="s1">(</span><span class="s2">excludePatterns</span><span class="s1">);</span>

        <span class="s3">return new </span><span class="s2">OverrideTester</span><span class="s1">(</span>
            <span class="s1">[{ </span><span class="s2">includes</span><span class="s1">, </span><span class="s2">excludes </span><span class="s1">}],</span>
            <span class="s2">basePath</span><span class="s1">,</span>
            <span class="s2">endsWithWildcard</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Combine two testers by logical and.</span>
     <span class="s5">* If either of the testers was `null`, returns the other tester.</span>
     <span class="s5">* The `basePath` property of the two must be the same value.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{OverrideTester|null} a A tester.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{OverrideTester|null} b Another tester.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{OverrideTester|null} Combined tester.</span>
     <span class="s5">*/</span>
    <span class="s3">static </span><span class="s2">and</span><span class="s1">(</span><span class="s2">a</span><span class="s1">, </span><span class="s2">b</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">b</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s2">a </span><span class="s1">&amp;&amp; </span><span class="s3">new </span><span class="s2">OverrideTester</span><span class="s1">(</span>
                <span class="s2">a</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">,</span>
                <span class="s2">a</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">,</span>
                <span class="s2">a</span><span class="s1">.</span><span class="s2">endsWithWildcard</span>
            <span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">a</span><span class="s1">) {</span>
            <span class="s3">return new </span><span class="s2">OverrideTester</span><span class="s1">(</span>
                <span class="s2">b</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">,</span>
                <span class="s2">b</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">,</span>
                <span class="s2">b</span><span class="s1">.</span><span class="s2">endsWithWildcard</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">strictEqual</span><span class="s1">(</span><span class="s2">a</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">b</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">);</span>
        <span class="s3">return new </span><span class="s2">OverrideTester</span><span class="s1">(</span>
            <span class="s2">a</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">concat</span><span class="s1">(</span><span class="s2">b</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">),</span>
            <span class="s2">a</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">,</span>
            <span class="s2">a</span><span class="s1">.</span><span class="s2">endsWithWildcard </span><span class="s1">|| </span><span class="s2">b</span><span class="s1">.</span><span class="s2">endsWithWildcard</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Initialize this instance.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Pattern[]} patterns The matchers.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} basePath The base path.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} endsWithWildcard If `true` then a pattern ends with `*`.</span>
     <span class="s5">*/</span>
    <span class="s2">constructor</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">endsWithWildcard </span><span class="s1">= </span><span class="s3">false</span><span class="s1">) {</span>

        <span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Pattern[]} */</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">patterns </span><span class="s1">= </span><span class="s2">patterns</span><span class="s1">;</span>

        <span class="s5">/** </span><span class="s6">@type </span><span class="s5">{string} */</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">basePath </span><span class="s1">= </span><span class="s2">basePath</span><span class="s1">;</span>

        <span class="s5">/** </span><span class="s6">@type </span><span class="s5">{boolean} */</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">endsWithWildcard </span><span class="s1">= </span><span class="s2">endsWithWildcard</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Test if a given path is matched or not.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The absolute path to the target file.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if the path was matched.</span>
     <span class="s5">*/</span>
    <span class="s2">test</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">filePath </span><span class="s1">!== </span><span class="s0">&quot;string&quot; </span><span class="s1">|| !</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">isAbsolute</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) {</span>
            <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`'filePath' should be an absolute path, but got </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">.`</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s3">const </span><span class="s2">relativePath </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">relative</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">return this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">every</span><span class="s1">(({ </span><span class="s2">includes</span><span class="s1">, </span><span class="s2">excludes </span><span class="s1">}) =&gt; (</span>
            <span class="s1">(!</span><span class="s2">includes </span><span class="s1">|| </span><span class="s2">includes</span><span class="s1">.</span><span class="s2">some</span><span class="s1">(</span><span class="s2">m </span><span class="s1">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s2">match</span><span class="s1">(</span><span class="s2">relativePath</span><span class="s1">))) &amp;&amp;</span>
            <span class="s1">(!</span><span class="s2">excludes </span><span class="s1">|| !</span><span class="s2">excludes</span><span class="s1">.</span><span class="s2">some</span><span class="s1">(</span><span class="s2">m </span><span class="s1">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s2">match</span><span class="s1">(</span><span class="s2">relativePath</span><span class="s1">)))</span>
        <span class="s1">));</span>
    <span class="s1">}</span>

    <span class="s4">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s5">/**</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} a JSON compatible object.</span>
     <span class="s5">*/</span>
    <span class="s2">toJSON</span><span class="s1">() {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">length </span><span class="s1">=== </span><span class="s7">1</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s1">{</span>
                <span class="s2">...patternToJson</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">[</span><span class="s7">0</span><span class="s1">]),</span>
                <span class="s2">basePath</span><span class="s1">: </span><span class="s3">this</span><span class="s1">.</span><span class="s2">basePath</span>
            <span class="s1">};</span>
        <span class="s1">}</span>
        <span class="s3">return </span><span class="s1">{</span>
            <span class="s2">AND</span><span class="s1">: </span><span class="s3">this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">patternToJson</span><span class="s1">),</span>
            <span class="s2">basePath</span><span class="s1">: </span><span class="s3">this</span><span class="s1">.</span><span class="s2">basePath</span>
        <span class="s1">};</span>
    <span class="s1">}</span>

    <span class="s4">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s5">/**</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} an object to display by `console.log()`.</span>
     <span class="s5">*/</span>
    <span class="s1">[</span><span class="s2">util__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">inspect</span><span class="s1">.</span><span class="s2">custom</span><span class="s1">]() {</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">toJSON</span><span class="s1">();</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">`ConfigArray` class.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Config file operations. This file must be usable in the browser,</span>
 <span class="s5">* so no Node-specific code can be here.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Nicholas C. Zakas</span>
 <span class="s5">*/</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Private</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s3">const </span><span class="s2">RULE_SEVERITY_STRINGS </span><span class="s1">= [</span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">],</span>
    <span class="s2">RULE_SEVERITY </span><span class="s1">= </span><span class="s2">RULE_SEVERITY_STRINGS</span><span class="s1">.</span><span class="s2">reduce</span><span class="s1">((</span><span class="s2">map</span><span class="s1">, </span><span class="s2">value</span><span class="s1">, </span><span class="s2">index</span><span class="s1">) =&gt; {</span>
        <span class="s2">map</span><span class="s1">[</span><span class="s2">value</span><span class="s1">] = </span><span class="s2">index</span><span class="s1">;</span>
        <span class="s3">return </span><span class="s2">map</span><span class="s1">;</span>
    <span class="s1">}, {}),</span>
    <span class="s2">VALID_SEVERITIES </span><span class="s1">= [</span><span class="s7">0</span><span class="s1">, </span><span class="s7">1</span><span class="s1">, </span><span class="s7">2</span><span class="s1">, </span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">];</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Public Interface</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s5">/**</span>
 <span class="s5">* Normalizes the severity value of a rule's configuration to a number</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(number|string|[number, ...*]|[string, ...*])} ruleConfig A rule's configuration value, generally</span>
 <span class="s5">* received from the user. A valid config value is either 0, 1, 2, the string &quot;off&quot; (treated the same as 0),</span>
 <span class="s5">* the string &quot;warn&quot; (treated the same as 1), the string &quot;error&quot; (treated the same as 2), or an array</span>
 <span class="s5">* whose first element is one of the above values. Strings are matched case-insensitively.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{(0|1|2)} The numeric severity value if the config value was valid, otherwise 0.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">getRuleSeverity</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">severityValue </span><span class="s1">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) ? </span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] : </span><span class="s2">ruleConfig</span><span class="s1">;</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">severityValue </span><span class="s1">=== </span><span class="s7">0 </span><span class="s1">|| </span><span class="s2">severityValue </span><span class="s1">=== </span><span class="s7">1 </span><span class="s1">|| </span><span class="s2">severityValue </span><span class="s1">=== </span><span class="s7">2</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s2">severityValue</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">severityValue </span><span class="s1">=== </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s2">RULE_SEVERITY</span><span class="s1">[</span><span class="s2">severityValue</span><span class="s1">.</span><span class="s2">toLowerCase</span><span class="s1">()] || </span><span class="s7">0</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s7">0</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Converts old-style severity settings (0, 1, 2) into new-style</span>
 <span class="s5">* severity settings (off, warn, error) for all rules. Assumption is that severity</span>
 <span class="s5">* values have already been validated as correct.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} config The config object to normalize.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">normalizeToStrings</span><span class="s1">(</span><span class="s2">config</span><span class="s1">) {</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">) {</span>
        <span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">).</span><span class="s2">forEach</span><span class="s1">(</span><span class="s2">ruleId </span><span class="s1">=&gt; {</span>
            <span class="s3">const </span><span class="s2">ruleConfig </span><span class="s1">= </span><span class="s2">config</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">[</span><span class="s2">ruleId</span><span class="s1">];</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">ruleConfig </span><span class="s1">=== </span><span class="s0">&quot;number&quot;</span><span class="s1">) {</span>
                <span class="s2">config</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">[</span><span class="s2">ruleId</span><span class="s1">] = </span><span class="s2">RULE_SEVERITY_STRINGS</span><span class="s1">[</span><span class="s2">ruleConfig</span><span class="s1">] || </span><span class="s2">RULE_SEVERITY_STRINGS</span><span class="s1">[</span><span class="s7">0</span><span class="s1">];</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) &amp;&amp; </span><span class="s3">typeof </span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] === </span><span class="s0">&quot;number&quot;</span><span class="s1">) {</span>
                <span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] = </span><span class="s2">RULE_SEVERITY_STRINGS</span><span class="s1">[</span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">]] || </span><span class="s2">RULE_SEVERITY_STRINGS</span><span class="s1">[</span><span class="s7">0</span><span class="s1">];</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Determines if the severity for the given rule configuration represents an error.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{int|string|Array} ruleConfig The configuration for an individual rule.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} True if the rule represents an error, false if not.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">isErrorSeverity</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">getRuleSeverity</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) === </span><span class="s7">2</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Checks whether a given config has valid severity or not.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{number|string|Array} ruleConfig The configuration for an individual rule.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if the configuration has valid severity.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">isValidSeverity</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s3">let </span><span class="s2">severity </span><span class="s1">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) ? </span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] : </span><span class="s2">ruleConfig</span><span class="s1">;</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">severity </span><span class="s1">=== </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s2">severity </span><span class="s1">= </span><span class="s2">severity</span><span class="s1">.</span><span class="s2">toLowerCase</span><span class="s1">();</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s2">VALID_SEVERITIES</span><span class="s1">.</span><span class="s2">indexOf</span><span class="s1">(</span><span class="s2">severity</span><span class="s1">) !== -</span><span class="s7">1</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Checks whether every rule of a given config has valid severity or not.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} config The configuration for rules.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if the configuration has valid severity.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">isEverySeverityValid</span><span class="s1">(</span><span class="s2">config</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">config</span><span class="s1">).</span><span class="s2">every</span><span class="s1">(</span><span class="s2">ruleId </span><span class="s1">=&gt; </span><span class="s2">isValidSeverity</span><span class="s1">(</span><span class="s2">config</span><span class="s1">[</span><span class="s2">ruleId</span><span class="s1">]));</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Normalizes a value for a global in a config</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(boolean|string|null)} configuredValue The value given for a global in configuration or in</span>
 <span class="s5">* a global directive comment</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{(&quot;readable&quot;|&quot;writeable&quot;|&quot;off&quot;)} The value normalized as a string</span>
 <span class="s5">* </span><span class="s6">@throws </span><span class="s5">Error if global value is invalid</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">normalizeConfigGlobal</span><span class="s1">(</span><span class="s2">configuredValue</span><span class="s1">) {</span>
    <span class="s3">switch </span><span class="s1">(</span><span class="s2">configuredValue</span><span class="s1">) {</span>
        <span class="s3">case </span><span class="s0">&quot;off&quot;</span><span class="s1">:</span>
            <span class="s3">return </span><span class="s0">&quot;off&quot;</span><span class="s1">;</span>

        <span class="s3">case true</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;true&quot;</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;writeable&quot;</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;writable&quot;</span><span class="s1">:</span>
            <span class="s3">return </span><span class="s0">&quot;writable&quot;</span><span class="s1">;</span>

        <span class="s3">case null</span><span class="s1">:</span>
        <span class="s3">case false</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;false&quot;</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;readable&quot;</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;readonly&quot;</span><span class="s1">:</span>
            <span class="s3">return </span><span class="s0">&quot;readonly&quot;</span><span class="s1">;</span>

        <span class="s3">default</span><span class="s1">:</span>
            <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`'</span><span class="s2">$</span><span class="s1">{</span><span class="s2">configuredValue</span><span class="s1">}</span><span class="s0">' is not a valid configuration for a global (use 'readonly', 'writable', or 'off')`</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s3">var </span><span class="s2">ConfigOps </span><span class="s1">= {</span>
    <span class="s2">__proto__</span><span class="s1">: </span><span class="s3">null</span><span class="s1">,</span>
    <span class="s2">getRuleSeverity</span><span class="s1">: </span><span class="s2">getRuleSeverity</span><span class="s1">,</span>
    <span class="s2">normalizeToStrings</span><span class="s1">: </span><span class="s2">normalizeToStrings</span><span class="s1">,</span>
    <span class="s2">isErrorSeverity</span><span class="s1">: </span><span class="s2">isErrorSeverity</span><span class="s1">,</span>
    <span class="s2">isValidSeverity</span><span class="s1">: </span><span class="s2">isValidSeverity</span><span class="s1">,</span>
    <span class="s2">isEverySeverityValid</span><span class="s1">: </span><span class="s2">isEverySeverityValid</span><span class="s1">,</span>
    <span class="s2">normalizeConfigGlobal</span><span class="s1">: </span><span class="s2">normalizeConfigGlobal</span>
<span class="s1">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Provide the function that emits deprecation warnings.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;http://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Private</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s4">// Defitions for deprecation warnings.</span>
<span class="s3">const </span><span class="s2">deprecationWarningMessages </span><span class="s1">= {</span>
    <span class="s2">ESLINT_LEGACY_ECMAFEATURES</span><span class="s1">:</span>
        <span class="s0">&quot;The 'ecmaFeatures' config file property is deprecated and has no effect.&quot;</span><span class="s1">,</span>
    <span class="s2">ESLINT_PERSONAL_CONFIG_LOAD</span><span class="s1">:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s1">+</span>
        <span class="s0">&quot;Please use a config file per project or the '--config' option.&quot;</span><span class="s1">,</span>
    <span class="s2">ESLINT_PERSONAL_CONFIG_SUPPRESS</span><span class="s1">:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s1">+</span>
        <span class="s0">&quot;Please remove it or add 'root:true' to the config files in your &quot; </span><span class="s1">+</span>
        <span class="s0">&quot;projects in order to avoid loading '~/.eslintrc.*' accidentally.&quot;</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">sourceFileErrorCache </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Set</span><span class="s1">();</span>

<span class="s5">/**</span>
 <span class="s5">* Emits a deprecation warning containing a given filepath. A new deprecation warning is emitted</span>
 <span class="s5">* for each unique file path, but repeated invocations with the same file path have no effect.</span>
 <span class="s5">* No warnings are emitted if the `--no-deprecation` or `--no-warnings` Node runtime flags are active.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} source The name of the configuration source to report the warning for.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} errorCode The warning message to show.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">emitDeprecationWarning</span><span class="s1">(</span><span class="s2">source</span><span class="s1">, </span><span class="s2">errorCode</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">cacheKey </span><span class="s1">= </span><span class="s2">JSON</span><span class="s1">.</span><span class="s2">stringify</span><span class="s1">({ </span><span class="s2">source</span><span class="s1">, </span><span class="s2">errorCode </span><span class="s1">});</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">sourceFileErrorCache</span><span class="s1">.</span><span class="s2">has</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">)) {</span>
        <span class="s3">return</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">sourceFileErrorCache</span><span class="s1">.</span><span class="s2">add</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">);</span>

    <span class="s3">const </span><span class="s2">rel </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">relative</span><span class="s1">(</span><span class="s2">process</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">(), </span><span class="s2">source</span><span class="s1">);</span>
    <span class="s3">const </span><span class="s2">message </span><span class="s1">= </span><span class="s2">deprecationWarningMessages</span><span class="s1">[</span><span class="s2">errorCode</span><span class="s1">];</span>

    <span class="s2">process</span><span class="s1">.</span><span class="s2">emitWarning</span><span class="s1">(</span>
        <span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">message</span><span class="s1">} </span><span class="s0">(found in &quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">rel</span><span class="s1">}</span><span class="s0">&quot;)`</span><span class="s1">,</span>
        <span class="s0">&quot;DeprecationWarning&quot;</span><span class="s1">,</span>
        <span class="s2">errorCode</span>
    <span class="s1">);</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">The instance of Ajv validator.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Evgeny Poberezkin</span>
 <span class="s5">*/</span>

<span class="s4">//-----------------------------------------------------------------------------</span>
<span class="s4">// Helpers</span>
<span class="s4">//-----------------------------------------------------------------------------</span>

<span class="s4">/* 
 * Copied from ajv/lib/refs/json-schema-draft-04.json 
 * The MIT License (MIT) 
 * Copyright (c) 2015-2017 Evgeny Poberezkin 
 */</span>
<span class="s3">const </span><span class="s2">metaSchema </span><span class="s1">= {</span>
    <span class="s2">id</span><span class="s1">: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s2">$schema</span><span class="s1">: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s2">description</span><span class="s1">: </span><span class="s0">&quot;Core schema meta-schema&quot;</span><span class="s1">,</span>
    <span class="s2">definitions</span><span class="s1">: {</span>
        <span class="s2">schemaArray</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s2">minItems</span><span class="s1">: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s2">items</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s2">positiveInteger</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;integer&quot;</span><span class="s1">,</span>
            <span class="s2">minimum</span><span class="s1">: </span><span class="s7">0</span>
        <span class="s1">},</span>
        <span class="s2">positiveIntegerDefault0</span><span class="s1">: {</span>
            <span class="s2">allOf</span><span class="s1">: [{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">}, { </span><span class="s3">default</span><span class="s1">: </span><span class="s7">0 </span><span class="s1">}]</span>
        <span class="s1">},</span>
        <span class="s2">simpleTypes</span><span class="s1">: {</span>
            <span class="s3">enum</span><span class="s1">: [</span><span class="s0">&quot;array&quot;</span><span class="s1">, </span><span class="s0">&quot;boolean&quot;</span><span class="s1">, </span><span class="s0">&quot;integer&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">, </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s0">&quot;object&quot;</span><span class="s1">, </span><span class="s0">&quot;string&quot;</span><span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s2">stringArray</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s2">items</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
            <span class="s2">minItems</span><span class="s1">: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s2">uniqueItems</span><span class="s1">: </span><span class="s3">true</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
    <span class="s2">properties</span><span class="s1">: {</span>
        <span class="s2">id</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s2">$schema</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s2">title</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s2">description</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s3">default</span><span class="s1">: { },</span>
        <span class="s2">multipleOf</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;number&quot;</span><span class="s1">,</span>
            <span class="s2">minimum</span><span class="s1">: </span><span class="s7">0</span><span class="s1">,</span>
            <span class="s2">exclusiveMinimum</span><span class="s1">: </span><span class="s3">true</span>
        <span class="s1">},</span>
        <span class="s2">maximum</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s2">exclusiveMaximum</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s3">default</span><span class="s1">: </span><span class="s3">false</span>
        <span class="s1">},</span>
        <span class="s2">minimum</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s2">exclusiveMinimum</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s3">default</span><span class="s1">: </span><span class="s3">false</span>
        <span class="s1">},</span>
        <span class="s2">maxLength</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s2">minLength</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s2">pattern</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot;</span><span class="s1">,</span>
            <span class="s2">format</span><span class="s1">: </span><span class="s0">&quot;regex&quot;</span>
        <span class="s1">},</span>
        <span class="s2">additionalItems</span><span class="s1">: {</span>
            <span class="s2">anyOf</span><span class="s1">: [</span>
                <span class="s1">{ </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s3">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s2">items</span><span class="s1">: {</span>
            <span class="s2">anyOf</span><span class="s1">: [</span>
                <span class="s1">{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                <span class="s1">{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s3">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s2">maxItems</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s2">minItems</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s2">uniqueItems</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s3">default</span><span class="s1">: </span><span class="s3">false</span>
        <span class="s1">},</span>
        <span class="s2">maxProperties</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s2">minProperties</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s2">required</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">},</span>
        <span class="s2">additionalProperties</span><span class="s1">: {</span>
            <span class="s2">anyOf</span><span class="s1">: [</span>
                <span class="s1">{ </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s3">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s2">definitions</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s2">additionalProperties</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s3">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s2">properties</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s2">additionalProperties</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s3">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s2">patternProperties</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s2">additionalProperties</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s3">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s2">dependencies</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s2">additionalProperties</span><span class="s1">: {</span>
                <span class="s2">anyOf</span><span class="s1">: [</span>
                    <span class="s1">{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                    <span class="s1">{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">}</span>
                <span class="s1">]</span>
            <span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s3">enum</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s2">minItems</span><span class="s1">: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s2">uniqueItems</span><span class="s1">: </span><span class="s3">true</span>
        <span class="s1">},</span>
        <span class="s2">type</span><span class="s1">: {</span>
            <span class="s2">anyOf</span><span class="s1">: [</span>
                <span class="s1">{ </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s2">items</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                    <span class="s2">minItems</span><span class="s1">: </span><span class="s7">1</span><span class="s1">,</span>
                    <span class="s2">uniqueItems</span><span class="s1">: </span><span class="s3">true</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s2">format</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
        <span class="s2">allOf</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s2">anyOf</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s2">oneOf</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s2">not</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">dependencies</span><span class="s1">: {</span>
        <span class="s2">exclusiveMaximum</span><span class="s1">: [</span><span class="s0">&quot;maximum&quot;</span><span class="s1">],</span>
        <span class="s2">exclusiveMinimum</span><span class="s1">: [</span><span class="s0">&quot;minimum&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s3">default</span><span class="s1">: { }</span>
<span class="s1">};</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Public Interface</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s3">var </span><span class="s2">ajvOrig </span><span class="s1">= (</span><span class="s2">additionalOptions </span><span class="s1">= {}) =&gt; {</span>
    <span class="s3">const </span><span class="s2">ajv </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Ajv__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({</span>
        <span class="s2">meta</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
        <span class="s2">useDefaults</span><span class="s1">: </span><span class="s3">true</span><span class="s1">,</span>
        <span class="s2">validateSchema</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
        <span class="s2">missingRefs</span><span class="s1">: </span><span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
        <span class="s2">verbose</span><span class="s1">: </span><span class="s3">true</span><span class="s1">,</span>
        <span class="s2">schemaId</span><span class="s1">: </span><span class="s0">&quot;auto&quot;</span><span class="s1">,</span>
        <span class="s2">...additionalOptions</span>
    <span class="s1">});</span>

    <span class="s2">ajv</span><span class="s1">.</span><span class="s2">addMetaSchema</span><span class="s1">(</span><span class="s2">metaSchema</span><span class="s1">);</span>
    <span class="s4">// eslint-disable-next-line no-underscore-dangle</span>
    <span class="s2">ajv</span><span class="s1">.</span><span class="s2">_opts</span><span class="s1">.</span><span class="s2">defaultMeta </span><span class="s1">= </span><span class="s2">metaSchema</span><span class="s1">.</span><span class="s2">id</span><span class="s1">;</span>

    <span class="s3">return </span><span class="s2">ajv</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Defines a schema for configs.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Sylvan Mably</span>
 <span class="s5">*/</span>

<span class="s3">const </span><span class="s2">baseConfigProperties </span><span class="s1">= {</span>
    <span class="s2">$schema</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s2">env</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s3">extends</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
    <span class="s2">globals</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s2">overrides</span><span class="s1">: {</span>
        <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
        <span class="s2">items</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/overrideConfig&quot; </span><span class="s1">},</span>
        <span class="s2">additionalItems</span><span class="s1">: </span><span class="s3">false</span>
    <span class="s1">},</span>
    <span class="s2">parser</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: [</span><span class="s0">&quot;string&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">] },</span>
    <span class="s2">parserOptions</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s2">plugins</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot; </span><span class="s1">},</span>
    <span class="s2">processor</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s2">rules</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s2">settings</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s2">noInlineConfig</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
    <span class="s2">reportUnusedDisableDirectives</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>

    <span class="s2">ecmaFeatures</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot; </span><span class="s1">} </span><span class="s4">// deprecated; logs a warning when used</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">configSchema </span><span class="s1">= {</span>
    <span class="s2">definitions</span><span class="s1">: {</span>
        <span class="s2">stringOrStrings</span><span class="s1">: {</span>
            <span class="s2">oneOf</span><span class="s1">: [</span>
                <span class="s1">{ </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s2">items</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s2">additionalItems</span><span class="s1">: </span><span class="s3">false</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s2">stringOrStringsRequired</span><span class="s1">: {</span>
            <span class="s2">oneOf</span><span class="s1">: [</span>
                <span class="s1">{ </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s2">items</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s2">additionalItems</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
                    <span class="s2">minItems</span><span class="s1">: </span><span class="s7">1</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>

        <span class="s4">// Config at top-level.</span>
        <span class="s2">objectConfig</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s2">properties</span><span class="s1">: {</span>
                <span class="s2">root</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s2">ignorePatterns</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s2">...baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s2">additionalProperties</span><span class="s1">: </span><span class="s3">false</span>
        <span class="s1">},</span>

        <span class="s4">// Config in `overrides`.</span>
        <span class="s2">overrideConfig</span><span class="s1">: {</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s2">properties</span><span class="s1">: {</span>
                <span class="s2">excludedFiles</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s2">files</span><span class="s1">: { </span><span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/stringOrStringsRequired&quot; </span><span class="s1">},</span>
                <span class="s2">...baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s2">required</span><span class="s1">: [</span><span class="s0">&quot;files&quot;</span><span class="s1">],</span>
            <span class="s2">additionalProperties</span><span class="s1">: </span><span class="s3">false</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s2">$ref</span><span class="s1">: </span><span class="s0">&quot;#/definitions/objectConfig&quot;</span>
<span class="s1">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Defines environment settings and globals.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Elan Shanker</span>
 <span class="s5">*/</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Helpers</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s5">/**</span>
 <span class="s5">* Get the object that has difference.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string,boolean&gt;} current The newer object.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string,boolean&gt;} prev The older object.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Record&lt;string,boolean&gt;} The difference object.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">getDiff</span><span class="s1">(</span><span class="s2">current</span><span class="s1">, </span><span class="s2">prev</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">retv </span><span class="s1">= {};</span>

    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s1">[</span><span class="s2">key</span><span class="s1">, </span><span class="s2">value</span><span class="s1">] </span><span class="s2">of Object</span><span class="s1">.</span><span class="s2">entries</span><span class="s1">(</span><span class="s2">current</span><span class="s1">)) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">prev</span><span class="s1">, </span><span class="s2">key</span><span class="s1">)) {</span>
            <span class="s2">retv</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">value</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">retv</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s3">const </span><span class="s2">newGlobals2015 </span><span class="s1">= </span><span class="s2">getDiff</span><span class="s1">(</span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es2015</span><span class="s1">, </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es5</span><span class="s1">); </span><span class="s4">// 19 variables such as Promise, Map, ...</span>
<span class="s3">const </span><span class="s2">newGlobals2017 </span><span class="s1">= {</span>
    <span class="s2">Atomics</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
    <span class="s2">SharedArrayBuffer</span><span class="s1">: </span><span class="s3">false</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">newGlobals2020 </span><span class="s1">= {</span>
    <span class="s2">BigInt</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
    <span class="s2">BigInt64Array</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
    <span class="s2">BigUint64Array</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
    <span class="s2">globalThis</span><span class="s1">: </span><span class="s3">false</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">newGlobals2021 </span><span class="s1">= {</span>
    <span class="s2">AggregateError</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
    <span class="s2">FinalizationRegistry</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
    <span class="s2">WeakRef</span><span class="s1">: </span><span class="s3">false</span>
<span class="s1">};</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Public Interface</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Map&lt;string, import(&quot;../lib/shared/types&quot;).Environment&gt;} */</span>
<span class="s3">var </span><span class="s2">environments </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">entries</span><span class="s1">({</span>

    <span class="s4">// Language</span>
    <span class="s2">builtin</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es5</span>
    <span class="s1">},</span>
    <span class="s2">es6</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2015</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2016</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">7</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2017</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">8</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2018</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">9</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2019</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">10</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2020</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017</span><span class="s1">, </span><span class="s2">...newGlobals2020 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">11</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2021</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017</span><span class="s1">, </span><span class="s2">...newGlobals2020</span><span class="s1">, </span><span class="s2">...newGlobals2021 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">12</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2022</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017</span><span class="s1">, </span><span class="s2">...newGlobals2020</span><span class="s1">, </span><span class="s2">...newGlobals2021 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">13</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2023</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017</span><span class="s1">, </span><span class="s2">...newGlobals2020</span><span class="s1">, </span><span class="s2">...newGlobals2021 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">14</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">es2024</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: { </span><span class="s2">...newGlobals2015</span><span class="s1">, </span><span class="s2">...newGlobals2017</span><span class="s1">, </span><span class="s2">...newGlobals2020</span><span class="s1">, </span><span class="s2">...newGlobals2021 </span><span class="s1">},</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaVersion</span><span class="s1">: </span><span class="s7">15</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s4">// Platforms</span>
    <span class="s2">browser</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">browser</span>
    <span class="s1">},</span>
    <span class="s2">node</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">node</span><span class="s1">,</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaFeatures</span><span class="s1">: {</span>
                <span class="s2">globalReturn</span><span class="s1">: </span><span class="s3">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">][</span><span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s2">worker</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">worker</span>
    <span class="s1">},</span>
    <span class="s2">serviceworker</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">serviceworker</span>
    <span class="s1">},</span>

    <span class="s4">// Frameworks</span>
    <span class="s2">commonjs</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">commonjs</span><span class="s1">,</span>
        <span class="s2">parserOptions</span><span class="s1">: {</span>
            <span class="s2">ecmaFeatures</span><span class="s1">: {</span>
                <span class="s2">globalReturn</span><span class="s1">: </span><span class="s3">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s2">amd</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">amd</span>
    <span class="s1">},</span>
    <span class="s2">mocha</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">mocha</span>
    <span class="s1">},</span>
    <span class="s2">jasmine</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jasmine</span>
    <span class="s1">},</span>
    <span class="s2">jest</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jest</span>
    <span class="s1">},</span>
    <span class="s2">phantomjs</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">phantomjs</span>
    <span class="s1">},</span>
    <span class="s2">jquery</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jquery</span>
    <span class="s1">},</span>
    <span class="s2">qunit</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">qunit</span>
    <span class="s1">},</span>
    <span class="s2">prototypejs</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">prototypejs</span>
    <span class="s1">},</span>
    <span class="s2">shelljs</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">shelljs</span>
    <span class="s1">},</span>
    <span class="s2">meteor</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">meteor</span>
    <span class="s1">},</span>
    <span class="s2">mongo</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">mongo</span>
    <span class="s1">},</span>
    <span class="s2">protractor</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">protractor</span>
    <span class="s1">},</span>
    <span class="s2">applescript</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">applescript</span>
    <span class="s1">},</span>
    <span class="s2">nashorn</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">nashorn</span>
    <span class="s1">},</span>
    <span class="s2">atomtest</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">atomtest</span>
    <span class="s1">},</span>
    <span class="s2">embertest</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">embertest</span>
    <span class="s1">},</span>
    <span class="s2">webextensions</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">webextensions</span>
    <span class="s1">},</span>
    <span class="s2">greasemonkey</span><span class="s1">: {</span>
        <span class="s2">globals</span><span class="s1">: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">greasemonkey</span>
    <span class="s1">}</span>
<span class="s1">}));</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Validates configs.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Brandon Mills</span>
 <span class="s5">*/</span>

<span class="s3">const </span><span class="s2">ajv </span><span class="s1">= </span><span class="s2">ajvOrig</span><span class="s1">();</span>

<span class="s3">const </span><span class="s2">ruleValidators </span><span class="s1">= </span><span class="s3">new </span><span class="s2">WeakMap</span><span class="s1">();</span>
<span class="s3">const </span><span class="s2">noop </span><span class="s1">= </span><span class="s2">Function</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">;</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Private</span>
<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s3">let </span><span class="s2">validateSchema</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">severityMap </span><span class="s1">= {</span>
    <span class="s2">error</span><span class="s1">: </span><span class="s7">2</span><span class="s1">,</span>
    <span class="s2">warn</span><span class="s1">: </span><span class="s7">1</span><span class="s1">,</span>
    <span class="s2">off</span><span class="s1">: </span><span class="s7">0</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">validated </span><span class="s1">= </span><span class="s3">new </span><span class="s2">WeakSet</span><span class="s1">();</span>

<span class="s4">//-----------------------------------------------------------------------------</span>
<span class="s4">// Exports</span>
<span class="s4">//-----------------------------------------------------------------------------</span>

<span class="s3">class </span><span class="s2">ConfigValidator </span><span class="s1">{</span>
    <span class="s2">constructor</span><span class="s1">({ </span><span class="s2">builtInRules </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">() } = {}) {</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">builtInRules </span><span class="s1">= </span><span class="s2">builtInRules</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Gets a complete options schema for a rule.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{{create: Function, schema: (Array|null)}} rule A new-style rule object</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} JSON Schema for the rule's options.</span>
     <span class="s5">*/</span>
    <span class="s2">getRuleOptionsSchema</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">rule</span><span class="s1">) {</span>
            <span class="s3">return null</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">const </span><span class="s2">schema </span><span class="s1">= </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">schema </span><span class="s1">|| </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">meta </span><span class="s1">&amp;&amp; </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">meta</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">;</span>

        <span class="s4">// Given a tuple of schemas, insert warning level at the beginning</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">schema</span><span class="s1">)) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">schema</span><span class="s1">.</span><span class="s2">length</span><span class="s1">) {</span>
                <span class="s3">return </span><span class="s1">{</span>
                    <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s2">items</span><span class="s1">: </span><span class="s2">schema</span><span class="s1">,</span>
                    <span class="s2">minItems</span><span class="s1">: </span><span class="s7">0</span><span class="s1">,</span>
                    <span class="s2">maxItems</span><span class="s1">: </span><span class="s2">schema</span><span class="s1">.</span><span class="s2">length</span>
                <span class="s1">};</span>
            <span class="s1">}</span>
            <span class="s3">return </span><span class="s1">{</span>
                <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                <span class="s2">minItems</span><span class="s1">: </span><span class="s7">0</span><span class="s1">,</span>
                <span class="s2">maxItems</span><span class="s1">: </span><span class="s7">0</span>
            <span class="s1">};</span>

        <span class="s1">}</span>

        <span class="s4">// Given a full schema, leave it alone</span>
        <span class="s3">return </span><span class="s2">schema </span><span class="s1">|| </span><span class="s3">null</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates a rule's severity and returns the severity value. Throws an error if the severity is invalid.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{options} options The given options for the rule.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{number|string} The rule's severity value</span>
     <span class="s5">*/</span>
    <span class="s2">validateRuleSeverity</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">severity </span><span class="s1">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) ? </span><span class="s2">options</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] : </span><span class="s2">options</span><span class="s1">;</span>
        <span class="s3">const </span><span class="s2">normSeverity </span><span class="s1">= </span><span class="s3">typeof </span><span class="s2">severity </span><span class="s1">=== </span><span class="s0">&quot;string&quot; </span><span class="s1">? </span><span class="s2">severityMap</span><span class="s1">[</span><span class="s2">severity</span><span class="s1">.</span><span class="s2">toLowerCase</span><span class="s1">()] : </span><span class="s2">severity</span><span class="s1">;</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">normSeverity </span><span class="s1">=== </span><span class="s7">0 </span><span class="s1">|| </span><span class="s2">normSeverity </span><span class="s1">=== </span><span class="s7">1 </span><span class="s1">|| </span><span class="s2">normSeverity </span><span class="s1">=== </span><span class="s7">2</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s2">normSeverity</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`</span><span class="s3">\t</span><span class="s0">Severity should be one of the following: 0 = off, 1 = warn, 2 = error (you passed '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">util__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">inspect</span><span class="s1">(</span><span class="s2">severity</span><span class="s1">).</span><span class="s2">replace</span><span class="s1">(</span><span class="s8">/'/gu</span><span class="s1">, </span><span class="s0">&quot;</span><span class="s3">\&quot;</span><span class="s0">&quot;</span><span class="s1">).</span><span class="s2">replace</span><span class="s1">(</span><span class="s8">/\n/gu</span><span class="s1">, </span><span class="s0">&quot;&quot;</span><span class="s1">)}</span><span class="s0">').</span><span class="s3">\n</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates the non-severity options passed to a rule, based on its schema.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{{create: Function}} rule The rule to validate</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Array} localOptions The options for the rule, excluding severity</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateRuleSchema</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">, </span><span class="s2">localOptions</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">ruleValidators</span><span class="s1">.</span><span class="s2">has</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">)) {</span>
            <span class="s3">const </span><span class="s2">schema </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">getRuleOptionsSchema</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">);</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">schema</span><span class="s1">) {</span>
                <span class="s2">ruleValidators</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">, </span><span class="s2">ajv</span><span class="s1">.</span><span class="s2">compile</span><span class="s1">(</span><span class="s2">schema</span><span class="s1">));</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s3">const </span><span class="s2">validateRule </span><span class="s1">= </span><span class="s2">ruleValidators</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">validateRule</span><span class="s1">) {</span>
            <span class="s2">validateRule</span><span class="s1">(</span><span class="s2">localOptions</span><span class="s1">);</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">validateRule</span><span class="s1">.</span><span class="s2">errors</span><span class="s1">) {</span>
                <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s2">validateRule</span><span class="s1">.</span><span class="s2">errors</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span>
                    <span class="s2">error </span><span class="s1">=&gt; </span><span class="s0">`</span><span class="s3">\t</span><span class="s0">Value </span><span class="s2">$</span><span class="s1">{</span><span class="s2">JSON</span><span class="s1">.</span><span class="s2">stringify</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">data</span><span class="s1">)} </span><span class="s2">$</span><span class="s1">{</span><span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">.</span><span class="s3">\n</span><span class="s0">`</span>
                <span class="s1">).</span><span class="s2">join</span><span class="s1">(</span><span class="s0">&quot;&quot;</span><span class="s1">));</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates a rule's options against its schema.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{{create: Function}|null} rule The rule that the config is being validated for</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} ruleId The rule's unique name.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Array|number} options The given options for the rule.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string|null} source The name of the configuration source to report in any errors. If null or undefined,</span>
     <span class="s5">* no source is prepended to the message.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateRuleOptions</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">, </span><span class="s2">ruleId</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s2">source </span><span class="s1">= </span><span class="s3">null</span><span class="s1">) {</span>
        <span class="s3">try </span><span class="s1">{</span>
            <span class="s3">const </span><span class="s2">severity </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">validateRuleSeverity</span><span class="s1">(</span><span class="s2">options</span><span class="s1">);</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">severity </span><span class="s1">!== </span><span class="s7">0</span><span class="s1">) {</span>
                <span class="s3">this</span><span class="s1">.</span><span class="s2">validateRuleSchema</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">, </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) ? </span><span class="s2">options</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">) : []);</span>
            <span class="s1">}</span>
        <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">err</span><span class="s1">) {</span>
            <span class="s3">const </span><span class="s2">enhancedMessage </span><span class="s1">= </span><span class="s0">`Configuration for rule &quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ruleId</span><span class="s1">}</span><span class="s0">&quot; is invalid:</span><span class="s3">\n</span><span class="s2">$</span><span class="s1">{</span><span class="s2">err</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">source </span><span class="s1">=== </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
                <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">source</span><span class="s1">}</span><span class="s0">:</span><span class="s3">\n\t</span><span class="s2">$</span><span class="s1">{</span><span class="s2">enhancedMessage</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
            <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
                <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s2">enhancedMessage</span><span class="s1">);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates an environment object</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} environment The environment config object to validate.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(envId:string): Object} [getAdditionalEnv] A map from strings to loaded environments.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateEnvironment</span><span class="s1">(</span>
        <span class="s2">environment</span><span class="s1">,</span>
        <span class="s2">source</span><span class="s1">,</span>
        <span class="s2">getAdditionalEnv </span><span class="s1">= </span><span class="s2">noop</span>
    <span class="s1">) {</span>

        <span class="s4">// not having an environment is ok</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">environment</span><span class="s1">) {</span>
            <span class="s3">return</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">environment</span><span class="s1">).</span><span class="s2">forEach</span><span class="s1">(</span><span class="s2">id </span><span class="s1">=&gt; {</span>
            <span class="s3">const </span><span class="s2">env </span><span class="s1">= </span><span class="s2">getAdditionalEnv</span><span class="s1">(</span><span class="s2">id</span><span class="s1">) || </span><span class="s2">environments</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">id</span><span class="s1">) || </span><span class="s3">null</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(!</span><span class="s2">env</span><span class="s1">) {</span>
                <span class="s3">const </span><span class="s2">message </span><span class="s1">= </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">source</span><span class="s1">}</span><span class="s0">:</span><span class="s3">\n\t</span><span class="s0">Environment key &quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">id</span><span class="s1">}</span><span class="s0">&quot; is unknown</span><span class="s3">\n</span><span class="s0">`</span><span class="s1">;</span>

                <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s2">message</span><span class="s1">);</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates a rules config object</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} rulesConfig The rules config object to validate.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(ruleId:string): Object} getAdditionalRule A map from strings to loaded rules</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateRules</span><span class="s1">(</span>
        <span class="s2">rulesConfig</span><span class="s1">,</span>
        <span class="s2">source</span><span class="s1">,</span>
        <span class="s2">getAdditionalRule </span><span class="s1">= </span><span class="s2">noop</span>
    <span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">rulesConfig</span><span class="s1">) {</span>
            <span class="s3">return</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">rulesConfig</span><span class="s1">).</span><span class="s2">forEach</span><span class="s1">(</span><span class="s2">id </span><span class="s1">=&gt; {</span>
            <span class="s3">const </span><span class="s2">rule </span><span class="s1">= </span><span class="s2">getAdditionalRule</span><span class="s1">(</span><span class="s2">id</span><span class="s1">) || </span><span class="s3">this</span><span class="s1">.</span><span class="s2">builtInRules</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">id</span><span class="s1">) || </span><span class="s3">null</span><span class="s1">;</span>

            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateRuleOptions</span><span class="s1">(</span><span class="s2">rule</span><span class="s1">, </span><span class="s2">id</span><span class="s1">, </span><span class="s2">rulesConfig</span><span class="s1">[</span><span class="s2">id</span><span class="s1">], </span><span class="s2">source</span><span class="s1">);</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates a `globals` section of a config file</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} globalsConfig The `globals` section</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string|null} source The name of the configuration source to report in the event of an error.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateGlobals</span><span class="s1">(</span><span class="s2">globalsConfig</span><span class="s1">, </span><span class="s2">source </span><span class="s1">= </span><span class="s3">null</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">globalsConfig</span><span class="s1">) {</span>
            <span class="s3">return</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s2">Object</span><span class="s1">.</span><span class="s2">entries</span><span class="s1">(</span><span class="s2">globalsConfig</span><span class="s1">)</span>
            <span class="s1">.</span><span class="s2">forEach</span><span class="s1">(([</span><span class="s2">configuredGlobal</span><span class="s1">, </span><span class="s2">configuredValue</span><span class="s1">]) =&gt; {</span>
                <span class="s3">try </span><span class="s1">{</span>
                    <span class="s2">normalizeConfigGlobal</span><span class="s1">(</span><span class="s2">configuredValue</span><span class="s1">);</span>
                <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">err</span><span class="s1">) {</span>
                    <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`ESLint configuration of global '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">configuredGlobal</span><span class="s1">}</span><span class="s0">' in </span><span class="s2">$</span><span class="s1">{</span><span class="s2">source</span><span class="s1">} </span><span class="s0">is invalid:</span><span class="s3">\n</span><span class="s2">$</span><span class="s1">{</span><span class="s2">err</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validate `processor` configuration.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string|undefined} processorName The processor name.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} source The name of config file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(id:string): Processor} getProcessor The getter of defined processors.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateProcessor</span><span class="s1">(</span><span class="s2">processorName</span><span class="s1">, </span><span class="s2">source</span><span class="s1">, </span><span class="s2">getProcessor</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">processorName </span><span class="s1">&amp;&amp; !</span><span class="s2">getProcessor</span><span class="s1">(</span><span class="s2">processorName</span><span class="s1">)) {</span>
            <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`ESLint configuration of processor in '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">source</span><span class="s1">}</span><span class="s0">' is invalid: '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">processorName</span><span class="s1">}</span><span class="s0">' was not found.`</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Formats an array of schema validation errors.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Array} errors An array of error messages to format.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} Formatted error message</span>
     <span class="s5">*/</span>
    <span class="s2">formatErrors</span><span class="s1">(</span><span class="s2">errors</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s2">errors</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">error </span><span class="s1">=&gt; {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">keyword </span><span class="s1">=== </span><span class="s0">&quot;additionalProperties&quot;</span><span class="s1">) {</span>
                <span class="s3">const </span><span class="s2">formattedPropertyPath </span><span class="s1">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s2">length </span><span class="s1">? </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">)}</span><span class="s0">.</span><span class="s2">$</span><span class="s1">{</span><span class="s2">error</span><span class="s1">.</span><span class="s2">params</span><span class="s1">.</span><span class="s2">additionalProperty</span><span class="s1">}</span><span class="s0">` </span><span class="s1">: </span><span class="s2">error</span><span class="s1">.</span><span class="s2">params</span><span class="s1">.</span><span class="s2">additionalProperty</span><span class="s1">;</span>

                <span class="s3">return </span><span class="s0">`Unexpected top-level property &quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">formattedPropertyPath</span><span class="s1">}</span><span class="s0">&quot;`</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">keyword </span><span class="s1">=== </span><span class="s0">&quot;type&quot;</span><span class="s1">) {</span>
                <span class="s3">const </span><span class="s2">formattedField </span><span class="s1">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">);</span>
                <span class="s3">const </span><span class="s2">formattedExpectedType </span><span class="s1">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">) ? </span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">.</span><span class="s2">join</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">) : </span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">;</span>
                <span class="s3">const </span><span class="s2">formattedValue </span><span class="s1">= </span><span class="s2">JSON</span><span class="s1">.</span><span class="s2">stringify</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">data</span><span class="s1">);</span>

                <span class="s3">return </span><span class="s0">`Property &quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">formattedField</span><span class="s1">}</span><span class="s0">&quot; is the wrong type (expected </span><span class="s2">$</span><span class="s1">{</span><span class="s2">formattedExpectedType</span><span class="s1">} </span><span class="s0">but got </span><span class="s3">\`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">formattedValue</span><span class="s1">}</span><span class="s3">\`</span><span class="s0">)`</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s3">const </span><span class="s2">field </span><span class="s1">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] === </span><span class="s0">&quot;.&quot; </span><span class="s1">? </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">) : </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">;</span>

            <span class="s3">return </span><span class="s0">`&quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">field</span><span class="s1">}</span><span class="s0">&quot; </span><span class="s2">$</span><span class="s1">{</span><span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">. Value: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">JSON</span><span class="s1">.</span><span class="s2">stringify</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">data</span><span class="s1">)}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s1">}).</span><span class="s2">map</span><span class="s1">(</span><span class="s2">message </span><span class="s1">=&gt; </span><span class="s0">`</span><span class="s3">\t</span><span class="s0">- </span><span class="s2">$</span><span class="s1">{</span><span class="s2">message</span><span class="s1">}</span><span class="s0">.</span><span class="s3">\n</span><span class="s0">`</span><span class="s1">).</span><span class="s2">join</span><span class="s1">(</span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates the top level properties of the config object.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} config The config object to validate.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateConfigSchema</span><span class="s1">(</span><span class="s2">config</span><span class="s1">, </span><span class="s2">source </span><span class="s1">= </span><span class="s3">null</span><span class="s1">) {</span>
        <span class="s2">validateSchema </span><span class="s1">= </span><span class="s2">validateSchema </span><span class="s1">|| </span><span class="s2">ajv</span><span class="s1">.</span><span class="s2">compile</span><span class="s1">(</span><span class="s2">configSchema</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">validateSchema</span><span class="s1">(</span><span class="s2">config</span><span class="s1">)) {</span>
            <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`ESLint configuration in </span><span class="s2">$</span><span class="s1">{</span><span class="s2">source</span><span class="s1">} </span><span class="s0">is invalid:</span><span class="s3">\n</span><span class="s2">$</span><span class="s1">{</span><span class="s3">this</span><span class="s1">.</span><span class="s2">formatErrors</span><span class="s1">(</span><span class="s2">validateSchema</span><span class="s1">.</span><span class="s2">errors</span><span class="s1">)}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">config</span><span class="s1">, </span><span class="s0">&quot;ecmaFeatures&quot;</span><span class="s1">)) {</span>
            <span class="s2">emitDeprecationWarning</span><span class="s1">(</span><span class="s2">source</span><span class="s1">, </span><span class="s0">&quot;ESLINT_LEGACY_ECMAFEATURES&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validates an entire config object.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} config The config object to validate.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(ruleId:string): Object} [getAdditionalRule] A map from strings to loaded rules.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(envId:string): Object} [getAdditionalEnv] A map from strings to loaded envs.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validate</span><span class="s1">(</span><span class="s2">config</span><span class="s1">, </span><span class="s2">source</span><span class="s1">, </span><span class="s2">getAdditionalRule</span><span class="s1">, </span><span class="s2">getAdditionalEnv</span><span class="s1">) {</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">validateConfigSchema</span><span class="s1">(</span><span class="s2">config</span><span class="s1">, </span><span class="s2">source</span><span class="s1">);</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">validateRules</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">, </span><span class="s2">source</span><span class="s1">, </span><span class="s2">getAdditionalRule</span><span class="s1">);</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">validateEnvironment</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">env</span><span class="s1">, </span><span class="s2">source</span><span class="s1">, </span><span class="s2">getAdditionalEnv</span><span class="s1">);</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">validateGlobals</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">globals</span><span class="s1">, </span><span class="s2">source</span><span class="s1">);</span>

        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">override of config</span><span class="s1">.</span><span class="s2">overrides </span><span class="s1">|| []) {</span>
            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateRules</span><span class="s1">(</span><span class="s2">override</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">, </span><span class="s2">source</span><span class="s1">, </span><span class="s2">getAdditionalRule</span><span class="s1">);</span>
            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateEnvironment</span><span class="s1">(</span><span class="s2">override</span><span class="s1">.</span><span class="s2">env</span><span class="s1">, </span><span class="s2">source</span><span class="s1">, </span><span class="s2">getAdditionalEnv</span><span class="s1">);</span>
            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateGlobals</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">globals</span><span class="s1">, </span><span class="s2">source</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Validate config array object.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArray} configArray The config array to validate.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">validateConfigArray</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">getPluginEnv </span><span class="s1">= </span><span class="s2">Map</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">.</span><span class="s2">get</span><span class="s1">.</span><span class="s2">bind</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">.</span><span class="s2">pluginEnvironments</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">getPluginProcessor </span><span class="s1">= </span><span class="s2">Map</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">.</span><span class="s2">get</span><span class="s1">.</span><span class="s2">bind</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">.</span><span class="s2">pluginProcessors</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">getPluginRule </span><span class="s1">= </span><span class="s2">Map</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">.</span><span class="s2">get</span><span class="s1">.</span><span class="s2">bind</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">.</span><span class="s2">pluginRules</span><span class="s1">);</span>

        <span class="s4">// Validate.</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">element of configArray</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">validated</span><span class="s1">.</span><span class="s2">has</span><span class="s1">(</span><span class="s2">element</span><span class="s1">)) {</span>
                <span class="s3">continue</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s2">validated</span><span class="s1">.</span><span class="s2">add</span><span class="s1">(</span><span class="s2">element</span><span class="s1">);</span>

            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateEnvironment</span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">env</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">name</span><span class="s1">, </span><span class="s2">getPluginEnv</span><span class="s1">);</span>
            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateGlobals</span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">globals</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">name</span><span class="s1">);</span>
            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateProcessor</span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">processor</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">name</span><span class="s1">, </span><span class="s2">getPluginProcessor</span><span class="s1">);</span>
            <span class="s3">this</span><span class="s1">.</span><span class="s2">validateRules</span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">name</span><span class="s1">, </span><span class="s2">getPluginRule</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Common helpers for naming of plugins, formatters and configs</span>
 <span class="s5">*/</span>

<span class="s3">const </span><span class="s2">NAMESPACE_REGEX </span><span class="s1">= </span><span class="s8">/^@.*\//iu</span><span class="s1">;</span>

<span class="s5">/**</span>
 <span class="s5">* Brings package name to correct format based on prefix</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name The name of the package.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} prefix Can be either &quot;eslint-plugin&quot;, &quot;eslint-config&quot; or &quot;eslint-formatter&quot;</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} Normalized name of the package</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">normalizePackageName</span><span class="s1">(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">prefix</span><span class="s1">) {</span>
    <span class="s3">let </span><span class="s2">normalizedName </span><span class="s1">= </span><span class="s2">name</span><span class="s1">;</span>

    <span class="s5">/**</span>
     <span class="s5">* On Windows, name can come in with Windows slashes instead of Unix slashes.</span>
     <span class="s5">* Normalize to Unix first to avoid errors later on.</span>
     <span class="s5">* https://github.com/eslint/eslint/issues/5644</span>
     <span class="s5">*/</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s2">includes</span><span class="s1">(</span><span class="s0">&quot;</span><span class="s3">\\</span><span class="s0">&quot;</span><span class="s1">)) {</span>
        <span class="s2">normalizedName </span><span class="s1">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s8">/\\/gu</span><span class="s1">, </span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s2">charAt</span><span class="s1">(</span><span class="s7">0</span><span class="s1">) === </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>

        <span class="s5">/**</span>
         <span class="s5">* it's a scoped package</span>
         <span class="s5">* package name is the prefix, or just a username</span>
         <span class="s5">*/</span>
        <span class="s3">const </span><span class="s2">scopedPackageShortcutRegex </span><span class="s1">= </span><span class="s3">new </span><span class="s2">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)(?:/(?:</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">)?)?$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">),</span>
            <span class="s2">scopedPackageNameRegex </span><span class="s1">= </span><span class="s3">new </span><span class="s2">RegExp</span><span class="s1">(</span><span class="s0">`^</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">(-|$)`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">scopedPackageShortcutRegex</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">)) {</span>
            <span class="s2">normalizedName </span><span class="s1">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s2">scopedPackageShortcutRegex</span><span class="s1">, </span><span class="s0">`$1/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s3">else if </span><span class="s1">(!</span><span class="s2">scopedPackageNameRegex</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s2">split</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">)[</span><span class="s7">1</span><span class="s1">])) {</span>

            <span class="s5">/**</span>
             <span class="s5">* for scoped packages, insert the prefix after the first / unless</span>
             <span class="s5">* the path is already @scope/eslint or @scope/eslint-xxx-yyy</span>
             <span class="s5">*/</span>
            <span class="s2">normalizedName </span><span class="s1">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s8">/^@([^/]+)\/(.*)$/u</span><span class="s1">, </span><span class="s0">`@$1/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">-$2`</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s3">else if </span><span class="s1">(!</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">-`</span><span class="s1">)) {</span>
        <span class="s2">normalizedName </span><span class="s1">= </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">-</span><span class="s2">$</span><span class="s1">{</span><span class="s2">normalizedName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">normalizedName</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Removes the prefix from a fullname.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} fullname The term which may have the prefix.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} prefix The prefix to remove.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The term without prefix.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">getShorthandName</span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">, </span><span class="s2">prefix</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] === </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>
        <span class="s3">let </span><span class="s2">matchResult </span><span class="s1">= </span><span class="s3">new </span><span class="s2">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).</span><span class="s2">exec</span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">matchResult</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s2">matchResult</span><span class="s1">[</span><span class="s7">1</span><span class="s1">];</span>
        <span class="s1">}</span>

        <span class="s2">matchResult </span><span class="s1">= </span><span class="s3">new </span><span class="s2">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">-(.+)$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).</span><span class="s2">exec</span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">);</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">matchResult</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">matchResult</span><span class="s1">[</span><span class="s7">1</span><span class="s1">]}</span><span class="s0">/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">matchResult</span><span class="s1">[</span><span class="s7">2</span><span class="s1">]}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prefix</span><span class="s1">}</span><span class="s0">-`</span><span class="s1">)) {</span>
        <span class="s3">return </span><span class="s2">fullname</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s2">prefix</span><span class="s1">.</span><span class="s2">length </span><span class="s1">+ </span><span class="s7">1</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">fullname</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Gets the scope (namespace) of a term.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} term The term which may have the namespace.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The namespace of the term if it has one.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">getNamespaceFromTerm</span><span class="s1">(</span><span class="s2">term</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">match </span><span class="s1">= </span><span class="s2">term</span><span class="s1">.</span><span class="s2">match</span><span class="s1">(</span><span class="s2">NAMESPACE_REGEX</span><span class="s1">);</span>

    <span class="s3">return </span><span class="s2">match </span><span class="s1">? </span><span class="s2">match</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] : </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s3">var </span><span class="s2">naming </span><span class="s1">= {</span>
    <span class="s2">__proto__</span><span class="s1">: </span><span class="s3">null</span><span class="s1">,</span>
    <span class="s2">normalizePackageName</span><span class="s1">: </span><span class="s2">normalizePackageName</span><span class="s1">,</span>
    <span class="s2">getShorthandName</span><span class="s1">: </span><span class="s2">getShorthandName</span><span class="s1">,</span>
    <span class="s2">getNamespaceFromTerm</span><span class="s1">: </span><span class="s2">getNamespaceFromTerm</span>
<span class="s1">};</span>

<span class="s5">/**</span>
 <span class="s5">* Utility for resolving a module relative to another module</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Teddy Katz</span>
 <span class="s5">*/</span>

<span class="s4">/* 
 * `Module.createRequire` is added in v12.2.0. It supports URL as well. 
 * We only support the case where the argument is a filepath, not a URL. 
 */</span>
<span class="s3">const </span><span class="s2">createRequire </span><span class="s1">= </span><span class="s2">Module__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">createRequire</span><span class="s1">;</span>

<span class="s5">/**</span>
 <span class="s5">* Resolves a Node module relative to another module</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} moduleName The name of a Node module, or a path to a Node module.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} relativeToPath An absolute path indicating the module that `moduleName` should be resolved relative to. This must be</span>
 <span class="s5">* a file rather than a directory, but the file need not actually exist.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The absolute path that would result from calling `require.resolve(moduleName)` in a file located at `relativeToPath`</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">moduleName</span><span class="s1">, </span><span class="s2">relativeToPath</span><span class="s1">) {</span>
    <span class="s3">try </span><span class="s1">{</span>
        <span class="s3">return </span><span class="s2">createRequire</span><span class="s1">(</span><span class="s2">relativeToPath</span><span class="s1">).</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">moduleName</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>

        <span class="s4">// This `if` block is for older Node.js than 12.0.0. We can remove this block in the future.</span>
        <span class="s3">if </span><span class="s1">(</span>
            <span class="s3">typeof </span><span class="s2">error </span><span class="s1">=== </span><span class="s0">&quot;object&quot; </span><span class="s1">&amp;&amp;</span>
            <span class="s2">error </span><span class="s1">!== </span><span class="s3">null </span><span class="s1">&amp;&amp;</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s1">=== </span><span class="s0">&quot;MODULE_NOT_FOUND&quot; </span><span class="s1">&amp;&amp;</span>
            <span class="s1">!</span><span class="s2">error</span><span class="s1">.</span><span class="s2">requireStack </span><span class="s1">&amp;&amp;</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">.</span><span class="s2">includes</span><span class="s1">(</span><span class="s2">moduleName</span><span class="s1">)</span>
        <span class="s1">) {</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s1">+= </span><span class="s0">`</span><span class="s3">\n</span><span class="s0">Require stack:</span><span class="s3">\n</span><span class="s0">- </span><span class="s2">$</span><span class="s1">{</span><span class="s2">relativeToPath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s3">throw </span><span class="s2">error</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s3">var </span><span class="s2">ModuleResolver </span><span class="s1">= {</span>
    <span class="s2">__proto__</span><span class="s1">: </span><span class="s3">null</span><span class="s1">,</span>
    <span class="s2">resolve</span><span class="s1">: </span><span class="s2">resolve</span>
<span class="s1">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">The factory of `ConfigArray` objects.</span>
 <span class="s5">*</span>
 <span class="s5">* This class provides methods to create `ConfigArray` instance.</span>
 <span class="s5">*</span>
 <span class="s5">* - `create(configData, options)`</span>
 <span class="s5">*     Create a `ConfigArray` instance from a config data. This is to handle CLI</span>
 <span class="s5">*     options except `--config`.</span>
 <span class="s5">* - `loadFile(filePath, options)`</span>
 <span class="s5">*     Create a `ConfigArray` instance from a config file. This is to handle</span>
 <span class="s5">*     `--config` option. If the file was not found, throws the following error:</span>
 <span class="s5">*      - If the filename was `*.js`, a `MODULE_NOT_FOUND` error.</span>
 <span class="s5">*      - If the filename was `package.json`, an IO error or an</span>
 <span class="s5">*        `ESLINT_CONFIG_FIELD_NOT_FOUND` error.</span>
 <span class="s5">*      - Otherwise, an IO error such as `ENOENT`.</span>
 <span class="s5">* - `loadInDirectory(directoryPath, options)`</span>
 <span class="s5">*     Create a `ConfigArray` instance from a config file which is on a given</span>
 <span class="s5">*     directory. This tries to load `.eslintrc.*` or `package.json`. If not</span>
 <span class="s5">*     found, returns an empty `ConfigArray`.</span>
 <span class="s5">* - `loadESLintIgnore(filePath)`</span>
 <span class="s5">*     Create a `ConfigArray` instance from a config file that is `.eslintignore`</span>
 <span class="s5">*     format. This is to handle `--ignore-path` option.</span>
 <span class="s5">* - `loadDefaultESLintIgnore()`</span>
 <span class="s5">*     Create a `ConfigArray` instance from `.eslintignore` or `package.json` in</span>
 <span class="s5">*     the current working directory.</span>
 <span class="s5">*</span>
 <span class="s5">* `ConfigArrayFactory` class has the responsibility that loads configuration</span>
 <span class="s5">* files, including loading `extends`, `parser`, and `plugins`. The created</span>
 <span class="s5">* `ConfigArray` instance has the loaded `extends`, `parser`, and `plugins`.</span>
 <span class="s5">*</span>
 <span class="s5">* But this class doesn't handle cascading. `CascadingConfigArrayFactory` class</span>
 <span class="s5">* handles cascading and hierarchy.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s3">const </span><span class="s2">require$1 </span><span class="s1">= </span><span class="s2">Module</span><span class="s1">.</span><span class="s2">createRequire</span><span class="s1">(</span><span class="s2">require</span><span class="s1">(</span><span class="s0">'url'</span><span class="s1">).</span><span class="s2">pathToFileURL</span><span class="s1">(</span><span class="s2">__filename</span><span class="s1">).</span><span class="s2">toString</span><span class="s1">());</span>

<span class="s3">const </span><span class="s2">debug$2 </span><span class="s1">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:config-array-factory&quot;</span><span class="s1">);</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Helpers</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s3">const </span><span class="s2">configFilenames </span><span class="s1">= [</span>
    <span class="s0">&quot;.eslintrc.js&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.cjs&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.yaml&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.yml&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.json&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;package.json&quot;</span>
<span class="s1">];</span>

<span class="s4">// Define types for VSCode IntelliSense.</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).ConfigData} ConfigData */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).OverrideConfigData} OverrideConfigData */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).Parser} Parser */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).Plugin} Plugin */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).Rule} Rule */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./config-array/config-dependency&quot;).DependentParser} DependentParser */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./config-array/config-dependency&quot;).DependentPlugin} DependentPlugin */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{ConfigArray[0]} ConfigArrayElement */</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} ConfigArrayFactoryOptions</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string,Plugin&gt;} [additionalPluginPool] The map for additional plugins.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} [cwd] The path to the current working directory.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} [resolvePluginsRelativeTo] A path to the directory that plugins should be resolved from. Defaults to `cwd`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string,Rule&gt;} builtInRules The rules that are built in to ESLint.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Object} [resolver=ModuleResolver] The module resolver object.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintAllPath The path to the definitions for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintAllConfig Returns the config data for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintRecommendedPath The path to the definitions for eslint:recommended.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintRecommendedConfig Returns the config data for eslint:recommended.</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} ConfigArrayFactoryInternalSlots</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string,Plugin&gt;} additionalPluginPool The map for additional plugins.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} cwd The path to the current working directory.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string | undefined} resolvePluginsRelativeTo An absolute path the the directory that plugins should be resolved from.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string,Rule&gt;} builtInRules The rules that are built in to ESLint.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Object} [resolver=ModuleResolver] The module resolver object.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintAllPath The path to the definitions for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintAllConfig Returns the config data for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintRecommendedPath The path to the definitions for eslint:recommended.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintRecommendedConfig Returns the config data for eslint:recommended.</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} ConfigArrayFactoryLoadingContext</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} filePath The path to the current configuration.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} matchBasePath The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} name The name of the current configuration.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} pluginBasePath The base path to resolve plugins.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot;} type The type of the current configuration. This is `&quot;config&quot;` in normal. This is `&quot;ignore&quot;` if it came from `.eslintignore`. This is `&quot;implicit-processor&quot;` if it came from legacy file-extension processors.</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} ConfigArrayFactoryLoadingContext</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} filePath The path to the current configuration.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} matchBasePath The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} name The name of the current configuration.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot;} type The type of the current configuration. This is `&quot;config&quot;` in normal. This is `&quot;ignore&quot;` if it came from `.eslintignore`. This is `&quot;implicit-processor&quot;` if it came from legacy file-extension processors.</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{WeakMap&lt;ConfigArrayFactory, ConfigArrayFactoryInternalSlots&gt;} */</span>
<span class="s3">const </span><span class="s2">internalSlotsMap$1 </span><span class="s1">= </span><span class="s3">new </span><span class="s2">WeakMap</span><span class="s1">();</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{WeakMap&lt;object, Plugin&gt;} */</span>
<span class="s3">const </span><span class="s2">normalizedPlugins </span><span class="s1">= </span><span class="s3">new </span><span class="s2">WeakMap</span><span class="s1">();</span>

<span class="s5">/**</span>
 <span class="s5">* Check if a given string is a file path.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} nameOrPath A module name or file path.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} `true` if the `nameOrPath` is a file path.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">isFilePath</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s1">(</span>
        <span class="s8">/^\.{1,2}[/\\]/u</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">) ||</span>
        <span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">isAbsolute</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">)</span>
    <span class="s1">);</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Convenience wrapper for synchronously reading file contents.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The filename to read.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} The file contents, with the BOM removed.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">readFileSync</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;utf8&quot;</span><span class="s1">).</span><span class="s2">replace</span><span class="s1">(</span><span class="s8">/^\ufeff/u</span><span class="s1">, </span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Loads a YAML configuration from a file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The filename to load.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigData} The configuration object from the file.</span>
 <span class="s5">* </span><span class="s6">@throws </span><span class="s5">{Error} If the file cannot be read.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">loadYAMLConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Loading YAML config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s4">// lazy load YAML to improve performance when not used</span>
    <span class="s3">const </span><span class="s2">yaml </span><span class="s1">= </span><span class="s2">require$1</span><span class="s1">(</span><span class="s0">&quot;js-yaml&quot;</span><span class="s1">);</span>

    <span class="s3">try </span><span class="s1">{</span>

        <span class="s4">// empty YAML file can be null, so always use</span>
        <span class="s3">return </span><span class="s2">yaml</span><span class="s1">.</span><span class="s2">load</span><span class="s1">(</span><span class="s2">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) || {};</span>
    <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Error reading YAML file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Cannot read config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s3">\n</span><span class="s0">Error: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s3">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Loads a JSON configuration from a file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The filename to load.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigData} The configuration object from the file.</span>
 <span class="s5">* </span><span class="s6">@throws </span><span class="s5">{Error} If the file cannot be read.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">loadJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Loading JSON config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s3">try </span><span class="s1">{</span>
        <span class="s3">return </span><span class="s2">JSON</span><span class="s1">.</span><span class="s2">parse</span><span class="s1">(</span><span class="s2">stripComments__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)));</span>
    <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Error reading JSON file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Cannot read config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s3">\n</span><span class="s0">Error: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s1">= </span><span class="s0">&quot;failed-to-read-json&quot;</span><span class="s1">;</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">messageData </span><span class="s1">= {</span>
            <span class="s2">path</span><span class="s1">: </span><span class="s2">filePath</span><span class="s1">,</span>
            <span class="s2">message</span><span class="s1">: </span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span>
        <span class="s1">};</span>
        <span class="s3">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Loads a legacy (.eslintrc) configuration from a file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The filename to load.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigData} The configuration object from the file.</span>
 <span class="s5">* </span><span class="s6">@throws </span><span class="s5">{Error} If the file cannot be read.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">loadLegacyConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Loading legacy config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s4">// lazy load YAML to improve performance when not used</span>
    <span class="s3">const </span><span class="s2">yaml </span><span class="s1">= </span><span class="s2">require$1</span><span class="s1">(</span><span class="s0">&quot;js-yaml&quot;</span><span class="s1">);</span>

    <span class="s3">try </span><span class="s1">{</span>
        <span class="s3">return </span><span class="s2">yaml</span><span class="s1">.</span><span class="s2">load</span><span class="s1">(</span><span class="s2">stripComments__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">))) || </span><span class="s4">/* istanbul ignore next */ </span><span class="s1">{};</span>
    <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Error reading YAML file: %s</span><span class="s3">\n</span><span class="s0">%o&quot;</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">e</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Cannot read config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s3">\n</span><span class="s0">Error: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s3">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Loads a JavaScript configuration from a file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The filename to load.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigData} The configuration object from the file.</span>
 <span class="s5">* </span><span class="s6">@throws </span><span class="s5">{Error} If the file cannot be read.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">loadJSConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Loading JS config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
    <span class="s3">try </span><span class="s1">{</span>
        <span class="s3">return </span><span class="s2">importFresh__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">filePath</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Error reading JavaScript file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Cannot read config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s3">\n</span><span class="s0">Error: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s3">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Loads a configuration from a package.json file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The filename to load.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigData} The configuration object from the file.</span>
 <span class="s5">* </span><span class="s6">@throws </span><span class="s5">{Error} If the file cannot be read.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">loadPackageJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Loading package.json config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
    <span class="s3">try </span><span class="s1">{</span>
        <span class="s3">const </span><span class="s2">packageData </span><span class="s1">= </span><span class="s2">loadJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">packageData</span><span class="s1">, </span><span class="s0">&quot;eslintConfig&quot;</span><span class="s1">)) {</span>
            <span class="s3">throw </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">assign</span><span class="s1">(</span>
                <span class="s3">new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">&quot;package.json file doesn't have 'eslintConfig' field.&quot;</span><span class="s1">),</span>
                <span class="s1">{ </span><span class="s2">code</span><span class="s1">: </span><span class="s0">&quot;ESLINT_CONFIG_FIELD_NOT_FOUND&quot; </span><span class="s1">}</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">return </span><span class="s2">packageData</span><span class="s1">.</span><span class="s2">eslintConfig</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Error reading package.json file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Cannot read config file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s3">\n</span><span class="s0">Error: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s3">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Loads a `.eslintignore` from a file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The filename to load.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string[]} The ignore patterns from the file.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">loadESLintIgnoreFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Loading .eslintignore file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s3">try </span><span class="s1">{</span>
        <span class="s3">return </span><span class="s2">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)</span>
            <span class="s1">.</span><span class="s2">split</span><span class="s1">(</span><span class="s8">/\r?\n/gu</span><span class="s1">)</span>
            <span class="s1">.</span><span class="s2">filter</span><span class="s1">(</span><span class="s2">line </span><span class="s1">=&gt; </span><span class="s2">line</span><span class="s1">.</span><span class="s2">trim</span><span class="s1">() !== </span><span class="s0">&quot;&quot; </span><span class="s1">&amp;&amp; !</span><span class="s2">line</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;#&quot;</span><span class="s1">));</span>
    <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Error reading .eslintignore file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Cannot read .eslintignore file: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">}</span><span class="s3">\n</span><span class="s0">Error: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s3">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Creates an error to notify about a missing config to extend from.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} configName The name of the missing config.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} importerName The name of the config that imported the missing config</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} messageTemplate The text template to source error strings from.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Error} The error object to throw</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">configInvalidError</span><span class="s1">(</span><span class="s2">configName</span><span class="s1">, </span><span class="s2">importerName</span><span class="s1">, </span><span class="s2">messageTemplate</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">assign</span><span class="s1">(</span>
        <span class="s3">new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`Failed to load config &quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">configName</span><span class="s1">}</span><span class="s0">&quot; to extend from.`</span><span class="s1">),</span>
        <span class="s1">{</span>
            <span class="s2">messageTemplate</span><span class="s1">,</span>
            <span class="s2">messageData</span><span class="s1">: { </span><span class="s2">configName</span><span class="s1">, </span><span class="s2">importerName </span><span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">);</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Loads a configuration file regardless of the source. Inspects the file path</span>
 <span class="s5">* to determine the correctly way to load the config file.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The path to the configuration.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigData|null} The configuration information.</span>
 <span class="s5">* </span><span class="s6">@private</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">loadConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">switch </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">extname</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) {</span>
        <span class="s3">case </span><span class="s0">&quot;.js&quot;</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;.cjs&quot;</span><span class="s1">:</span>
            <span class="s3">return </span><span class="s2">loadJSConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">case </span><span class="s0">&quot;.json&quot;</span><span class="s1">:</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">basename</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) === </span><span class="s0">&quot;package.json&quot;</span><span class="s1">) {</span>
                <span class="s3">return </span><span class="s2">loadPackageJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s3">return </span><span class="s2">loadJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">case </span><span class="s0">&quot;.yaml&quot;</span><span class="s1">:</span>
        <span class="s3">case </span><span class="s0">&quot;.yml&quot;</span><span class="s1">:</span>
            <span class="s3">return </span><span class="s2">loadYAMLConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">default</span><span class="s1">:</span>
            <span class="s3">return </span><span class="s2">loadLegacyConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Write debug log.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} request The requested module name.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} relativeTo The file path to resolve the request relative to.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The resolved file path.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">writeDebugLogForLoading</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s4">/* istanbul ignore next */</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">debug$2</span><span class="s1">.</span><span class="s2">enabled</span><span class="s1">) {</span>
        <span class="s3">let </span><span class="s2">nameAndVersion </span><span class="s1">= </span><span class="s3">null</span><span class="s1">;</span>

        <span class="s3">try </span><span class="s1">{</span>
            <span class="s3">const </span><span class="s2">packageJsonPath </span><span class="s1">= </span><span class="s2">resolve</span><span class="s1">(</span>
                <span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">request</span><span class="s1">}</span><span class="s0">/package.json`</span><span class="s1">,</span>
                <span class="s2">relativeTo</span>
            <span class="s1">);</span>
            <span class="s3">const </span><span class="s1">{ </span><span class="s2">version </span><span class="s1">= </span><span class="s0">&quot;unknown&quot; </span><span class="s1">} = </span><span class="s2">require$1</span><span class="s1">(</span><span class="s2">packageJsonPath</span><span class="s1">);</span>

            <span class="s2">nameAndVersion </span><span class="s1">= </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">request</span><span class="s1">}</span><span class="s0">@</span><span class="s2">$</span><span class="s1">{</span><span class="s2">version</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;package.json was not found:&quot;</span><span class="s1">, </span><span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">);</span>
            <span class="s2">nameAndVersion </span><span class="s1">= </span><span class="s2">request</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loaded: %s (%s)&quot;</span><span class="s1">, </span><span class="s2">nameAndVersion</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Create a new context with default values.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryInternalSlots} slots The internal slots.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot; | undefined} providedType The type of the current configuration. Default is `&quot;config&quot;`.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string | undefined} providedName The name of the current configuration. Default is the relative path from `cwd` to `filePath`.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string | undefined} providedFilePath The path to the current configuration. Default is empty string.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string | undefined} providedMatchBasePath The type of the current configuration. Default is the directory of `filePath` or `cwd`.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArrayFactoryLoadingContext} The created context.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">createContext</span><span class="s1">(</span>
    <span class="s1">{ </span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">resolvePluginsRelativeTo </span><span class="s1">},</span>
    <span class="s2">providedType</span><span class="s1">,</span>
    <span class="s2">providedName</span><span class="s1">,</span>
    <span class="s2">providedFilePath</span><span class="s1">,</span>
    <span class="s2">providedMatchBasePath</span>
<span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">filePath </span><span class="s1">= </span><span class="s2">providedFilePath</span>
        <span class="s1">? </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">providedFilePath</span><span class="s1">)</span>
        <span class="s1">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s2">matchBasePath </span><span class="s1">=</span>
        <span class="s1">(</span><span class="s2">providedMatchBasePath </span><span class="s1">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">providedMatchBasePath</span><span class="s1">)) ||</span>
        <span class="s1">(</span><span class="s2">filePath </span><span class="s1">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">dirname</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) ||</span>
        <span class="s2">cwd</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s2">name </span><span class="s1">=</span>
        <span class="s2">providedName </span><span class="s1">||</span>
        <span class="s1">(</span><span class="s2">filePath </span><span class="s1">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">relative</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">)) ||</span>
        <span class="s0">&quot;&quot;</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s2">pluginBasePath </span><span class="s1">=</span>
        <span class="s2">resolvePluginsRelativeTo </span><span class="s1">||</span>
        <span class="s1">(</span><span class="s2">filePath </span><span class="s1">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">dirname</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) ||</span>
        <span class="s2">cwd</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s2">type </span><span class="s1">= </span><span class="s2">providedType </span><span class="s1">|| </span><span class="s0">&quot;config&quot;</span><span class="s1">;</span>

    <span class="s3">return </span><span class="s1">{ </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">matchBasePath</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">pluginBasePath</span><span class="s1">, </span><span class="s2">type </span><span class="s1">};</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Normalize a given plugin.</span>
 <span class="s5">* - Ensure the object to have four properties: configs, environments, processors, and rules.</span>
 <span class="s5">* - Ensure the object to not have other properties.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Plugin} plugin The plugin to normalize.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Plugin} The normalized plugin.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">normalizePlugin</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">) {</span>

    <span class="s4">// first check the cache</span>
    <span class="s3">let </span><span class="s2">normalizedPlugin </span><span class="s1">= </span><span class="s2">normalizedPlugins</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">);</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">normalizedPlugin</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s2">normalizedPlugin</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s2">normalizedPlugin </span><span class="s1">= {</span>
        <span class="s2">configs</span><span class="s1">: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">configs </span><span class="s1">|| {},</span>
        <span class="s2">environments</span><span class="s1">: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">environments </span><span class="s1">|| {},</span>
        <span class="s2">processors</span><span class="s1">: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">processors </span><span class="s1">|| {},</span>
        <span class="s2">rules</span><span class="s1">: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">rules </span><span class="s1">|| {}</span>
    <span class="s1">};</span>

    <span class="s4">// save the reference for later</span>
    <span class="s2">normalizedPlugins</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">, </span><span class="s2">normalizedPlugin</span><span class="s1">);</span>

    <span class="s3">return </span><span class="s2">normalizedPlugin</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Public Interface</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s5">/**</span>
 <span class="s5">* The factory of `ConfigArray` objects.</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">ConfigArrayFactory </span><span class="s1">{</span>

    <span class="s5">/**</span>
     <span class="s5">* Initialize this instance.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryOptions} [options] The map for additional plugins.</span>
     <span class="s5">*/</span>
    <span class="s2">constructor</span><span class="s1">({</span>
        <span class="s2">additionalPluginPool </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">(),</span>
        <span class="s2">cwd </span><span class="s1">= </span><span class="s2">process</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">(),</span>
        <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
        <span class="s2">builtInRules</span><span class="s1">,</span>
        <span class="s2">resolver </span><span class="s1">= </span><span class="s2">ModuleResolver</span><span class="s1">,</span>
        <span class="s2">eslintAllPath</span><span class="s1">,</span>
        <span class="s2">getEslintAllConfig</span><span class="s1">,</span>
        <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
        <span class="s2">getEslintRecommendedConfig</span>
    <span class="s1">} = {}) {</span>
        <span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s3">this</span><span class="s1">, {</span>
            <span class="s2">additionalPluginPool</span><span class="s1">,</span>
            <span class="s2">cwd</span><span class="s1">,</span>
            <span class="s2">resolvePluginsRelativeTo</span><span class="s1">:</span>
                <span class="s2">resolvePluginsRelativeTo </span><span class="s1">&amp;&amp;</span>
                <span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">resolvePluginsRelativeTo</span><span class="s1">),</span>
            <span class="s2">builtInRules</span><span class="s1">,</span>
            <span class="s2">resolver</span><span class="s1">,</span>
            <span class="s2">eslintAllPath</span><span class="s1">,</span>
            <span class="s2">getEslintAllConfig</span><span class="s1">,</span>
            <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
            <span class="s2">getEslintRecommendedConfig</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Create `ConfigArray` instance from a config data.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigData|null} configData The config data to create.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} [options] The options.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [options.basePath] The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [options.filePath] The path to this config data.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [options.name] The config name.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} Loaded config.</span>
     <span class="s5">*/</span>
    <span class="s2">create</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">name </span><span class="s1">} = {}) {</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">configData</span><span class="s1">) {</span>
            <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">();</span>
        <span class="s1">}</span>

        <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">ctx </span><span class="s1">= </span><span class="s2">createContext</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">, </span><span class="s0">&quot;config&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">elements </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

        <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">(</span><span class="s2">...elements</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load a config file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The path to a config file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} [options] The options.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [options.basePath] The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [options.name] The config name.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} Loaded config.</span>
     <span class="s5">*/</span>
    <span class="s2">loadFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">name </span><span class="s1">} = {}) {</span>
        <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">ctx </span><span class="s1">= </span><span class="s2">createContext</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">, </span><span class="s0">&quot;config&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">);</span>

        <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">(</span><span class="s2">...</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_loadConfigData</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">));</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load the config file on a given directory if exists.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} directoryPath The path to a directory.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} [options] The options.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [options.basePath] The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [options.name] The config name.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} Loaded config. An empty `ConfigArray` if any config doesn't exist.</span>
     <span class="s5">*/</span>
    <span class="s2">loadInDirectory</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">name </span><span class="s1">} = {}) {</span>
        <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">filename of configFilenames</span><span class="s1">) {</span>
            <span class="s3">const </span><span class="s2">ctx </span><span class="s1">= </span><span class="s2">createContext</span><span class="s1">(</span>
                <span class="s2">slots</span><span class="s1">,</span>
                <span class="s0">&quot;config&quot;</span><span class="s1">,</span>
                <span class="s2">name</span><span class="s1">,</span>
                <span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">join</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">filename</span><span class="s1">),</span>
                <span class="s2">basePath</span>
            <span class="s1">);</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">existsSync</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">) &amp;&amp; </span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">statSync</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">).</span><span class="s2">isFile</span><span class="s1">()) {</span>
                <span class="s3">let </span><span class="s2">configData</span><span class="s1">;</span>

                <span class="s3">try </span><span class="s1">{</span>
                    <span class="s2">configData </span><span class="s1">= </span><span class="s2">loadConfigFile</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>
                <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
                    <span class="s3">if </span><span class="s1">(!</span><span class="s2">error </span><span class="s1">|| </span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s1">!== </span><span class="s0">&quot;ESLINT_CONFIG_FIELD_NOT_FOUND&quot;</span><span class="s1">) {</span>
                        <span class="s3">throw </span><span class="s2">error</span><span class="s1">;</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>

                <span class="s3">if </span><span class="s1">(</span><span class="s2">configData</span><span class="s1">) {</span>
                    <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Config file found: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
                    <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">(</span>
                        <span class="s2">...</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">)</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Config file not found on </span><span class="s2">$</span><span class="s1">{</span><span class="s2">directoryPath</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Check if a config file on a given directory exists or not.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} directoryPath The path to a directory.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string | null} The path to the found config file. If not found then null.</span>
     <span class="s5">*/</span>
    <span class="s3">static </span><span class="s2">getPathToConfigFileInDirectory</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">) {</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">filename of configFilenames</span><span class="s1">) {</span>
            <span class="s3">const </span><span class="s2">filePath </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">join</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">filename</span><span class="s1">);</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">existsSync</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) {</span>
                <span class="s3">if </span><span class="s1">(</span><span class="s2">filename </span><span class="s1">=== </span><span class="s0">&quot;package.json&quot;</span><span class="s1">) {</span>
                    <span class="s3">try </span><span class="s1">{</span>
                        <span class="s2">loadPackageJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
                        <span class="s3">return </span><span class="s2">filePath</span><span class="s1">;</span>
                    <span class="s1">} </span><span class="s3">catch </span><span class="s1">{ </span><span class="s4">/* ignore */ </span><span class="s1">}</span>
                <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
                    <span class="s3">return </span><span class="s2">filePath</span><span class="s1">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s3">return null</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load `.eslintignore` file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} filePath The path to a `.eslintignore` file to load.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} Loaded config. An empty `ConfigArray` if any config doesn't exist.</span>
     <span class="s5">*/</span>
    <span class="s2">loadESLintIgnore</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">ctx </span><span class="s1">= </span><span class="s2">createContext</span><span class="s1">(</span>
            <span class="s2">slots</span><span class="s1">,</span>
            <span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
            <span class="s3">void </span><span class="s7">0</span><span class="s1">,</span>
            <span class="s2">filePath</span><span class="s1">,</span>
            <span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span>
        <span class="s1">);</span>
        <span class="s3">const </span><span class="s2">ignorePatterns </span><span class="s1">= </span><span class="s2">loadESLintIgnoreFile</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">(</span>
            <span class="s2">...</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeESLintIgnoreData</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">)</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load `.eslintignore` file in the current working directory.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} Loaded config. An empty `ConfigArray` if any config doesn't exist.</span>
     <span class="s5">*/</span>
    <span class="s2">loadDefaultESLintIgnore</span><span class="s1">() {</span>
        <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">eslintIgnorePath </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;.eslintignore&quot;</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">packageJsonPath </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;package.json&quot;</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">existsSync</span><span class="s1">(</span><span class="s2">eslintIgnorePath</span><span class="s1">)) {</span>
            <span class="s3">return this</span><span class="s1">.</span><span class="s2">loadESLintIgnore</span><span class="s1">(</span><span class="s2">eslintIgnorePath</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">existsSync</span><span class="s1">(</span><span class="s2">packageJsonPath</span><span class="s1">)) {</span>
            <span class="s3">const </span><span class="s2">data </span><span class="s1">= </span><span class="s2">loadJSONConfigFile</span><span class="s1">(</span><span class="s2">packageJsonPath</span><span class="s1">);</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">data</span><span class="s1">, </span><span class="s0">&quot;eslintIgnore&quot;</span><span class="s1">)) {</span>
                <span class="s3">if </span><span class="s1">(!</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">data</span><span class="s1">.</span><span class="s2">eslintIgnore</span><span class="s1">)) {</span>
                    <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">&quot;Package.json eslintIgnore property requires an array of paths&quot;</span><span class="s1">);</span>
                <span class="s1">}</span>
                <span class="s3">const </span><span class="s2">ctx </span><span class="s1">= </span><span class="s2">createContext</span><span class="s1">(</span>
                    <span class="s2">slots</span><span class="s1">,</span>
                    <span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
                    <span class="s0">&quot;eslintIgnore in package.json&quot;</span><span class="s1">,</span>
                    <span class="s2">packageJsonPath</span><span class="s1">,</span>
                    <span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span>
                <span class="s1">);</span>

                <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">(</span>
                    <span class="s2">...</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeESLintIgnoreData</span><span class="s1">(</span><span class="s2">data</span><span class="s1">.</span><span class="s2">eslintIgnore</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">)</span>
                <span class="s1">);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load a given config file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} Loaded config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadConfigData</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">_normalizeConfigData</span><span class="s1">(</span><span class="s2">loadConfigFile</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">), </span><span class="s2">ctx</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Normalize a given `.eslintignore` data to config array elements.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string[]} ignorePatterns The patterns to ignore files.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s1">*</span><span class="s2">_normalizeESLintIgnoreData</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">elements </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeObjectConfigData</span><span class="s1">(</span>
            <span class="s1">{ </span><span class="s2">ignorePatterns </span><span class="s1">},</span>
            <span class="s2">ctx</span>
        <span class="s1">);</span>

        <span class="s4">// Set `ignorePattern.loose` flag for backward compatibility.</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">element of elements</span><span class="s1">) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">) {</span>
                <span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">.</span><span class="s2">loose </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s3">yield </span><span class="s2">element</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Normalize a given config to an array.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigData} configData The config data to normalize.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_normalizeConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">validator </span><span class="s1">= </span><span class="s3">new </span><span class="s2">ConfigValidator</span><span class="s1">();</span>

        <span class="s2">validator</span><span class="s1">.</span><span class="s2">validateConfigSchema</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name </span><span class="s1">|| </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">_normalizeObjectConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Normalize a given config to an array.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigData|OverrideConfigData} configData The config data to normalize.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s1">*</span><span class="s2">_normalizeObjectConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{ </span><span class="s2">files</span><span class="s1">, </span><span class="s2">excludedFiles</span><span class="s1">, </span><span class="s2">...configBody </span><span class="s1">} = </span><span class="s2">configData</span><span class="s1">;</span>
        <span class="s3">const </span><span class="s2">criteria </span><span class="s1">= </span><span class="s2">OverrideTester</span><span class="s1">.</span><span class="s2">create</span><span class="s1">(</span>
            <span class="s2">files</span><span class="s1">,</span>
            <span class="s2">excludedFiles</span><span class="s1">,</span>
            <span class="s2">ctx</span><span class="s1">.</span><span class="s2">matchBasePath</span>
        <span class="s1">);</span>
        <span class="s3">const </span><span class="s2">elements </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeObjectConfigDataBody</span><span class="s1">(</span><span class="s2">configBody</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

        <span class="s4">// Apply the criteria to every element.</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">element of elements</span><span class="s1">) {</span>

            <span class="s4">/* 
             * Merge the criteria. 
             * This is for the `overrides` entries that came from the 
             * configurations of `overrides[].extends`. 
             */</span>
            <span class="s2">element</span><span class="s1">.</span><span class="s2">criteria </span><span class="s1">= </span><span class="s2">OverrideTester</span><span class="s1">.</span><span class="s2">and</span><span class="s1">(</span><span class="s2">criteria</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">);</span>

            <span class="s4">/* 
             * Remove `root` property to ignore `root` settings which came from 
             * `extends` in `overrides`. 
             */</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">) {</span>
                <span class="s2">element</span><span class="s1">.</span><span class="s2">root </span><span class="s1">= </span><span class="s3">void </span><span class="s7">0</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s3">yield </span><span class="s2">element</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Normalize a given config to an array.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigData} configData The config data to normalize.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s1">*</span><span class="s2">_normalizeObjectConfigDataBody</span><span class="s1">(</span>
        <span class="s1">{</span>
            <span class="s2">env</span><span class="s1">,</span>
            <span class="s3">extends</span><span class="s1">: </span><span class="s2">extend</span><span class="s1">,</span>
            <span class="s2">globals</span><span class="s1">,</span>
            <span class="s2">ignorePatterns</span><span class="s1">,</span>
            <span class="s2">noInlineConfig</span><span class="s1">,</span>
            <span class="s2">parser</span><span class="s1">: </span><span class="s2">parserName</span><span class="s1">,</span>
            <span class="s2">parserOptions</span><span class="s1">,</span>
            <span class="s2">plugins</span><span class="s1">: </span><span class="s2">pluginList</span><span class="s1">,</span>
            <span class="s2">processor</span><span class="s1">,</span>
            <span class="s2">reportUnusedDisableDirectives</span><span class="s1">,</span>
            <span class="s2">root</span><span class="s1">,</span>
            <span class="s2">rules</span><span class="s1">,</span>
            <span class="s2">settings</span><span class="s1">,</span>
            <span class="s2">overrides</span><span class="s1">: </span><span class="s2">overrideList </span><span class="s1">= []</span>
        <span class="s1">},</span>
        <span class="s2">ctx</span>
    <span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">extendList </span><span class="s1">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">extend</span><span class="s1">) ? </span><span class="s2">extend </span><span class="s1">: [</span><span class="s2">extend</span><span class="s1">];</span>
        <span class="s3">const </span><span class="s2">ignorePattern </span><span class="s1">= </span><span class="s2">ignorePatterns </span><span class="s1">&amp;&amp; </span><span class="s3">new </span><span class="s2">IgnorePattern</span><span class="s1">(</span>
            <span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">) ? </span><span class="s2">ignorePatterns </span><span class="s1">: [</span><span class="s2">ignorePatterns</span><span class="s1">],</span>
            <span class="s2">ctx</span><span class="s1">.</span><span class="s2">matchBasePath</span>
        <span class="s1">);</span>

        <span class="s4">// Flatten `extends`.</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">extendName of extendList</span><span class="s1">.</span><span class="s2">filter</span><span class="s1">(</span><span class="s2">Boolean</span><span class="s1">)) {</span>
            <span class="s3">yield</span><span class="s1">* </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_loadExtends</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s4">// Load parser &amp; plugins.</span>
        <span class="s3">const </span><span class="s2">parser </span><span class="s1">= </span><span class="s2">parserName </span><span class="s1">&amp;&amp; </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_loadParser</span><span class="s1">(</span><span class="s2">parserName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">plugins </span><span class="s1">= </span><span class="s2">pluginList </span><span class="s1">&amp;&amp; </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_loadPlugins</span><span class="s1">(</span><span class="s2">pluginList</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

        <span class="s4">// Yield pseudo config data for file extension processors.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">plugins</span><span class="s1">) {</span>
            <span class="s3">yield</span><span class="s1">* </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_takeFileExtensionProcessors</span><span class="s1">(</span><span class="s2">plugins</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s4">// Yield the config data except `extends` and `overrides`.</span>
        <span class="s3">yield </span><span class="s1">{</span>

            <span class="s4">// Debug information.</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">type</span><span class="s1">,</span>
            <span class="s2">name</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
            <span class="s2">filePath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>

            <span class="s4">// Config data.</span>
            <span class="s2">criteria</span><span class="s1">: </span><span class="s3">null</span><span class="s1">,</span>
            <span class="s2">env</span><span class="s1">,</span>
            <span class="s2">globals</span><span class="s1">,</span>
            <span class="s2">ignorePattern</span><span class="s1">,</span>
            <span class="s2">noInlineConfig</span><span class="s1">,</span>
            <span class="s2">parser</span><span class="s1">,</span>
            <span class="s2">parserOptions</span><span class="s1">,</span>
            <span class="s2">plugins</span><span class="s1">,</span>
            <span class="s2">processor</span><span class="s1">,</span>
            <span class="s2">reportUnusedDisableDirectives</span><span class="s1">,</span>
            <span class="s2">root</span><span class="s1">,</span>
            <span class="s2">rules</span><span class="s1">,</span>
            <span class="s2">settings</span>
        <span class="s1">};</span>

        <span class="s4">// Flatten `overries`.</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">let </span><span class="s2">i </span><span class="s1">= </span><span class="s7">0</span><span class="s1">; </span><span class="s2">i </span><span class="s1">&lt; </span><span class="s2">overrideList</span><span class="s1">.</span><span class="s2">length</span><span class="s1">; ++</span><span class="s2">i</span><span class="s1">) {</span>
            <span class="s3">yield</span><span class="s1">* </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeObjectConfigData</span><span class="s1">(</span>
                <span class="s2">overrideList</span><span class="s1">[</span><span class="s2">i</span><span class="s1">],</span>
                <span class="s1">{ </span><span class="s2">...ctx</span><span class="s1">, </span><span class="s2">name</span><span class="s1">: </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">}</span><span class="s0">#overrides[</span><span class="s2">$</span><span class="s1">{</span><span class="s2">i</span><span class="s1">}</span><span class="s0">]` </span><span class="s1">}</span>
            <span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load configs of an element in `extends`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} extendName The name of a base config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadExtends</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loading {extends:%j} relative to %s&quot;</span><span class="s1">, </span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s3">try </span><span class="s1">{</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;eslint:&quot;</span><span class="s1">)) {</span>
                <span class="s3">return this</span><span class="s1">.</span><span class="s2">_loadExtendedBuiltInConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;plugin:&quot;</span><span class="s1">)) {</span>
                <span class="s3">return this</span><span class="s1">.</span><span class="s2">_loadExtendedPluginConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s3">return this</span><span class="s1">.</span><span class="s2">_loadExtendedShareableConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s1">+= </span><span class="s0">`</span><span class="s3">\n</span><span class="s0">Referenced from: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath </span><span class="s1">|| </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
            <span class="s3">throw </span><span class="s2">error</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load configs of an element in `extends`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} extendName The name of a base config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadExtendedBuiltInConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{</span>
            <span class="s2">eslintAllPath</span><span class="s1">,</span>
            <span class="s2">getEslintAllConfig</span><span class="s1">,</span>
            <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
            <span class="s2">getEslintRecommendedConfig</span>
        <span class="s1">} = </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">extendName </span><span class="s1">=== </span><span class="s0">&quot;eslint:recommended&quot;</span><span class="s1">) {</span>
            <span class="s3">const </span><span class="s2">name </span><span class="s1">= </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">} </span><span class="s0"> </span><span class="s2">$</span><span class="s1">{</span><span class="s2">extendName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">getEslintRecommendedConfig</span><span class="s1">) {</span>
                <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">getEslintRecommendedConfig </span><span class="s1">!== </span><span class="s0">&quot;function&quot;</span><span class="s1">) {</span>
                    <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`getEslintRecommendedConfig must be a function instead of '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">getEslintRecommendedConfig</span><span class="s1">}</span><span class="s0">'`</span><span class="s1">);</span>
                <span class="s1">}</span>
                <span class="s3">return this</span><span class="s1">.</span><span class="s2">_normalizeConfigData</span><span class="s1">(</span><span class="s2">getEslintRecommendedConfig</span><span class="s1">(), { </span><span class="s2">...ctx</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">: </span><span class="s0">&quot;&quot; </span><span class="s1">});</span>
            <span class="s1">}</span>
            <span class="s3">return this</span><span class="s1">.</span><span class="s2">_loadConfigData</span><span class="s1">({</span>
                <span class="s2">...ctx</span><span class="s1">,</span>
                <span class="s2">name</span><span class="s1">,</span>
                <span class="s2">filePath</span><span class="s1">: </span><span class="s2">eslintRecommendedPath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">extendName </span><span class="s1">=== </span><span class="s0">&quot;eslint:all&quot;</span><span class="s1">) {</span>
            <span class="s3">const </span><span class="s2">name </span><span class="s1">= </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">} </span><span class="s0"> </span><span class="s2">$</span><span class="s1">{</span><span class="s2">extendName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">getEslintAllConfig</span><span class="s1">) {</span>
                <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">getEslintAllConfig </span><span class="s1">!== </span><span class="s0">&quot;function&quot;</span><span class="s1">) {</span>
                    <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`getEslintAllConfig must be a function instead of '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">getEslintAllConfig</span><span class="s1">}</span><span class="s0">'`</span><span class="s1">);</span>
                <span class="s1">}</span>
                <span class="s3">return this</span><span class="s1">.</span><span class="s2">_normalizeConfigData</span><span class="s1">(</span><span class="s2">getEslintAllConfig</span><span class="s1">(), { </span><span class="s2">...ctx</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">: </span><span class="s0">&quot;&quot; </span><span class="s1">});</span>
            <span class="s1">}</span>
            <span class="s3">return this</span><span class="s1">.</span><span class="s2">_loadConfigData</span><span class="s1">({</span>
                <span class="s2">...ctx</span><span class="s1">,</span>
                <span class="s2">name</span><span class="s1">,</span>
                <span class="s2">filePath</span><span class="s1">: </span><span class="s2">eslintAllPath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s3">throw </span><span class="s2">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">, </span><span class="s0">&quot;extend-config-missing&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load configs of an element in `extends`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} extendName The name of a base config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadExtendedPluginConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">slashIndex </span><span class="s1">= </span><span class="s2">extendName</span><span class="s1">.</span><span class="s2">lastIndexOf</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">slashIndex </span><span class="s1">=== -</span><span class="s7">1</span><span class="s1">) {</span>
            <span class="s3">throw </span><span class="s2">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;plugin-invalid&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">const </span><span class="s2">pluginName </span><span class="s1">= </span><span class="s2">extendName</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s0">&quot;plugin:&quot;</span><span class="s1">.</span><span class="s2">length</span><span class="s1">, </span><span class="s2">slashIndex</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">configName </span><span class="s1">= </span><span class="s2">extendName</span><span class="s1">.</span><span class="s2">slice</span><span class="s1">(</span><span class="s2">slashIndex </span><span class="s1">+ </span><span class="s7">1</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">isFilePath</span><span class="s1">(</span><span class="s2">pluginName</span><span class="s1">)) {</span>
            <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">&quot;'extends' cannot use a file path for plugins.&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">const </span><span class="s2">plugin </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_loadPlugin</span><span class="s1">(</span><span class="s2">pluginName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">configData </span><span class="s1">=</span>
            <span class="s2">plugin</span><span class="s1">.</span><span class="s2">definition </span><span class="s1">&amp;&amp;</span>
            <span class="s2">plugin</span><span class="s1">.</span><span class="s2">definition</span><span class="s1">.</span><span class="s2">configs</span><span class="s1">[</span><span class="s2">configName</span><span class="s1">];</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">configData</span><span class="s1">) {</span>
            <span class="s3">return this</span><span class="s1">.</span><span class="s2">_normalizeConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, {</span>
                <span class="s2">...ctx</span><span class="s1">,</span>
                <span class="s2">filePath</span><span class="s1">: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">filePath </span><span class="s1">|| </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>
                <span class="s2">name</span><span class="s1">: </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">} </span><span class="s0"> plugin:</span><span class="s2">$</span><span class="s1">{</span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">id</span><span class="s1">}</span><span class="s0">/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">configName</span><span class="s1">}</span><span class="s0">`</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s3">throw </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">error </span><span class="s1">|| </span><span class="s2">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;extend-config-missing&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load configs of an element in `extends`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} extendName The name of a base config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The normalized config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadExtendedShareableConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{ </span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">resolver </span><span class="s1">} = </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">relativeTo </span><span class="s1">= </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath </span><span class="s1">|| </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">join</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;__placeholder__.js&quot;</span><span class="s1">);</span>
        <span class="s3">let </span><span class="s2">request</span><span class="s1">;</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">isFilePath</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">)) {</span>
            <span class="s2">request </span><span class="s1">= </span><span class="s2">extendName</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;.&quot;</span><span class="s1">)) {</span>
            <span class="s2">request </span><span class="s1">= </span><span class="s0">`./</span><span class="s2">$</span><span class="s1">{</span><span class="s2">extendName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">; </span><span class="s4">// For backward compatibility. A ton of tests depended on this behavior.</span>
        <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
            <span class="s2">request </span><span class="s1">= </span><span class="s2">normalizePackageName</span><span class="s1">(</span>
                <span class="s2">extendName</span><span class="s1">,</span>
                <span class="s0">&quot;eslint-config&quot;</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">let </span><span class="s2">filePath</span><span class="s1">;</span>

        <span class="s3">try </span><span class="s1">{</span>
            <span class="s2">filePath </span><span class="s1">= </span><span class="s2">resolver</span><span class="s1">.</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s4">/* istanbul ignore else */</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">error </span><span class="s1">&amp;&amp; </span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s1">=== </span><span class="s0">&quot;MODULE_NOT_FOUND&quot;</span><span class="s1">) {</span>
                <span class="s3">throw </span><span class="s2">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;extend-config-missing&quot;</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s3">throw </span><span class="s2">error</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s2">writeDebugLogForLoading</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">_loadConfigData</span><span class="s1">({</span>
            <span class="s2">...ctx</span><span class="s1">,</span>
            <span class="s2">filePath</span><span class="s1">,</span>
            <span class="s2">name</span><span class="s1">: </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">} </span><span class="s0"> </span><span class="s2">$</span><span class="s1">{</span><span class="s2">request</span><span class="s1">}</span><span class="s0">`</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load given plugins.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string[]} names The plugin names to load.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Record&lt;string,DependentPlugin&gt;} The loaded parser.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadPlugins</span><span class="s1">(</span><span class="s2">names</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s2">names</span><span class="s1">.</span><span class="s2">reduce</span><span class="s1">((</span><span class="s2">map</span><span class="s1">, </span><span class="s2">name</span><span class="s1">) =&gt; {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">isFilePath</span><span class="s1">(</span><span class="s2">name</span><span class="s1">)) {</span>
                <span class="s3">throw new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">&quot;Plugins array cannot includes file paths.&quot;</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s3">const </span><span class="s2">plugin </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_loadPlugin</span><span class="s1">(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

            <span class="s2">map</span><span class="s1">[</span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">id</span><span class="s1">] = </span><span class="s2">plugin</span><span class="s1">;</span>

            <span class="s3">return </span><span class="s2">map</span><span class="s1">;</span>
        <span class="s1">}, {});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load a given parser.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} nameOrPath The package name or the path to a parser file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{DependentParser} The loaded parser.</span>
     <span class="s5">*/</span>
    <span class="s2">_loadParser</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loading parser %j from %s&quot;</span><span class="s1">, </span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">const </span><span class="s1">{ </span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">resolver </span><span class="s1">} = </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">relativeTo </span><span class="s1">= </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath </span><span class="s1">|| </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">join</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;__placeholder__.js&quot;</span><span class="s1">);</span>

        <span class="s3">try </span><span class="s1">{</span>
            <span class="s3">const </span><span class="s2">filePath </span><span class="s1">= </span><span class="s2">resolver</span><span class="s1">.</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">);</span>

            <span class="s2">writeDebugLogForLoading</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>

            <span class="s3">return new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
                <span class="s2">definition</span><span class="s1">: </span><span class="s2">require$1</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">),</span>
                <span class="s2">filePath</span><span class="s1">,</span>
                <span class="s2">id</span><span class="s1">: </span><span class="s2">nameOrPath</span><span class="s1">,</span>
                <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s2">importerPath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>

            <span class="s4">// If the parser name is &quot;espree&quot;, load the espree of ESLint.</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">nameOrPath </span><span class="s1">=== </span><span class="s0">&quot;espree&quot;</span><span class="s1">) {</span>
                <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Fallback espree.&quot;</span><span class="s1">);</span>
                <span class="s3">return new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
                    <span class="s2">definition</span><span class="s1">: </span><span class="s2">require$1</span><span class="s1">(</span><span class="s0">&quot;espree&quot;</span><span class="s1">),</span>
                    <span class="s2">filePath</span><span class="s1">: </span><span class="s2">require$1</span><span class="s1">.</span><span class="s2">resolve</span><span class="s1">(</span><span class="s0">&quot;espree&quot;</span><span class="s1">),</span>
                    <span class="s2">id</span><span class="s1">: </span><span class="s2">nameOrPath</span><span class="s1">,</span>
                    <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                    <span class="s2">importerPath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
                <span class="s1">});</span>
            <span class="s1">}</span>

            <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Failed to load parser '%s' declared in '%s'.&quot;</span><span class="s1">, </span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">);</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Failed to load parser '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">nameOrPath</span><span class="s1">}</span><span class="s0">' declared in '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">}</span><span class="s0">': </span><span class="s2">$</span><span class="s1">{</span><span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>

            <span class="s3">return new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
                <span class="s2">error</span><span class="s1">,</span>
                <span class="s2">id</span><span class="s1">: </span><span class="s2">nameOrPath</span><span class="s1">,</span>
                <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s2">importerPath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load a given plugin.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name The plugin name to load.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{DependentPlugin} The loaded plugin.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadPlugin</span><span class="s1">(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loading plugin %j from %s&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s3">const </span><span class="s1">{ </span><span class="s2">additionalPluginPool</span><span class="s1">, </span><span class="s2">resolver </span><span class="s1">} = </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">request </span><span class="s1">= </span><span class="s2">normalizePackageName</span><span class="s1">(</span><span class="s2">name</span><span class="s1">, </span><span class="s0">&quot;eslint-plugin&quot;</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">id </span><span class="s1">= </span><span class="s2">getShorthandName</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s0">&quot;eslint-plugin&quot;</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">relativeTo </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">join</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">pluginBasePath</span><span class="s1">, </span><span class="s0">&quot;__placeholder__.js&quot;</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">name</span><span class="s1">.</span><span class="s2">match</span><span class="s1">(</span><span class="s8">/\s+/u</span><span class="s1">)) {</span>
            <span class="s3">const </span><span class="s2">error </span><span class="s1">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">assign</span><span class="s1">(</span>
                <span class="s3">new </span><span class="s2">Error</span><span class="s1">(</span><span class="s0">`Whitespace found in plugin name '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">name</span><span class="s1">}</span><span class="s0">'`</span><span class="s1">),</span>
                <span class="s1">{</span>
                    <span class="s2">messageTemplate</span><span class="s1">: </span><span class="s0">&quot;whitespace-found&quot;</span><span class="s1">,</span>
                    <span class="s2">messageData</span><span class="s1">: { </span><span class="s2">pluginName</span><span class="s1">: </span><span class="s2">request </span><span class="s1">}</span>
                <span class="s1">}</span>
            <span class="s1">);</span>

            <span class="s3">return new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
                <span class="s2">error</span><span class="s1">,</span>
                <span class="s2">id</span><span class="s1">,</span>
                <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s2">importerPath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s4">// Check for additional pool.</span>
        <span class="s3">const </span><span class="s2">plugin </span><span class="s1">=</span>
            <span class="s2">additionalPluginPool</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">request</span><span class="s1">) ||</span>
            <span class="s2">additionalPluginPool</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">id</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">) {</span>
            <span class="s3">return new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
                <span class="s2">definition</span><span class="s1">: </span><span class="s2">normalizePlugin</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">),</span>
                <span class="s2">original</span><span class="s1">: </span><span class="s2">plugin</span><span class="s1">,</span>
                <span class="s2">filePath</span><span class="s1">: </span><span class="s0">&quot;&quot;</span><span class="s1">, </span><span class="s4">// It's unknown where the plugin came from.</span>
                <span class="s2">id</span><span class="s1">,</span>
                <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s2">importerPath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s3">let </span><span class="s2">filePath</span><span class="s1">;</span>
        <span class="s3">let </span><span class="s2">error</span><span class="s1">;</span>

        <span class="s3">try </span><span class="s1">{</span>
            <span class="s2">filePath </span><span class="s1">= </span><span class="s2">resolver</span><span class="s1">.</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">resolveError</span><span class="s1">) {</span>
            <span class="s2">error </span><span class="s1">= </span><span class="s2">resolveError</span><span class="s1">;</span>
            <span class="s4">/* istanbul ignore else */</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">error </span><span class="s1">&amp;&amp; </span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s1">=== </span><span class="s0">&quot;MODULE_NOT_FOUND&quot;</span><span class="s1">) {</span>
                <span class="s2">error</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s1">= </span><span class="s0">&quot;plugin-missing&quot;</span><span class="s1">;</span>
                <span class="s2">error</span><span class="s1">.</span><span class="s2">messageData </span><span class="s1">= {</span>
                    <span class="s2">pluginName</span><span class="s1">: </span><span class="s2">request</span><span class="s1">,</span>
                    <span class="s2">resolvePluginsRelativeTo</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">pluginBasePath</span><span class="s1">,</span>
                    <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span>
                <span class="s1">};</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
            <span class="s3">try </span><span class="s1">{</span>
                <span class="s2">writeDebugLogForLoading</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>

                <span class="s3">const </span><span class="s2">startTime </span><span class="s1">= </span><span class="s2">Date</span><span class="s1">.</span><span class="s2">now</span><span class="s1">();</span>
                <span class="s3">const </span><span class="s2">pluginDefinition </span><span class="s1">= </span><span class="s2">require$1</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

                <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">`Plugin </span><span class="s2">$</span><span class="s1">{</span><span class="s2">filePath</span><span class="s1">} </span><span class="s0">loaded in: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">Date</span><span class="s1">.</span><span class="s2">now</span><span class="s1">() - </span><span class="s2">startTime</span><span class="s1">}</span><span class="s0">ms`</span><span class="s1">);</span>

                <span class="s3">return new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
                    <span class="s2">definition</span><span class="s1">: </span><span class="s2">normalizePlugin</span><span class="s1">(</span><span class="s2">pluginDefinition</span><span class="s1">),</span>
                    <span class="s2">original</span><span class="s1">: </span><span class="s2">pluginDefinition</span><span class="s1">,</span>
                    <span class="s2">filePath</span><span class="s1">,</span>
                    <span class="s2">id</span><span class="s1">,</span>
                    <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                    <span class="s2">importerPath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
                <span class="s1">});</span>
            <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">loadError</span><span class="s1">) {</span>
                <span class="s2">error </span><span class="s1">= </span><span class="s2">loadError</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s2">debug$2</span><span class="s1">(</span><span class="s0">&quot;Failed to load plugin '%s' declared in '%s'.&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">);</span>
        <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s1">= </span><span class="s0">`Failed to load plugin '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">name</span><span class="s1">}</span><span class="s0">' declared in '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">}</span><span class="s0">': </span><span class="s2">$</span><span class="s1">{</span><span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s3">return new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
            <span class="s2">error</span><span class="s1">,</span>
            <span class="s2">id</span><span class="s1">,</span>
            <span class="s2">importerName</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
            <span class="s2">importerPath</span><span class="s1">: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Take file expression processors as config array elements.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string,DependentPlugin&gt;} plugins The plugin definitions.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArrayFactoryLoadingContext} ctx The loading context.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{IterableIterator&lt;ConfigArrayElement&gt;} The config array elements of file expression processors.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s1">*</span><span class="s2">_takeFileExtensionProcessors</span><span class="s1">(</span><span class="s2">plugins</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">pluginId of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">plugins</span><span class="s1">)) {</span>
            <span class="s3">const </span><span class="s2">processors </span><span class="s1">=</span>
                <span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginId</span><span class="s1">] &amp;&amp;</span>
                <span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginId</span><span class="s1">].</span><span class="s2">definition </span><span class="s1">&amp;&amp;</span>
                <span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginId</span><span class="s1">].</span><span class="s2">definition</span><span class="s1">.</span><span class="s2">processors</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(!</span><span class="s2">processors</span><span class="s1">) {</span>
                <span class="s3">continue</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">processorId of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">processors</span><span class="s1">)) {</span>
                <span class="s3">if </span><span class="s1">(</span><span class="s2">processorId</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;.&quot;</span><span class="s1">)) {</span>
                    <span class="s3">yield</span><span class="s1">* </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_normalizeObjectConfigData</span><span class="s1">(</span>
                        <span class="s1">{</span>
                            <span class="s2">files</span><span class="s1">: [</span><span class="s0">`*</span><span class="s2">$</span><span class="s1">{</span><span class="s2">processorId</span><span class="s1">}</span><span class="s0">`</span><span class="s1">],</span>
                            <span class="s2">processor</span><span class="s1">: </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginId</span><span class="s1">}</span><span class="s0">/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">processorId</span><span class="s1">}</span><span class="s0">`</span>
                        <span class="s1">},</span>
                        <span class="s1">{</span>
                            <span class="s2">...ctx</span><span class="s1">,</span>
                            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;implicit-processor&quot;</span><span class="s1">,</span>
                            <span class="s2">name</span><span class="s1">: </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">}</span><span class="s0">#processors[&quot;</span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginId</span><span class="s1">}</span><span class="s0">/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">processorId</span><span class="s1">}</span><span class="s0">&quot;]`</span>
                        <span class="s1">}</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">`CascadingConfigArrayFactory` class.</span>
 <span class="s5">*</span>
 <span class="s5">* `CascadingConfigArrayFactory` class has a responsibility:</span>
 <span class="s5">*</span>
 <span class="s5">* 1. Handles cascading of config files.</span>
 <span class="s5">*</span>
 <span class="s5">* It provides two methods:</span>
 <span class="s5">*</span>
 <span class="s5">* - `getConfigArrayForFile(filePath)`</span>
 <span class="s5">*     Get the corresponded configuration of a given file. This method doesn't</span>
 <span class="s5">*     throw even if the given file didn't exist.</span>
 <span class="s5">* - `clearCache()`</span>
 <span class="s5">*     Clear the internal cache. You have to call this method when</span>
 <span class="s5">*     `additionalPluginPool` was updated if `baseConfig` or `cliConfig` depends</span>
 <span class="s5">*     on the additional plugins. (`CLIEngine#addPlugin()` method calls this.)</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s5">*/</span>

<span class="s3">const </span><span class="s2">debug$1 </span><span class="s1">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:cascading-config-array-factory&quot;</span><span class="s1">);</span>

<span class="s4">//------------------------------------------------------------------------------</span>
<span class="s4">// Helpers</span>
<span class="s4">//------------------------------------------------------------------------------</span>

<span class="s4">// Define types for VSCode IntelliSense.</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).ConfigData} ConfigData */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).Parser} Parser */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).Plugin} Plugin */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./shared/types&quot;).Rule} Rule */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{ReturnType&lt;ConfigArrayFactory[&quot;create&quot;]&gt;} ConfigArray */</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} CascadingConfigArrayFactoryOptions</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string,Plugin&gt;} [additionalPluginPool] The map for additional plugins.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ConfigData} [baseConfig] The config by `baseConfig` option.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ConfigData} [cliConfig] The config by CLI options (`--env`, `--global`, `--ignore-pattern`, `--parser`, `--parser-options`, `--plugin`, and `--rule`). CLI options overwrite the setting in config files.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} [cwd] The base directory to start lookup.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} [ignorePath] The path to the alternative file of `.eslintignore`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]} [rulePaths] The value of `--rulesdir` option.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} [specificConfigPath] The value of `--config` option.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} [useEslintrc] if `false` then it doesn't load config files.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} loadRules The function to use to load rules.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string,Rule&gt;} builtInRules The rules that are built in to ESLint.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Object} [resolver=ModuleResolver] The module resolver object.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintAllPath The path to the definitions for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintAllConfig Returns the config data for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintRecommendedPath The path to the definitions for eslint:recommended.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintRecommendedConfig Returns the config data for eslint:recommended.</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} CascadingConfigArrayFactoryInternalSlots</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ConfigArray} baseConfigArray The config array of `baseConfig` option.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ConfigData} baseConfigData The config data of `baseConfig` option. This is used to reset `baseConfigArray`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ConfigArray} cliConfigArray The config array of CLI options.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ConfigData} cliConfigData The config data of CLI options. This is used to reset `cliConfigArray`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ConfigArrayFactory} configArrayFactory The factory for config arrays.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string, ConfigArray&gt;} configCache The cache from directory paths to config arrays.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} cwd The base directory to start lookup.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{WeakMap&lt;ConfigArray, ConfigArray&gt;} finalizeCache The cache from config arrays to finalized config arrays.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} [ignorePath] The path to the alternative file of `.eslintignore`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]|null} rulePaths The value of `--rulesdir` option. This is used to reset `baseConfigArray`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string|null} specificConfigPath The value of `--config` option. This is used to reset `cliConfigArray`.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} useEslintrc if `false` then it doesn't load config files.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} loadRules The function to use to load rules.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Map&lt;string,Rule&gt;} builtInRules The rules that are built in to ESLint.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Object} [resolver=ModuleResolver] The module resolver object.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintAllPath The path to the definitions for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintAllConfig Returns the config data for eslint:all.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} eslintRecommendedPath The path to the definitions for eslint:recommended.</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Function} getEslintRecommendedConfig Returns the config data for eslint:recommended.</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{WeakMap&lt;CascadingConfigArrayFactory, CascadingConfigArrayFactoryInternalSlots&gt;} */</span>
<span class="s3">const </span><span class="s2">internalSlotsMap </span><span class="s1">= </span><span class="s3">new </span><span class="s2">WeakMap</span><span class="s1">();</span>

<span class="s5">/**</span>
 <span class="s5">* Create the config array from `baseConfig` and `rulePaths`.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{CascadingConfigArrayFactoryInternalSlots} slots The slots.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} The config array of the base configs.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">createBaseConfigArray</span><span class="s1">({</span>
    <span class="s2">configArrayFactory</span><span class="s1">,</span>
    <span class="s2">baseConfigData</span><span class="s1">,</span>
    <span class="s2">rulePaths</span><span class="s1">,</span>
    <span class="s2">cwd</span><span class="s1">,</span>
    <span class="s2">loadRules</span>
<span class="s1">}) {</span>
    <span class="s3">const </span><span class="s2">baseConfigArray </span><span class="s1">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s2">create</span><span class="s1">(</span>
        <span class="s2">baseConfigData</span><span class="s1">,</span>
        <span class="s1">{ </span><span class="s2">name</span><span class="s1">: </span><span class="s0">&quot;BaseConfig&quot; </span><span class="s1">}</span>
    <span class="s1">);</span>

    <span class="s4">/* 
     * Create the config array element for the default ignore patterns. 
     * This element has `ignorePattern` property that ignores the default 
     * patterns in the current working directory. 
     */</span>
    <span class="s2">baseConfigArray</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">(</span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s2">create</span><span class="s1">(</span>
        <span class="s1">{ </span><span class="s2">ignorePatterns</span><span class="s1">: </span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s2">DefaultPatterns </span><span class="s1">},</span>
        <span class="s1">{ </span><span class="s2">name</span><span class="s1">: </span><span class="s0">&quot;DefaultIgnorePattern&quot; </span><span class="s1">}</span>
    <span class="s1">)[</span><span class="s7">0</span><span class="s1">]);</span>

    <span class="s4">/* 
     * Load rules `--rulesdir` option as a pseudo plugin. 
     * Use a pseudo plugin to define rules of `--rulesdir`, so we can validate 
     * the rule's options with only information in the config array. 
     */</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">rulePaths </span><span class="s1">&amp;&amp; </span><span class="s2">rulePaths</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s2">baseConfigArray</span><span class="s1">.</span><span class="s2">push</span><span class="s1">({</span>
            <span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;config&quot;</span><span class="s1">,</span>
            <span class="s2">name</span><span class="s1">: </span><span class="s0">&quot;--rulesdir&quot;</span><span class="s1">,</span>
            <span class="s2">filePath</span><span class="s1">: </span><span class="s0">&quot;&quot;</span><span class="s1">,</span>
            <span class="s2">plugins</span><span class="s1">: {</span>
                <span class="s0">&quot;&quot;</span><span class="s1">: </span><span class="s3">new </span><span class="s2">ConfigDependency</span><span class="s1">({</span>
                    <span class="s2">definition</span><span class="s1">: {</span>
                        <span class="s2">rules</span><span class="s1">: </span><span class="s2">rulePaths</span><span class="s1">.</span><span class="s2">reduce</span><span class="s1">(</span>
                            <span class="s1">(</span><span class="s2">map</span><span class="s1">, </span><span class="s2">rulesPath</span><span class="s1">) =&gt; </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">assign</span><span class="s1">(</span>
                                <span class="s2">map</span><span class="s1">,</span>
                                <span class="s2">loadRules</span><span class="s1">(</span><span class="s2">rulesPath</span><span class="s1">, </span><span class="s2">cwd</span><span class="s1">)</span>
                            <span class="s1">),</span>
                            <span class="s1">{}</span>
                        <span class="s1">)</span>
                    <span class="s1">},</span>
                    <span class="s2">filePath</span><span class="s1">: </span><span class="s0">&quot;&quot;</span><span class="s1">,</span>
                    <span class="s2">id</span><span class="s1">: </span><span class="s0">&quot;&quot;</span><span class="s1">,</span>
                    <span class="s2">importerName</span><span class="s1">: </span><span class="s0">&quot;--rulesdir&quot;</span><span class="s1">,</span>
                    <span class="s2">importerPath</span><span class="s1">: </span><span class="s0">&quot;&quot;</span>
                <span class="s1">})</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">baseConfigArray</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Create the config array from CLI options.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{CascadingConfigArrayFactoryInternalSlots} slots The slots.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} The config array of the base configs.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">createCLIConfigArray</span><span class="s1">({</span>
    <span class="s2">cliConfigData</span><span class="s1">,</span>
    <span class="s2">configArrayFactory</span><span class="s1">,</span>
    <span class="s2">cwd</span><span class="s1">,</span>
    <span class="s2">ignorePath</span><span class="s1">,</span>
    <span class="s2">specificConfigPath</span>
<span class="s1">}) {</span>
    <span class="s3">const </span><span class="s2">cliConfigArray </span><span class="s1">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s2">create</span><span class="s1">(</span>
        <span class="s2">cliConfigData</span><span class="s1">,</span>
        <span class="s1">{ </span><span class="s2">name</span><span class="s1">: </span><span class="s0">&quot;CLIOptions&quot; </span><span class="s1">}</span>
    <span class="s1">);</span>

    <span class="s2">cliConfigArray</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">(</span>
        <span class="s2">...</span><span class="s1">(</span><span class="s2">ignorePath</span>
            <span class="s1">? </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s2">loadESLintIgnore</span><span class="s1">(</span><span class="s2">ignorePath</span><span class="s1">)</span>
            <span class="s1">: </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s2">loadDefaultESLintIgnore</span><span class="s1">())</span>
    <span class="s1">);</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">specificConfigPath</span><span class="s1">) {</span>
        <span class="s2">cliConfigArray</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">(</span>
            <span class="s2">...configArrayFactory</span><span class="s1">.</span><span class="s2">loadFile</span><span class="s1">(</span>
                <span class="s2">specificConfigPath</span><span class="s1">,</span>
                <span class="s1">{ </span><span class="s2">name</span><span class="s1">: </span><span class="s0">&quot;--config&quot;</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">: </span><span class="s2">cwd </span><span class="s1">}</span>
            <span class="s1">)</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">cliConfigArray</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* The error type when there are files matched by a glob, but all of them have been ignored.</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">ConfigurationNotFoundError </span><span class="s3">extends </span><span class="s2">Error </span><span class="s1">{</span>

    <span class="s4">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s5">/**</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} directoryPath The directory path.</span>
     <span class="s5">*/</span>
    <span class="s2">constructor</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">) {</span>
        <span class="s3">super</span><span class="s1">(</span><span class="s0">`No ESLint configuration found in </span><span class="s2">$</span><span class="s1">{</span><span class="s2">directoryPath</span><span class="s1">}</span><span class="s0">.`</span><span class="s1">);</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s1">= </span><span class="s0">&quot;no-config-found&quot;</span><span class="s1">;</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">messageData </span><span class="s1">= { </span><span class="s2">directoryPath </span><span class="s1">};</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* This class provides the functionality that enumerates every file which is</span>
 <span class="s5">* matched by given glob patterns and that configuration.</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">CascadingConfigArrayFactory </span><span class="s1">{</span>

    <span class="s5">/**</span>
     <span class="s5">* Initialize this enumerator.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{CascadingConfigArrayFactoryOptions} options The options.</span>
     <span class="s5">*/</span>
    <span class="s2">constructor</span><span class="s1">({</span>
        <span class="s2">additionalPluginPool </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">(),</span>
        <span class="s2">baseConfig</span><span class="s1">: </span><span class="s2">baseConfigData </span><span class="s1">= </span><span class="s3">null</span><span class="s1">,</span>
        <span class="s2">cliConfig</span><span class="s1">: </span><span class="s2">cliConfigData </span><span class="s1">= </span><span class="s3">null</span><span class="s1">,</span>
        <span class="s2">cwd </span><span class="s1">= </span><span class="s2">process</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">(),</span>
        <span class="s2">ignorePath</span><span class="s1">,</span>
        <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
        <span class="s2">rulePaths </span><span class="s1">= [],</span>
        <span class="s2">specificConfigPath </span><span class="s1">= </span><span class="s3">null</span><span class="s1">,</span>
        <span class="s2">useEslintrc </span><span class="s1">= </span><span class="s3">true</span><span class="s1">,</span>
        <span class="s2">builtInRules </span><span class="s1">= </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">(),</span>
        <span class="s2">loadRules</span><span class="s1">,</span>
        <span class="s2">resolver</span><span class="s1">,</span>
        <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
        <span class="s2">getEslintRecommendedConfig</span><span class="s1">,</span>
        <span class="s2">eslintAllPath</span><span class="s1">,</span>
        <span class="s2">getEslintAllConfig</span>
    <span class="s1">} = {}) {</span>
        <span class="s3">const </span><span class="s2">configArrayFactory </span><span class="s1">= </span><span class="s3">new </span><span class="s2">ConfigArrayFactory</span><span class="s1">({</span>
            <span class="s2">additionalPluginPool</span><span class="s1">,</span>
            <span class="s2">cwd</span><span class="s1">,</span>
            <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
            <span class="s2">builtInRules</span><span class="s1">,</span>
            <span class="s2">resolver</span><span class="s1">,</span>
            <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
            <span class="s2">getEslintRecommendedConfig</span><span class="s1">,</span>
            <span class="s2">eslintAllPath</span><span class="s1">,</span>
            <span class="s2">getEslintAllConfig</span>
        <span class="s1">});</span>

        <span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s3">this</span><span class="s1">, {</span>
            <span class="s2">baseConfigArray</span><span class="s1">: </span><span class="s2">createBaseConfigArray</span><span class="s1">({</span>
                <span class="s2">baseConfigData</span><span class="s1">,</span>
                <span class="s2">configArrayFactory</span><span class="s1">,</span>
                <span class="s2">cwd</span><span class="s1">,</span>
                <span class="s2">rulePaths</span><span class="s1">,</span>
                <span class="s2">loadRules</span>
            <span class="s1">}),</span>
            <span class="s2">baseConfigData</span><span class="s1">,</span>
            <span class="s2">cliConfigArray</span><span class="s1">: </span><span class="s2">createCLIConfigArray</span><span class="s1">({</span>
                <span class="s2">cliConfigData</span><span class="s1">,</span>
                <span class="s2">configArrayFactory</span><span class="s1">,</span>
                <span class="s2">cwd</span><span class="s1">,</span>
                <span class="s2">ignorePath</span><span class="s1">,</span>
                <span class="s2">specificConfigPath</span>
            <span class="s1">}),</span>
            <span class="s2">cliConfigData</span><span class="s1">,</span>
            <span class="s2">configArrayFactory</span><span class="s1">,</span>
            <span class="s2">configCache</span><span class="s1">: </span><span class="s3">new </span><span class="s2">Map</span><span class="s1">(),</span>
            <span class="s2">cwd</span><span class="s1">,</span>
            <span class="s2">finalizeCache</span><span class="s1">: </span><span class="s3">new </span><span class="s2">WeakMap</span><span class="s1">(),</span>
            <span class="s2">ignorePath</span><span class="s1">,</span>
            <span class="s2">rulePaths</span><span class="s1">,</span>
            <span class="s2">specificConfigPath</span><span class="s1">,</span>
            <span class="s2">useEslintrc</span><span class="s1">,</span>
            <span class="s2">builtInRules</span><span class="s1">,</span>
            <span class="s2">loadRules</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* The path to the current working directory.</span>
     <span class="s5">* This is used by tests.</span>
     <span class="s5">* </span><span class="s6">@type </span><span class="s5">{string}</span>
     <span class="s5">*/</span>
    <span class="s2">get cwd</span><span class="s1">() {</span>
        <span class="s3">const </span><span class="s1">{ </span><span class="s2">cwd </span><span class="s1">} = </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s3">return </span><span class="s2">cwd</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Get the config array of a given file.</span>
     <span class="s5">* If `filePath` was not given, it returns the config which contains only</span>
     <span class="s5">* `baseConfigData` and `cliConfigData`.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} [filePath] The file path to a file.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} [options] The options.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} [options.ignoreNotFoundError] If `true` then it doesn't throw `ConfigurationNotFoundError`.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} The config array of the file.</span>
     <span class="s5">*/</span>
    <span class="s2">getConfigArrayForFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">, { </span><span class="s2">ignoreNotFoundError </span><span class="s1">= </span><span class="s3">false </span><span class="s1">} = {}) {</span>
        <span class="s3">const </span><span class="s1">{</span>
            <span class="s2">baseConfigArray</span><span class="s1">,</span>
            <span class="s2">cliConfigArray</span><span class="s1">,</span>
            <span class="s2">cwd</span>
        <span class="s1">} = </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">filePath</span><span class="s1">) {</span>
            <span class="s3">return new </span><span class="s2">ConfigArray</span><span class="s1">(</span><span class="s2">...baseConfigArray</span><span class="s1">, </span><span class="s2">...cliConfigArray</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">const </span><span class="s2">directoryPath </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">dirname</span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">));</span>

        <span class="s2">debug$1</span><span class="s1">(</span><span class="s0">`Load config files for </span><span class="s2">$</span><span class="s1">{</span><span class="s2">directoryPath</span><span class="s1">}</span><span class="s0">.`</span><span class="s1">);</span>

        <span class="s3">return this</span><span class="s1">.</span><span class="s2">_finalizeConfigArray</span><span class="s1">(</span>
            <span class="s3">this</span><span class="s1">.</span><span class="s2">_loadConfigInAncestors</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">),</span>
            <span class="s2">directoryPath</span><span class="s1">,</span>
            <span class="s2">ignoreNotFoundError</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Set the config data to override all configs.</span>
     <span class="s5">* Require to call `clearCache()` method after this method is called.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigData} configData The config data to override all configs.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">setOverrideConfig</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s2">slots</span><span class="s1">.</span><span class="s2">cliConfigData </span><span class="s1">= </span><span class="s2">configData</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Clear config cache.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
     <span class="s5">*/</span>
    <span class="s2">clearCache</span><span class="s1">() {</span>
        <span class="s3">const </span><span class="s2">slots </span><span class="s1">= </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s2">slots</span><span class="s1">.</span><span class="s2">baseConfigArray </span><span class="s1">= </span><span class="s2">createBaseConfigArray</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">);</span>
        <span class="s2">slots</span><span class="s1">.</span><span class="s2">cliConfigArray </span><span class="s1">= </span><span class="s2">createCLIConfigArray</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">);</span>
        <span class="s2">slots</span><span class="s1">.</span><span class="s2">configCache</span><span class="s1">.</span><span class="s2">clear</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Load and normalize config files from the ancestor directories.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} directoryPath The path to a leaf directory.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} configsExistInSubdirs `true` if configurations exist in subdirectories.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} The loaded config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_loadConfigInAncestors</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configsExistInSubdirs </span><span class="s1">= </span><span class="s3">false</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{</span>
            <span class="s2">baseConfigArray</span><span class="s1">,</span>
            <span class="s2">configArrayFactory</span><span class="s1">,</span>
            <span class="s2">configCache</span><span class="s1">,</span>
            <span class="s2">cwd</span><span class="s1">,</span>
            <span class="s2">useEslintrc</span>
        <span class="s1">} = </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">useEslintrc</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s2">baseConfigArray</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">let </span><span class="s2">configArray </span><span class="s1">= </span><span class="s2">configCache</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>

        <span class="s4">// Hit cache.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">) {</span>
            <span class="s2">debug$1</span><span class="s1">(</span><span class="s0">`Cache hit: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">directoryPath</span><span class="s1">}</span><span class="s0">.`</span><span class="s1">);</span>
            <span class="s3">return </span><span class="s2">configArray</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">debug$1</span><span class="s1">(</span><span class="s0">`No cache found: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">directoryPath</span><span class="s1">}</span><span class="s0">.`</span><span class="s1">);</span>

        <span class="s3">const </span><span class="s2">homePath </span><span class="s1">= </span><span class="s2">os__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">homedir</span><span class="s1">();</span>

        <span class="s4">// Consider this is root.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">directoryPath </span><span class="s1">=== </span><span class="s2">homePath </span><span class="s1">&amp;&amp; </span><span class="s2">cwd </span><span class="s1">!== </span><span class="s2">homePath</span><span class="s1">) {</span>
            <span class="s2">debug$1</span><span class="s1">(</span><span class="s0">&quot;Stop traversing because of considered root.&quot;</span><span class="s1">);</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">configsExistInSubdirs</span><span class="s1">) {</span>
                <span class="s3">const </span><span class="s2">filePath </span><span class="s1">= </span><span class="s2">ConfigArrayFactory</span><span class="s1">.</span><span class="s2">getPathToConfigFileInDirectory</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>

                <span class="s3">if </span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
                    <span class="s2">emitDeprecationWarning</span><span class="s1">(</span>
                        <span class="s2">filePath</span><span class="s1">,</span>
                        <span class="s0">&quot;ESLINT_PERSONAL_CONFIG_SUPPRESS&quot;</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s3">return this</span><span class="s1">.</span><span class="s2">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">baseConfigArray</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s4">// Load the config on this directory.</span>
        <span class="s3">try </span><span class="s1">{</span>
            <span class="s2">configArray </span><span class="s1">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s2">loadInDirectory</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s4">/* istanbul ignore next */</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s1">=== </span><span class="s0">&quot;EACCES&quot;</span><span class="s1">) {</span>
                <span class="s2">debug$1</span><span class="s1">(</span><span class="s0">&quot;Stop traversing because of 'EACCES' error.&quot;</span><span class="s1">);</span>
                <span class="s3">return this</span><span class="s1">.</span><span class="s2">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">baseConfigArray</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s3">throw </span><span class="s2">error</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0 </span><span class="s1">&amp;&amp; </span><span class="s2">configArray</span><span class="s1">.</span><span class="s2">isRoot</span><span class="s1">()) {</span>
            <span class="s2">debug$1</span><span class="s1">(</span><span class="s0">&quot;Stop traversing because of 'root:true'.&quot;</span><span class="s1">);</span>
            <span class="s2">configArray</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">(</span><span class="s2">...baseConfigArray</span><span class="s1">);</span>
            <span class="s3">return this</span><span class="s1">.</span><span class="s2">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s4">// Load from the ancestors and merge it.</span>
        <span class="s3">const </span><span class="s2">parentPath </span><span class="s1">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">dirname</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>
        <span class="s3">const </span><span class="s2">parentConfigArray </span><span class="s1">= </span><span class="s2">parentPath </span><span class="s1">&amp;&amp; </span><span class="s2">parentPath </span><span class="s1">!== </span><span class="s2">directoryPath</span>
            <span class="s1">? </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_loadConfigInAncestors</span><span class="s1">(</span>
                <span class="s2">parentPath</span><span class="s1">,</span>
                <span class="s2">configsExistInSubdirs </span><span class="s1">|| </span><span class="s2">configArray</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0</span>
            <span class="s1">)</span>
            <span class="s1">: </span><span class="s2">baseConfigArray</span><span class="s1">;</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s2">configArray</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">(</span><span class="s2">...parentConfigArray</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
            <span class="s2">configArray </span><span class="s1">= </span><span class="s2">parentConfigArray</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s4">// Cache and return.</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Freeze and cache a given config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} directoryPath The path to a directory as a cache key.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArray} configArray The config array as a cache value.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} The `configArray` (frozen).</span>
     <span class="s5">*/</span>
    <span class="s2">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{ </span><span class="s2">configCache </span><span class="s1">} = </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s2">Object</span><span class="s1">.</span><span class="s2">freeze</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">);</span>
        <span class="s2">configCache</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">);</span>

        <span class="s3">return </span><span class="s2">configArray</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Finalize a given config array.</span>
     <span class="s5">* Concatenate `--config` and other CLI options.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConfigArray} configArray The parent config array.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} directoryPath The path to the leaf directory to find config files.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} ignoreNotFoundError If `true` then it doesn't throw `ConfigurationNotFoundError`.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ConfigArray} The loaded config.</span>
     <span class="s5">* </span><span class="s6">@private</span>
     <span class="s5">*/</span>
    <span class="s2">_finalizeConfigArray</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">, </span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">ignoreNotFoundError</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{</span>
            <span class="s2">cliConfigArray</span><span class="s1">,</span>
            <span class="s2">configArrayFactory</span><span class="s1">,</span>
            <span class="s2">finalizeCache</span><span class="s1">,</span>
            <span class="s2">useEslintrc</span><span class="s1">,</span>
            <span class="s2">builtInRules</span>
        <span class="s1">} = </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s3">this</span><span class="s1">);</span>

        <span class="s3">let </span><span class="s2">finalConfigArray </span><span class="s1">= </span><span class="s2">finalizeCache</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">);</span>

        <span class="s3">if </span><span class="s1">(!</span><span class="s2">finalConfigArray</span><span class="s1">) {</span>
            <span class="s2">finalConfigArray </span><span class="s1">= </span><span class="s2">configArray</span><span class="s1">;</span>

            <span class="s4">// Load the personal config if there are no regular config files.</span>
            <span class="s3">if </span><span class="s1">(</span>
                <span class="s2">useEslintrc </span><span class="s1">&amp;&amp;</span>
                <span class="s2">configArray</span><span class="s1">.</span><span class="s2">every</span><span class="s1">(</span><span class="s2">c </span><span class="s1">=&gt; !</span><span class="s2">c</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">) &amp;&amp;</span>
                <span class="s2">cliConfigArray</span><span class="s1">.</span><span class="s2">every</span><span class="s1">(</span><span class="s2">c </span><span class="s1">=&gt; !</span><span class="s2">c</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">) </span><span class="s4">// `--config` option can be a file.</span>
            <span class="s1">) {</span>
                <span class="s3">const </span><span class="s2">homePath </span><span class="s1">= </span><span class="s2">os__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">homedir</span><span class="s1">();</span>

                <span class="s2">debug$1</span><span class="s1">(</span><span class="s0">&quot;Loading the config file of the home directory:&quot;</span><span class="s1">, </span><span class="s2">homePath</span><span class="s1">);</span>

                <span class="s3">const </span><span class="s2">personalConfigArray </span><span class="s1">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s2">loadInDirectory</span><span class="s1">(</span>
                    <span class="s2">homePath</span><span class="s1">,</span>
                    <span class="s1">{ </span><span class="s2">name</span><span class="s1">: </span><span class="s0">&quot;PersonalConfig&quot; </span><span class="s1">}</span>
                <span class="s1">);</span>

                <span class="s3">if </span><span class="s1">(</span>
                    <span class="s2">personalConfigArray</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0 </span><span class="s1">&amp;&amp;</span>
                    <span class="s1">!</span><span class="s2">directoryPath</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s2">homePath</span><span class="s1">)</span>
                <span class="s1">) {</span>
                    <span class="s3">const </span><span class="s2">lastElement </span><span class="s1">=</span>
                        <span class="s2">personalConfigArray</span><span class="s1">[</span><span class="s2">personalConfigArray</span><span class="s1">.</span><span class="s2">length </span><span class="s1">- </span><span class="s7">1</span><span class="s1">];</span>

                    <span class="s2">emitDeprecationWarning</span><span class="s1">(</span>
                        <span class="s2">lastElement</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>
                        <span class="s0">&quot;ESLINT_PERSONAL_CONFIG_LOAD&quot;</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>

                <span class="s2">finalConfigArray </span><span class="s1">= </span><span class="s2">finalConfigArray</span><span class="s1">.</span><span class="s2">concat</span><span class="s1">(</span><span class="s2">personalConfigArray</span><span class="s1">);</span>
            <span class="s1">}</span>

            <span class="s4">// Apply CLI options.</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">cliConfigArray</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
                <span class="s2">finalConfigArray </span><span class="s1">= </span><span class="s2">finalConfigArray</span><span class="s1">.</span><span class="s2">concat</span><span class="s1">(</span><span class="s2">cliConfigArray</span><span class="s1">);</span>
            <span class="s1">}</span>

            <span class="s4">// Validate rule settings and environments.</span>
            <span class="s3">const </span><span class="s2">validator </span><span class="s1">= </span><span class="s3">new </span><span class="s2">ConfigValidator</span><span class="s1">({</span>
                <span class="s2">builtInRules</span>
            <span class="s1">});</span>

            <span class="s2">validator</span><span class="s1">.</span><span class="s2">validateConfigArray</span><span class="s1">(</span><span class="s2">finalConfigArray</span><span class="s1">);</span>

            <span class="s4">// Cache it.</span>
            <span class="s2">Object</span><span class="s1">.</span><span class="s2">freeze</span><span class="s1">(</span><span class="s2">finalConfigArray</span><span class="s1">);</span>
            <span class="s2">finalizeCache</span><span class="s1">.</span><span class="s2">set</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">, </span><span class="s2">finalConfigArray</span><span class="s1">);</span>

            <span class="s2">debug$1</span><span class="s1">(</span>
                <span class="s0">&quot;Configuration was determined: %o on %s&quot;</span><span class="s1">,</span>
                <span class="s2">finalConfigArray</span><span class="s1">,</span>
                <span class="s2">directoryPath</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s4">// At least one element (the default ignore patterns) exists.</span>
        <span class="s3">if </span><span class="s1">(!</span><span class="s2">ignoreNotFoundError </span><span class="s1">&amp;&amp; </span><span class="s2">useEslintrc </span><span class="s1">&amp;&amp; </span><span class="s2">finalConfigArray</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&lt;= </span><span class="s7">1</span><span class="s1">) {</span>
            <span class="s3">throw new </span><span class="s2">ConfigurationNotFoundError</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">return </span><span class="s2">finalConfigArray</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Compatibility class for flat config.</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Nicholas C. Zakas</span>
 <span class="s5">*/</span>

<span class="s4">//-----------------------------------------------------------------------------</span>
<span class="s4">// Helpers</span>
<span class="s4">//-----------------------------------------------------------------------------</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).Environment} Environment */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../../shared/types&quot;).Processor} Processor */</span>

<span class="s3">const </span><span class="s2">debug </span><span class="s1">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:flat-compat&quot;</span><span class="s1">);</span>
<span class="s3">const </span><span class="s2">cafactory </span><span class="s1">= </span><span class="s2">Symbol</span><span class="s1">(</span><span class="s0">&quot;cafactory&quot;</span><span class="s1">);</span>

<span class="s5">/**</span>
 <span class="s5">* Translates an ESLintRC-style config object into a flag-config-style config</span>
 <span class="s5">* object.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} eslintrcConfig An ESLintRC-style config object.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} options Options to help translate the config.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} options.resolveConfigRelativeTo To the directory to resolve</span>
 <span class="s5">*      configs from.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} options.resolvePluginsRelativeTo The directory to resolve</span>
 <span class="s5">*      plugins from.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ReadOnlyMap&lt;string,Environment&gt;} options.pluginEnvironments A map of plugin environment</span>
 <span class="s5">*      names to objects.</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ReadOnlyMap&lt;string,Processor&gt;} options.pluginProcessors A map of plugin processor</span>
 <span class="s5">*      names to objects.</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} A flag-config-style config object.</span>
 <span class="s5">*/</span>
<span class="s3">function </span><span class="s2">translateESLintRC</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">, {</span>
    <span class="s2">resolveConfigRelativeTo</span><span class="s1">,</span>
    <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
    <span class="s2">pluginEnvironments</span><span class="s1">,</span>
    <span class="s2">pluginProcessors</span>
<span class="s1">}) {</span>

    <span class="s3">const </span><span class="s2">flatConfig </span><span class="s1">= {};</span>
    <span class="s3">const </span><span class="s2">configs </span><span class="s1">= [];</span>
    <span class="s3">const </span><span class="s2">languageOptions </span><span class="s1">= {};</span>
    <span class="s3">const </span><span class="s2">linterOptions </span><span class="s1">= {};</span>
    <span class="s3">const </span><span class="s2">keysToCopy </span><span class="s1">= [</span><span class="s0">&quot;settings&quot;</span><span class="s1">, </span><span class="s0">&quot;rules&quot;</span><span class="s1">, </span><span class="s0">&quot;processor&quot;</span><span class="s1">];</span>
    <span class="s3">const </span><span class="s2">languageOptionsKeysToCopy </span><span class="s1">= [</span><span class="s0">&quot;globals&quot;</span><span class="s1">, </span><span class="s0">&quot;parser&quot;</span><span class="s1">, </span><span class="s0">&quot;parserOptions&quot;</span><span class="s1">];</span>
    <span class="s3">const </span><span class="s2">linterOptionsKeysToCopy </span><span class="s1">= [</span><span class="s0">&quot;noInlineConfig&quot;</span><span class="s1">, </span><span class="s0">&quot;reportUnusedDisableDirectives&quot;</span><span class="s1">];</span>

    <span class="s4">// copy over simple translations</span>
    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">key of keysToCopy</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">key </span><span class="s3">in </span><span class="s2">eslintrcConfig </span><span class="s1">&amp;&amp; </span><span class="s3">typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] !== </span><span class="s0">&quot;undefined&quot;</span><span class="s1">) {</span>
            <span class="s2">flatConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">// copy over languageOptions</span>
    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">key of languageOptionsKeysToCopy</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">key </span><span class="s3">in </span><span class="s2">eslintrcConfig </span><span class="s1">&amp;&amp; </span><span class="s3">typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] !== </span><span class="s0">&quot;undefined&quot;</span><span class="s1">) {</span>

            <span class="s4">// create the languageOptions key in the flat config</span>
            <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">languageOptions </span><span class="s1">= </span><span class="s2">languageOptions</span><span class="s1">;</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">key </span><span class="s1">=== </span><span class="s0">&quot;parser&quot;</span><span class="s1">) {</span>
                <span class="s2">debug</span><span class="s1">(</span><span class="s0">`Resolving parser '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">languageOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">]}</span><span class="s0">' relative to </span><span class="s2">$</span><span class="s1">{</span><span class="s2">resolveConfigRelativeTo</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

                <span class="s3">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">].</span><span class="s2">error</span><span class="s1">) {</span>
                    <span class="s3">throw </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">].</span><span class="s2">error</span><span class="s1">;</span>
                <span class="s1">}</span>

                <span class="s2">languageOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">].</span><span class="s2">definition</span><span class="s1">;</span>
                <span class="s3">continue</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s4">// clone any object values that are in the eslintrc config</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] &amp;&amp; </span><span class="s3">typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] === </span><span class="s0">&quot;object&quot;</span><span class="s1">) {</span>
                <span class="s2">languageOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = {</span>
                    <span class="s2">...eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">]</span>
                <span class="s1">};</span>
            <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
                <span class="s2">languageOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">// copy over linterOptions</span>
    <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">key of linterOptionsKeysToCopy</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">key </span><span class="s3">in </span><span class="s2">eslintrcConfig </span><span class="s1">&amp;&amp; </span><span class="s3">typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] !== </span><span class="s0">&quot;undefined&quot;</span><span class="s1">) {</span>
            <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">linterOptions </span><span class="s1">= </span><span class="s2">linterOptions</span><span class="s1">;</span>
            <span class="s2">linterOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">// move ecmaVersion a level up</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">) {</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s0">&quot;ecmaVersion&quot; </span><span class="s3">in </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">) {</span>
            <span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">ecmaVersion </span><span class="s1">= </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">ecmaVersion</span><span class="s1">;</span>
            <span class="s3">delete </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">ecmaVersion</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">if </span><span class="s1">(</span><span class="s0">&quot;sourceType&quot; </span><span class="s3">in </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">) {</span>
            <span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">sourceType </span><span class="s1">= </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">sourceType</span><span class="s1">;</span>
            <span class="s3">delete </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">sourceType</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s4">// check to see if we even need parserOptions anymore and remove it if not</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">).</span><span class="s2">length </span><span class="s1">=== </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s3">delete </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">// overrides</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">) {</span>
        <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">files </span><span class="s1">= [</span><span class="s2">absoluteFilePath </span><span class="s1">=&gt; </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">absoluteFilePath</span><span class="s1">)];</span>
    <span class="s1">}</span>

    <span class="s4">// translate plugins</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins </span><span class="s1">&amp;&amp; </span><span class="s3">typeof </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins </span><span class="s1">=== </span><span class="s0">&quot;object&quot;</span><span class="s1">) {</span>
        <span class="s2">debug</span><span class="s1">(</span><span class="s0">`Translating plugins: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

        <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">plugins </span><span class="s1">= {};</span>

        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">pluginName of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">)) {</span>

            <span class="s2">debug</span><span class="s1">(</span><span class="s0">`Translating plugin: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>
            <span class="s2">debug</span><span class="s1">(</span><span class="s0">`Resolving plugin '</span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginName</span><span class="s1">} </span><span class="s0">relative to </span><span class="s2">$</span><span class="s1">{</span><span class="s2">resolvePluginsRelativeTo</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

            <span class="s3">const </span><span class="s1">{ </span><span class="s2">original</span><span class="s1">: </span><span class="s2">plugin</span><span class="s1">, </span><span class="s2">error </span><span class="s1">} = </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginName</span><span class="s1">];</span>

            <span class="s3">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
                <span class="s3">throw </span><span class="s2">error</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginName</span><span class="s1">] = </span><span class="s2">plugin</span><span class="s1">;</span>

            <span class="s4">// create a config for any processors</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">processors</span><span class="s1">) {</span>
                <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">processorName of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">processors</span><span class="s1">)) {</span>
                    <span class="s3">if </span><span class="s1">(</span><span class="s2">processorName</span><span class="s1">.</span><span class="s2">startsWith</span><span class="s1">(</span><span class="s0">&quot;.&quot;</span><span class="s1">)) {</span>
                        <span class="s2">debug</span><span class="s1">(</span><span class="s0">`Assigning processor: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginName</span><span class="s1">}</span><span class="s0">/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">processorName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

                        <span class="s2">configs</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">({</span>
                            <span class="s2">files</span><span class="s1">: [</span><span class="s0">`**/*</span><span class="s2">$</span><span class="s1">{</span><span class="s2">processorName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">],</span>
                            <span class="s2">processor</span><span class="s1">: </span><span class="s2">pluginProcessors</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">pluginName</span><span class="s1">}</span><span class="s0">/</span><span class="s2">$</span><span class="s1">{</span><span class="s2">processorName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">)</span>
                        <span class="s1">});</span>
                    <span class="s1">}</span>

                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">// translate env - must come after plugins</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env </span><span class="s1">&amp;&amp; </span><span class="s3">typeof </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env </span><span class="s1">=== </span><span class="s0">&quot;object&quot;</span><span class="s1">) {</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">envName of Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env</span><span class="s1">)) {</span>

            <span class="s4">// only add environments that are true</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env</span><span class="s1">[</span><span class="s2">envName</span><span class="s1">]) {</span>
                <span class="s2">debug</span><span class="s1">(</span><span class="s0">`Translating environment: </span><span class="s2">$</span><span class="s1">{</span><span class="s2">envName</span><span class="s1">}</span><span class="s0">`</span><span class="s1">);</span>

                <span class="s3">if </span><span class="s1">(</span><span class="s2">environments</span><span class="s1">.</span><span class="s2">has</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">)) {</span>

                    <span class="s4">// built-in environments should be defined first</span>
                    <span class="s2">configs</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">(</span><span class="s2">...translateESLintRC</span><span class="s1">({</span>
                        <span class="s2">criteria</span><span class="s1">: </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">,</span>
                        <span class="s2">...environments</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">)</span>
                    <span class="s1">}, {</span>
                        <span class="s2">resolveConfigRelativeTo</span><span class="s1">,</span>
                        <span class="s2">resolvePluginsRelativeTo</span>
                    <span class="s1">}));</span>
                <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">pluginEnvironments</span><span class="s1">.</span><span class="s2">has</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">)) {</span>

                    <span class="s4">// if the environment comes from a plugin, it should come after the plugin config</span>
                    <span class="s2">configs</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s2">...translateESLintRC</span><span class="s1">({</span>
                        <span class="s2">criteria</span><span class="s1">: </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">,</span>
                        <span class="s2">...pluginEnvironments</span><span class="s1">.</span><span class="s2">get</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">)</span>
                    <span class="s1">}, {</span>
                        <span class="s2">resolveConfigRelativeTo</span><span class="s1">,</span>
                        <span class="s2">resolvePluginsRelativeTo</span>
                    <span class="s1">}));</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">// only add if there are actually keys in the config</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">flatConfig</span><span class="s1">).</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s2">configs</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s2">flatConfig</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s3">return </span><span class="s2">configs</span><span class="s1">;</span>
<span class="s1">}</span>


<span class="s4">//-----------------------------------------------------------------------------</span>
<span class="s4">// Exports</span>
<span class="s4">//-----------------------------------------------------------------------------</span>

<span class="s5">/**</span>
 <span class="s5">* A compatibility class for working with configs.</span>
 <span class="s5">*/</span>
<span class="s3">class </span><span class="s2">FlatCompat </span><span class="s1">{</span>

    <span class="s2">constructor</span><span class="s1">({</span>
        <span class="s2">baseDirectory </span><span class="s1">= </span><span class="s2">process</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">(),</span>
        <span class="s2">resolvePluginsRelativeTo </span><span class="s1">= </span><span class="s2">baseDirectory</span><span class="s1">,</span>
        <span class="s2">recommendedConfig</span><span class="s1">,</span>
        <span class="s2">allConfig</span>
    <span class="s1">} = {}) {</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">baseDirectory </span><span class="s1">= </span><span class="s2">baseDirectory</span><span class="s1">;</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">resolvePluginsRelativeTo </span><span class="s1">= </span><span class="s2">resolvePluginsRelativeTo</span><span class="s1">;</span>
        <span class="s3">this</span><span class="s1">[</span><span class="s2">cafactory</span><span class="s1">] = </span><span class="s3">new </span><span class="s2">ConfigArrayFactory</span><span class="s1">({</span>
            <span class="s2">cwd</span><span class="s1">: </span><span class="s2">baseDirectory</span><span class="s1">,</span>
            <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
            <span class="s2">getEslintAllConfig</span><span class="s1">: () =&gt; {</span>

                <span class="s3">if </span><span class="s1">(!</span><span class="s2">allConfig</span><span class="s1">) {</span>
                    <span class="s3">throw new </span><span class="s2">TypeError</span><span class="s1">(</span><span class="s0">&quot;Missing parameter 'allConfig' in FlatCompat constructor.&quot;</span><span class="s1">);</span>
                <span class="s1">}</span>

                <span class="s3">return </span><span class="s2">allConfig</span><span class="s1">;</span>
            <span class="s1">},</span>
            <span class="s2">getEslintRecommendedConfig</span><span class="s1">: () =&gt; {</span>

                <span class="s3">if </span><span class="s1">(!</span><span class="s2">recommendedConfig</span><span class="s1">) {</span>
                    <span class="s3">throw new </span><span class="s2">TypeError</span><span class="s1">(</span><span class="s0">&quot;Missing parameter 'recommendedConfig' in FlatCompat constructor.&quot;</span><span class="s1">);</span>
                <span class="s1">}</span>

                <span class="s3">return </span><span class="s2">recommendedConfig</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Translates an ESLintRC-style config into a flag-config-style config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} eslintrcConfig The ESLintRC-style config object.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} A flag-config-style config object.</span>
     <span class="s5">*/</span>
    <span class="s2">config</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">eslintrcArray </span><span class="s1">= </span><span class="s3">this</span><span class="s1">[</span><span class="s2">cafactory</span><span class="s1">].</span><span class="s2">create</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">, {</span>
            <span class="s2">basePath</span><span class="s1">: </span><span class="s3">this</span><span class="s1">.</span><span class="s2">baseDirectory</span>
        <span class="s1">});</span>

        <span class="s3">const </span><span class="s2">flatArray </span><span class="s1">= [];</span>
        <span class="s3">let </span><span class="s2">hasIgnorePatterns </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>

        <span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s2">forEach</span><span class="s1">(</span><span class="s2">configData </span><span class="s1">=&gt; {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s2">configData</span><span class="s1">.</span><span class="s2">type </span><span class="s1">=== </span><span class="s0">&quot;config&quot;</span><span class="s1">) {</span>
                <span class="s2">hasIgnorePatterns </span><span class="s1">= </span><span class="s2">hasIgnorePatterns </span><span class="s1">|| </span><span class="s2">configData</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">;</span>
                <span class="s2">flatArray</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s2">...translateESLintRC</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, {</span>
                    <span class="s2">resolveConfigRelativeTo</span><span class="s1">: </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">join</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">baseDirectory</span><span class="s1">, </span><span class="s0">&quot;__placeholder.js&quot;</span><span class="s1">),</span>
                    <span class="s2">resolvePluginsRelativeTo</span><span class="s1">: </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">join</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">resolvePluginsRelativeTo</span><span class="s1">, </span><span class="s0">&quot;__placeholder.js&quot;</span><span class="s1">),</span>
                    <span class="s2">pluginEnvironments</span><span class="s1">: </span><span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s2">pluginEnvironments</span><span class="s1">,</span>
                    <span class="s2">pluginProcessors</span><span class="s1">: </span><span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s2">pluginProcessors</span>
                <span class="s1">}));</span>
            <span class="s1">}</span>
        <span class="s1">});</span>

        <span class="s4">// combine ignorePatterns to emulate ESLintRC behavior better</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">hasIgnorePatterns</span><span class="s1">) {</span>
            <span class="s2">flatArray</span><span class="s1">.</span><span class="s2">unshift</span><span class="s1">({</span>
                <span class="s2">ignores</span><span class="s1">: [</span><span class="s2">filePath </span><span class="s1">=&gt; {</span>

                    <span class="s4">// Compute the final config for this file.</span>
                    <span class="s4">// This filters config array elements by `files`/`excludedFiles` then merges the elements.</span>
                    <span class="s3">const </span><span class="s2">finalConfig </span><span class="s1">= </span><span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s2">extractConfig</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

                    <span class="s4">// Test the `ignorePattern` properties of the final config.</span>
                    <span class="s3">return </span><span class="s2">Boolean</span><span class="s1">(</span><span class="s2">finalConfig</span><span class="s1">.</span><span class="s2">ignores</span><span class="s1">) &amp;&amp; </span><span class="s2">finalConfig</span><span class="s1">.</span><span class="s2">ignores</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
                <span class="s1">}]</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s3">return </span><span class="s2">flatArray</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Translates the `env` section of an ESLintRC-style config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} envConfig The `env` section of an ESLintRC config.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object[]} An array of flag-config objects representing the environments.</span>
     <span class="s5">*/</span>
    <span class="s2">env</span><span class="s1">(</span><span class="s2">envConfig</span><span class="s1">) {</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">config</span><span class="s1">({</span>
            <span class="s2">env</span><span class="s1">: </span><span class="s2">envConfig</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Translates the `extends` section of an ESLintRC-style config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{...string} configsToExtend The names of the configs to load.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object[]} An array of flag-config objects representing the config.</span>
     <span class="s5">*/</span>
    <span class="s3">extends</span><span class="s1">(</span><span class="s2">...configsToExtend</span><span class="s1">) {</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">config</span><span class="s1">({</span>
            <span class="s3">extends</span><span class="s1">: </span><span class="s2">configsToExtend</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">/**</span>
     <span class="s5">* Translates the `plugins` section of an ESLintRC-style config.</span>
     <span class="s5">* </span><span class="s6">@param </span><span class="s5">{...string} plugins The names of the plugins to load.</span>
     <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object[]} An array of flag-config objects representing the plugins.</span>
     <span class="s5">*/</span>
    <span class="s2">plugins</span><span class="s1">(</span><span class="s2">...plugins</span><span class="s1">) {</span>
        <span class="s3">return this</span><span class="s1">.</span><span class="s2">config</span><span class="s1">({</span>
            <span class="s2">plugins</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Package exports for @eslint/eslintrc</span>
 <span class="s5">* </span><span class="s6">@author </span><span class="s5">Nicholas C. Zakas</span>
 <span class="s5">*/</span>

<span class="s4">//-----------------------------------------------------------------------------</span>
<span class="s4">// Exports</span>
<span class="s4">//-----------------------------------------------------------------------------</span>

<span class="s3">const </span><span class="s2">Legacy </span><span class="s1">= {</span>
    <span class="s2">ConfigArray</span><span class="s1">,</span>
    <span class="s2">createConfigArrayFactoryContext</span><span class="s1">: </span><span class="s2">createContext</span><span class="s1">,</span>
    <span class="s2">CascadingConfigArrayFactory</span><span class="s1">,</span>
    <span class="s2">ConfigArrayFactory</span><span class="s1">,</span>
    <span class="s2">ConfigDependency</span><span class="s1">,</span>
    <span class="s2">ExtractedConfig</span><span class="s1">,</span>
    <span class="s2">IgnorePattern</span><span class="s1">,</span>
    <span class="s2">OverrideTester</span><span class="s1">,</span>
    <span class="s2">getUsedExtractedConfigs</span><span class="s1">,</span>
    <span class="s2">environments</span><span class="s1">,</span>

    <span class="s4">// shared</span>
    <span class="s2">ConfigOps</span><span class="s1">,</span>
    <span class="s2">ConfigValidator</span><span class="s1">,</span>
    <span class="s2">ModuleResolver</span><span class="s1">,</span>
    <span class="s2">naming</span>
<span class="s1">};</span>

<span class="s2">exports</span><span class="s1">.</span><span class="s2">FlatCompat </span><span class="s1">= </span><span class="s2">FlatCompat</span><span class="s1">;</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">Legacy </span><span class="s1">= </span><span class="s2">Legacy</span><span class="s1">;</span>
<span class="s4">//# sourceMappingURL=eslintrc.cjs.map</span>
</pre>
</body>
</html>