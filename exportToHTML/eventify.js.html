<html>
<head>
<title>eventify.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6aab73;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
eventify.js</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span>

<span class="s2">const </span><span class="s1">assert </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s0">'chai'</span><span class="s3">).</span><span class="s1">assert</span>
<span class="s2">const </span><span class="s1">events </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s0">'../../src/events'</span><span class="s3">)</span>
<span class="s2">const </span><span class="s1">Promise </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s0">'bluebird'</span><span class="s3">)</span>
<span class="s2">const </span><span class="s1">spooks </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s0">'spooks'</span><span class="s3">)</span>

<span class="s2">const </span><span class="s1">modulePath </span><span class="s3">= </span><span class="s0">'../../src/eventify'</span>

<span class="s1">suite</span><span class="s3">(</span><span class="s0">'eventify:'</span><span class="s3">, () =&gt; {</span>
  <span class="s2">let </span><span class="s1">log</span>

  <span class="s1">setup</span><span class="s3">(() =&gt; {</span>
    <span class="s1">log </span><span class="s3">= {}</span>
  <span class="s3">})</span>

  <span class="s1">test</span><span class="s3">(</span><span class="s0">'require does not throw'</span><span class="s3">, () =&gt; {</span>
    <span class="s1">assert</span><span class="s3">.</span><span class="s1">doesNotThrow</span><span class="s3">(() =&gt; {</span>
      <span class="s1">require</span><span class="s3">(</span><span class="s1">modulePath</span><span class="s3">)</span>
    <span class="s3">})</span>
  <span class="s3">})</span>

  <span class="s1">test</span><span class="s3">(</span><span class="s0">'require returns function'</span><span class="s3">, () =&gt; {</span>
    <span class="s1">assert</span><span class="s3">.</span><span class="s1">isFunction</span><span class="s3">(</span><span class="s1">require</span><span class="s3">(</span><span class="s1">modulePath</span><span class="s3">))</span>
  <span class="s3">})</span>

  <span class="s1">suite</span><span class="s3">(</span><span class="s0">'require:'</span><span class="s3">, () =&gt; {</span>
    <span class="s2">let </span><span class="s1">eventify</span>

    <span class="s1">setup</span><span class="s3">(() =&gt; {</span>
      <span class="s1">eventify </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s1">modulePath</span><span class="s3">)</span>
    <span class="s3">})</span>

    <span class="s1">test</span><span class="s3">(</span><span class="s0">'eventify does not throw'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">assert</span><span class="s3">.</span><span class="s1">doesNotThrow</span><span class="s3">(() =&gt; {</span>
        <span class="s1">eventify</span><span class="s3">()</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">test</span><span class="s3">(</span><span class="s0">'eventify returns EventEmitter'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">assert</span><span class="s3">.</span><span class="s1">instanceOf</span><span class="s3">(</span><span class="s1">eventify</span><span class="s3">(), </span><span class="s1">require</span><span class="s3">(</span><span class="s0">'events'</span><span class="s3">).</span><span class="s1">EventEmitter</span><span class="s3">)</span>
    <span class="s3">})</span>

    <span class="s1">test</span><span class="s3">(</span><span class="s0">'EventEmitter is decorated with pause method'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">assert</span><span class="s3">.</span><span class="s1">isFunction</span><span class="s3">(</span><span class="s1">eventify</span><span class="s3">().</span><span class="s1">pause</span><span class="s3">)</span>
      <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">eventify</span><span class="s3">().</span><span class="s1">pause</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
    <span class="s3">})</span>

    <span class="s1">test</span><span class="s3">(</span><span class="s0">'pause method returns continue function'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">assert</span><span class="s3">.</span><span class="s1">isFunction</span><span class="s3">(</span><span class="s1">eventify</span><span class="s3">().</span><span class="s1">pause</span><span class="s3">())</span>
      <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">eventify</span><span class="s3">().</span><span class="s1">pause</span><span class="s3">(), </span><span class="s4">0</span><span class="s3">)</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'undefined:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">undefined</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'NaN:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">NaN</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'Infinity:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">Infinity</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'Number.NEGATIVE_INFINITY:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">Number</span><span class="s3">.</span><span class="s1">NEGATIVE_INFINITY</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">end</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'function:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(() =&gt; {})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'symbol:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">Symbol</span><span class="s3">(</span><span class="s0">'foo'</span><span class="s3">))</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'empty array:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">([])</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">array</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">array</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'empty object:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">({})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">object</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">object</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'string:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s0">'foo'</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'string with special characters:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s0">'foo</span><span class="s2">\n</span><span class="s0">bar</span><span class="s2">\t</span><span class="s0">&quot;baz&quot;'</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo</span><span class="s2">\\</span><span class="s0">nbar</span><span class="s2">\\</span><span class="s0">t</span><span class="s2">\\</span><span class="s0">&quot;baz</span><span class="s2">\\</span><span class="s0">&quot;'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'number:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s4">42</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">42</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'false:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">false</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isFalse</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'true:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">true</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isTrue</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'null:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">null</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'array with items:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">([</span>
          <span class="s1">undefined</span><span class="s3">,</span>
          <span class="s1">NaN</span><span class="s3">,</span>
          <span class="s1">Number</span><span class="s3">.</span><span class="s1">POSITIVE_INFINITY</span><span class="s3">,</span>
          <span class="s1">Number</span><span class="s3">.</span><span class="s1">NEGATIVE_INFINITY</span><span class="s3">,</span>
          <span class="s0">'foo'</span><span class="s3">,</span>
          <span class="s3">() =&gt; {},</span>
          <span class="s0">'bar'</span><span class="s3">,</span>
          <span class="s1">Symbol</span><span class="s3">(</span><span class="s0">'baz'</span><span class="s3">)</span>
        <span class="s3">])</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event occurred six times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">6</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly third time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">2</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly fourth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">3</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly fifth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">4</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event was dispatched correctly sixth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">[</span><span class="s4">5</span><span class="s3">][</span><span class="s4">0</span><span class="s3">])</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'bar'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'object with properties:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">({ </span><span class="s1">foo</span><span class="s3">: </span><span class="s4">42</span><span class="s3">,</span>
          <span class="s1">bar</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
          <span class="s1">baz</span><span class="s3">: </span><span class="s4">3.14159265359</span><span class="s3">,</span>
          <span class="s1">qux</span><span class="s3">: </span><span class="s1">Symbol</span><span class="s3">(</span><span class="s0">'qux'</span><span class="s3">)</span>
        <span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'baz'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">42</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">3.14159265359</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'object with keys containing special characters:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">({ </span><span class="s0">'foo</span><span class="s2">\n</span><span class="s0">&quot;bar&quot;'</span><span class="s3">: </span><span class="s4">42 </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo</span><span class="s2">\\</span><span class="s0">n</span><span class="s2">\\</span><span class="s0">&quot;bar</span><span class="s2">\\</span><span class="s0">&quot;'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">42</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'nested array:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">([ </span><span class="s0">'foo'</span><span class="s3">, [ </span><span class="s0">'bar'</span><span class="s3">, [ </span><span class="s0">'baz'</span><span class="s3">, </span><span class="s0">'qux' </span><span class="s3">] ] ])</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred four times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">4</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'bar'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly third time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">2</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'baz'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly fourth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">3</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'qux'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'nested object:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">({ </span><span class="s1">foo</span><span class="s3">: { </span><span class="s1">bar</span><span class="s3">: { </span><span class="s1">baz</span><span class="s3">: </span><span class="s4">1</span><span class="s3">, </span><span class="s1">qux</span><span class="s3">: </span><span class="s4">2 </span><span class="s3">}, </span><span class="s1">wibble</span><span class="s3">: </span><span class="s4">3 </span><span class="s3">}, </span><span class="s1">wobble</span><span class="s3">: </span><span class="s4">4 </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred six times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">6</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'bar'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly third time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">2</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'baz'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly fourth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">3</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'qux'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly fifth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">4</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'wibble'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly sixth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">5</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'wobble'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event occurred four times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">4</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly third time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">2</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event was dispatched correctly fourth time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">number</span><span class="s3">[</span><span class="s4">3</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s4">4</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'promise:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Promise</span><span class="s3">(</span><span class="s1">res </span><span class="s3">=&gt; </span><span class="s1">resolve </span><span class="s3">= </span><span class="s1">res</span><span class="s3">), { </span><span class="s1">poll</span><span class="s3">: </span><span class="s4">4 </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>

        <span class="s1">setTimeout</span><span class="s3">(</span><span class="s1">resolve</span><span class="s3">.</span><span class="s1">bind</span><span class="s3">(</span><span class="s2">null</span><span class="s3">, </span><span class="s0">'foo'</span><span class="s3">), </span><span class="s4">20</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'ignore promise:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Promise</span><span class="s3">(</span><span class="s1">res </span><span class="s3">=&gt; </span><span class="s1">resolve </span><span class="s3">= </span><span class="s1">res</span><span class="s3">), { </span><span class="s1">poll</span><span class="s3">: </span><span class="s4">4</span><span class="s3">, </span><span class="s1">promises</span><span class="s3">: </span><span class="s0">'ignore' </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>

        <span class="s1">setTimeout</span><span class="s3">(</span><span class="s1">resolve</span><span class="s3">.</span><span class="s1">bind</span><span class="s3">(</span><span class="s2">null</span><span class="s3">, </span><span class="s0">'foo'</span><span class="s3">), </span><span class="s4">20</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'buffer:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Buffer</span><span class="s3">(</span><span class="s0">'foo bar baz qux'</span><span class="s3">))</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo bar baz qux'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'ignore buffer:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Buffer</span><span class="s3">(</span><span class="s0">'foo bar baz qux'</span><span class="s3">), { </span><span class="s1">buffers</span><span class="s3">: </span><span class="s0">'ignore' </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'date:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Date</span><span class="s3">(</span><span class="s0">'1977-06-10T10:30:00.000Z'</span><span class="s3">))</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'1977-06-10T10:30:00.000Z'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'object with toJSON method:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">({ </span><span class="s1">toJSON </span><span class="s3">() { </span><span class="s2">return </span><span class="s0">'foo' </span><span class="s3">} })</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'map:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Map</span><span class="s3">([[</span><span class="s0">'foo'</span><span class="s3">,</span><span class="s0">'bar'</span><span class="s3">],[</span><span class="s0">'baz'</span><span class="s3">,</span><span class="s0">'qux'</span><span class="s3">]]))</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'baz'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'bar'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'qux'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'ignore map:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Map</span><span class="s3">([[</span><span class="s0">'foo'</span><span class="s3">,</span><span class="s0">'bar'</span><span class="s3">],[</span><span class="s0">'baz'</span><span class="s3">,</span><span class="s0">'qux'</span><span class="s3">]]), { </span><span class="s1">maps</span><span class="s3">: </span><span class="s0">'ignore' </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'set:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Set</span><span class="s3">([</span><span class="s0">'foo'</span><span class="s3">,</span><span class="s0">'bar'</span><span class="s3">]))</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'bar'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'ignore set:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Set</span><span class="s3">([</span><span class="s0">'foo'</span><span class="s3">,</span><span class="s0">'bar'</span><span class="s3">]), { </span><span class="s1">iterables</span><span class="s3">: </span><span class="s0">'ignore' </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'promise resolved to a map:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">let </span><span class="s1">resolve</span>

        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s2">new </span><span class="s1">Promise</span><span class="s3">(</span><span class="s1">res </span><span class="s3">=&gt; </span><span class="s1">resolve </span><span class="s3">= </span><span class="s1">res</span><span class="s3">), { </span><span class="s1">poll</span><span class="s3">: </span><span class="s4">4 </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>

        <span class="s1">setImmediate</span><span class="s3">(</span><span class="s1">resolve</span><span class="s3">.</span><span class="s1">bind</span><span class="s3">(</span><span class="s2">null</span><span class="s3">, </span><span class="s2">new </span><span class="s1">Map</span><span class="s3">([[</span><span class="s0">'foo'</span><span class="s3">,</span><span class="s0">'bar'</span><span class="s3">],[</span><span class="s0">'baz'</span><span class="s3">,</span><span class="s0">'qux'</span><span class="s3">]])))</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'baz'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'bar'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'qux'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endPrefix event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endPrefix</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'array circular reference:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">array </span><span class="s3">= [ </span><span class="s0">'foo' </span><span class="s3">]</span>
        <span class="s1">array</span><span class="s3">[</span><span class="s4">1</span><span class="s3">] = </span><span class="s1">array</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">array</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">string</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">lengthOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">[</span><span class="s4">0</span><span class="s3">], </span><span class="s4">1</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">instanceOf</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s1">Error</span><span class="s3">)</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">].</span><span class="s1">message</span><span class="s3">, </span><span class="s0">'Circular reference.'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'object circular reference:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">object </span><span class="s3">= { </span><span class="s1">foo</span><span class="s3">: </span><span class="s0">'bar' </span><span class="s3">}</span>
        <span class="s1">object</span><span class="s3">.</span><span class="s1">self </span><span class="s3">= </span><span class="s1">object</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">object</span><span class="s3">)</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly first time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'foo'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event was dispatched correctly second time'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">property</span><span class="s3">[</span><span class="s4">1</span><span class="s3">][</span><span class="s4">0</span><span class="s3">], </span><span class="s0">'self'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event was dispatched correctly'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">[</span><span class="s4">0</span><span class="s3">][</span><span class="s4">0</span><span class="s3">].</span><span class="s1">message</span><span class="s3">, </span><span class="s0">'Circular reference.'</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'array circular reference with ignore set:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">array </span><span class="s3">= [ </span><span class="s0">'foo' </span><span class="s3">]</span>
        <span class="s1">array</span><span class="s3">[</span><span class="s4">1</span><span class="s3">] = </span><span class="s1">array</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">array</span><span class="s3">, { </span><span class="s1">circular</span><span class="s3">: </span><span class="s0">'ignore' </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'object circular reference with ignore set:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">object </span><span class="s3">= { </span><span class="s1">foo</span><span class="s3">: </span><span class="s0">'bar' </span><span class="s3">}</span>
        <span class="s1">object</span><span class="s3">.</span><span class="s1">self </span><span class="s3">= </span><span class="s1">object</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, { </span><span class="s1">circular</span><span class="s3">: </span><span class="s0">'ignore' </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'parallel array reference:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">array </span><span class="s3">= [ </span><span class="s0">'foo' </span><span class="s3">]</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">([ </span><span class="s1">array</span><span class="s3">, </span><span class="s1">array </span><span class="s3">])</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occurred twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'parallel object reference:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">object </span><span class="s3">= { </span><span class="s1">foo</span><span class="s3">: </span><span class="s0">'bar' </span><span class="s3">}</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">({ </span><span class="s1">baz</span><span class="s3">: </span><span class="s1">object</span><span class="s3">, </span><span class="s1">qux</span><span class="s3">: </span><span class="s1">object </span><span class="s3">})</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occurred four times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">4</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occurred three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>

    <span class="s1">suite</span><span class="s3">(</span><span class="s0">'throw errors from event handlers:'</span><span class="s3">, () =&gt; {</span>
      <span class="s1">setup</span><span class="s3">(</span><span class="s1">done </span><span class="s3">=&gt; {</span>
        <span class="s2">const </span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">eventify</span><span class="s3">([</span><span class="s2">null</span><span class="s3">,</span><span class="s2">false</span><span class="s3">,</span><span class="s2">true</span><span class="s3">,</span><span class="s4">0</span><span class="s3">,</span><span class="s0">&quot;&quot;</span><span class="s3">,{</span><span class="s0">&quot;foo&quot;</span><span class="s3">:</span><span class="s0">&quot;bar&quot;</span><span class="s3">}])</span>

        <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">events</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([ </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s3">]) =&gt; {</span>
          <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">spooks</span><span class="s3">.</span><span class="s1">fn</span><span class="s3">({</span>
            <span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
            <span class="s1">log</span><span class="s3">: </span><span class="s1">log</span>
          <span class="s3">}))</span>
          <span class="s2">if </span><span class="s3">(</span><span class="s1">value </span><span class="s3">!== </span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">) {</span>
            <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, () =&gt; { </span><span class="s2">throw </span><span class="s4">0 </span><span class="s3">})</span>
          <span class="s3">}</span>
        <span class="s3">})</span>

        <span class="s1">emitter</span><span class="s3">.</span><span class="s1">on</span><span class="s3">(</span><span class="s1">events</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s1">done</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'end event occurred once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">end</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'array event occured once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">array</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'literal event occured three times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">literal</span><span class="s3">, </span><span class="s4">3</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'number event occured once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'string event occured twice'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">string</span><span class="s3">, </span><span class="s4">2</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'object event occured once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">object</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'property event occured once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">property</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endObject event occured once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endObject</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'endArray event occured once'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">endArray</span><span class="s3">, </span><span class="s4">1</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'error event occured eleven times'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s4">11</span><span class="s3">)</span>
      <span class="s3">})</span>

      <span class="s1">test</span><span class="s3">(</span><span class="s0">'dataError event did not occur'</span><span class="s3">, () =&gt; {</span>
        <span class="s1">assert</span><span class="s3">.</span><span class="s1">strictEqual</span><span class="s3">(</span><span class="s1">log</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">.</span><span class="s1">dataError</span><span class="s3">, </span><span class="s4">0</span><span class="s3">)</span>
      <span class="s3">})</span>
    <span class="s3">})</span>
  <span class="s3">})</span>
<span class="s3">})</span>
</pre>
</body>
</html>