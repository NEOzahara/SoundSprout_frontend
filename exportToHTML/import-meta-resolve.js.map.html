<html>
<head>
<title>import-meta-resolve.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
import-meta-resolve.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_assert&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;_fs&quot;</span><span class="s0">,</span><span class="s1">&quot;_interopRequireWildcard&quot;</span><span class="s0">,</span><span class="s1">&quot;_process&quot;</span><span class="s0">,</span><span class="s1">&quot;_url&quot;</span><span class="s0">,</span><span class="s1">&quot;_path&quot;</span><span class="s0">,</span><span class="s1">&quot;_module&quot;</span><span class="s0">,</span><span class="s1">&quot;_v&quot;</span><span class="s0">,</span><span class="s1">&quot;_util&quot;</span><span class="s0">,</span><span class="s1">&quot;_getRequireWildcardCache&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;r&quot;</span><span class="s0">,</span><span class="s1">&quot;t&quot;</span><span class="s0">,</span><span class="s1">&quot;__esModule&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;n&quot;</span><span class="s0">,</span><span class="s1">&quot;__proto__&quot;</span><span class="s0">,</span><span class="s1">&quot;a&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;defineProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;getOwnPropertyDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;u&quot;</span><span class="s0">,</span><span class="s1">&quot;hasOwnProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;call&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;own$1&quot;</span><span class="s0">,</span><span class="s1">&quot;classRegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;kTypes&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;codes&quot;</span><span class="s0">,</span><span class="s1">&quot;formatList&quot;</span><span class="s0">,</span><span class="s1">&quot;array&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;messages&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeInternalPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;userStackTraceLimit&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_INVALID_ARG_TYPE&quot;</span><span class="s0">,</span><span class="s1">&quot;createError&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;expected&quot;</span><span class="s0">,</span><span class="s1">&quot;actual&quot;</span><span class="s0">,</span><span class="s1">&quot;assert&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;types&quot;</span><span class="s0">,</span><span class="s1">&quot;instances&quot;</span><span class="s0">,</span><span class="s1">&quot;other&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;exec&quot;</span><span class="s0">,</span><span class="s1">&quot;pos&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;determineSpecificType&quot;</span><span class="s0">,</span><span class="s1">&quot;TypeError&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_INVALID_MODULE_SPECIFIER&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;reason&quot;</span><span class="s0">,</span><span class="s1">&quot;base&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_INVALID_PACKAGE_CONFIG&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_INVALID_PACKAGE_TARGET&quot;</span><span class="s0">,</span><span class="s1">&quot;packagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;isImport&quot;</span><span class="s0">,</span><span class="s1">&quot;relatedError&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_MODULE_NOT_FOUND&quot;</span><span class="s0">,</span><span class="s1">&quot;exactUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_NETWORK_IMPORT_DISALLOWED&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_PACKAGE_IMPORT_NOT_DEFINED&quot;</span><span class="s0">,</span><span class="s1">&quot;specifier&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_PACKAGE_PATH_NOT_EXPORTED&quot;</span><span class="s0">,</span><span class="s1">&quot;subpath&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_UNSUPPORTED_DIR_IMPORT&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_UNSUPPORTED_RESOLVE_REQUEST&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_UNKNOWN_FILE_EXTENSION&quot;</span><span class="s0">,</span><span class="s1">&quot;extension&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_INVALID_ARG_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;inspected&quot;</span><span class="s0">,</span><span class="s1">&quot;inspect&quot;</span><span class="s0">,</span><span class="s1">&quot;sym&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;makeNodeErrorWithCode&quot;</span><span class="s0">,</span><span class="s1">&quot;Base&quot;</span><span class="s0">,</span><span class="s1">&quot;NodeError&quot;</span><span class="s0">,</span><span class="s1">&quot;parameters&quot;</span><span class="s0">,</span><span class="s1">&quot;limit&quot;</span><span class="s0">,</span><span class="s1">&quot;stackTraceLimit&quot;</span><span class="s0">,</span><span class="s1">&quot;isErrorStackTraceLimitWritable&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;getMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;defineProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;enumerable&quot;</span><span class="s0">,</span><span class="s1">&quot;writable&quot;</span><span class="s0">,</span><span class="s1">&quot;configurable&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;captureLargerStackTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;v8&quot;</span><span class="s0">,</span><span class="s1">&quot;startupSnapshot&quot;</span><span class="s0">,</span><span class="s1">&quot;isBuildingSnapshot&quot;</span><span class="s0">,</span><span class="s1">&quot;_unused&quot;</span><span class="s0">,</span><span class="s1">&quot;desc&quot;</span><span class="s0">,</span><span class="s1">&quot;isExtensible&quot;</span><span class="s0">,</span><span class="s1">&quot;hideStackFrames&quot;</span><span class="s0">,</span><span class="s1">&quot;wrappedFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;hidden&quot;</span><span class="s0">,</span><span class="s1">&quot;stackTraceLimitIsWritable&quot;</span><span class="s0">,</span><span class="s1">&quot;Number&quot;</span><span class="s0">,</span><span class="s1">&quot;POSITIVE_INFINITY&quot;</span><span class="s0">,</span><span class="s1">&quot;captureStackTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;self&quot;</span><span class="s0">,</span><span class="s1">&quot;Reflect&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;regex&quot;</span><span class="s0">,</span><span class="s1">&quot;expectedLength&quot;</span><span class="s0">,</span><span class="s1">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">&quot;format&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;depth&quot;</span><span class="s0">,</span><span class="s1">&quot;colors&quot;</span><span class="s0">,</span><span class="s1">&quot;hasOwnProperty$1&quot;</span><span class="s0">,</span><span class="s1">&quot;ERR_INVALID_PACKAGE_CONFIG$1&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;read&quot;</span><span class="s0">,</span><span class="s1">&quot;jsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;existing&quot;</span><span class="s0">,</span><span class="s1">&quot;string&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;readFileSync&quot;</span><span class="s0">,</span><span class="s1">&quot;toNamespacedPath&quot;</span><span class="s0">,</span><span class="s1">&quot;exception&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;exists&quot;</span><span class="s0">,</span><span class="s1">&quot;pjsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;main&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;imports&quot;</span><span class="s0">,</span><span class="s1">&quot;parsed&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;error_&quot;</span><span class="s0">,</span><span class="s1">&quot;cause&quot;</span><span class="s0">,</span><span class="s1">&quot;fileURLToPath&quot;</span><span class="s0">,</span><span class="s1">&quot;getPackageScopeConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;packageJSONUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;packageJSONPath&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;packageConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;lastPackageJSONUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;getPackageType&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;extensionFormatMap&quot;</span><span class="s0">,</span><span class="s1">&quot;mimeToFormat&quot;</span><span class="s0">,</span><span class="s1">&quot;mime&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;protocolHandlers&quot;</span><span class="s0">,</span><span class="s1">&quot;getDataProtocolModuleFormat&quot;</span><span class="s0">,</span><span class="s1">&quot;getFileProtocolModuleFormat&quot;</span><span class="s0">,</span><span class="s1">&quot;getHttpProtocolModuleFormat&quot;</span><span class="s0">,</span><span class="s1">&quot;node:&quot;</span><span class="s0">,</span><span class="s1">&quot;extname&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;codePointAt&quot;</span><span class="s0">,</span><span class="s1">&quot;_context&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;packageType&quot;</span><span class="s0">,</span><span class="s1">&quot;filepath&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultGetFormatWithoutErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;DEFAULT_CONDITIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;freeze&quot;</span><span class="s0">,</span><span class="s1">&quot;DEFAULT_CONDITIONS_SET&quot;</span><span class="s0">,</span><span class="s1">&quot;getDefaultConditions&quot;</span><span class="s0">,</span><span class="s1">&quot;getDefaultConditionsSet&quot;</span><span class="s0">,</span><span class="s1">&quot;getConditionsSet&quot;</span><span class="s0">,</span><span class="s1">&quot;conditions&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExpPrototypeSymbolReplace&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;prototype&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;own&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidSegmentRegEx&quot;</span><span class="s0">,</span><span class="s1">&quot;deprecatedInvalidSegmentRegEx&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidPackageNameRegEx&quot;</span><span class="s0">,</span><span class="s1">&quot;patternRegEx&quot;</span><span class="s0">,</span><span class="s1">&quot;encodedSeparatorRegEx&quot;</span><span class="s0">,</span><span class="s1">&quot;emittedPackageWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;doubleSlashRegEx&quot;</span><span class="s0">,</span><span class="s1">&quot;emitInvalidSegmentDeprecation&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;packageJsonUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;internal&quot;</span><span class="s0">,</span><span class="s1">&quot;isTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;noDeprecation&quot;</span><span class="s0">,</span><span class="s1">&quot;double&quot;</span><span class="s0">,</span><span class="s1">&quot;emitWarning&quot;</span><span class="s0">,</span><span class="s1">&quot;emitLegacyIndexDeprecation&quot;</span><span class="s0">,</span><span class="s1">&quot;parentURL&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;urlPath&quot;</span><span class="s0">,</span><span class="s1">&quot;URL$1&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;tryStatSync&quot;</span><span class="s0">,</span><span class="s1">&quot;statSync&quot;</span><span class="s0">,</span><span class="s1">&quot;_unused2&quot;</span><span class="s0">,</span><span class="s1">&quot;fileExists&quot;</span><span class="s0">,</span><span class="s1">&quot;stats&quot;</span><span class="s0">,</span><span class="s1">&quot;throwIfNoEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;isFile&quot;</span><span class="s0">,</span><span class="s1">&quot;legacyMainResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;guess&quot;</span><span class="s0">,</span><span class="s1">&quot;tries&quot;</span><span class="s0">,</span><span class="s1">&quot;finalizeResolution&quot;</span><span class="s0">,</span><span class="s1">&quot;preserveSymlinks&quot;</span><span class="s0">,</span><span class="s1">&quot;filePath&quot;</span><span class="s0">,</span><span class="s1">&quot;isDirectory&quot;</span><span class="s0">,</span><span class="s1">&quot;real&quot;</span><span class="s0">,</span><span class="s1">&quot;realpathSync&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;pathToFileURL&quot;</span><span class="s0">,</span><span class="s1">&quot;sep&quot;</span><span class="s0">,</span><span class="s1">&quot;importNotDefined&quot;</span><span class="s0">,</span><span class="s1">&quot;exportsNotFound&quot;</span><span class="s0">,</span><span class="s1">&quot;throwInvalidSubpath&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidPackageTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvePackageTargetString&quot;</span><span class="s0">,</span><span class="s1">&quot;pattern&quot;</span><span class="s0">,</span><span class="s1">&quot;isPathMap&quot;</span><span class="s0">,</span><span class="s1">&quot;isURL&quot;</span><span class="s0">,</span><span class="s1">&quot;_unused3&quot;</span><span class="s0">,</span><span class="s1">&quot;exportTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;packageResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedPath&quot;</span><span class="s0">,</span><span class="s1">&quot;isArrayIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;keyNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvePackageTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;packageSubpath&quot;</span><span class="s0">,</span><span class="s1">&quot;targetList&quot;</span><span class="s0">,</span><span class="s1">&quot;lastException&quot;</span><span class="s0">,</span><span class="s1">&quot;targetItem&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveResult&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;getOwnPropertyNames&quot;</span><span class="s0">,</span><span class="s1">&quot;conditionalTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;isConditionalExportsMainSugar&quot;</span><span class="s0">,</span><span class="s1">&quot;isConditionalSugar&quot;</span><span class="s0">,</span><span class="s1">&quot;keyIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;currentIsConditionalSugar&quot;</span><span class="s0">,</span><span class="s1">&quot;emitTrailingSlashPatternDeprecation&quot;</span><span class="s0">,</span><span class="s1">&quot;pjsonUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;packageExportsResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;bestMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;bestMatchSubpath&quot;</span><span class="s0">,</span><span class="s1">&quot;patternIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;patternTrailer&quot;</span><span class="s0">,</span><span class="s1">&quot;patternKeyCompare&quot;</span><span class="s0">,</span><span class="s1">&quot;lastIndexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;b&quot;</span><span class="s0">,</span><span class="s1">&quot;aPatternIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;bPatternIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;baseLengthA&quot;</span><span class="s0">,</span><span class="s1">&quot;baseLengthB&quot;</span><span class="s0">,</span><span class="s1">&quot;packageImportsResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;parsePackageName&quot;</span><span class="s0">,</span><span class="s1">&quot;separatorIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;validPackageName&quot;</span><span class="s0">,</span><span class="s1">&quot;isScoped&quot;</span><span class="s0">,</span><span class="s1">&quot;packageName&quot;</span><span class="s0">,</span><span class="s1">&quot;builtinModules&quot;</span><span class="s0">,</span><span class="s1">&quot;packageJsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;lastPath&quot;</span><span class="s0">,</span><span class="s1">&quot;stat&quot;</span><span class="s0">,</span><span class="s1">&quot;isRelativeSpecifier&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldBeTreatedAsRelativeOrAbsolutePath&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;isData&quot;</span><span class="s0">,</span><span class="s1">&quot;isRemote&quot;</span><span class="s0">,</span><span class="s1">&quot;checkIfDisallowedImport&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedParentURL&quot;</span><span class="s0">,</span><span class="s1">&quot;parentProtocol&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedProtocol&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;throwIfInvalidParentURL&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;_unused4&quot;</span><span class="s0">,</span><span class="s1">&quot;_unused5&quot;</span><span class="s0">,</span><span class="s1">&quot;maybeReturn&quot;</span><span class="s0">,</span><span class="s1">&quot;parent&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/vendor/import-meta-resolve.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;</span><span class="s3">\n</span><span class="s1">/****************************************************************************</span><span class="s3">\\\n </span><span class="s1">*                         NOTE FROM BABEL AUTHORS                          *</span><span class="s3">\n </span><span class="s1">* This file is inlined from https://github.com/wooorm/import-meta-resolve, *</span><span class="s3">\n </span><span class="s1">* because we need to compile it to CommonJS.                               *</span><span class="s3">\n\\</span><span class="s1">****************************************************************************/</span><span class="s3">\n\n</span><span class="s1">/*</span><span class="s3">\n</span><span class="s1">(The MIT License)</span><span class="s3">\n\n</span><span class="s1">Copyright (c) 2021 Titus Wormer &lt;mailto:tituswormer@gmail.com&gt;</span><span class="s3">\n\n</span><span class="s1">Permission is hereby granted, free of charge, to any person obtaining</span><span class="s3">\n</span><span class="s1">a copy of this software and associated documentation files (the</span><span class="s3">\n</span><span class="s1">'Software'), to deal in the Software without restriction, including</span><span class="s3">\n</span><span class="s1">without limitation the rights to use, copy, modify, merge, publish,</span><span class="s3">\n</span><span class="s1">distribute, sublicense, and/or sell copies of the Software, and to</span><span class="s3">\n</span><span class="s1">permit persons to whom the Software is furnished to do so, subject to</span><span class="s3">\n</span><span class="s1">the following conditions:</span><span class="s3">\n\n</span><span class="s1">The above copyright notice and this permission notice shall be</span><span class="s3">\n</span><span class="s1">included in all copies or substantial portions of the Software.</span><span class="s3">\n\n</span><span class="s1">THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,</span><span class="s3">\n</span><span class="s1">EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span><span class="s3">\n</span><span class="s1">MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span><span class="s3">\n</span><span class="s1">IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY</span><span class="s3">\n</span><span class="s1">CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,</span><span class="s3">\n</span><span class="s1">TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span><span class="s3">\n</span><span class="s1">SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span><span class="s3">\n\n</span><span class="s1">---</span><span class="s3">\n\n</span><span class="s1">This is a derivative work based on:</span><span class="s3">\n</span><span class="s1">&lt;https://github.com/nodejs/node&gt;.</span><span class="s3">\n</span><span class="s1">Which is licensed:</span><span class="s3">\n\n\&quot;\&quot;\&quot;\n</span><span class="s1">Copyright Node.js contributors. All rights reserved.</span><span class="s3">\n\n</span><span class="s1">Permission is hereby granted, free of charge, to any person obtaining a copy</span><span class="s3">\n</span><span class="s1">of this software and associated documentation files (the </span><span class="s3">\&quot;</span><span class="s1">Software</span><span class="s3">\&quot;</span><span class="s1">), to</span><span class="s3">\n</span><span class="s1">deal in the Software without restriction, including without limitation the</span><span class="s3">\n</span><span class="s1">rights to use, copy, modify, merge, publish, distribute, sublicense, and/or</span><span class="s3">\n</span><span class="s1">sell copies of the Software, and to permit persons to whom the Software is</span><span class="s3">\n</span><span class="s1">furnished to do so, subject to the following conditions:</span><span class="s3">\n\n</span><span class="s1">The above copyright notice and this permission notice shall be included in</span><span class="s3">\n</span><span class="s1">all copies or substantial portions of the Software.</span><span class="s3">\n\n</span><span class="s1">THE SOFTWARE IS PROVIDED </span><span class="s3">\&quot;</span><span class="s1">AS IS</span><span class="s3">\&quot;</span><span class="s1">, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><span class="s3">\n</span><span class="s1">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><span class="s3">\n</span><span class="s1">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><span class="s3">\n</span><span class="s1">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><span class="s3">\n</span><span class="s1">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span><span class="s3">\n</span><span class="s1">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS</span><span class="s3">\n</span><span class="s1">IN THE SOFTWARE.</span><span class="s3">\n\&quot;\&quot;\&quot;\n\n</span><span class="s1">This license applies to parts of Node.js originating from the</span><span class="s3">\n</span><span class="s1">https://github.com/joyent/node repository:</span><span class="s3">\n\n\&quot;\&quot;\&quot;\n</span><span class="s1">Copyright Joyent, Inc. and other Node contributors. All rights reserved.</span><span class="s3">\n</span><span class="s1">Permission is hereby granted, free of charge, to any person obtaining a copy</span><span class="s3">\n</span><span class="s1">of this software and associated documentation files (the </span><span class="s3">\&quot;</span><span class="s1">Software</span><span class="s3">\&quot;</span><span class="s1">), to</span><span class="s3">\n</span><span class="s1">deal in the Software without restriction, including without limitation the</span><span class="s3">\n</span><span class="s1">rights to use, copy, modify, merge, publish, distribute, sublicense, and/or</span><span class="s3">\n</span><span class="s1">sell copies of the Software, and to permit persons to whom the Software is</span><span class="s3">\n</span><span class="s1">furnished to do so, subject to the following conditions:</span><span class="s3">\n\n</span><span class="s1">The above copyright notice and this permission notice shall be included in</span><span class="s3">\n</span><span class="s1">all copies or substantial portions of the Software.</span><span class="s3">\n\n</span><span class="s1">THE SOFTWARE IS PROVIDED </span><span class="s3">\&quot;</span><span class="s1">AS IS</span><span class="s3">\&quot;</span><span class="s1">, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><span class="s3">\n</span><span class="s1">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><span class="s3">\n</span><span class="s1">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><span class="s3">\n</span><span class="s1">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><span class="s3">\n</span><span class="s1">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span><span class="s3">\n</span><span class="s1">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS</span><span class="s3">\n</span><span class="s1">IN THE SOFTWARE.</span><span class="s3">\n\&quot;\&quot;\&quot;\n</span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import assert from 'assert';</span><span class="s3">\n</span><span class="s1">import fs, { realpathSync, statSync } from 'fs';</span><span class="s3">\n</span><span class="s1">import process from 'process';</span><span class="s3">\n</span><span class="s1">import { fileURLToPath, URL as URL$1, pathToFileURL } from 'url';</span><span class="s3">\n</span><span class="s1">import path from 'path';</span><span class="s3">\n</span><span class="s1">import { builtinModules } from 'module';</span><span class="s3">\n</span><span class="s1">import v8 from 'v8';</span><span class="s3">\n</span><span class="s1">import { format, inspect } from 'util';</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @typedef ErrnoExceptionFields</span><span class="s3">\n </span><span class="s1">* @property {number | undefined} [errnode]</span><span class="s3">\n </span><span class="s1">* @property {string | undefined} [code]</span><span class="s3">\n </span><span class="s1">* @property {string | undefined} [path]</span><span class="s3">\n </span><span class="s1">* @property {string | undefined} [syscall]</span><span class="s3">\n </span><span class="s1">* @property {string | undefined} [url]</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @typedef {Error &amp; ErrnoExceptionFields} ErrnoException</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n\n</span><span class="s1">const own$1 = {}.hasOwnProperty;</span><span class="s3">\n\n</span><span class="s1">const classRegExp = /^([A-Z][a-z</span><span class="s3">\\</span><span class="s1">d]*)+$/;</span><span class="s3">\n</span><span class="s1">// Sorted by a rough estimate on most frequently used entries.</span><span class="s3">\n</span><span class="s1">const kTypes = new Set([</span><span class="s3">\n  </span><span class="s1">'string',</span><span class="s3">\n  </span><span class="s1">'function',</span><span class="s3">\n  </span><span class="s1">'number',</span><span class="s3">\n  </span><span class="s1">'object',</span><span class="s3">\n  </span><span class="s1">// Accept 'Function' and 'Object' as alternative to the lower cased version.</span><span class="s3">\n  </span><span class="s1">'Function',</span><span class="s3">\n  </span><span class="s1">'Object',</span><span class="s3">\n  </span><span class="s1">'boolean',</span><span class="s3">\n  </span><span class="s1">'bigint',</span><span class="s3">\n  </span><span class="s1">'symbol'</span><span class="s3">\n</span><span class="s1">]);</span><span class="s3">\n\n</span><span class="s1">const codes = {};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Create a list string in the form like 'A and B' or 'A, B, ..., and Z'.</span><span class="s3">\n </span><span class="s1">* We cannot use Intl.ListFormat because it's not available in</span><span class="s3">\n </span><span class="s1">* --without-intl builds.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param {Array&lt;string&gt;} array</span><span class="s3">\n </span><span class="s1">*   An array of strings.</span><span class="s3">\n </span><span class="s1">* @param {string} [type]</span><span class="s3">\n </span><span class="s1">*   The list type to be inserted before the last element.</span><span class="s3">\n </span><span class="s1">* @returns {string}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function formatList(array, type = 'and') {</span><span class="s3">\n  </span><span class="s1">return array.length &lt; 3</span><span class="s3">\n    </span><span class="s1">? array.join(` ${type} `)</span><span class="s3">\n    </span><span class="s1">: `${array.slice(0, -1).join(', ')}, ${type} ${array[array.length - 1]}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/** @type {Map&lt;string, MessageFunction | string&gt;} */</span><span class="s3">\n</span><span class="s1">const messages = new Map();</span><span class="s3">\n</span><span class="s1">const nodeInternalPrefix = '__node_internal_';</span><span class="s3">\n</span><span class="s1">/** @type {number} */</span><span class="s3">\n</span><span class="s1">let userStackTraceLimit;</span><span class="s3">\n\n</span><span class="s1">codes.ERR_INVALID_ARG_TYPE = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_INVALID_ARG_TYPE',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} name</span><span class="s3">\n   </span><span class="s1">* @param {Array&lt;string&gt; | string} expected</span><span class="s3">\n   </span><span class="s1">* @param {unknown} actual</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(name, expected, actual) =&gt; {</span><span class="s3">\n    </span><span class="s1">assert(typeof name === 'string', </span><span class="s3">\&quot;</span><span class="s1">'name' must be a string</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (!Array.isArray(expected)) {</span><span class="s3">\n      </span><span class="s1">expected = [expected];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let message = 'The ';</span><span class="s3">\n    </span><span class="s1">if (name.endsWith(' argument')) {</span><span class="s3">\n      </span><span class="s1">// For cases like 'first argument'</span><span class="s3">\n      </span><span class="s1">message += `${name} `;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">const type = name.includes('.') ? 'property' : 'argument';</span><span class="s3">\n      </span><span class="s1">message += `</span><span class="s3">\&quot;</span><span class="s1">${name}</span><span class="s3">\&quot; </span><span class="s1">${type} `;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">message += 'must be ';</span><span class="s3">\n\n    </span><span class="s1">/** @type {Array&lt;string&gt;} */</span><span class="s3">\n    </span><span class="s1">const types = [];</span><span class="s3">\n    </span><span class="s1">/** @type {Array&lt;string&gt;} */</span><span class="s3">\n    </span><span class="s1">const instances = [];</span><span class="s3">\n    </span><span class="s1">/** @type {Array&lt;string&gt;} */</span><span class="s3">\n    </span><span class="s1">const other = [];</span><span class="s3">\n\n    </span><span class="s1">for (const value of expected) {</span><span class="s3">\n      </span><span class="s1">assert(</span><span class="s3">\n        </span><span class="s1">typeof value === 'string',</span><span class="s3">\n        </span><span class="s1">'All expected entries have to be of type string'</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n\n      </span><span class="s1">if (kTypes.has(value)) {</span><span class="s3">\n        </span><span class="s1">types.push(value.toLowerCase());</span><span class="s3">\n      </span><span class="s1">} else if (classRegExp.exec(value) === null) {</span><span class="s3">\n        </span><span class="s1">assert(</span><span class="s3">\n          </span><span class="s1">value !== 'object',</span><span class="s3">\n          </span><span class="s1">'The value </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">should be written as </span><span class="s3">\&quot;</span><span class="s1">Object</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">other.push(value);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">instances.push(value);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Special handle `object` in case other instances are allowed to outline</span><span class="s3">\n    </span><span class="s1">// the differences between each other.</span><span class="s3">\n    </span><span class="s1">if (instances.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">const pos = types.indexOf('object');</span><span class="s3">\n      </span><span class="s1">if (pos !== -1) {</span><span class="s3">\n        </span><span class="s1">types.slice(pos, 1);</span><span class="s3">\n        </span><span class="s1">instances.push('Object');</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (types.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">message += `${types.length &gt; 1 ? 'one of type' : 'of type'} ${formatList(</span><span class="s3">\n        </span><span class="s1">types,</span><span class="s3">\n        </span><span class="s1">'or'</span><span class="s3">\n      </span><span class="s1">)}`;</span><span class="s3">\n      </span><span class="s1">if (instances.length &gt; 0 || other.length &gt; 0) message += ' or ';</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (instances.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">message += `an instance of ${formatList(instances, 'or')}`;</span><span class="s3">\n      </span><span class="s1">if (other.length &gt; 0) message += ' or ';</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (other.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">if (other.length &gt; 1) {</span><span class="s3">\n        </span><span class="s1">message += `one of ${formatList(other, 'or')}`;</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">if (other[0].toLowerCase() !== other[0]) message += 'an ';</span><span class="s3">\n        </span><span class="s1">message += `${other[0]}`;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">message += `. Received ${determineSpecificType(actual)}`;</span><span class="s3">\n\n    </span><span class="s1">return message</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">TypeError</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_INVALID_MODULE_SPECIFIER = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_INVALID_MODULE_SPECIFIER',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} request</span><span class="s3">\n   </span><span class="s1">* @param {string} reason</span><span class="s3">\n   </span><span class="s1">* @param {string} [base]</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(request, reason, base = undefined) =&gt; {</span><span class="s3">\n    </span><span class="s1">return `Invalid module </span><span class="s3">\&quot;</span><span class="s1">${request}</span><span class="s3">\&quot; </span><span class="s1">${reason}${</span><span class="s3">\n      </span><span class="s1">base ? ` imported from ${base}` : ''</span><span class="s3">\n    </span><span class="s1">}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">TypeError</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_INVALID_PACKAGE_CONFIG = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_INVALID_PACKAGE_CONFIG',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} path</span><span class="s3">\n   </span><span class="s1">* @param {string} [base]</span><span class="s3">\n   </span><span class="s1">* @param {string} [message]</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(path, base, message) =&gt; {</span><span class="s3">\n    </span><span class="s1">return `Invalid package config ${path}${</span><span class="s3">\n      </span><span class="s1">base ? ` while importing ${base}` : ''</span><span class="s3">\n    </span><span class="s1">}${message ? `. ${message}` : ''}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">Error</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_INVALID_PACKAGE_TARGET = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_INVALID_PACKAGE_TARGET',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} packagePath</span><span class="s3">\n   </span><span class="s1">* @param {string} key</span><span class="s3">\n   </span><span class="s1">* @param {unknown} target</span><span class="s3">\n   </span><span class="s1">* @param {boolean} [isImport=false]</span><span class="s3">\n   </span><span class="s1">* @param {string} [base]</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(packagePath, key, target, isImport = false, base = undefined) =&gt; {</span><span class="s3">\n    </span><span class="s1">const relatedError =</span><span class="s3">\n      </span><span class="s1">typeof target === 'string' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!isImport &amp;&amp;</span><span class="s3">\n      </span><span class="s1">target.length &gt; 0 &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!target.startsWith('./');</span><span class="s3">\n    </span><span class="s1">if (key === '.') {</span><span class="s3">\n      </span><span class="s1">assert(isImport === false);</span><span class="s3">\n      </span><span class="s1">return (</span><span class="s3">\n        </span><span class="s1">`Invalid </span><span class="s3">\&quot;</span><span class="s1">exports</span><span class="s3">\&quot; </span><span class="s1">main target ${JSON.stringify(target)} defined ` +</span><span class="s3">\n        </span><span class="s1">`in the package config ${packagePath}package.json${</span><span class="s3">\n          </span><span class="s1">base ? ` imported from ${base}` : ''</span><span class="s3">\n        </span><span class="s1">}${relatedError ? '; targets must start with </span><span class="s3">\&quot;</span><span class="s1">./</span><span class="s3">\&quot;</span><span class="s1">' : ''}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return `Invalid </span><span class="s3">\&quot;</span><span class="s1">${</span><span class="s3">\n      </span><span class="s1">isImport ? 'imports' : 'exports'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\&quot; </span><span class="s1">target ${JSON.stringify(</span><span class="s3">\n      </span><span class="s1">target</span><span class="s3">\n    </span><span class="s1">)} defined for '${key}' in the package config ${packagePath}package.json${</span><span class="s3">\n      </span><span class="s1">base ? ` imported from ${base}` : ''</span><span class="s3">\n    </span><span class="s1">}${relatedError ? '; targets must start with </span><span class="s3">\&quot;</span><span class="s1">./</span><span class="s3">\&quot;</span><span class="s1">' : ''}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">Error</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_MODULE_NOT_FOUND = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_MODULE_NOT_FOUND',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} path</span><span class="s3">\n   </span><span class="s1">* @param {string} base</span><span class="s3">\n   </span><span class="s1">* @param {boolean} [exactUrl]</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(path, base, exactUrl = false) =&gt; {</span><span class="s3">\n    </span><span class="s1">return `Cannot find ${</span><span class="s3">\n      </span><span class="s1">exactUrl ? 'module' : 'package'</span><span class="s3">\n    </span><span class="s1">} '${path}' imported from ${base}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">Error</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_NETWORK_IMPORT_DISALLOWED = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_NETWORK_IMPORT_DISALLOWED',</span><span class="s3">\n  \&quot;</span><span class="s1">import of '%s' by %s is not supported: %s</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">Error</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_PACKAGE_IMPORT_NOT_DEFINED = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_PACKAGE_IMPORT_NOT_DEFINED',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} specifier</span><span class="s3">\n   </span><span class="s1">* @param {string} packagePath</span><span class="s3">\n   </span><span class="s1">* @param {string} base</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(specifier, packagePath, base) =&gt; {</span><span class="s3">\n    </span><span class="s1">return `Package import specifier </span><span class="s3">\&quot;</span><span class="s1">${specifier}</span><span class="s3">\&quot; </span><span class="s1">is not defined${</span><span class="s3">\n      </span><span class="s1">packagePath ? ` in package ${packagePath}package.json` : ''</span><span class="s3">\n    </span><span class="s1">} imported from ${base}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">TypeError</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_PACKAGE_PATH_NOT_EXPORTED = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_PACKAGE_PATH_NOT_EXPORTED',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} packagePath</span><span class="s3">\n   </span><span class="s1">* @param {string} subpath</span><span class="s3">\n   </span><span class="s1">* @param {string} [base]</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(packagePath, subpath, base = undefined) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (subpath === '.')</span><span class="s3">\n      </span><span class="s1">return `No </span><span class="s3">\&quot;</span><span class="s1">exports</span><span class="s3">\&quot; </span><span class="s1">main defined in ${packagePath}package.json${</span><span class="s3">\n        </span><span class="s1">base ? ` imported from ${base}` : ''</span><span class="s3">\n      </span><span class="s1">}`</span><span class="s3">\n    </span><span class="s1">return `Package subpath '${subpath}' is not defined by </span><span class="s3">\&quot;</span><span class="s1">exports</span><span class="s3">\&quot; </span><span class="s1">in ${packagePath}package.json${</span><span class="s3">\n      </span><span class="s1">base ? ` imported from ${base}` : ''</span><span class="s3">\n    </span><span class="s1">}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">Error</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_UNSUPPORTED_DIR_IMPORT = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_UNSUPPORTED_DIR_IMPORT',</span><span class="s3">\n  \&quot;</span><span class="s1">Directory import '%s' is not supported </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n    </span><span class="s1">'resolving ES modules imported from %s',</span><span class="s3">\n  </span><span class="s1">Error</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_UNSUPPORTED_RESOLVE_REQUEST = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_UNSUPPORTED_RESOLVE_REQUEST',</span><span class="s3">\n  </span><span class="s1">'Failed to resolve module specifier </span><span class="s3">\&quot;</span><span class="s1">%s</span><span class="s3">\&quot; </span><span class="s1">from </span><span class="s3">\&quot;</span><span class="s1">%s</span><span class="s3">\&quot;</span><span class="s1">: Invalid relative URL or base scheme is not hierarchical.',</span><span class="s3">\n  </span><span class="s1">TypeError</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_UNKNOWN_FILE_EXTENSION = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_UNKNOWN_FILE_EXTENSION',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} extension</span><span class="s3">\n   </span><span class="s1">* @param {string} path</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(extension, path) =&gt; {</span><span class="s3">\n    </span><span class="s1">return `Unknown file extension </span><span class="s3">\&quot;</span><span class="s1">${extension}</span><span class="s3">\&quot; </span><span class="s1">for ${path}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">TypeError</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">codes.ERR_INVALID_ARG_VALUE = createError(</span><span class="s3">\n  </span><span class="s1">'ERR_INVALID_ARG_VALUE',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {string} name</span><span class="s3">\n   </span><span class="s1">* @param {unknown} value</span><span class="s3">\n   </span><span class="s1">* @param {string} [reason='is invalid']</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">(name, value, reason = 'is invalid') =&gt; {</span><span class="s3">\n    </span><span class="s1">let inspected = inspect(value);</span><span class="s3">\n\n    </span><span class="s1">if (inspected.length &gt; 128) {</span><span class="s3">\n      </span><span class="s1">inspected = `${inspected.slice(0, 128)}...`;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const type = name.includes('.') ? 'property' : 'argument';</span><span class="s3">\n\n    </span><span class="s1">return `The ${type} '${name}' ${reason}. Received ${inspected}`</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">TypeError</span><span class="s3">\n  </span><span class="s1">// Note: extra classes have been shaken out.</span><span class="s3">\n  </span><span class="s1">// , RangeError</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Utility function for registering the error codes. Only used here. Exported</span><span class="s3">\n </span><span class="s1">* *only* to allow for testing.</span><span class="s3">\n </span><span class="s1">* @param {string} sym</span><span class="s3">\n </span><span class="s1">* @param {MessageFunction | string} value</span><span class="s3">\n </span><span class="s1">* @param {ErrorConstructor} constructor</span><span class="s3">\n </span><span class="s1">* @returns {new (...parameters: Array&lt;any&gt;) =&gt; Error}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function createError(sym, value, constructor) {</span><span class="s3">\n  </span><span class="s1">// Special case for SystemError that formats the error message differently</span><span class="s3">\n  </span><span class="s1">// The SystemErrors only have SystemError as their base classes.</span><span class="s3">\n  </span><span class="s1">messages.set(sym, value);</span><span class="s3">\n\n  </span><span class="s1">return makeNodeErrorWithCode(constructor, sym)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {ErrorConstructor} Base</span><span class="s3">\n </span><span class="s1">* @param {string} key</span><span class="s3">\n </span><span class="s1">* @returns {ErrorConstructor}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function makeNodeErrorWithCode(Base, key) {</span><span class="s3">\n  </span><span class="s1">// @ts-expect-error It’s a Node error.</span><span class="s3">\n  </span><span class="s1">return NodeError</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {Array&lt;unknown&gt;} parameters</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">function NodeError(...parameters) {</span><span class="s3">\n    </span><span class="s1">const limit = Error.stackTraceLimit;</span><span class="s3">\n    </span><span class="s1">if (isErrorStackTraceLimitWritable()) Error.stackTraceLimit = 0;</span><span class="s3">\n    </span><span class="s1">const error = new Base();</span><span class="s3">\n    </span><span class="s1">// Reset the limit and setting the name property.</span><span class="s3">\n    </span><span class="s1">if (isErrorStackTraceLimitWritable()) Error.stackTraceLimit = limit;</span><span class="s3">\n    </span><span class="s1">const message = getMessage(key, parameters, error);</span><span class="s3">\n    </span><span class="s1">Object.defineProperties(error, {</span><span class="s3">\n      </span><span class="s1">// Note: no need to implement `kIsNodeError` symbol, would be hard,</span><span class="s3">\n      </span><span class="s1">// probably.</span><span class="s3">\n      </span><span class="s1">message: {</span><span class="s3">\n        </span><span class="s1">value: message,</span><span class="s3">\n        </span><span class="s1">enumerable: false,</span><span class="s3">\n        </span><span class="s1">writable: true,</span><span class="s3">\n        </span><span class="s1">configurable: true</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">toString: {</span><span class="s3">\n        </span><span class="s1">/** @this {Error} */</span><span class="s3">\n        </span><span class="s1">value() {</span><span class="s3">\n          </span><span class="s1">return `${this.name} [${key}]: ${this.message}`</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">enumerable: false,</span><span class="s3">\n        </span><span class="s1">writable: true,</span><span class="s3">\n        </span><span class="s1">configurable: true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">captureLargerStackTrace(error);</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error It’s a Node error.</span><span class="s3">\n    </span><span class="s1">error.code = key;</span><span class="s3">\n    </span><span class="s1">return error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @returns {boolean}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function isErrorStackTraceLimitWritable() {</span><span class="s3">\n  </span><span class="s1">// Do no touch Error.stackTraceLimit as V8 would attempt to install</span><span class="s3">\n  </span><span class="s1">// it again during deserialization.</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">if (v8.startupSnapshot.isBuildingSnapshot()) {</span><span class="s3">\n      </span><span class="s1">return false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} catch {}</span><span class="s3">\n\n  </span><span class="s1">const desc = Object.getOwnPropertyDescriptor(Error, 'stackTraceLimit');</span><span class="s3">\n  </span><span class="s1">if (desc === undefined) {</span><span class="s3">\n    </span><span class="s1">return Object.isExtensible(Error)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return own$1.call(desc, 'writable') &amp;&amp; desc.writable !== undefined</span><span class="s3">\n    </span><span class="s1">? desc.writable</span><span class="s3">\n    </span><span class="s1">: desc.set !== undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This function removes unnecessary frames from Node.js core errors.</span><span class="s3">\n </span><span class="s1">* @template {(...parameters: unknown[]) =&gt; unknown} T</span><span class="s3">\n </span><span class="s1">* @param {T} wrappedFunction</span><span class="s3">\n </span><span class="s1">* @returns {T}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function hideStackFrames(wrappedFunction) {</span><span class="s3">\n  </span><span class="s1">// We rename the functions that will be hidden to cut off the stacktrace</span><span class="s3">\n  </span><span class="s1">// at the outermost one</span><span class="s3">\n  </span><span class="s1">const hidden = nodeInternalPrefix + wrappedFunction.name;</span><span class="s3">\n  </span><span class="s1">Object.defineProperty(wrappedFunction, 'name', {value: hidden});</span><span class="s3">\n  </span><span class="s1">return wrappedFunction</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const captureLargerStackTrace = hideStackFrames(</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @param {Error} error</span><span class="s3">\n   </span><span class="s1">* @returns {Error}</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">// @ts-expect-error: fine</span><span class="s3">\n  </span><span class="s1">function (error) {</span><span class="s3">\n    </span><span class="s1">const stackTraceLimitIsWritable = isErrorStackTraceLimitWritable();</span><span class="s3">\n    </span><span class="s1">if (stackTraceLimitIsWritable) {</span><span class="s3">\n      </span><span class="s1">userStackTraceLimit = Error.stackTraceLimit;</span><span class="s3">\n      </span><span class="s1">Error.stackTraceLimit = Number.POSITIVE_INFINITY;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">Error.captureStackTrace(error);</span><span class="s3">\n\n    </span><span class="s1">// Reset the limit</span><span class="s3">\n    </span><span class="s1">if (stackTraceLimitIsWritable) Error.stackTraceLimit = userStackTraceLimit;</span><span class="s3">\n\n    </span><span class="s1">return error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} key</span><span class="s3">\n </span><span class="s1">* @param {Array&lt;unknown&gt;} parameters</span><span class="s3">\n </span><span class="s1">* @param {Error} self</span><span class="s3">\n </span><span class="s1">* @returns {string}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getMessage(key, parameters, self) {</span><span class="s3">\n  </span><span class="s1">const message = messages.get(key);</span><span class="s3">\n  </span><span class="s1">assert(message !== undefined, 'expected `message` to be found');</span><span class="s3">\n\n  </span><span class="s1">if (typeof message === 'function') {</span><span class="s3">\n    </span><span class="s1">assert(</span><span class="s3">\n      </span><span class="s1">message.length &lt;= parameters.length, // Default options do not count.</span><span class="s3">\n      </span><span class="s1">`Code: ${key}; The provided arguments length (${parameters.length}) does not ` +</span><span class="s3">\n        </span><span class="s1">`match the required ones (${message.length}).`</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">return Reflect.apply(message, self, parameters)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const regex = /%[dfijoOs]/g;</span><span class="s3">\n  </span><span class="s1">let expectedLength = 0;</span><span class="s3">\n  </span><span class="s1">while (regex.exec(message) !== null) expectedLength++;</span><span class="s3">\n  </span><span class="s1">assert(</span><span class="s3">\n    </span><span class="s1">expectedLength === parameters.length,</span><span class="s3">\n    </span><span class="s1">`Code: ${key}; The provided arguments length (${parameters.length}) does not ` +</span><span class="s3">\n      </span><span class="s1">`match the required ones (${expectedLength}).`</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">if (parameters.length === 0) return message</span><span class="s3">\n\n  </span><span class="s1">parameters.unshift(message);</span><span class="s3">\n  </span><span class="s1">return Reflect.apply(format, null, parameters)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Determine the specific type of a value for type-mismatch errors.</span><span class="s3">\n </span><span class="s1">* @param {unknown} value</span><span class="s3">\n </span><span class="s1">* @returns {string}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function determineSpecificType(value) {</span><span class="s3">\n  </span><span class="s1">if (value === null || value === undefined) {</span><span class="s3">\n    </span><span class="s1">return String(value)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof value === 'function' &amp;&amp; value.name) {</span><span class="s3">\n    </span><span class="s1">return `function ${value.name}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof value === 'object') {</span><span class="s3">\n    </span><span class="s1">if (value.constructor &amp;&amp; value.constructor.name) {</span><span class="s3">\n      </span><span class="s1">return `an instance of ${value.constructor.name}`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return `${inspect(value, {depth: -1})}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let inspected = inspect(value, {colors: false});</span><span class="s3">\n\n  </span><span class="s1">if (inspected.length &gt; 28) {</span><span class="s3">\n    </span><span class="s1">inspected = `${inspected.slice(0, 25)}...`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return `type ${typeof value} (${inspected})`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Manually “tree shaken” from:</span><span class="s3">\n</span><span class="s1">// &lt;https://github.com/nodejs/node/blob/7c3dce0/lib/internal/modules/package_json_reader.js&gt;</span><span class="s3">\n</span><span class="s1">// Last checked on: Apr 29, 2023.</span><span class="s3">\n</span><span class="s1">// Removed the native dependency.</span><span class="s3">\n</span><span class="s1">// Also: no need to cache, we do that in resolve already.</span><span class="s3">\n\n\n</span><span class="s1">const hasOwnProperty$1 = {}.hasOwnProperty;</span><span class="s3">\n\n</span><span class="s1">const {ERR_INVALID_PACKAGE_CONFIG: ERR_INVALID_PACKAGE_CONFIG$1} = codes;</span><span class="s3">\n\n</span><span class="s1">/** @type {Map&lt;string, PackageConfig&gt;} */</span><span class="s3">\n</span><span class="s1">const cache = new Map();</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} jsonPath</span><span class="s3">\n </span><span class="s1">* @param {{specifier: URL | string, base?: URL}} options</span><span class="s3">\n </span><span class="s1">* @returns {PackageConfig}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function read(jsonPath, {base, specifier}) {</span><span class="s3">\n  </span><span class="s1">const existing = cache.get(jsonPath);</span><span class="s3">\n\n  </span><span class="s1">if (existing) {</span><span class="s3">\n    </span><span class="s1">return existing</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/** @type {string | undefined} */</span><span class="s3">\n  </span><span class="s1">let string;</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">string = fs.readFileSync(path.toNamespacedPath(jsonPath), 'utf8');</span><span class="s3">\n  </span><span class="s1">} catch (error) {</span><span class="s3">\n    </span><span class="s1">const exception = /** @type {ErrnoException} */ (error);</span><span class="s3">\n\n    </span><span class="s1">if (exception.code !== 'ENOENT') {</span><span class="s3">\n      </span><span class="s1">throw exception</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/** @type {PackageConfig} */</span><span class="s3">\n  </span><span class="s1">const result = {</span><span class="s3">\n    </span><span class="s1">exists: false,</span><span class="s3">\n    </span><span class="s1">pjsonPath: jsonPath,</span><span class="s3">\n    </span><span class="s1">main: undefined,</span><span class="s3">\n    </span><span class="s1">name: undefined,</span><span class="s3">\n    </span><span class="s1">type: 'none', // Ignore unknown types for forwards compatibility</span><span class="s3">\n    </span><span class="s1">exports: undefined,</span><span class="s3">\n    </span><span class="s1">imports: undefined</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n\n  </span><span class="s1">if (string !== undefined) {</span><span class="s3">\n    </span><span class="s1">/** @type {Record&lt;string, unknown&gt;} */</span><span class="s3">\n    </span><span class="s1">let parsed;</span><span class="s3">\n\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">parsed = JSON.parse(string);</span><span class="s3">\n    </span><span class="s1">} catch (error_) {</span><span class="s3">\n      </span><span class="s1">const cause = /** @type {ErrnoException} */ (error_);</span><span class="s3">\n      </span><span class="s1">const error = new ERR_INVALID_PACKAGE_CONFIG$1(</span><span class="s3">\n        </span><span class="s1">jsonPath,</span><span class="s3">\n        </span><span class="s1">(base ? `</span><span class="s3">\&quot;</span><span class="s1">${specifier}</span><span class="s3">\&quot; </span><span class="s1">from ` : '') + fileURLToPath(base || specifier),</span><span class="s3">\n        </span><span class="s1">cause.message</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">error.cause = cause;</span><span class="s3">\n      </span><span class="s1">throw error</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">result.exists = true;</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">hasOwnProperty$1.call(parsed, 'name') &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof parsed.name === 'string'</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">result.name = parsed.name;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">hasOwnProperty$1.call(parsed, 'main') &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof parsed.main === 'string'</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">result.main = parsed.main;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (hasOwnProperty$1.call(parsed, 'exports')) {</span><span class="s3">\n      </span><span class="s1">// @ts-expect-error: assume valid.</span><span class="s3">\n      </span><span class="s1">result.exports = parsed.exports;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (hasOwnProperty$1.call(parsed, 'imports')) {</span><span class="s3">\n      </span><span class="s1">// @ts-expect-error: assume valid.</span><span class="s3">\n      </span><span class="s1">result.imports = parsed.imports;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Ignore unknown types for forwards compatibility</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">hasOwnProperty$1.call(parsed, 'type') &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(parsed.type === 'commonjs' || parsed.type === 'module')</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">result.type = parsed.type;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">cache.set(jsonPath, result);</span><span class="s3">\n\n  </span><span class="s1">return result</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL | string} resolved</span><span class="s3">\n </span><span class="s1">* @returns {PackageConfig}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getPackageScopeConfig(resolved) {</span><span class="s3">\n  </span><span class="s1">// Note: in Node, this is now a native module.</span><span class="s3">\n  </span><span class="s1">let packageJSONUrl = new URL('package.json', resolved);</span><span class="s3">\n\n  </span><span class="s1">while (true) {</span><span class="s3">\n    </span><span class="s1">const packageJSONPath = packageJSONUrl.pathname;</span><span class="s3">\n    </span><span class="s1">if (packageJSONPath.endsWith('node_modules/package.json')) {</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const packageConfig = read(fileURLToPath(packageJSONUrl), {</span><span class="s3">\n      </span><span class="s1">specifier: resolved</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">if (packageConfig.exists) {</span><span class="s3">\n      </span><span class="s1">return packageConfig</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const lastPackageJSONUrl = packageJSONUrl;</span><span class="s3">\n    </span><span class="s1">packageJSONUrl = new URL('../package.json', packageJSONUrl);</span><span class="s3">\n\n    </span><span class="s1">// Terminates at root where ../package.json equals ../../package.json</span><span class="s3">\n    </span><span class="s1">// (can't just check </span><span class="s3">\&quot;</span><span class="s1">/package.json</span><span class="s3">\&quot; </span><span class="s1">for Windows support).</span><span class="s3">\n    </span><span class="s1">if (packageJSONUrl.pathname === lastPackageJSONUrl.pathname) {</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const packageJSONPath = fileURLToPath(packageJSONUrl);</span><span class="s3">\n  </span><span class="s1">// ^^ Note: in Node, this is now a native module.</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">pjsonPath: packageJSONPath,</span><span class="s3">\n    </span><span class="s1">exists: false,</span><span class="s3">\n    </span><span class="s1">type: 'none'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns the package type for a given URL.</span><span class="s3">\n </span><span class="s1">* @param {URL} url - The URL to get the package type for.</span><span class="s3">\n </span><span class="s1">* @returns {PackageType}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getPackageType(url) {</span><span class="s3">\n  </span><span class="s1">// To do @anonrig: Write a C++ function that returns only </span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\n  </span><span class="s1">return getPackageScopeConfig(url).type</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Manually “tree shaken” from:</span><span class="s3">\n</span><span class="s1">// &lt;https://github.com/nodejs/node/blob/7c3dce0/lib/internal/modules/esm/get_format.js&gt;</span><span class="s3">\n</span><span class="s1">// Last checked on: Apr 29, 2023.</span><span class="s3">\n\n\n</span><span class="s1">const {ERR_UNKNOWN_FILE_EXTENSION} = codes;</span><span class="s3">\n\n</span><span class="s1">const hasOwnProperty = {}.hasOwnProperty;</span><span class="s3">\n\n</span><span class="s1">/** @type {Record&lt;string, string&gt;} */</span><span class="s3">\n</span><span class="s1">const extensionFormatMap = {</span><span class="s3">\n  </span><span class="s1">// @ts-expect-error: hush.</span><span class="s3">\n  </span><span class="s1">__proto__: null,</span><span class="s3">\n  </span><span class="s1">'.cjs': 'commonjs',</span><span class="s3">\n  </span><span class="s1">'.js': 'module',</span><span class="s3">\n  </span><span class="s1">'.json': 'json',</span><span class="s3">\n  </span><span class="s1">'.mjs': 'module'</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string | null} mime</span><span class="s3">\n </span><span class="s1">* @returns {string | null}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function mimeToFormat(mime) {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">mime &amp;&amp;</span><span class="s3">\n    </span><span class="s1">/</span><span class="s3">\\</span><span class="s1">s*(text|application)</span><span class="s3">\\</span><span class="s1">/javascript</span><span class="s3">\\</span><span class="s1">s*(;</span><span class="s3">\\</span><span class="s1">s*charset=utf-?8</span><span class="s3">\\</span><span class="s1">s*)?/i.test(mime)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">return 'module'</span><span class="s3">\n  </span><span class="s1">if (mime === 'application/json') return 'json'</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @callback ProtocolHandler</span><span class="s3">\n </span><span class="s1">* @param {URL} parsed</span><span class="s3">\n </span><span class="s1">* @param {{parentURL: string, source?: Buffer}} context</span><span class="s3">\n </span><span class="s1">* @param {boolean} ignoreErrors</span><span class="s3">\n </span><span class="s1">* @returns {string | null | void}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @type {Record&lt;string, ProtocolHandler&gt;}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const protocolHandlers = {</span><span class="s3">\n  </span><span class="s1">// @ts-expect-error: hush.</span><span class="s3">\n  </span><span class="s1">__proto__: null,</span><span class="s3">\n  </span><span class="s1">'data:': getDataProtocolModuleFormat,</span><span class="s3">\n  </span><span class="s1">'file:': getFileProtocolModuleFormat,</span><span class="s3">\n  </span><span class="s1">'http:': getHttpProtocolModuleFormat,</span><span class="s3">\n  </span><span class="s1">'https:': getHttpProtocolModuleFormat,</span><span class="s3">\n  </span><span class="s1">'node:'() {</span><span class="s3">\n    </span><span class="s1">return 'builtin'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL} parsed</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getDataProtocolModuleFormat(parsed) {</span><span class="s3">\n  </span><span class="s1">const {1: mime} = /^([^/]+</span><span class="s3">\\</span><span class="s1">/[^;,]+)[^,]*?(;base64)?,/.exec(</span><span class="s3">\n    </span><span class="s1">parsed.pathname</span><span class="s3">\n  </span><span class="s1">) || [null, null, null];</span><span class="s3">\n  </span><span class="s1">return mimeToFormat(mime)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns the file extension from a URL.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Should give similar result to</span><span class="s3">\n </span><span class="s1">* `require('node:path').extname(require('node:url').fileURLToPath(url))`</span><span class="s3">\n </span><span class="s1">* when used with a `file:` URL.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param {URL} url</span><span class="s3">\n </span><span class="s1">* @returns {string}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function extname(url) {</span><span class="s3">\n  </span><span class="s1">const pathname = url.pathname;</span><span class="s3">\n  </span><span class="s1">let index = pathname.length;</span><span class="s3">\n\n  </span><span class="s1">while (index--) {</span><span class="s3">\n    </span><span class="s1">const code = pathname.codePointAt(index);</span><span class="s3">\n\n    </span><span class="s1">if (code === 47 /* `/` */) {</span><span class="s3">\n      </span><span class="s1">return ''</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (code === 46 /* `.` */) {</span><span class="s3">\n      </span><span class="s1">return pathname.codePointAt(index - 1) === 47 /* `/` */</span><span class="s3">\n        </span><span class="s1">? ''</span><span class="s3">\n        </span><span class="s1">: pathname.slice(index)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return ''</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @type {ProtocolHandler}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getFileProtocolModuleFormat(url, _context, ignoreErrors) {</span><span class="s3">\n  </span><span class="s1">const value = extname(url);</span><span class="s3">\n\n  </span><span class="s1">if (value === '.js') {</span><span class="s3">\n    </span><span class="s1">const packageType = getPackageType(url);</span><span class="s3">\n\n    </span><span class="s1">if (packageType !== 'none') {</span><span class="s3">\n      </span><span class="s1">return packageType</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return 'commonjs'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (value === '') {</span><span class="s3">\n    </span><span class="s1">const packageType = getPackageType(url);</span><span class="s3">\n\n    </span><span class="s1">// Legacy behavior</span><span class="s3">\n    </span><span class="s1">if (packageType === 'none' || packageType === 'commonjs') {</span><span class="s3">\n      </span><span class="s1">return 'commonjs'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Note: we don’t implement WASM, so we don’t need</span><span class="s3">\n    </span><span class="s1">// `getFormatOfExtensionlessFile` from `formats`.</span><span class="s3">\n    </span><span class="s1">return 'module'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const format = extensionFormatMap[value];</span><span class="s3">\n  </span><span class="s1">if (format) return format</span><span class="s3">\n\n  </span><span class="s1">// Explicit undefined return indicates load hook should rerun format check</span><span class="s3">\n  </span><span class="s1">if (ignoreErrors) {</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const filepath = fileURLToPath(url);</span><span class="s3">\n  </span><span class="s1">throw new ERR_UNKNOWN_FILE_EXTENSION(value, filepath)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getHttpProtocolModuleFormat() {</span><span class="s3">\n  </span><span class="s1">// To do: HTTPS imports.</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL} url</span><span class="s3">\n </span><span class="s1">* @param {{parentURL: string}} context</span><span class="s3">\n </span><span class="s1">* @returns {string | null}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function defaultGetFormatWithoutErrors(url, context) {</span><span class="s3">\n  </span><span class="s1">const protocol = url.protocol;</span><span class="s3">\n\n  </span><span class="s1">if (!hasOwnProperty.call(protocolHandlers, protocol)) {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return protocolHandlers[protocol](url, context, true) || null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Manually “tree shaken” from:</span><span class="s3">\n</span><span class="s1">// &lt;https://github.com/nodejs/node/blob/81a9a97/lib/internal/modules/esm/utils.js&gt;</span><span class="s3">\n</span><span class="s1">// Last checked on: Apr 29, 2023.</span><span class="s3">\n\n\n</span><span class="s1">const {ERR_INVALID_ARG_VALUE} = codes;</span><span class="s3">\n\n</span><span class="s1">// In Node itself these values are populated from CLI arguments, before any</span><span class="s3">\n</span><span class="s1">// user code runs.</span><span class="s3">\n</span><span class="s1">// Here we just define the defaults.</span><span class="s3">\n</span><span class="s1">const DEFAULT_CONDITIONS = Object.freeze(['node', 'import']);</span><span class="s3">\n</span><span class="s1">const DEFAULT_CONDITIONS_SET = new Set(DEFAULT_CONDITIONS);</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns the default conditions for ES module loading.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getDefaultConditions() {</span><span class="s3">\n  </span><span class="s1">return DEFAULT_CONDITIONS</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns the default conditions for ES module loading, as a Set.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getDefaultConditionsSet() {</span><span class="s3">\n  </span><span class="s1">return DEFAULT_CONDITIONS_SET</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {Array&lt;string&gt;} [conditions]</span><span class="s3">\n </span><span class="s1">* @returns {Set&lt;string&gt;}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getConditionsSet(conditions) {</span><span class="s3">\n  </span><span class="s1">if (conditions !== undefined &amp;&amp; conditions !== getDefaultConditions()) {</span><span class="s3">\n    </span><span class="s1">if (!Array.isArray(conditions)) {</span><span class="s3">\n      </span><span class="s1">throw new ERR_INVALID_ARG_VALUE(</span><span class="s3">\n        </span><span class="s1">'conditions',</span><span class="s3">\n        </span><span class="s1">conditions,</span><span class="s3">\n        </span><span class="s1">'expected an array'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return new Set(conditions)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return getDefaultConditionsSet()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Manually “tree shaken” from:</span><span class="s3">\n</span><span class="s1">// &lt;https://github.com/nodejs/node/blob/81a9a97/lib/internal/modules/esm/resolve.js&gt;</span><span class="s3">\n</span><span class="s1">// Last checked on: Apr 29, 2023.</span><span class="s3">\n\n\n</span><span class="s1">const RegExpPrototypeSymbolReplace = RegExp.prototype[Symbol.replace];</span><span class="s3">\n\n</span><span class="s1">const {</span><span class="s3">\n  </span><span class="s1">ERR_NETWORK_IMPORT_DISALLOWED,</span><span class="s3">\n  </span><span class="s1">ERR_INVALID_MODULE_SPECIFIER,</span><span class="s3">\n  </span><span class="s1">ERR_INVALID_PACKAGE_CONFIG,</span><span class="s3">\n  </span><span class="s1">ERR_INVALID_PACKAGE_TARGET,</span><span class="s3">\n  </span><span class="s1">ERR_MODULE_NOT_FOUND,</span><span class="s3">\n  </span><span class="s1">ERR_PACKAGE_IMPORT_NOT_DEFINED,</span><span class="s3">\n  </span><span class="s1">ERR_PACKAGE_PATH_NOT_EXPORTED,</span><span class="s3">\n  </span><span class="s1">ERR_UNSUPPORTED_DIR_IMPORT,</span><span class="s3">\n  </span><span class="s1">ERR_UNSUPPORTED_RESOLVE_REQUEST</span><span class="s3">\n</span><span class="s1">} = codes;</span><span class="s3">\n\n</span><span class="s1">const own = {}.hasOwnProperty;</span><span class="s3">\n\n</span><span class="s1">const invalidSegmentRegEx =</span><span class="s3">\n  </span><span class="s1">/(^|</span><span class="s3">\\\\</span><span class="s1">|</span><span class="s3">\\</span><span class="s1">/)((</span><span class="s3">\\</span><span class="s1">.|%2e)(</span><span class="s3">\\</span><span class="s1">.|%2e)?|(n|%6e|%4e)(o|%6f|%4f)(d|%64|%44)(e|%65|%45)(_|%5f)(m|%6d|%4d)(o|%6f|%4f)(d|%64|%44)(u|%75|%55)(l|%6c|%4c)(e|%65|%45)(s|%73|%53))?(</span><span class="s3">\\\\</span><span class="s1">|</span><span class="s3">\\</span><span class="s1">/|$)/i;</span><span class="s3">\n</span><span class="s1">const deprecatedInvalidSegmentRegEx =</span><span class="s3">\n  </span><span class="s1">/(^|</span><span class="s3">\\\\</span><span class="s1">|</span><span class="s3">\\</span><span class="s1">/)((</span><span class="s3">\\</span><span class="s1">.|%2e)(</span><span class="s3">\\</span><span class="s1">.|%2e)?|(n|%6e|%4e)(o|%6f|%4f)(d|%64|%44)(e|%65|%45)(_|%5f)(m|%6d|%4d)(o|%6f|%4f)(d|%64|%44)(u|%75|%55)(l|%6c|%4c)(e|%65|%45)(s|%73|%53))(</span><span class="s3">\\\\</span><span class="s1">|</span><span class="s3">\\</span><span class="s1">/|$)/i;</span><span class="s3">\n</span><span class="s1">const invalidPackageNameRegEx = /^</span><span class="s3">\\</span><span class="s1">.|%|</span><span class="s3">\\\\</span><span class="s1">/;</span><span class="s3">\n</span><span class="s1">const patternRegEx = /</span><span class="s3">\\</span><span class="s1">*/g;</span><span class="s3">\n</span><span class="s1">const encodedSeparatorRegEx = /%2f|%5c/i;</span><span class="s3">\n</span><span class="s1">/** @type {Set&lt;string&gt;} */</span><span class="s3">\n</span><span class="s1">const emittedPackageWarnings = new Set();</span><span class="s3">\n\n</span><span class="s1">const doubleSlashRegEx = /[/</span><span class="s3">\\\\</span><span class="s1">]{2}/;</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param {string} target</span><span class="s3">\n </span><span class="s1">* @param {string} request</span><span class="s3">\n </span><span class="s1">* @param {string} match</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {boolean} internal</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {boolean} isTarget</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function emitInvalidSegmentDeprecation(</span><span class="s3">\n  </span><span class="s1">target,</span><span class="s3">\n  </span><span class="s1">request,</span><span class="s3">\n  </span><span class="s1">match,</span><span class="s3">\n  </span><span class="s1">packageJsonUrl,</span><span class="s3">\n  </span><span class="s1">internal,</span><span class="s3">\n  </span><span class="s1">base,</span><span class="s3">\n  </span><span class="s1">isTarget</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// @ts-expect-error: apparently it does exist, TS.</span><span class="s3">\n  </span><span class="s1">if (process.noDeprecation) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const pjsonPath = fileURLToPath(packageJsonUrl);</span><span class="s3">\n  </span><span class="s1">const double = doubleSlashRegEx.exec(isTarget ? target : request) !== null;</span><span class="s3">\n  </span><span class="s1">process.emitWarning(</span><span class="s3">\n    </span><span class="s1">`Use of deprecated ${</span><span class="s3">\n      </span><span class="s1">double ? 'double slash' : 'leading or trailing slash matching'</span><span class="s3">\n    </span><span class="s1">} resolving </span><span class="s3">\&quot;</span><span class="s1">${target}</span><span class="s3">\&quot; </span><span class="s1">for module ` +</span><span class="s3">\n      </span><span class="s1">`request </span><span class="s3">\&quot;</span><span class="s1">${request}</span><span class="s3">\&quot; </span><span class="s1">${</span><span class="s3">\n        </span><span class="s1">request === match ? '' : `matched to </span><span class="s3">\&quot;</span><span class="s1">${match}</span><span class="s3">\&quot; </span><span class="s1">`</span><span class="s3">\n      </span><span class="s1">}in the </span><span class="s3">\&quot;</span><span class="s1">${</span><span class="s3">\n        </span><span class="s1">internal ? 'imports' : 'exports'</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\&quot; </span><span class="s1">field module resolution of the package at ${pjsonPath}${</span><span class="s3">\n        </span><span class="s1">base ? ` imported from ${fileURLToPath(base)}` : ''</span><span class="s3">\n      </span><span class="s1">}.`,</span><span class="s3">\n    </span><span class="s1">'DeprecationWarning',</span><span class="s3">\n    </span><span class="s1">'DEP0166'</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL} url</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {string} [main]</span><span class="s3">\n </span><span class="s1">* @returns {void}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function emitLegacyIndexDeprecation(url, packageJsonUrl, base, main) {</span><span class="s3">\n  </span><span class="s1">// @ts-expect-error: apparently it does exist, TS.</span><span class="s3">\n  </span><span class="s1">if (process.noDeprecation) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const format = defaultGetFormatWithoutErrors(url, {parentURL: base.href});</span><span class="s3">\n  </span><span class="s1">if (format !== 'module') return</span><span class="s3">\n  </span><span class="s1">const urlPath = fileURLToPath(url.href);</span><span class="s3">\n  </span><span class="s1">const packagePath = fileURLToPath(new URL$1('.', packageJsonUrl));</span><span class="s3">\n  </span><span class="s1">const basePath = fileURLToPath(base);</span><span class="s3">\n  </span><span class="s1">if (!main) {</span><span class="s3">\n    </span><span class="s1">process.emitWarning(</span><span class="s3">\n      </span><span class="s1">`No </span><span class="s3">\&quot;</span><span class="s1">main</span><span class="s3">\&quot; </span><span class="s1">or </span><span class="s3">\&quot;</span><span class="s1">exports</span><span class="s3">\&quot; </span><span class="s1">field defined in the package.json for ${packagePath} resolving the main entry point </span><span class="s3">\&quot;</span><span class="s1">${urlPath.slice(</span><span class="s3">\n        </span><span class="s1">packagePath.length</span><span class="s3">\n      </span><span class="s1">)}</span><span class="s3">\&quot;</span><span class="s1">, imported from ${basePath}.</span><span class="s3">\\</span><span class="s1">nDefault </span><span class="s3">\&quot;</span><span class="s1">index</span><span class="s3">\&quot; </span><span class="s1">lookups for the main are deprecated for ES modules.`,</span><span class="s3">\n      </span><span class="s1">'DeprecationWarning',</span><span class="s3">\n      </span><span class="s1">'DEP0151'</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">} else if (path.resolve(packagePath, main) !== urlPath) {</span><span class="s3">\n    </span><span class="s1">process.emitWarning(</span><span class="s3">\n      </span><span class="s1">`Package ${packagePath} has a </span><span class="s3">\&quot;</span><span class="s1">main</span><span class="s3">\&quot; </span><span class="s1">field set to </span><span class="s3">\&quot;</span><span class="s1">${main}</span><span class="s3">\&quot;</span><span class="s1">, ` +</span><span class="s3">\n        </span><span class="s1">`excluding the full filename and extension to the resolved file at </span><span class="s3">\&quot;</span><span class="s1">${urlPath.slice(</span><span class="s3">\n          </span><span class="s1">packagePath.length</span><span class="s3">\n        </span><span class="s1">)}</span><span class="s3">\&quot;</span><span class="s1">, imported from ${basePath}.</span><span class="s3">\\</span><span class="s1">n Automatic extension resolution of the </span><span class="s3">\&quot;</span><span class="s1">main</span><span class="s3">\&quot; </span><span class="s1">field is ` +</span><span class="s3">\n        </span><span class="s1">'deprecated for ES modules.',</span><span class="s3">\n      </span><span class="s1">'DeprecationWarning',</span><span class="s3">\n      </span><span class="s1">'DEP0151'</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} path</span><span class="s3">\n </span><span class="s1">* @returns {Stats | undefined}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function tryStatSync(path) {</span><span class="s3">\n  </span><span class="s1">// Note: from Node 15 onwards we can use `throwIfNoEntry: false` instead.</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">return statSync(path)</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">// Note: in Node code this returns `new Stats`,</span><span class="s3">\n    </span><span class="s1">// but in Node 22 that’s marked as a deprecated internal API.</span><span class="s3">\n    </span><span class="s1">// Which, well, we kinda are, but still to prevent that warning,</span><span class="s3">\n    </span><span class="s1">// just yield `undefined`.</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Legacy CommonJS main resolution:</span><span class="s3">\n </span><span class="s1">* 1. let M = pkg_url + (json main field)</span><span class="s3">\n </span><span class="s1">* 2. TRY(M, M.js, M.json, M.node)</span><span class="s3">\n </span><span class="s1">* 3. TRY(M/index.js, M/index.json, M/index.node)</span><span class="s3">\n </span><span class="s1">* 4. TRY(pkg_url/index.js, pkg_url/index.json, pkg_url/index.node)</span><span class="s3">\n </span><span class="s1">* 5. NOT_FOUND</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param {URL} url</span><span class="s3">\n </span><span class="s1">* @returns {boolean}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function fileExists(url) {</span><span class="s3">\n  </span><span class="s1">const stats = statSync(url, {throwIfNoEntry: false});</span><span class="s3">\n  </span><span class="s1">const isFile = stats ? stats.isFile() : undefined;</span><span class="s3">\n  </span><span class="s1">return isFile === null || isFile === undefined ? false : isFile</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {PackageConfig} packageConfig</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @returns {URL}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function legacyMainResolve(packageJsonUrl, packageConfig, base) {</span><span class="s3">\n  </span><span class="s1">/** @type {URL | undefined} */</span><span class="s3">\n  </span><span class="s1">let guess;</span><span class="s3">\n  </span><span class="s1">if (packageConfig.main !== undefined) {</span><span class="s3">\n    </span><span class="s1">guess = new URL$1(packageConfig.main, packageJsonUrl);</span><span class="s3">\n    </span><span class="s1">// Note: fs check redundances will be handled by Descriptor cache here.</span><span class="s3">\n    </span><span class="s1">if (fileExists(guess)) return guess</span><span class="s3">\n\n    </span><span class="s1">const tries = [</span><span class="s3">\n      </span><span class="s1">`./${packageConfig.main}.js`,</span><span class="s3">\n      </span><span class="s1">`./${packageConfig.main}.json`,</span><span class="s3">\n      </span><span class="s1">`./${packageConfig.main}.node`,</span><span class="s3">\n      </span><span class="s1">`./${packageConfig.main}/index.js`,</span><span class="s3">\n      </span><span class="s1">`./${packageConfig.main}/index.json`,</span><span class="s3">\n      </span><span class="s1">`./${packageConfig.main}/index.node`</span><span class="s3">\n    </span><span class="s1">];</span><span class="s3">\n    </span><span class="s1">let i = -1;</span><span class="s3">\n\n    </span><span class="s1">while (++i &lt; tries.length) {</span><span class="s3">\n      </span><span class="s1">guess = new URL$1(tries[i], packageJsonUrl);</span><span class="s3">\n      </span><span class="s1">if (fileExists(guess)) break</span><span class="s3">\n      </span><span class="s1">guess = undefined;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (guess) {</span><span class="s3">\n      </span><span class="s1">emitLegacyIndexDeprecation(</span><span class="s3">\n        </span><span class="s1">guess,</span><span class="s3">\n        </span><span class="s1">packageJsonUrl,</span><span class="s3">\n        </span><span class="s1">base,</span><span class="s3">\n        </span><span class="s1">packageConfig.main</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return guess</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// Fallthrough.</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const tries = ['./index.js', './index.json', './index.node'];</span><span class="s3">\n  </span><span class="s1">let i = -1;</span><span class="s3">\n\n  </span><span class="s1">while (++i &lt; tries.length) {</span><span class="s3">\n    </span><span class="s1">guess = new URL$1(tries[i], packageJsonUrl);</span><span class="s3">\n    </span><span class="s1">if (fileExists(guess)) break</span><span class="s3">\n    </span><span class="s1">guess = undefined;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (guess) {</span><span class="s3">\n    </span><span class="s1">emitLegacyIndexDeprecation(guess, packageJsonUrl, base, packageConfig.main);</span><span class="s3">\n    </span><span class="s1">return guess</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Not found.</span><span class="s3">\n  </span><span class="s1">throw new ERR_MODULE_NOT_FOUND(</span><span class="s3">\n    </span><span class="s1">fileURLToPath(new URL$1('.', packageJsonUrl)),</span><span class="s3">\n    </span><span class="s1">fileURLToPath(base)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL} resolved</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {boolean} [preserveSymlinks]</span><span class="s3">\n </span><span class="s1">* @returns {URL}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function finalizeResolution(resolved, base, preserveSymlinks) {</span><span class="s3">\n  </span><span class="s1">if (encodedSeparatorRegEx.exec(resolved.pathname) !== null) {</span><span class="s3">\n    </span><span class="s1">throw new ERR_INVALID_MODULE_SPECIFIER(</span><span class="s3">\n      </span><span class="s1">resolved.pathname,</span><span class="s3">\n      </span><span class="s1">'must not include encoded </span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot; </span><span class="s1">or </span><span class="s3">\&quot;\\\\\&quot; </span><span class="s1">characters',</span><span class="s3">\n      </span><span class="s1">fileURLToPath(base)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/** @type {string} */</span><span class="s3">\n  </span><span class="s1">let filePath;</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">filePath = fileURLToPath(resolved);</span><span class="s3">\n  </span><span class="s1">} catch (error) {</span><span class="s3">\n    </span><span class="s1">const cause = /** @type {ErrnoException} */ (error);</span><span class="s3">\n    </span><span class="s1">Object.defineProperty(cause, 'input', {value: String(resolved)});</span><span class="s3">\n    </span><span class="s1">Object.defineProperty(cause, 'module', {value: String(base)});</span><span class="s3">\n    </span><span class="s1">throw cause</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const stats = tryStatSync(</span><span class="s3">\n    </span><span class="s1">filePath.endsWith('/') ? filePath.slice(-1) : filePath</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">if (stats &amp;&amp; stats.isDirectory()) {</span><span class="s3">\n    </span><span class="s1">const error = new ERR_UNSUPPORTED_DIR_IMPORT(filePath, fileURLToPath(base));</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error Add this for `import.meta.resolve`.</span><span class="s3">\n    </span><span class="s1">error.url = String(resolved);</span><span class="s3">\n    </span><span class="s1">throw error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!stats || !stats.isFile()) {</span><span class="s3">\n    </span><span class="s1">const error = new ERR_MODULE_NOT_FOUND(</span><span class="s3">\n      </span><span class="s1">filePath || resolved.pathname,</span><span class="s3">\n      </span><span class="s1">base &amp;&amp; fileURLToPath(base),</span><span class="s3">\n      </span><span class="s1">true</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error Add this for `import.meta.resolve`.</span><span class="s3">\n    </span><span class="s1">error.url = String(resolved);</span><span class="s3">\n    </span><span class="s1">throw error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!preserveSymlinks) {</span><span class="s3">\n    </span><span class="s1">const real = realpathSync(filePath);</span><span class="s3">\n    </span><span class="s1">const {search, hash} = resolved;</span><span class="s3">\n    </span><span class="s1">resolved = pathToFileURL(real + (filePath.endsWith(path.sep) ? '/' : ''));</span><span class="s3">\n    </span><span class="s1">resolved.search = search;</span><span class="s3">\n    </span><span class="s1">resolved.hash = hash;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return resolved</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">* @param {URL | undefined} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @returns {Error}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function importNotDefined(specifier, packageJsonUrl, base) {</span><span class="s3">\n  </span><span class="s1">return new ERR_PACKAGE_IMPORT_NOT_DEFINED(</span><span class="s3">\n    </span><span class="s1">specifier,</span><span class="s3">\n    </span><span class="s1">packageJsonUrl &amp;&amp; fileURLToPath(new URL$1('.', packageJsonUrl)),</span><span class="s3">\n    </span><span class="s1">fileURLToPath(base)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} subpath</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @returns {Error}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function exportsNotFound(subpath, packageJsonUrl, base) {</span><span class="s3">\n  </span><span class="s1">return new ERR_PACKAGE_PATH_NOT_EXPORTED(</span><span class="s3">\n    </span><span class="s1">fileURLToPath(new URL$1('.', packageJsonUrl)),</span><span class="s3">\n    </span><span class="s1">subpath,</span><span class="s3">\n    </span><span class="s1">base &amp;&amp; fileURLToPath(base)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} request</span><span class="s3">\n </span><span class="s1">* @param {string} match</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {boolean} internal</span><span class="s3">\n </span><span class="s1">* @param {URL} [base]</span><span class="s3">\n </span><span class="s1">* @returns {never}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function throwInvalidSubpath(request, match, packageJsonUrl, internal, base) {</span><span class="s3">\n  </span><span class="s1">const reason = `request is not a valid match in pattern </span><span class="s3">\&quot;</span><span class="s1">${match}</span><span class="s3">\&quot; </span><span class="s1">for the </span><span class="s3">\&quot;</span><span class="s1">${</span><span class="s3">\n    </span><span class="s1">internal ? 'imports' : 'exports'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\&quot; </span><span class="s1">resolution of ${fileURLToPath(packageJsonUrl)}`;</span><span class="s3">\n  </span><span class="s1">throw new ERR_INVALID_MODULE_SPECIFIER(</span><span class="s3">\n    </span><span class="s1">request,</span><span class="s3">\n    </span><span class="s1">reason,</span><span class="s3">\n    </span><span class="s1">base &amp;&amp; fileURLToPath(base)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} subpath</span><span class="s3">\n </span><span class="s1">* @param {unknown} target</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {boolean} internal</span><span class="s3">\n </span><span class="s1">* @param {URL} [base]</span><span class="s3">\n </span><span class="s1">* @returns {Error}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function invalidPackageTarget(subpath, target, packageJsonUrl, internal, base) {</span><span class="s3">\n  </span><span class="s1">target =</span><span class="s3">\n    </span><span class="s1">typeof target === 'object' &amp;&amp; target !== null</span><span class="s3">\n      </span><span class="s1">? JSON.stringify(target, null, '')</span><span class="s3">\n      </span><span class="s1">: `${target}`;</span><span class="s3">\n\n  </span><span class="s1">return new ERR_INVALID_PACKAGE_TARGET(</span><span class="s3">\n    </span><span class="s1">fileURLToPath(new URL$1('.', packageJsonUrl)),</span><span class="s3">\n    </span><span class="s1">subpath,</span><span class="s3">\n    </span><span class="s1">target,</span><span class="s3">\n    </span><span class="s1">internal,</span><span class="s3">\n    </span><span class="s1">base &amp;&amp; fileURLToPath(base)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} target</span><span class="s3">\n </span><span class="s1">* @param {string} subpath</span><span class="s3">\n </span><span class="s1">* @param {string} match</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {boolean} pattern</span><span class="s3">\n </span><span class="s1">* @param {boolean} internal</span><span class="s3">\n </span><span class="s1">* @param {boolean} isPathMap</span><span class="s3">\n </span><span class="s1">* @param {Set&lt;string&gt; | undefined} conditions</span><span class="s3">\n </span><span class="s1">* @returns {URL}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function resolvePackageTargetString(</span><span class="s3">\n  </span><span class="s1">target,</span><span class="s3">\n  </span><span class="s1">subpath,</span><span class="s3">\n  </span><span class="s1">match,</span><span class="s3">\n  </span><span class="s1">packageJsonUrl,</span><span class="s3">\n  </span><span class="s1">base,</span><span class="s3">\n  </span><span class="s1">pattern,</span><span class="s3">\n  </span><span class="s1">internal,</span><span class="s3">\n  </span><span class="s1">isPathMap,</span><span class="s3">\n  </span><span class="s1">conditions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (subpath !== '' &amp;&amp; !pattern &amp;&amp; target[target.length - 1] !== '/')</span><span class="s3">\n    </span><span class="s1">throw invalidPackageTarget(match, target, packageJsonUrl, internal, base)</span><span class="s3">\n\n  </span><span class="s1">if (!target.startsWith('./')) {</span><span class="s3">\n    </span><span class="s1">if (internal &amp;&amp; !target.startsWith('../') &amp;&amp; !target.startsWith('/')) {</span><span class="s3">\n      </span><span class="s1">let isURL = false;</span><span class="s3">\n\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">new URL$1(target);</span><span class="s3">\n        </span><span class="s1">isURL = true;</span><span class="s3">\n      </span><span class="s1">} catch {</span><span class="s3">\n        </span><span class="s1">// Continue regardless of error.</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (!isURL) {</span><span class="s3">\n        </span><span class="s1">const exportTarget = pattern</span><span class="s3">\n          </span><span class="s1">? RegExpPrototypeSymbolReplace.call(</span><span class="s3">\n              </span><span class="s1">patternRegEx,</span><span class="s3">\n              </span><span class="s1">target,</span><span class="s3">\n              </span><span class="s1">() =&gt; subpath</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">: target + subpath;</span><span class="s3">\n\n        </span><span class="s1">return packageResolve(exportTarget, packageJsonUrl, conditions)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">throw invalidPackageTarget(match, target, packageJsonUrl, internal, base)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (invalidSegmentRegEx.exec(target.slice(2)) !== null) {</span><span class="s3">\n    </span><span class="s1">if (deprecatedInvalidSegmentRegEx.exec(target.slice(2)) === null) {</span><span class="s3">\n      </span><span class="s1">if (!isPathMap) {</span><span class="s3">\n        </span><span class="s1">const request = pattern</span><span class="s3">\n          </span><span class="s1">? match.replace('*', () =&gt; subpath)</span><span class="s3">\n          </span><span class="s1">: match + subpath;</span><span class="s3">\n        </span><span class="s1">const resolvedTarget = pattern</span><span class="s3">\n          </span><span class="s1">? RegExpPrototypeSymbolReplace.call(</span><span class="s3">\n              </span><span class="s1">patternRegEx,</span><span class="s3">\n              </span><span class="s1">target,</span><span class="s3">\n              </span><span class="s1">() =&gt; subpath</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">: target;</span><span class="s3">\n        </span><span class="s1">emitInvalidSegmentDeprecation(</span><span class="s3">\n          </span><span class="s1">resolvedTarget,</span><span class="s3">\n          </span><span class="s1">request,</span><span class="s3">\n          </span><span class="s1">match,</span><span class="s3">\n          </span><span class="s1">packageJsonUrl,</span><span class="s3">\n          </span><span class="s1">internal,</span><span class="s3">\n          </span><span class="s1">base,</span><span class="s3">\n          </span><span class="s1">true</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">throw invalidPackageTarget(match, target, packageJsonUrl, internal, base)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const resolved = new URL$1(target, packageJsonUrl);</span><span class="s3">\n  </span><span class="s1">const resolvedPath = resolved.pathname;</span><span class="s3">\n  </span><span class="s1">const packagePath = new URL$1('.', packageJsonUrl).pathname;</span><span class="s3">\n\n  </span><span class="s1">if (!resolvedPath.startsWith(packagePath))</span><span class="s3">\n    </span><span class="s1">throw invalidPackageTarget(match, target, packageJsonUrl, internal, base)</span><span class="s3">\n\n  </span><span class="s1">if (subpath === '') return resolved</span><span class="s3">\n\n  </span><span class="s1">if (invalidSegmentRegEx.exec(subpath) !== null) {</span><span class="s3">\n    </span><span class="s1">const request = pattern</span><span class="s3">\n      </span><span class="s1">? match.replace('*', () =&gt; subpath)</span><span class="s3">\n      </span><span class="s1">: match + subpath;</span><span class="s3">\n    </span><span class="s1">if (deprecatedInvalidSegmentRegEx.exec(subpath) === null) {</span><span class="s3">\n      </span><span class="s1">if (!isPathMap) {</span><span class="s3">\n        </span><span class="s1">const resolvedTarget = pattern</span><span class="s3">\n          </span><span class="s1">? RegExpPrototypeSymbolReplace.call(</span><span class="s3">\n              </span><span class="s1">patternRegEx,</span><span class="s3">\n              </span><span class="s1">target,</span><span class="s3">\n              </span><span class="s1">() =&gt; subpath</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">: target;</span><span class="s3">\n        </span><span class="s1">emitInvalidSegmentDeprecation(</span><span class="s3">\n          </span><span class="s1">resolvedTarget,</span><span class="s3">\n          </span><span class="s1">request,</span><span class="s3">\n          </span><span class="s1">match,</span><span class="s3">\n          </span><span class="s1">packageJsonUrl,</span><span class="s3">\n          </span><span class="s1">internal,</span><span class="s3">\n          </span><span class="s1">base,</span><span class="s3">\n          </span><span class="s1">false</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">throwInvalidSubpath(request, match, packageJsonUrl, internal, base);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (pattern) {</span><span class="s3">\n    </span><span class="s1">return new URL$1(</span><span class="s3">\n      </span><span class="s1">RegExpPrototypeSymbolReplace.call(</span><span class="s3">\n        </span><span class="s1">patternRegEx,</span><span class="s3">\n        </span><span class="s1">resolved.href,</span><span class="s3">\n        </span><span class="s1">() =&gt; subpath</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new URL$1(subpath, resolved)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} key</span><span class="s3">\n </span><span class="s1">* @returns {boolean}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function isArrayIndex(key) {</span><span class="s3">\n  </span><span class="s1">const keyNumber = Number(key);</span><span class="s3">\n  </span><span class="s1">if (`${keyNumber}` !== key) return false</span><span class="s3">\n  </span><span class="s1">return keyNumber &gt;= 0 &amp;&amp; keyNumber &lt; 0xff_ff_ff_ff</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {unknown} target</span><span class="s3">\n </span><span class="s1">* @param {string} subpath</span><span class="s3">\n </span><span class="s1">* @param {string} packageSubpath</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {boolean} pattern</span><span class="s3">\n </span><span class="s1">* @param {boolean} internal</span><span class="s3">\n </span><span class="s1">* @param {boolean} isPathMap</span><span class="s3">\n </span><span class="s1">* @param {Set&lt;string&gt; | undefined} conditions</span><span class="s3">\n </span><span class="s1">* @returns {URL | null}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function resolvePackageTarget(</span><span class="s3">\n  </span><span class="s1">packageJsonUrl,</span><span class="s3">\n  </span><span class="s1">target,</span><span class="s3">\n  </span><span class="s1">subpath,</span><span class="s3">\n  </span><span class="s1">packageSubpath,</span><span class="s3">\n  </span><span class="s1">base,</span><span class="s3">\n  </span><span class="s1">pattern,</span><span class="s3">\n  </span><span class="s1">internal,</span><span class="s3">\n  </span><span class="s1">isPathMap,</span><span class="s3">\n  </span><span class="s1">conditions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (typeof target === 'string') {</span><span class="s3">\n    </span><span class="s1">return resolvePackageTargetString(</span><span class="s3">\n      </span><span class="s1">target,</span><span class="s3">\n      </span><span class="s1">subpath,</span><span class="s3">\n      </span><span class="s1">packageSubpath,</span><span class="s3">\n      </span><span class="s1">packageJsonUrl,</span><span class="s3">\n      </span><span class="s1">base,</span><span class="s3">\n      </span><span class="s1">pattern,</span><span class="s3">\n      </span><span class="s1">internal,</span><span class="s3">\n      </span><span class="s1">isPathMap,</span><span class="s3">\n      </span><span class="s1">conditions</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (Array.isArray(target)) {</span><span class="s3">\n    </span><span class="s1">/** @type {Array&lt;unknown&gt;} */</span><span class="s3">\n    </span><span class="s1">const targetList = target;</span><span class="s3">\n    </span><span class="s1">if (targetList.length === 0) return null</span><span class="s3">\n\n    </span><span class="s1">/** @type {ErrnoException | null | undefined} */</span><span class="s3">\n    </span><span class="s1">let lastException;</span><span class="s3">\n    </span><span class="s1">let i = -1;</span><span class="s3">\n\n    </span><span class="s1">while (++i &lt; targetList.length) {</span><span class="s3">\n      </span><span class="s1">const targetItem = targetList[i];</span><span class="s3">\n      </span><span class="s1">/** @type {URL | null} */</span><span class="s3">\n      </span><span class="s1">let resolveResult;</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">resolveResult = resolvePackageTarget(</span><span class="s3">\n          </span><span class="s1">packageJsonUrl,</span><span class="s3">\n          </span><span class="s1">targetItem,</span><span class="s3">\n          </span><span class="s1">subpath,</span><span class="s3">\n          </span><span class="s1">packageSubpath,</span><span class="s3">\n          </span><span class="s1">base,</span><span class="s3">\n          </span><span class="s1">pattern,</span><span class="s3">\n          </span><span class="s1">internal,</span><span class="s3">\n          </span><span class="s1">isPathMap,</span><span class="s3">\n          </span><span class="s1">conditions</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} catch (error) {</span><span class="s3">\n        </span><span class="s1">const exception = /** @type {ErrnoException} */ (error);</span><span class="s3">\n        </span><span class="s1">lastException = exception;</span><span class="s3">\n        </span><span class="s1">if (exception.code === 'ERR_INVALID_PACKAGE_TARGET') continue</span><span class="s3">\n        </span><span class="s1">throw error</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (resolveResult === undefined) continue</span><span class="s3">\n\n      </span><span class="s1">if (resolveResult === null) {</span><span class="s3">\n        </span><span class="s1">lastException = null;</span><span class="s3">\n        </span><span class="s1">continue</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return resolveResult</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (lastException === undefined || lastException === null) {</span><span class="s3">\n      </span><span class="s1">return null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">throw lastException</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof target === 'object' &amp;&amp; target !== null) {</span><span class="s3">\n    </span><span class="s1">const keys = Object.getOwnPropertyNames(target);</span><span class="s3">\n    </span><span class="s1">let i = -1;</span><span class="s3">\n\n    </span><span class="s1">while (++i &lt; keys.length) {</span><span class="s3">\n      </span><span class="s1">const key = keys[i];</span><span class="s3">\n      </span><span class="s1">if (isArrayIndex(key)) {</span><span class="s3">\n        </span><span class="s1">throw new ERR_INVALID_PACKAGE_CONFIG(</span><span class="s3">\n          </span><span class="s1">fileURLToPath(packageJsonUrl),</span><span class="s3">\n          </span><span class="s1">base,</span><span class="s3">\n          </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">exports</span><span class="s3">\&quot; </span><span class="s1">cannot contain numeric property keys.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">i = -1;</span><span class="s3">\n\n    </span><span class="s1">while (++i &lt; keys.length) {</span><span class="s3">\n      </span><span class="s1">const key = keys[i];</span><span class="s3">\n      </span><span class="s1">if (key === 'default' || (conditions &amp;&amp; conditions.has(key))) {</span><span class="s3">\n        </span><span class="s1">// @ts-expect-error: indexable.</span><span class="s3">\n        </span><span class="s1">const conditionalTarget = /** @type {unknown} */ (target[key]);</span><span class="s3">\n        </span><span class="s1">const resolveResult = resolvePackageTarget(</span><span class="s3">\n          </span><span class="s1">packageJsonUrl,</span><span class="s3">\n          </span><span class="s1">conditionalTarget,</span><span class="s3">\n          </span><span class="s1">subpath,</span><span class="s3">\n          </span><span class="s1">packageSubpath,</span><span class="s3">\n          </span><span class="s1">base,</span><span class="s3">\n          </span><span class="s1">pattern,</span><span class="s3">\n          </span><span class="s1">internal,</span><span class="s3">\n          </span><span class="s1">isPathMap,</span><span class="s3">\n          </span><span class="s1">conditions</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">if (resolveResult === undefined) continue</span><span class="s3">\n        </span><span class="s1">return resolveResult</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (target === null) {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">throw invalidPackageTarget(</span><span class="s3">\n    </span><span class="s1">packageSubpath,</span><span class="s3">\n    </span><span class="s1">target,</span><span class="s3">\n    </span><span class="s1">packageJsonUrl,</span><span class="s3">\n    </span><span class="s1">internal,</span><span class="s3">\n    </span><span class="s1">base</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {unknown} exports</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @returns {boolean}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function isConditionalExportsMainSugar(exports, packageJsonUrl, base) {</span><span class="s3">\n  </span><span class="s1">if (typeof exports === 'string' || Array.isArray(exports)) return true</span><span class="s3">\n  </span><span class="s1">if (typeof exports !== 'object' || exports === null) return false</span><span class="s3">\n\n  </span><span class="s1">const keys = Object.getOwnPropertyNames(exports);</span><span class="s3">\n  </span><span class="s1">let isConditionalSugar = false;</span><span class="s3">\n  </span><span class="s1">let i = 0;</span><span class="s3">\n  </span><span class="s1">let keyIndex = -1;</span><span class="s3">\n  </span><span class="s1">while (++keyIndex &lt; keys.length) {</span><span class="s3">\n    </span><span class="s1">const key = keys[keyIndex];</span><span class="s3">\n    </span><span class="s1">const currentIsConditionalSugar = key === '' || key[0] !== '.';</span><span class="s3">\n    </span><span class="s1">if (i++ === 0) {</span><span class="s3">\n      </span><span class="s1">isConditionalSugar = currentIsConditionalSugar;</span><span class="s3">\n    </span><span class="s1">} else if (isConditionalSugar !== currentIsConditionalSugar) {</span><span class="s3">\n      </span><span class="s1">throw new ERR_INVALID_PACKAGE_CONFIG(</span><span class="s3">\n        </span><span class="s1">fileURLToPath(packageJsonUrl),</span><span class="s3">\n        </span><span class="s1">base,</span><span class="s3">\n        </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">exports</span><span class="s3">\&quot; </span><span class="s1">cannot contain some keys starting with </span><span class="s3">\\</span><span class="s1">'.</span><span class="s3">\\</span><span class="s1">' and some not.' +</span><span class="s3">\n          </span><span class="s1">' The exports object must either be an object of package subpath keys' +</span><span class="s3">\n          </span><span class="s1">' or an object of main entry condition name keys only.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return isConditionalSugar</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} match</span><span class="s3">\n </span><span class="s1">* @param {URL} pjsonUrl</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function emitTrailingSlashPatternDeprecation(match, pjsonUrl, base) {</span><span class="s3">\n  </span><span class="s1">// @ts-expect-error: apparently it does exist, TS.</span><span class="s3">\n  </span><span class="s1">if (process.noDeprecation) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const pjsonPath = fileURLToPath(pjsonUrl);</span><span class="s3">\n  </span><span class="s1">if (emittedPackageWarnings.has(pjsonPath + '|' + match)) return</span><span class="s3">\n  </span><span class="s1">emittedPackageWarnings.add(pjsonPath + '|' + match);</span><span class="s3">\n  </span><span class="s1">process.emitWarning(</span><span class="s3">\n    </span><span class="s1">`Use of deprecated trailing slash pattern mapping </span><span class="s3">\&quot;</span><span class="s1">${match}</span><span class="s3">\&quot; </span><span class="s1">in the ` +</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\&quot;</span><span class="s1">exports</span><span class="s3">\&quot; </span><span class="s1">field module resolution of the package at ${pjsonPath}${</span><span class="s3">\n        </span><span class="s1">base ? ` imported from ${fileURLToPath(base)}` : ''</span><span class="s3">\n      </span><span class="s1">}. Mapping specifiers ending in </span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot; </span><span class="s1">is no longer supported.`,</span><span class="s3">\n    </span><span class="s1">'DeprecationWarning',</span><span class="s3">\n    </span><span class="s1">'DEP0155'</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {URL} packageJsonUrl</span><span class="s3">\n </span><span class="s1">* @param {string} packageSubpath</span><span class="s3">\n </span><span class="s1">* @param {Record&lt;string, unknown&gt;} packageConfig</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {Set&lt;string&gt; | undefined} conditions</span><span class="s3">\n </span><span class="s1">* @returns {URL}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function packageExportsResolve(</span><span class="s3">\n  </span><span class="s1">packageJsonUrl,</span><span class="s3">\n  </span><span class="s1">packageSubpath,</span><span class="s3">\n  </span><span class="s1">packageConfig,</span><span class="s3">\n  </span><span class="s1">base,</span><span class="s3">\n  </span><span class="s1">conditions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">let exports = packageConfig.exports;</span><span class="s3">\n\n  </span><span class="s1">if (isConditionalExportsMainSugar(exports, packageJsonUrl, base)) {</span><span class="s3">\n    </span><span class="s1">exports = {'.': exports};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">own.call(exports, packageSubpath) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!packageSubpath.includes('*') &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!packageSubpath.endsWith('/')</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error: indexable.</span><span class="s3">\n    </span><span class="s1">const target = exports[packageSubpath];</span><span class="s3">\n    </span><span class="s1">const resolveResult = resolvePackageTarget(</span><span class="s3">\n      </span><span class="s1">packageJsonUrl,</span><span class="s3">\n      </span><span class="s1">target,</span><span class="s3">\n      </span><span class="s1">'',</span><span class="s3">\n      </span><span class="s1">packageSubpath,</span><span class="s3">\n      </span><span class="s1">base,</span><span class="s3">\n      </span><span class="s1">false,</span><span class="s3">\n      </span><span class="s1">false,</span><span class="s3">\n      </span><span class="s1">false,</span><span class="s3">\n      </span><span class="s1">conditions</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (resolveResult === null || resolveResult === undefined) {</span><span class="s3">\n      </span><span class="s1">throw exportsNotFound(packageSubpath, packageJsonUrl, base)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return resolveResult</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let bestMatch = '';</span><span class="s3">\n  </span><span class="s1">let bestMatchSubpath = '';</span><span class="s3">\n  </span><span class="s1">const keys = Object.getOwnPropertyNames(exports);</span><span class="s3">\n  </span><span class="s1">let i = -1;</span><span class="s3">\n\n  </span><span class="s1">while (++i &lt; keys.length) {</span><span class="s3">\n    </span><span class="s1">const key = keys[i];</span><span class="s3">\n    </span><span class="s1">const patternIndex = key.indexOf('*');</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">patternIndex !== -1 &amp;&amp;</span><span class="s3">\n      </span><span class="s1">packageSubpath.startsWith(key.slice(0, patternIndex))</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// When this reaches EOL, this can throw at the top of the whole function:</span><span class="s3">\n      </span><span class="s1">//</span><span class="s3">\n      </span><span class="s1">// if (StringPrototypeEndsWith(packageSubpath, '/'))</span><span class="s3">\n      </span><span class="s1">//   throwInvalidSubpath(packageSubpath)</span><span class="s3">\n      </span><span class="s1">//</span><span class="s3">\n      </span><span class="s1">// To match </span><span class="s3">\&quot;</span><span class="s1">imports</span><span class="s3">\&quot; </span><span class="s1">and the spec.</span><span class="s3">\n      </span><span class="s1">if (packageSubpath.endsWith('/')) {</span><span class="s3">\n        </span><span class="s1">emitTrailingSlashPatternDeprecation(</span><span class="s3">\n          </span><span class="s1">packageSubpath,</span><span class="s3">\n          </span><span class="s1">packageJsonUrl,</span><span class="s3">\n          </span><span class="s1">base</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const patternTrailer = key.slice(patternIndex + 1);</span><span class="s3">\n\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">packageSubpath.length &gt;= key.length &amp;&amp;</span><span class="s3">\n        </span><span class="s1">packageSubpath.endsWith(patternTrailer) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">patternKeyCompare(bestMatch, key) === 1 &amp;&amp;</span><span class="s3">\n        </span><span class="s1">key.lastIndexOf('*') === patternIndex</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">bestMatch = key;</span><span class="s3">\n        </span><span class="s1">bestMatchSubpath = packageSubpath.slice(</span><span class="s3">\n          </span><span class="s1">patternIndex,</span><span class="s3">\n          </span><span class="s1">packageSubpath.length - patternTrailer.length</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (bestMatch) {</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error: indexable.</span><span class="s3">\n    </span><span class="s1">const target = /** @type {unknown} */ (exports[bestMatch]);</span><span class="s3">\n    </span><span class="s1">const resolveResult = resolvePackageTarget(</span><span class="s3">\n      </span><span class="s1">packageJsonUrl,</span><span class="s3">\n      </span><span class="s1">target,</span><span class="s3">\n      </span><span class="s1">bestMatchSubpath,</span><span class="s3">\n      </span><span class="s1">bestMatch,</span><span class="s3">\n      </span><span class="s1">base,</span><span class="s3">\n      </span><span class="s1">true,</span><span class="s3">\n      </span><span class="s1">false,</span><span class="s3">\n      </span><span class="s1">packageSubpath.endsWith('/'),</span><span class="s3">\n      </span><span class="s1">conditions</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n\n    </span><span class="s1">if (resolveResult === null || resolveResult === undefined) {</span><span class="s3">\n      </span><span class="s1">throw exportsNotFound(packageSubpath, packageJsonUrl, base)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return resolveResult</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">throw exportsNotFound(packageSubpath, packageJsonUrl, base)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} a</span><span class="s3">\n </span><span class="s1">* @param {string} b</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function patternKeyCompare(a, b) {</span><span class="s3">\n  </span><span class="s1">const aPatternIndex = a.indexOf('*');</span><span class="s3">\n  </span><span class="s1">const bPatternIndex = b.indexOf('*');</span><span class="s3">\n  </span><span class="s1">const baseLengthA = aPatternIndex === -1 ? a.length : aPatternIndex + 1;</span><span class="s3">\n  </span><span class="s1">const baseLengthB = bPatternIndex === -1 ? b.length : bPatternIndex + 1;</span><span class="s3">\n  </span><span class="s1">if (baseLengthA &gt; baseLengthB) return -1</span><span class="s3">\n  </span><span class="s1">if (baseLengthB &gt; baseLengthA) return 1</span><span class="s3">\n  </span><span class="s1">if (aPatternIndex === -1) return 1</span><span class="s3">\n  </span><span class="s1">if (bPatternIndex === -1) return -1</span><span class="s3">\n  </span><span class="s1">if (a.length &gt; b.length) return -1</span><span class="s3">\n  </span><span class="s1">if (b.length &gt; a.length) return 1</span><span class="s3">\n  </span><span class="s1">return 0</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} name</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {Set&lt;string&gt;} [conditions]</span><span class="s3">\n </span><span class="s1">* @returns {URL}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function packageImportsResolve(name, base, conditions) {</span><span class="s3">\n  </span><span class="s1">if (name === '#' || name.startsWith('#/') || name.endsWith('/')) {</span><span class="s3">\n    </span><span class="s1">const reason = 'is not a valid internal imports specifier name';</span><span class="s3">\n    </span><span class="s1">throw new ERR_INVALID_MODULE_SPECIFIER(name, reason, fileURLToPath(base))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/** @type {URL | undefined} */</span><span class="s3">\n  </span><span class="s1">let packageJsonUrl;</span><span class="s3">\n\n  </span><span class="s1">const packageConfig = getPackageScopeConfig(base);</span><span class="s3">\n\n  </span><span class="s1">if (packageConfig.exists) {</span><span class="s3">\n    </span><span class="s1">packageJsonUrl = pathToFileURL(packageConfig.pjsonPath);</span><span class="s3">\n    </span><span class="s1">const imports = packageConfig.imports;</span><span class="s3">\n    </span><span class="s1">if (imports) {</span><span class="s3">\n      </span><span class="s1">if (own.call(imports, name) &amp;&amp; !name.includes('*')) {</span><span class="s3">\n        </span><span class="s1">const resolveResult = resolvePackageTarget(</span><span class="s3">\n          </span><span class="s1">packageJsonUrl,</span><span class="s3">\n          </span><span class="s1">imports[name],</span><span class="s3">\n          </span><span class="s1">'',</span><span class="s3">\n          </span><span class="s1">name,</span><span class="s3">\n          </span><span class="s1">base,</span><span class="s3">\n          </span><span class="s1">false,</span><span class="s3">\n          </span><span class="s1">true,</span><span class="s3">\n          </span><span class="s1">false,</span><span class="s3">\n          </span><span class="s1">conditions</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">if (resolveResult !== null &amp;&amp; resolveResult !== undefined) {</span><span class="s3">\n          </span><span class="s1">return resolveResult</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">let bestMatch = '';</span><span class="s3">\n        </span><span class="s1">let bestMatchSubpath = '';</span><span class="s3">\n        </span><span class="s1">const keys = Object.getOwnPropertyNames(imports);</span><span class="s3">\n        </span><span class="s1">let i = -1;</span><span class="s3">\n\n        </span><span class="s1">while (++i &lt; keys.length) {</span><span class="s3">\n          </span><span class="s1">const key = keys[i];</span><span class="s3">\n          </span><span class="s1">const patternIndex = key.indexOf('*');</span><span class="s3">\n\n          </span><span class="s1">if (patternIndex !== -1 &amp;&amp; name.startsWith(key.slice(0, -1))) {</span><span class="s3">\n            </span><span class="s1">const patternTrailer = key.slice(patternIndex + 1);</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">name.length &gt;= key.length &amp;&amp;</span><span class="s3">\n              </span><span class="s1">name.endsWith(patternTrailer) &amp;&amp;</span><span class="s3">\n              </span><span class="s1">patternKeyCompare(bestMatch, key) === 1 &amp;&amp;</span><span class="s3">\n              </span><span class="s1">key.lastIndexOf('*') === patternIndex</span><span class="s3">\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">bestMatch = key;</span><span class="s3">\n              </span><span class="s1">bestMatchSubpath = name.slice(</span><span class="s3">\n                </span><span class="s1">patternIndex,</span><span class="s3">\n                </span><span class="s1">name.length - patternTrailer.length</span><span class="s3">\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (bestMatch) {</span><span class="s3">\n          </span><span class="s1">const target = imports[bestMatch];</span><span class="s3">\n          </span><span class="s1">const resolveResult = resolvePackageTarget(</span><span class="s3">\n            </span><span class="s1">packageJsonUrl,</span><span class="s3">\n            </span><span class="s1">target,</span><span class="s3">\n            </span><span class="s1">bestMatchSubpath,</span><span class="s3">\n            </span><span class="s1">bestMatch,</span><span class="s3">\n            </span><span class="s1">base,</span><span class="s3">\n            </span><span class="s1">true,</span><span class="s3">\n            </span><span class="s1">true,</span><span class="s3">\n            </span><span class="s1">false,</span><span class="s3">\n            </span><span class="s1">conditions</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n\n          </span><span class="s1">if (resolveResult !== null &amp;&amp; resolveResult !== undefined) {</span><span class="s3">\n            </span><span class="s1">return resolveResult</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">throw importNotDefined(name, packageJsonUrl, base)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function parsePackageName(specifier, base) {</span><span class="s3">\n  </span><span class="s1">let separatorIndex = specifier.indexOf('/');</span><span class="s3">\n  </span><span class="s1">let validPackageName = true;</span><span class="s3">\n  </span><span class="s1">let isScoped = false;</span><span class="s3">\n  </span><span class="s1">if (specifier[0] === '@') {</span><span class="s3">\n    </span><span class="s1">isScoped = true;</span><span class="s3">\n    </span><span class="s1">if (separatorIndex === -1 || specifier.length === 0) {</span><span class="s3">\n      </span><span class="s1">validPackageName = false;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">separatorIndex = specifier.indexOf('/', separatorIndex + 1);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const packageName =</span><span class="s3">\n    </span><span class="s1">separatorIndex === -1 ? specifier : specifier.slice(0, separatorIndex);</span><span class="s3">\n\n  </span><span class="s1">// Package name cannot have leading . and cannot have percent-encoding or</span><span class="s3">\n  </span><span class="s1">// </span><span class="s3">\\\\ </span><span class="s1">separators.</span><span class="s3">\n  </span><span class="s1">if (invalidPackageNameRegEx.exec(packageName) !== null) {</span><span class="s3">\n    </span><span class="s1">validPackageName = false;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!validPackageName) {</span><span class="s3">\n    </span><span class="s1">throw new ERR_INVALID_MODULE_SPECIFIER(</span><span class="s3">\n      </span><span class="s1">specifier,</span><span class="s3">\n      </span><span class="s1">'is not a valid package name',</span><span class="s3">\n      </span><span class="s1">fileURLToPath(base)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const packageSubpath =</span><span class="s3">\n    </span><span class="s1">'.' + (separatorIndex === -1 ? '' : specifier.slice(separatorIndex));</span><span class="s3">\n\n  </span><span class="s1">return {packageName, packageSubpath, isScoped}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">* @param {Set&lt;string&gt; | undefined} conditions</span><span class="s3">\n </span><span class="s1">* @returns {URL}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function packageResolve(specifier, base, conditions) {</span><span class="s3">\n  </span><span class="s1">if (builtinModules.includes(specifier)) {</span><span class="s3">\n    </span><span class="s1">return new URL$1('node:' + specifier)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const {packageName, packageSubpath, isScoped} = parsePackageName(</span><span class="s3">\n    </span><span class="s1">specifier,</span><span class="s3">\n    </span><span class="s1">base</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">// ResolveSelf</span><span class="s3">\n  </span><span class="s1">const packageConfig = getPackageScopeConfig(base);</span><span class="s3">\n\n  </span><span class="s1">// Can’t test.</span><span class="s3">\n  </span><span class="s1">/* c8 ignore next 16 */</span><span class="s3">\n  </span><span class="s1">if (packageConfig.exists) {</span><span class="s3">\n    </span><span class="s1">const packageJsonUrl = pathToFileURL(packageConfig.pjsonPath);</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">packageConfig.name === packageName &amp;&amp;</span><span class="s3">\n      </span><span class="s1">packageConfig.exports !== undefined &amp;&amp;</span><span class="s3">\n      </span><span class="s1">packageConfig.exports !== null</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return packageExportsResolve(</span><span class="s3">\n        </span><span class="s1">packageJsonUrl,</span><span class="s3">\n        </span><span class="s1">packageSubpath,</span><span class="s3">\n        </span><span class="s1">packageConfig,</span><span class="s3">\n        </span><span class="s1">base,</span><span class="s3">\n        </span><span class="s1">conditions</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let packageJsonUrl = new URL$1(</span><span class="s3">\n    </span><span class="s1">'./node_modules/' + packageName + '/package.json',</span><span class="s3">\n    </span><span class="s1">base</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">let packageJsonPath = fileURLToPath(packageJsonUrl);</span><span class="s3">\n  </span><span class="s1">/** @type {string} */</span><span class="s3">\n  </span><span class="s1">let lastPath;</span><span class="s3">\n  </span><span class="s1">do {</span><span class="s3">\n    </span><span class="s1">const stat = tryStatSync(packageJsonPath.slice(0, -13));</span><span class="s3">\n    </span><span class="s1">if (!stat || !stat.isDirectory()) {</span><span class="s3">\n      </span><span class="s1">lastPath = packageJsonPath;</span><span class="s3">\n      </span><span class="s1">packageJsonUrl = new URL$1(</span><span class="s3">\n        </span><span class="s1">(isScoped ? '../../../../node_modules/' : '../../../node_modules/') +</span><span class="s3">\n          </span><span class="s1">packageName +</span><span class="s3">\n          </span><span class="s1">'/package.json',</span><span class="s3">\n        </span><span class="s1">packageJsonUrl</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">packageJsonPath = fileURLToPath(packageJsonUrl);</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Package match.</span><span class="s3">\n    </span><span class="s1">const packageConfig = read(packageJsonPath, {base, specifier});</span><span class="s3">\n    </span><span class="s1">if (packageConfig.exports !== undefined &amp;&amp; packageConfig.exports !== null) {</span><span class="s3">\n      </span><span class="s1">return packageExportsResolve(</span><span class="s3">\n        </span><span class="s1">packageJsonUrl,</span><span class="s3">\n        </span><span class="s1">packageSubpath,</span><span class="s3">\n        </span><span class="s1">packageConfig,</span><span class="s3">\n        </span><span class="s1">base,</span><span class="s3">\n        </span><span class="s1">conditions</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (packageSubpath === '.') {</span><span class="s3">\n      </span><span class="s1">return legacyMainResolve(packageJsonUrl, packageConfig, base)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return new URL$1(packageSubpath, packageJsonUrl)</span><span class="s3">\n    </span><span class="s1">// Cross-platform root check.</span><span class="s3">\n  </span><span class="s1">} while (packageJsonPath.length !== lastPath.length)</span><span class="s3">\n\n  </span><span class="s1">throw new ERR_MODULE_NOT_FOUND(packageName, fileURLToPath(base), false)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">* @returns {boolean}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function isRelativeSpecifier(specifier) {</span><span class="s3">\n  </span><span class="s1">if (specifier[0] === '.') {</span><span class="s3">\n    </span><span class="s1">if (specifier.length === 1 || specifier[1] === '/') return true</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">specifier[1] === '.' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(specifier.length === 2 || specifier[2] === '/')</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return false</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">* @returns {boolean}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function shouldBeTreatedAsRelativeOrAbsolutePath(specifier) {</span><span class="s3">\n  </span><span class="s1">if (specifier === '') return false</span><span class="s3">\n  </span><span class="s1">if (specifier[0] === '/') return true</span><span class="s3">\n  </span><span class="s1">return isRelativeSpecifier(specifier)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* The “Resolver Algorithm Specification” as detailed in the Node docs (which is</span><span class="s3">\n </span><span class="s1">* sync and slightly lower-level than `resolve`).</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">*   `/example.js`, `./example.js`, `../example.js`, `some-package`, `fs`, etc.</span><span class="s3">\n </span><span class="s1">* @param {URL} base</span><span class="s3">\n </span><span class="s1">*   Full URL (to a file) that `specifier` is resolved relative from.</span><span class="s3">\n </span><span class="s1">* @param {Set&lt;string&gt;} [conditions]</span><span class="s3">\n </span><span class="s1">*   Conditions.</span><span class="s3">\n </span><span class="s1">* @param {boolean} [preserveSymlinks]</span><span class="s3">\n </span><span class="s1">*   Keep symlinks instead of resolving them.</span><span class="s3">\n </span><span class="s1">* @returns {URL}</span><span class="s3">\n </span><span class="s1">*   A URL object to the found thing.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function moduleResolve(specifier, base, conditions, preserveSymlinks) {</span><span class="s3">\n  </span><span class="s1">// Note: The Node code supports `base` as a string (in this internal API) too,</span><span class="s3">\n  </span><span class="s1">// we don’t.</span><span class="s3">\n  </span><span class="s1">const protocol = base.protocol;</span><span class="s3">\n  </span><span class="s1">const isData = protocol === 'data:';</span><span class="s3">\n  </span><span class="s1">const isRemote = isData || protocol === 'http:' || protocol === 'https:';</span><span class="s3">\n  </span><span class="s1">// Order swapped from spec for minor perf gain.</span><span class="s3">\n  </span><span class="s1">// Ok since relative URLs cannot parse as URLs.</span><span class="s3">\n  </span><span class="s1">/** @type {URL | undefined} */</span><span class="s3">\n  </span><span class="s1">let resolved;</span><span class="s3">\n\n  </span><span class="s1">if (shouldBeTreatedAsRelativeOrAbsolutePath(specifier)) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">resolved = new URL$1(specifier, base);</span><span class="s3">\n    </span><span class="s1">} catch (error_) {</span><span class="s3">\n      </span><span class="s1">const error = new ERR_UNSUPPORTED_RESOLVE_REQUEST(specifier, base);</span><span class="s3">\n      </span><span class="s1">error.cause = error_;</span><span class="s3">\n      </span><span class="s1">throw error</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else if (protocol === 'file:' &amp;&amp; specifier[0] === '#') {</span><span class="s3">\n    </span><span class="s1">resolved = packageImportsResolve(specifier, base, conditions);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">resolved = new URL$1(specifier);</span><span class="s3">\n    </span><span class="s1">} catch (error_) {</span><span class="s3">\n      </span><span class="s1">// Note: actual code uses `canBeRequiredWithoutScheme`.</span><span class="s3">\n      </span><span class="s1">if (isRemote &amp;&amp; !builtinModules.includes(specifier)) {</span><span class="s3">\n        </span><span class="s1">const error = new ERR_UNSUPPORTED_RESOLVE_REQUEST(specifier, base);</span><span class="s3">\n        </span><span class="s1">error.cause = error_;</span><span class="s3">\n        </span><span class="s1">throw error</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">resolved = packageResolve(specifier, base, conditions);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">assert(resolved !== undefined, 'expected to be defined');</span><span class="s3">\n\n  </span><span class="s1">if (resolved.protocol !== 'file:') {</span><span class="s3">\n    </span><span class="s1">return resolved</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return finalizeResolution(resolved, base, preserveSymlinks)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">* @param {URL | undefined} parsed</span><span class="s3">\n </span><span class="s1">* @param {URL | undefined} parsedParentURL</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function checkIfDisallowedImport(specifier, parsed, parsedParentURL) {</span><span class="s3">\n  </span><span class="s1">if (parsedParentURL) {</span><span class="s3">\n    </span><span class="s1">// Avoid accessing the `protocol` property due to the lazy getters.</span><span class="s3">\n    </span><span class="s1">const parentProtocol = parsedParentURL.protocol;</span><span class="s3">\n\n    </span><span class="s1">if (parentProtocol === 'http:' || parentProtocol === 'https:') {</span><span class="s3">\n      </span><span class="s1">if (shouldBeTreatedAsRelativeOrAbsolutePath(specifier)) {</span><span class="s3">\n        </span><span class="s1">// Avoid accessing the `protocol` property due to the lazy getters.</span><span class="s3">\n        </span><span class="s1">const parsedProtocol = parsed?.protocol;</span><span class="s3">\n\n        </span><span class="s1">// `data:` and `blob:` disallowed due to allowing file: access via</span><span class="s3">\n        </span><span class="s1">// indirection</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">parsedProtocol &amp;&amp;</span><span class="s3">\n          </span><span class="s1">parsedProtocol !== 'https:' &amp;&amp;</span><span class="s3">\n          </span><span class="s1">parsedProtocol !== 'http:'</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">throw new ERR_NETWORK_IMPORT_DISALLOWED(</span><span class="s3">\n            </span><span class="s1">specifier,</span><span class="s3">\n            </span><span class="s1">parsedParentURL,</span><span class="s3">\n            </span><span class="s1">'remote imports cannot import from a local location.'</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">return {url: parsed?.href || ''}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (builtinModules.includes(specifier)) {</span><span class="s3">\n        </span><span class="s1">throw new ERR_NETWORK_IMPORT_DISALLOWED(</span><span class="s3">\n          </span><span class="s1">specifier,</span><span class="s3">\n          </span><span class="s1">parsedParentURL,</span><span class="s3">\n          </span><span class="s1">'remote imports cannot import from a local location.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">throw new ERR_NETWORK_IMPORT_DISALLOWED(</span><span class="s3">\n        </span><span class="s1">specifier,</span><span class="s3">\n        </span><span class="s1">parsedParentURL,</span><span class="s3">\n        </span><span class="s1">'only relative and absolute specifiers are supported.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Note: this is from:</span><span class="s3">\n</span><span class="s1">// &lt;https://github.com/nodejs/node/blob/3e74590/lib/internal/url.js#L687&gt;</span><span class="s3">\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Checks if a value has the shape of a WHATWG URL object.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Using a symbol or instanceof would not be able to recognize URL objects</span><span class="s3">\n </span><span class="s1">* coming from other implementations (e.g. in Electron), so instead we are</span><span class="s3">\n </span><span class="s1">* checking some well known properties for a lack of a better test.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* We use `href` and `protocol` as they are the only properties that are</span><span class="s3">\n </span><span class="s1">* easy to retrieve and calculate due to the lazy nature of the getters.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @template {unknown} Value</span><span class="s3">\n </span><span class="s1">* @param {Value} self</span><span class="s3">\n </span><span class="s1">* @returns {Value is URL}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function isURL(self) {</span><span class="s3">\n  </span><span class="s1">return Boolean(</span><span class="s3">\n    </span><span class="s1">self &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof self === 'object' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">'href' in self &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof self.href === 'string' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">'protocol' in self &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof self.protocol === 'string' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">self.href &amp;&amp;</span><span class="s3">\n      </span><span class="s1">self.protocol</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Validate user-input in `context` supplied by a custom loader.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param {unknown} parentURL</span><span class="s3">\n </span><span class="s1">* @returns {asserts parentURL is URL | string | undefined}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function throwIfInvalidParentURL(parentURL) {</span><span class="s3">\n  </span><span class="s1">if (parentURL === undefined) {</span><span class="s3">\n    </span><span class="s1">return // Main entry point, so no parent</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof parentURL !== 'string' &amp;&amp; !isURL(parentURL)) {</span><span class="s3">\n    </span><span class="s1">throw new codes.ERR_INVALID_ARG_TYPE(</span><span class="s3">\n      </span><span class="s1">'parentURL',</span><span class="s3">\n      </span><span class="s1">['string', 'URL'],</span><span class="s3">\n      </span><span class="s1">parentURL</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">* @param {{parentURL?: string, conditions?: Array&lt;string&gt;}} context</span><span class="s3">\n </span><span class="s1">* @returns {{url: string, format?: string | null}}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function defaultResolve(specifier, context = {}) {</span><span class="s3">\n  </span><span class="s1">const {parentURL} = context;</span><span class="s3">\n  </span><span class="s1">assert(parentURL !== undefined, 'expected `parentURL` to be defined');</span><span class="s3">\n  </span><span class="s1">throwIfInvalidParentURL(parentURL);</span><span class="s3">\n\n  </span><span class="s1">/** @type {URL | undefined} */</span><span class="s3">\n  </span><span class="s1">let parsedParentURL;</span><span class="s3">\n  </span><span class="s1">if (parentURL) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">parsedParentURL = new URL$1(parentURL);</span><span class="s3">\n    </span><span class="s1">} catch {</span><span class="s3">\n      </span><span class="s1">// Ignore exception</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/** @type {URL | undefined} */</span><span class="s3">\n  </span><span class="s1">let parsed;</span><span class="s3">\n  </span><span class="s1">/** @type {string | undefined} */</span><span class="s3">\n  </span><span class="s1">let protocol;</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">parsed = shouldBeTreatedAsRelativeOrAbsolutePath(specifier)</span><span class="s3">\n      </span><span class="s1">? new URL$1(specifier, parsedParentURL)</span><span class="s3">\n      </span><span class="s1">: new URL$1(specifier);</span><span class="s3">\n\n    </span><span class="s1">// Avoid accessing the `protocol` property due to the lazy getters.</span><span class="s3">\n    </span><span class="s1">protocol = parsed.protocol;</span><span class="s3">\n\n    </span><span class="s1">if (protocol === 'data:') {</span><span class="s3">\n      </span><span class="s1">return {url: parsed.href, format: null}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">// Ignore exception</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// There are multiple deep branches that can either throw or return; instead</span><span class="s3">\n  </span><span class="s1">// of duplicating that deeply nested logic for the possible returns, DRY and</span><span class="s3">\n  </span><span class="s1">// check for a return. This seems the least gnarly.</span><span class="s3">\n  </span><span class="s1">const maybeReturn = checkIfDisallowedImport(</span><span class="s3">\n    </span><span class="s1">specifier,</span><span class="s3">\n    </span><span class="s1">parsed,</span><span class="s3">\n    </span><span class="s1">parsedParentURL</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">if (maybeReturn) return maybeReturn</span><span class="s3">\n\n  </span><span class="s1">// This must come after checkIfDisallowedImport</span><span class="s3">\n  </span><span class="s1">if (protocol === undefined &amp;&amp; parsed) {</span><span class="s3">\n    </span><span class="s1">protocol = parsed.protocol;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (protocol === 'node:') {</span><span class="s3">\n    </span><span class="s1">return {url: specifier}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// This must come after checkIfDisallowedImport</span><span class="s3">\n  </span><span class="s1">if (parsed &amp;&amp; parsed.protocol === 'node:') return {url: specifier}</span><span class="s3">\n\n  </span><span class="s1">const conditions = getConditionsSet(context.conditions);</span><span class="s3">\n\n  </span><span class="s1">const url = moduleResolve(specifier, new URL$1(parentURL), conditions, false);</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">// Do NOT cast `url` to a string: that will work even when there are real</span><span class="s3">\n    </span><span class="s1">// problems, silencing them</span><span class="s3">\n    </span><span class="s1">url: url.href,</span><span class="s3">\n    </span><span class="s1">format: defaultGetFormatWithoutErrors(url, {parentURL})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @typedef {import('./lib/errors.js').ErrnoException} ErrnoException</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Match `import.meta.resolve` except that `parent` is required (you can pass</span><span class="s3">\n </span><span class="s1">* `import.meta.url`).</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param {string} specifier</span><span class="s3">\n </span><span class="s1">*   The module specifier to resolve relative to parent</span><span class="s3">\n </span><span class="s1">*   (`/example.js`, `./example.js`, `../example.js`, `some-package`, `fs`,</span><span class="s3">\n </span><span class="s1">*   etc).</span><span class="s3">\n </span><span class="s1">* @param {string} parent</span><span class="s3">\n </span><span class="s1">*   The absolute parent module URL to resolve from.</span><span class="s3">\n </span><span class="s1">*   You must pass `import.meta.url` or something else.</span><span class="s3">\n </span><span class="s1">* @returns {string}</span><span class="s3">\n </span><span class="s1">*   Returns a string to a full `file:`, `data:`, or `node:` URL</span><span class="s3">\n </span><span class="s1">*   to the found thing.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function resolve(specifier, parent) {</span><span class="s3">\n  </span><span class="s1">if (!parent) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">'Please pass `parent`: `import-meta-resolve` cannot ponyfill that'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">return defaultResolve(specifier, {parentURL: parent}).url</span><span class="s3">\n  </span><span class="s1">} catch (error) {</span><span class="s3">\n    </span><span class="s1">// See: &lt;https://github.com/nodejs/node/blob/45f5c9b/lib/internal/modules/esm/initialize_import_meta.js#L34&gt;</span><span class="s3">\n    </span><span class="s1">const exception = /** @type {ErrnoException} */ (error);</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">(exception.code === 'ERR_UNSUPPORTED_DIR_IMPORT' ||</span><span class="s3">\n        </span><span class="s1">exception.code === 'ERR_MODULE_NOT_FOUND') &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof exception.url === 'string'</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return exception.url</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">throw error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export { moduleResolve, resolve };</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[]}</span></pre>
</body>
</html>