<html>
<head>
<title>index.es.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #2aacb8;}
.s5 { color: #7a7e85;}
.s6 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
index.es.js</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s2">* as </span><span class="s1">babel from </span><span class="s3">'@babel/core'</span><span class="s2">;</span>
<span class="s0">import </span><span class="s2">{ </span><span class="s1">createFilter </span><span class="s2">} </span><span class="s1">from </span><span class="s3">'@rollup/pluginutils'</span><span class="s2">;</span>
<span class="s0">import </span><span class="s2">{ </span><span class="s1">addNamed </span><span class="s2">} </span><span class="s1">from </span><span class="s3">'@babel/helper-module-imports'</span><span class="s2">;</span>

<span class="s0">function </span><span class="s1">_defineProperty</span><span class="s2">(</span><span class="s1">obj</span><span class="s2">, </span><span class="s1">key</span><span class="s2">, </span><span class="s1">value</span><span class="s2">) {</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">key </span><span class="s0">in </span><span class="s1">obj</span><span class="s2">) {</span>
    <span class="s1">Object</span><span class="s2">.</span><span class="s1">defineProperty</span><span class="s2">(</span><span class="s1">obj</span><span class="s2">, </span><span class="s1">key</span><span class="s2">, {</span>
      <span class="s1">value</span><span class="s2">: </span><span class="s1">value</span><span class="s2">,</span>
      <span class="s1">enumerable</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
      <span class="s1">configurable</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
      <span class="s1">writable</span><span class="s2">: </span><span class="s0">true</span>
    <span class="s2">});</span>
  <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
    <span class="s1">obj</span><span class="s2">[</span><span class="s1">key</span><span class="s2">] = </span><span class="s1">value</span><span class="s2">;</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">obj</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">ownKeys</span><span class="s2">(</span><span class="s1">object</span><span class="s2">, </span><span class="s1">enumerableOnly</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">keys </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">object</span><span class="s2">);</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertySymbols</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">symbols </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertySymbols</span><span class="s2">(</span><span class="s1">object</span><span class="s2">);</span>
    <span class="s0">if </span><span class="s2">(</span><span class="s1">enumerableOnly</span><span class="s2">) </span><span class="s1">symbols </span><span class="s2">= </span><span class="s1">symbols</span><span class="s2">.</span><span class="s1">filter</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">sym</span><span class="s2">) {</span>
      <span class="s0">return </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertyDescriptor</span><span class="s2">(</span><span class="s1">object</span><span class="s2">, </span><span class="s1">sym</span><span class="s2">).</span><span class="s1">enumerable</span><span class="s2">;</span>
    <span class="s2">});</span>
    <span class="s1">keys</span><span class="s2">.</span><span class="s1">push</span><span class="s2">.</span><span class="s1">apply</span><span class="s2">(</span><span class="s1">keys</span><span class="s2">, </span><span class="s1">symbols</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">keys</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">_objectSpread2</span><span class="s2">(</span><span class="s1">target</span><span class="s2">) {</span>
  <span class="s0">for </span><span class="s2">(</span><span class="s0">var </span><span class="s1">i </span><span class="s2">= </span><span class="s4">1</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">arguments</span><span class="s2">.</span><span class="s1">length</span><span class="s2">; </span><span class="s1">i</span><span class="s2">++) {</span>
    <span class="s0">var </span><span class="s1">source </span><span class="s2">= </span><span class="s1">arguments</span><span class="s2">[</span><span class="s1">i</span><span class="s2">] != </span><span class="s0">null </span><span class="s2">? </span><span class="s1">arguments</span><span class="s2">[</span><span class="s1">i</span><span class="s2">] : {};</span>

    <span class="s0">if </span><span class="s2">(</span><span class="s1">i </span><span class="s2">% </span><span class="s4">2</span><span class="s2">) {</span>
      <span class="s1">ownKeys</span><span class="s2">(</span><span class="s1">Object</span><span class="s2">(</span><span class="s1">source</span><span class="s2">), </span><span class="s0">true</span><span class="s2">).</span><span class="s1">forEach</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">key</span><span class="s2">) {</span>
        <span class="s1">_defineProperty</span><span class="s2">(</span><span class="s1">target</span><span class="s2">, </span><span class="s1">key</span><span class="s2">, </span><span class="s1">source</span><span class="s2">[</span><span class="s1">key</span><span class="s2">]);</span>
      <span class="s2">});</span>
    <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertyDescriptors</span><span class="s2">) {</span>
      <span class="s1">Object</span><span class="s2">.</span><span class="s1">defineProperties</span><span class="s2">(</span><span class="s1">target</span><span class="s2">, </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertyDescriptors</span><span class="s2">(</span><span class="s1">source</span><span class="s2">));</span>
    <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
      <span class="s1">ownKeys</span><span class="s2">(</span><span class="s1">Object</span><span class="s2">(</span><span class="s1">source</span><span class="s2">)).</span><span class="s1">forEach</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">key</span><span class="s2">) {</span>
        <span class="s1">Object</span><span class="s2">.</span><span class="s1">defineProperty</span><span class="s2">(</span><span class="s1">target</span><span class="s2">, </span><span class="s1">key</span><span class="s2">, </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertyDescriptor</span><span class="s2">(</span><span class="s1">source</span><span class="s2">, </span><span class="s1">key</span><span class="s2">));</span>
      <span class="s2">});</span>
    <span class="s2">}</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">target</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">_objectWithoutPropertiesLoose</span><span class="s2">(</span><span class="s1">source</span><span class="s2">, </span><span class="s1">excluded</span><span class="s2">) {</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">source </span><span class="s2">== </span><span class="s0">null</span><span class="s2">) </span><span class="s0">return </span><span class="s2">{};</span>
  <span class="s0">var </span><span class="s1">target </span><span class="s2">= {};</span>
  <span class="s0">var </span><span class="s1">sourceKeys </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">source</span><span class="s2">);</span>
  <span class="s0">var </span><span class="s1">key</span><span class="s2">, </span><span class="s1">i</span><span class="s2">;</span>

  <span class="s0">for </span><span class="s2">(</span><span class="s1">i </span><span class="s2">= </span><span class="s4">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">sourceKeys</span><span class="s2">.</span><span class="s1">length</span><span class="s2">; </span><span class="s1">i</span><span class="s2">++) {</span>
    <span class="s1">key </span><span class="s2">= </span><span class="s1">sourceKeys</span><span class="s2">[</span><span class="s1">i</span><span class="s2">];</span>
    <span class="s0">if </span><span class="s2">(</span><span class="s1">excluded</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s1">key</span><span class="s2">) &gt;= </span><span class="s4">0</span><span class="s2">) </span><span class="s0">continue</span><span class="s2">;</span>
    <span class="s1">target</span><span class="s2">[</span><span class="s1">key</span><span class="s2">] = </span><span class="s1">source</span><span class="s2">[</span><span class="s1">key</span><span class="s2">];</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">target</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">_objectWithoutProperties</span><span class="s2">(</span><span class="s1">source</span><span class="s2">, </span><span class="s1">excluded</span><span class="s2">) {</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">source </span><span class="s2">== </span><span class="s0">null</span><span class="s2">) </span><span class="s0">return </span><span class="s2">{};</span>

  <span class="s0">var </span><span class="s1">target </span><span class="s2">= </span><span class="s1">_objectWithoutPropertiesLoose</span><span class="s2">(</span><span class="s1">source</span><span class="s2">, </span><span class="s1">excluded</span><span class="s2">);</span>

  <span class="s0">var </span><span class="s1">key</span><span class="s2">, </span><span class="s1">i</span><span class="s2">;</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertySymbols</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">sourceSymbolKeys </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">getOwnPropertySymbols</span><span class="s2">(</span><span class="s1">source</span><span class="s2">);</span>

    <span class="s0">for </span><span class="s2">(</span><span class="s1">i </span><span class="s2">= </span><span class="s4">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">sourceSymbolKeys</span><span class="s2">.</span><span class="s1">length</span><span class="s2">; </span><span class="s1">i</span><span class="s2">++) {</span>
      <span class="s1">key </span><span class="s2">= </span><span class="s1">sourceSymbolKeys</span><span class="s2">[</span><span class="s1">i</span><span class="s2">];</span>
      <span class="s0">if </span><span class="s2">(</span><span class="s1">excluded</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s1">key</span><span class="s2">) &gt;= </span><span class="s4">0</span><span class="s2">) </span><span class="s0">continue</span><span class="s2">;</span>
      <span class="s0">if </span><span class="s2">(!</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">propertyIsEnumerable</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">source</span><span class="s2">, </span><span class="s1">key</span><span class="s2">)) </span><span class="s0">continue</span><span class="s2">;</span>
      <span class="s1">target</span><span class="s2">[</span><span class="s1">key</span><span class="s2">] = </span><span class="s1">source</span><span class="s2">[</span><span class="s1">key</span><span class="s2">];</span>
    <span class="s2">}</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">target</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">const </span><span class="s1">BUNDLED </span><span class="s2">= </span><span class="s3">'bundled'</span><span class="s2">;</span>
<span class="s0">const </span><span class="s1">INLINE </span><span class="s2">= </span><span class="s3">'inline'</span><span class="s2">;</span>
<span class="s0">const </span><span class="s1">RUNTIME </span><span class="s2">= </span><span class="s3">'runtime'</span><span class="s2">;</span>
<span class="s0">const </span><span class="s1">EXTERNAL </span><span class="s2">= </span><span class="s3">'external'</span><span class="s2">; </span><span class="s5">// NOTE: DO NOT REMOVE the null character `\0` as it may be used by other plugins</span>
<span class="s5">// e.g. https://github.com/rollup/rollup-plugin-node-resolve/blob/313a3e32f432f9eb18cc4c231cc7aac6df317a51/src/index.js#L74</span>

<span class="s0">const </span><span class="s1">HELPERS </span><span class="s2">= </span><span class="s3">'</span><span class="s0">\0</span><span class="s3">rollupPluginBabelHelpers.js'</span><span class="s2">;</span>

<span class="s0">function </span><span class="s1">importHelperPlugin</span><span class="s2">({</span>
  <span class="s1">types</span><span class="s2">: </span><span class="s1">t</span>
<span class="s2">}) {</span>
  <span class="s0">return </span><span class="s2">{</span>
    <span class="s1">pre</span><span class="s2">(</span><span class="s1">file</span><span class="s2">) {</span>
      <span class="s0">const </span><span class="s1">cachedHelpers </span><span class="s2">= {};</span>
      <span class="s1">file</span><span class="s2">.</span><span class="s1">set</span><span class="s2">(</span><span class="s3">'helperGenerator'</span><span class="s2">, </span><span class="s1">name </span><span class="s2">=&gt; {</span>
        <span class="s0">if </span><span class="s2">(!</span><span class="s1">file</span><span class="s2">.</span><span class="s1">availableHelper</span><span class="s2">(</span><span class="s1">name</span><span class="s2">)) {</span>
          <span class="s0">return null</span><span class="s2">;</span>
        <span class="s2">}</span>

        <span class="s0">if </span><span class="s2">(</span><span class="s1">cachedHelpers</span><span class="s2">[</span><span class="s1">name</span><span class="s2">]) {</span>
          <span class="s0">return </span><span class="s1">t</span><span class="s2">.</span><span class="s1">cloneNode</span><span class="s2">(</span><span class="s1">cachedHelpers</span><span class="s2">[</span><span class="s1">name</span><span class="s2">]);</span>
        <span class="s2">}</span>

        <span class="s0">return </span><span class="s1">cachedHelpers</span><span class="s2">[</span><span class="s1">name</span><span class="s2">] = </span><span class="s1">addNamed</span><span class="s2">(</span><span class="s1">file</span><span class="s2">.</span><span class="s1">path</span><span class="s2">, </span><span class="s1">name</span><span class="s2">, </span><span class="s1">HELPERS</span><span class="s2">);</span>
      <span class="s2">});</span>
    <span class="s2">}</span>

  <span class="s2">};</span>
<span class="s2">}</span>

<span class="s0">const </span><span class="s1">addBabelPlugin </span><span class="s2">= (</span><span class="s1">options</span><span class="s2">, </span><span class="s1">plugin</span><span class="s2">) =&gt; {</span>
  <span class="s0">return </span><span class="s1">_objectSpread2</span><span class="s2">(</span><span class="s1">_objectSpread2</span><span class="s2">({}, </span><span class="s1">options</span><span class="s2">), {}, {</span>
    <span class="s1">plugins</span><span class="s2">: </span><span class="s1">options</span><span class="s2">.</span><span class="s1">plugins</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">plugin</span><span class="s2">)</span>
  <span class="s2">});</span>
<span class="s2">};</span>
<span class="s0">const </span><span class="s1">warned </span><span class="s2">= {};</span>
<span class="s0">function </span><span class="s1">warnOnce</span><span class="s2">(</span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">msg</span><span class="s2">) {</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">warned</span><span class="s2">[</span><span class="s1">msg</span><span class="s2">]) </span><span class="s0">return</span><span class="s2">;</span>
  <span class="s1">warned</span><span class="s2">[</span><span class="s1">msg</span><span class="s2">] = </span><span class="s0">true</span><span class="s2">;</span>
  <span class="s1">ctx</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s1">msg</span><span class="s2">);</span>
<span class="s2">}</span>
<span class="s0">const </span><span class="s1">regExpCharactersRegExp </span><span class="s2">= </span><span class="s6">/[\\^$.*+?()[\]{}|]/g</span><span class="s2">;</span>
<span class="s0">const </span><span class="s1">escapeRegExpCharacters </span><span class="s2">= </span><span class="s1">str </span><span class="s2">=&gt; </span><span class="s1">str</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">regExpCharactersRegExp</span><span class="s2">, </span><span class="s3">'</span><span class="s0">\\</span><span class="s3">$&amp;'</span><span class="s2">);</span>
<span class="s0">function </span><span class="s1">stripQuery</span><span class="s2">(</span><span class="s1">id</span><span class="s2">) {</span>
  <span class="s5">// strip query params from import</span>
  <span class="s0">const </span><span class="s2">[</span><span class="s1">bareId</span><span class="s2">, </span><span class="s1">query</span><span class="s2">] = </span><span class="s1">id</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s3">'?'</span><span class="s2">);</span>
  <span class="s0">const </span><span class="s1">suffix </span><span class="s2">= </span><span class="s3">`</span><span class="s1">$</span><span class="s2">{</span><span class="s1">query </span><span class="s2">? </span><span class="s3">`?</span><span class="s1">$</span><span class="s2">{</span><span class="s1">query</span><span class="s2">}</span><span class="s3">` </span><span class="s2">: </span><span class="s3">''</span><span class="s2">}</span><span class="s3">`</span><span class="s2">;</span>
  <span class="s0">return </span><span class="s2">{</span>
    <span class="s1">bareId</span><span class="s2">,</span>
    <span class="s1">query</span><span class="s2">,</span>
    <span class="s1">suffix</span>
  <span class="s2">};</span>
<span class="s2">}</span>

<span class="s0">const </span><span class="s1">MODULE_ERROR </span><span class="s2">= </span><span class="s3">'Rollup requires that your Babel configuration keeps ES6 module syntax intact. ' </span><span class="s2">+ </span><span class="s3">'Unfortunately it looks like your configuration specifies a module transformer ' </span><span class="s2">+ </span><span class="s3">'to replace ES6 modules with another module format. To continue you have to disable it.' </span><span class="s2">+ </span><span class="s3">'</span><span class="s0">\n\n</span><span class="s3">' </span><span class="s2">+ </span><span class="s3">&quot;Most commonly it's a CommonJS transform added by @babel/preset-env - &quot; </span><span class="s2">+ </span><span class="s3">'in such case you should disable it by adding `modules: false` option to that preset ' </span><span class="s2">+ </span><span class="s3">'(described in more detail here - https://github.com/rollup/plugins/tree/master/packages/babel#modules ).'</span><span class="s2">;</span>
<span class="s0">const </span><span class="s1">UNEXPECTED_ERROR </span><span class="s2">= </span><span class="s3">'An unexpected situation arose. Please raise an issue at ' </span><span class="s2">+ </span><span class="s3">'https://github.com/rollup/plugins/issues. Thanks!'</span><span class="s2">;</span>
<span class="s0">const </span><span class="s1">PREFLIGHT_TEST_STRING </span><span class="s2">= </span><span class="s3">'__ROLLUP__PREFLIGHT_CHECK_DO_NOT_TOUCH__'</span><span class="s2">;</span>
<span class="s0">const </span><span class="s1">PREFLIGHT_INPUT </span><span class="s2">= </span><span class="s3">`export default &quot;</span><span class="s1">$</span><span class="s2">{</span><span class="s1">PREFLIGHT_TEST_STRING</span><span class="s2">}</span><span class="s3">&quot;;`</span><span class="s2">;</span>

<span class="s0">function </span><span class="s1">helpersTestTransform</span><span class="s2">() {</span>
  <span class="s0">return </span><span class="s2">{</span>
    <span class="s1">visitor</span><span class="s2">: {</span>
      <span class="s1">StringLiteral</span><span class="s2">(</span><span class="s1">path</span><span class="s2">, </span><span class="s1">state</span><span class="s2">) {</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">path</span><span class="s2">.</span><span class="s1">node</span><span class="s2">.</span><span class="s1">value </span><span class="s2">=== </span><span class="s1">PREFLIGHT_TEST_STRING</span><span class="s2">) {</span>
          <span class="s1">path</span><span class="s2">.</span><span class="s1">replaceWith</span><span class="s2">(</span><span class="s1">state</span><span class="s2">.</span><span class="s1">file</span><span class="s2">.</span><span class="s1">addHelper</span><span class="s2">(</span><span class="s3">'inherits'</span><span class="s2">));</span>
        <span class="s2">}</span>
      <span class="s2">}</span>

    <span class="s2">}</span>
  <span class="s2">};</span>
<span class="s2">}</span>

<span class="s0">const </span><span class="s1">mismatchError </span><span class="s2">= (</span><span class="s1">actual</span><span class="s2">, </span><span class="s1">expected</span><span class="s2">, </span><span class="s1">filename</span><span class="s2">) =&gt; </span><span class="s3">`You have declared using &quot;</span><span class="s1">$</span><span class="s2">{</span><span class="s1">expected</span><span class="s2">}</span><span class="s3">&quot; babelHelpers, but transforming </span><span class="s1">$</span><span class="s2">{</span><span class="s1">filename</span><span class="s2">} </span><span class="s3">resulted in &quot;</span><span class="s1">$</span><span class="s2">{</span><span class="s1">actual</span><span class="s2">}</span><span class="s3">&quot;. Please check your configuration.`</span><span class="s2">; </span><span class="s5">// Revert to /\/helpers\/(esm\/)?inherits/ when Babel 8 gets released, this was fixed in https://github.com/babel/babel/issues/14185</span>


<span class="s0">const </span><span class="s1">inheritsHelperRe </span><span class="s2">= </span><span class="s6">/[\\/]+helpers[\\/]+(esm[\\/]+)?inherits/</span><span class="s2">;</span>
<span class="s1">async </span><span class="s0">function </span><span class="s1">preflightCheck</span><span class="s2">(</span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">babelHelpers</span><span class="s2">, </span><span class="s1">transformOptions</span><span class="s2">) {</span>
  <span class="s0">const </span><span class="s1">finalOptions </span><span class="s2">= </span><span class="s1">addBabelPlugin</span><span class="s2">(</span><span class="s1">transformOptions</span><span class="s2">, </span><span class="s1">helpersTestTransform</span><span class="s2">);</span>
  <span class="s0">const </span><span class="s1">check </span><span class="s2">= (</span><span class="s0">await </span><span class="s1">babel</span><span class="s2">.</span><span class="s1">transformAsync</span><span class="s2">(</span><span class="s1">PREFLIGHT_INPUT</span><span class="s2">, </span><span class="s1">finalOptions</span><span class="s2">)).</span><span class="s1">code</span><span class="s2">; </span><span class="s5">// Babel sometimes splits ExportDefaultDeclaration into 2 statements, so we also check for ExportNamedDeclaration</span>

  <span class="s0">if </span><span class="s2">(!</span><span class="s6">/export (d|{)/</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">check</span><span class="s2">)) {</span>
    <span class="s1">ctx</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">MODULE_ERROR</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">inheritsHelperRe</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">check</span><span class="s2">)) {</span>
    <span class="s0">if </span><span class="s2">(</span><span class="s1">babelHelpers </span><span class="s2">=== </span><span class="s1">RUNTIME</span><span class="s2">) {</span>
      <span class="s0">return</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s1">ctx</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">mismatchError</span><span class="s2">(</span><span class="s1">RUNTIME</span><span class="s2">, </span><span class="s1">babelHelpers</span><span class="s2">, </span><span class="s1">transformOptions</span><span class="s2">.</span><span class="s1">filename</span><span class="s2">));</span>
  <span class="s2">}</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">check</span><span class="s2">.</span><span class="s1">includes</span><span class="s2">(</span><span class="s3">'babelHelpers.inherits'</span><span class="s2">)) {</span>
    <span class="s0">if </span><span class="s2">(</span><span class="s1">babelHelpers </span><span class="s2">=== </span><span class="s1">EXTERNAL</span><span class="s2">) {</span>
      <span class="s0">return</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s1">ctx</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">mismatchError</span><span class="s2">(</span><span class="s1">EXTERNAL</span><span class="s2">, </span><span class="s1">babelHelpers</span><span class="s2">, </span><span class="s1">transformOptions</span><span class="s2">.</span><span class="s1">filename</span><span class="s2">));</span>
  <span class="s2">} </span><span class="s5">// test unminifiable string content</span>


  <span class="s0">if </span><span class="s2">(</span><span class="s1">check</span><span class="s2">.</span><span class="s1">includes</span><span class="s2">(</span><span class="s3">'Super expression must either be null or a function'</span><span class="s2">)) {</span>
    <span class="s0">if </span><span class="s2">(</span><span class="s1">babelHelpers </span><span class="s2">=== </span><span class="s1">INLINE </span><span class="s2">|| </span><span class="s1">babelHelpers </span><span class="s2">=== </span><span class="s1">BUNDLED</span><span class="s2">) {</span>
      <span class="s0">return</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s0">if </span><span class="s2">(</span><span class="s1">babelHelpers </span><span class="s2">=== </span><span class="s1">RUNTIME </span><span class="s2">&amp;&amp; !</span><span class="s1">transformOptions</span><span class="s2">.</span><span class="s1">plugins</span><span class="s2">.</span><span class="s1">length</span><span class="s2">) {</span>
      <span class="s1">ctx</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s3">`You must use the </span><span class="s0">\`</span><span class="s3">@babel/plugin-transform-runtime</span><span class="s0">\` </span><span class="s3">plugin when </span><span class="s0">\`</span><span class="s3">babelHelpers</span><span class="s0">\` </span><span class="s3">is &quot;</span><span class="s1">$</span><span class="s2">{</span><span class="s1">RUNTIME</span><span class="s2">}</span><span class="s3">&quot;.</span><span class="s0">\n</span><span class="s3">`</span><span class="s2">);</span>
    <span class="s2">}</span>

    <span class="s1">ctx</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">mismatchError</span><span class="s2">(</span><span class="s1">INLINE</span><span class="s2">, </span><span class="s1">babelHelpers</span><span class="s2">, </span><span class="s1">transformOptions</span><span class="s2">.</span><span class="s1">filename</span><span class="s2">));</span>
  <span class="s2">}</span>

  <span class="s1">ctx</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">UNEXPECTED_ERROR</span><span class="s2">);</span>
<span class="s2">}</span>

<span class="s1">async </span><span class="s0">function </span><span class="s1">transformCode</span><span class="s2">(</span><span class="s1">inputCode</span><span class="s2">, </span><span class="s1">babelOptions</span><span class="s2">, </span><span class="s1">overrides</span><span class="s2">, </span><span class="s1">customOptions</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">finalizeOptions</span><span class="s2">) {</span>
  <span class="s5">// loadPartialConfigAsync has become available in @babel/core@7.8.0</span>
  <span class="s0">const </span><span class="s1">config </span><span class="s2">= </span><span class="s0">await </span><span class="s2">(</span><span class="s1">babel</span><span class="s2">.</span><span class="s1">loadPartialConfigAsync </span><span class="s2">|| </span><span class="s1">babel</span><span class="s2">.</span><span class="s1">loadPartialConfig</span><span class="s2">)(</span><span class="s1">babelOptions</span><span class="s2">); </span><span class="s5">// file is ignored by babel</span>

  <span class="s0">if </span><span class="s2">(!</span><span class="s1">config</span><span class="s2">) {</span>
    <span class="s0">return null</span><span class="s2">;</span>
  <span class="s2">}</span>

  <span class="s0">let </span><span class="s1">transformOptions </span><span class="s2">= !</span><span class="s1">overrides</span><span class="s2">.</span><span class="s1">config </span><span class="s2">? </span><span class="s1">config</span><span class="s2">.</span><span class="s1">options </span><span class="s2">: </span><span class="s0">await </span><span class="s1">overrides</span><span class="s2">.</span><span class="s1">config</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">config</span><span class="s2">, {</span>
    <span class="s1">code</span><span class="s2">: </span><span class="s1">inputCode</span><span class="s2">,</span>
    <span class="s1">customOptions</span>
  <span class="s2">});</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">finalizeOptions</span><span class="s2">) {</span>
    <span class="s1">transformOptions </span><span class="s2">= </span><span class="s0">await </span><span class="s1">finalizeOptions</span><span class="s2">(</span><span class="s1">transformOptions</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s0">if </span><span class="s2">(!</span><span class="s1">overrides</span><span class="s2">.</span><span class="s1">result</span><span class="s2">) {</span>
    <span class="s0">const </span><span class="s2">{</span>
      <span class="s1">code</span><span class="s2">,</span>
      <span class="s1">map</span>
    <span class="s2">} = </span><span class="s0">await </span><span class="s1">babel</span><span class="s2">.</span><span class="s1">transformAsync</span><span class="s2">(</span><span class="s1">inputCode</span><span class="s2">, </span><span class="s1">transformOptions</span><span class="s2">);</span>
    <span class="s0">return </span><span class="s2">{</span>
      <span class="s1">code</span><span class="s2">,</span>
      <span class="s1">map</span>
    <span class="s2">};</span>
  <span class="s2">}</span>

  <span class="s0">const </span><span class="s1">result </span><span class="s2">= </span><span class="s0">await </span><span class="s1">babel</span><span class="s2">.</span><span class="s1">transformAsync</span><span class="s2">(</span><span class="s1">inputCode</span><span class="s2">, </span><span class="s1">transformOptions</span><span class="s2">);</span>
  <span class="s0">const </span><span class="s2">{</span>
    <span class="s1">code</span><span class="s2">,</span>
    <span class="s1">map</span>
  <span class="s2">} = </span><span class="s0">await </span><span class="s1">overrides</span><span class="s2">.</span><span class="s1">result</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">result</span><span class="s2">, {</span>
    <span class="s1">code</span><span class="s2">: </span><span class="s1">inputCode</span><span class="s2">,</span>
    <span class="s1">customOptions</span><span class="s2">,</span>
    <span class="s1">config</span><span class="s2">,</span>
    <span class="s1">transformOptions</span>
  <span class="s2">});</span>
  <span class="s0">return </span><span class="s2">{</span>
    <span class="s1">code</span><span class="s2">,</span>
    <span class="s1">map</span>
  <span class="s2">};</span>
<span class="s2">}</span>

<span class="s0">const </span><span class="s1">unpackOptions </span><span class="s2">= (</span><span class="s1">_ref </span><span class="s2">= {}) =&gt; {</span>
  <span class="s0">let </span><span class="s2">{</span>
    <span class="s1">extensions </span><span class="s2">= </span><span class="s1">babel</span><span class="s2">.</span><span class="s1">DEFAULT_EXTENSIONS</span><span class="s2">,</span>
    <span class="s5">// rollup uses sourcemap, babel uses sourceMaps</span>
    <span class="s5">// just normalize them here so people don't have to worry about it</span>
    <span class="s1">sourcemap </span><span class="s2">= </span><span class="s0">true</span><span class="s2">,</span>
    <span class="s1">sourcemaps </span><span class="s2">= </span><span class="s0">true</span><span class="s2">,</span>
    <span class="s1">sourceMap </span><span class="s2">= </span><span class="s0">true</span><span class="s2">,</span>
    <span class="s1">sourceMaps </span><span class="s2">= </span><span class="s0">true</span>
  <span class="s2">} = </span><span class="s1">_ref</span><span class="s2">,</span>
      <span class="s1">rest </span><span class="s2">= </span><span class="s1">_objectWithoutProperties</span><span class="s2">(</span><span class="s1">_ref</span><span class="s2">, [</span><span class="s3">&quot;extensions&quot;</span><span class="s2">, </span><span class="s3">&quot;sourcemap&quot;</span><span class="s2">, </span><span class="s3">&quot;sourcemaps&quot;</span><span class="s2">, </span><span class="s3">&quot;sourceMap&quot;</span><span class="s2">, </span><span class="s3">&quot;sourceMaps&quot;</span><span class="s2">]);</span>

  <span class="s0">return </span><span class="s1">_objectSpread2</span><span class="s2">(</span><span class="s1">_objectSpread2</span><span class="s2">({</span>
    <span class="s1">extensions</span><span class="s2">,</span>
    <span class="s1">plugins</span><span class="s2">: [],</span>
    <span class="s1">sourceMaps</span><span class="s2">: </span><span class="s1">sourcemap </span><span class="s2">&amp;&amp; </span><span class="s1">sourcemaps </span><span class="s2">&amp;&amp; </span><span class="s1">sourceMap </span><span class="s2">&amp;&amp; </span><span class="s1">sourceMaps</span>
  <span class="s2">}, </span><span class="s1">rest</span><span class="s2">), {}, {</span>
    <span class="s1">caller</span><span class="s2">: </span><span class="s1">_objectSpread2</span><span class="s2">({</span>
      <span class="s1">name</span><span class="s2">: </span><span class="s3">'@rollup/plugin-babel'</span>
    <span class="s2">}, </span><span class="s1">rest</span><span class="s2">.</span><span class="s1">caller</span><span class="s2">)</span>
  <span class="s2">});</span>
<span class="s2">};</span>

<span class="s0">const </span><span class="s1">warnAboutDeprecatedHelpersOption </span><span class="s2">= ({</span>
  <span class="s1">deprecatedOption</span><span class="s2">,</span>
  <span class="s1">suggestion</span>
<span class="s2">}) =&gt; {</span>
  <span class="s5">// eslint-disable-next-line no-console</span>
  <span class="s1">console</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s3">`</span><span class="s0">\`</span><span class="s1">$</span><span class="s2">{</span><span class="s1">deprecatedOption</span><span class="s2">}</span><span class="s0">\` </span><span class="s3">has been removed in favor a </span><span class="s0">\`</span><span class="s3">babelHelpers</span><span class="s0">\` </span><span class="s3">option. Try changing your configuration to </span><span class="s0">\`</span><span class="s1">$</span><span class="s2">{</span><span class="s1">suggestion</span><span class="s2">}</span><span class="s0">\`</span><span class="s3">. ` </span><span class="s2">+ </span><span class="s3">`Refer to the documentation to learn more: https://github.com/rollup/plugins/tree/master/packages/babel#babelhelpers`</span><span class="s2">);</span>
<span class="s2">};</span>

<span class="s0">const </span><span class="s1">unpackInputPluginOptions </span><span class="s2">= (</span><span class="s1">_ref2</span><span class="s2">, </span><span class="s1">rollupVersion</span><span class="s2">) =&gt; {</span>
  <span class="s0">let </span><span class="s2">{</span>
    <span class="s1">skipPreflightCheck </span><span class="s2">= </span><span class="s0">false</span>
  <span class="s2">} = </span><span class="s1">_ref2</span><span class="s2">,</span>
      <span class="s1">rest </span><span class="s2">= </span><span class="s1">_objectWithoutProperties</span><span class="s2">(</span><span class="s1">_ref2</span><span class="s2">, [</span><span class="s3">&quot;skipPreflightCheck&quot;</span><span class="s2">]);</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s3">'runtimeHelpers' </span><span class="s0">in </span><span class="s1">rest</span><span class="s2">) {</span>
    <span class="s1">warnAboutDeprecatedHelpersOption</span><span class="s2">({</span>
      <span class="s1">deprecatedOption</span><span class="s2">: </span><span class="s3">'runtimeHelpers'</span><span class="s2">,</span>
      <span class="s1">suggestion</span><span class="s2">: </span><span class="s3">`babelHelpers: 'runtime'`</span>
    <span class="s2">});</span>
  <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s3">'externalHelpers' </span><span class="s0">in </span><span class="s1">rest</span><span class="s2">) {</span>
    <span class="s1">warnAboutDeprecatedHelpersOption</span><span class="s2">({</span>
      <span class="s1">deprecatedOption</span><span class="s2">: </span><span class="s3">'externalHelpers'</span><span class="s2">,</span>
      <span class="s1">suggestion</span><span class="s2">: </span><span class="s3">`babelHelpers: 'external'`</span>
    <span class="s2">});</span>
  <span class="s2">} </span><span class="s0">else if </span><span class="s2">(!</span><span class="s1">rest</span><span class="s2">.</span><span class="s1">babelHelpers</span><span class="s2">) {</span>
    <span class="s5">// eslint-disable-next-line no-console</span>
    <span class="s1">console</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s3">&quot;babelHelpers: 'bundled' option was used by default. It is recommended to configure this option explicitly, read more here: &quot; </span><span class="s2">+ </span><span class="s3">'https://github.com/rollup/plugins/tree/master/packages/babel#babelhelpers'</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">unpackOptions</span><span class="s2">(</span><span class="s1">_objectSpread2</span><span class="s2">(</span><span class="s1">_objectSpread2</span><span class="s2">({}, </span><span class="s1">rest</span><span class="s2">), {}, {</span>
    <span class="s1">skipPreflightCheck</span><span class="s2">,</span>
    <span class="s1">babelHelpers</span><span class="s2">: </span><span class="s1">rest</span><span class="s2">.</span><span class="s1">babelHelpers </span><span class="s2">|| </span><span class="s1">BUNDLED</span><span class="s2">,</span>
    <span class="s1">caller</span><span class="s2">: </span><span class="s1">_objectSpread2</span><span class="s2">({</span>
      <span class="s1">supportsStaticESM</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
      <span class="s1">supportsDynamicImport</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
      <span class="s1">supportsTopLevelAwait</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
      <span class="s5">// todo: remove version checks for 1.20 - 1.25 when we bump peer deps</span>
      <span class="s1">supportsExportNamespaceFrom</span><span class="s2">: !</span><span class="s1">rollupVersion</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s6">/^1\.2[0-5]\./</span><span class="s2">)</span>
    <span class="s2">}, </span><span class="s1">rest</span><span class="s2">.</span><span class="s1">caller</span><span class="s2">)</span>
  <span class="s2">}));</span>
<span class="s2">};</span>

<span class="s0">const </span><span class="s1">unpackOutputPluginOptions </span><span class="s2">= (</span><span class="s1">options</span><span class="s2">, {</span>
  <span class="s1">format</span>
<span class="s2">}) =&gt; </span><span class="s1">unpackOptions</span><span class="s2">(</span><span class="s1">_objectSpread2</span><span class="s2">(</span><span class="s1">_objectSpread2</span><span class="s2">({</span>
  <span class="s1">configFile</span><span class="s2">: </span><span class="s0">false</span><span class="s2">,</span>
  <span class="s1">sourceType</span><span class="s2">: </span><span class="s1">format </span><span class="s2">=== </span><span class="s3">'es' </span><span class="s2">? </span><span class="s3">'module' </span><span class="s2">: </span><span class="s3">'script'</span>
<span class="s2">}, </span><span class="s1">options</span><span class="s2">), {}, {</span>
  <span class="s1">caller</span><span class="s2">: </span><span class="s1">_objectSpread2</span><span class="s2">({</span>
    <span class="s1">supportsStaticESM</span><span class="s2">: </span><span class="s1">format </span><span class="s2">=== </span><span class="s3">'es'</span>
  <span class="s2">}, </span><span class="s1">options</span><span class="s2">.</span><span class="s1">caller</span><span class="s2">)</span>
<span class="s2">}));</span>

<span class="s0">function </span><span class="s1">getOptionsWithOverrides</span><span class="s2">(</span><span class="s1">pluginOptions </span><span class="s2">= {}, </span><span class="s1">overrides </span><span class="s2">= {}) {</span>
  <span class="s0">if </span><span class="s2">(!</span><span class="s1">overrides</span><span class="s2">.</span><span class="s1">options</span><span class="s2">) </span><span class="s0">return </span><span class="s2">{</span>
    <span class="s1">customOptions</span><span class="s2">: </span><span class="s0">null</span><span class="s2">,</span>
    <span class="s1">pluginOptionsWithOverrides</span><span class="s2">: </span><span class="s1">pluginOptions</span>
  <span class="s2">};</span>
  <span class="s0">const </span><span class="s1">overridden </span><span class="s2">= </span><span class="s1">overrides</span><span class="s2">.</span><span class="s1">options</span><span class="s2">(</span><span class="s1">pluginOptions</span><span class="s2">);</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s0">typeof </span><span class="s1">overridden</span><span class="s2">.</span><span class="s1">then </span><span class="s2">=== </span><span class="s3">'function'</span><span class="s2">) {</span>
    <span class="s0">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s3">&quot;.options hook can't be asynchronous. It should return `{ customOptions, pluginsOptions }` synchronously.&quot;</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s2">{</span>
    <span class="s1">customOptions</span><span class="s2">: </span><span class="s1">overridden</span><span class="s2">.</span><span class="s1">customOptions </span><span class="s2">|| </span><span class="s0">null</span><span class="s2">,</span>
    <span class="s1">pluginOptionsWithOverrides</span><span class="s2">: </span><span class="s1">overridden</span><span class="s2">.</span><span class="s1">pluginOptions </span><span class="s2">|| </span><span class="s1">pluginOptions</span>
  <span class="s2">};</span>
<span class="s2">}</span>

<span class="s0">const </span><span class="s1">returnObject </span><span class="s2">= () =&gt; {</span>
  <span class="s0">return </span><span class="s2">{};</span>
<span class="s2">};</span>

<span class="s0">function </span><span class="s1">createBabelInputPluginFactory</span><span class="s2">(</span><span class="s1">customCallback </span><span class="s2">= </span><span class="s1">returnObject</span><span class="s2">) {</span>
  <span class="s0">const </span><span class="s1">overrides </span><span class="s2">= </span><span class="s1">customCallback</span><span class="s2">(</span><span class="s1">babel</span><span class="s2">);</span>
  <span class="s0">return </span><span class="s1">pluginOptions </span><span class="s2">=&gt; {</span>
    <span class="s0">const </span><span class="s2">{</span>
      <span class="s1">customOptions</span><span class="s2">,</span>
      <span class="s1">pluginOptionsWithOverrides</span>
    <span class="s2">} = </span><span class="s1">getOptionsWithOverrides</span><span class="s2">(</span><span class="s1">pluginOptions</span><span class="s2">, </span><span class="s1">overrides</span><span class="s2">);</span>
    <span class="s0">let </span><span class="s1">babelHelpers</span><span class="s2">;</span>
    <span class="s0">let </span><span class="s1">babelOptions</span><span class="s2">;</span>
    <span class="s0">let </span><span class="s1">filter</span><span class="s2">;</span>
    <span class="s0">let </span><span class="s1">skipPreflightCheck</span><span class="s2">;</span>
    <span class="s0">return </span><span class="s2">{</span>
      <span class="s1">name</span><span class="s2">: </span><span class="s3">'babel'</span><span class="s2">,</span>

      <span class="s1">options</span><span class="s2">() {</span>
        <span class="s5">// todo: remove options hook and hoist declarations when version checks are removed</span>
        <span class="s0">let </span><span class="s1">exclude</span><span class="s2">;</span>
        <span class="s0">let </span><span class="s1">include</span><span class="s2">;</span>
        <span class="s0">let </span><span class="s1">extensions</span><span class="s2">;</span>
        <span class="s0">let </span><span class="s1">customFilter</span><span class="s2">;</span>

        <span class="s0">var </span><span class="s1">_unpackInputPluginOpt </span><span class="s2">= </span><span class="s1">unpackInputPluginOptions</span><span class="s2">(</span><span class="s1">pluginOptionsWithOverrides</span><span class="s2">, </span><span class="s0">this</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">.</span><span class="s1">rollupVersion</span><span class="s2">);</span>

        <span class="s2">({</span>
          <span class="s1">exclude</span><span class="s2">,</span>
          <span class="s1">extensions</span><span class="s2">,</span>
          <span class="s1">babelHelpers</span><span class="s2">,</span>
          <span class="s1">include</span><span class="s2">,</span>
          <span class="s1">filter</span><span class="s2">: </span><span class="s1">customFilter</span><span class="s2">,</span>
          <span class="s1">skipPreflightCheck</span>
        <span class="s2">} = </span><span class="s1">_unpackInputPluginOpt</span><span class="s2">);</span>
        <span class="s1">babelOptions </span><span class="s2">= </span><span class="s1">_objectWithoutProperties</span><span class="s2">(</span><span class="s1">_unpackInputPluginOpt</span><span class="s2">, [</span><span class="s3">&quot;exclude&quot;</span><span class="s2">, </span><span class="s3">&quot;extensions&quot;</span><span class="s2">, </span><span class="s3">&quot;babelHelpers&quot;</span><span class="s2">, </span><span class="s3">&quot;include&quot;</span><span class="s2">, </span><span class="s3">&quot;filter&quot;</span><span class="s2">, </span><span class="s3">&quot;skipPreflightCheck&quot;</span><span class="s2">]);</span>
        <span class="s0">const </span><span class="s1">extensionRegExp </span><span class="s2">= </span><span class="s0">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s3">`(</span><span class="s1">$</span><span class="s2">{</span><span class="s1">extensions</span><span class="s2">.</span><span class="s1">map</span><span class="s2">(</span><span class="s1">escapeRegExpCharacters</span><span class="s2">).</span><span class="s1">join</span><span class="s2">(</span><span class="s3">'|'</span><span class="s2">)}</span><span class="s3">)$`</span><span class="s2">);</span>

        <span class="s0">if </span><span class="s2">(</span><span class="s1">customFilter </span><span class="s2">&amp;&amp; (</span><span class="s1">include </span><span class="s2">|| </span><span class="s1">exclude</span><span class="s2">)) {</span>
          <span class="s0">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s3">'Could not handle include or exclude with custom filter together'</span><span class="s2">);</span>
        <span class="s2">}</span>

        <span class="s0">const </span><span class="s1">userDefinedFilter </span><span class="s2">= </span><span class="s0">typeof </span><span class="s1">customFilter </span><span class="s2">=== </span><span class="s3">'function' </span><span class="s2">? </span><span class="s1">customFilter </span><span class="s2">: </span><span class="s1">createFilter</span><span class="s2">(</span><span class="s1">include</span><span class="s2">, </span><span class="s1">exclude</span><span class="s2">);</span>

        <span class="s1">filter </span><span class="s2">= </span><span class="s1">id </span><span class="s2">=&gt; </span><span class="s1">extensionRegExp</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">stripQuery</span><span class="s2">(</span><span class="s1">id</span><span class="s2">).</span><span class="s1">bareId</span><span class="s2">) &amp;&amp; </span><span class="s1">userDefinedFilter</span><span class="s2">(</span><span class="s1">id</span><span class="s2">);</span>

        <span class="s0">return null</span><span class="s2">;</span>
      <span class="s2">},</span>

      <span class="s1">resolveId</span><span class="s2">(</span><span class="s1">id</span><span class="s2">) {</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">id </span><span class="s2">!== </span><span class="s1">HELPERS</span><span class="s2">) {</span>
          <span class="s0">return null</span><span class="s2">;</span>
        <span class="s2">}</span>

        <span class="s0">return </span><span class="s1">id</span><span class="s2">;</span>
      <span class="s2">},</span>

      <span class="s1">load</span><span class="s2">(</span><span class="s1">id</span><span class="s2">) {</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">id </span><span class="s2">!== </span><span class="s1">HELPERS</span><span class="s2">) {</span>
          <span class="s0">return null</span><span class="s2">;</span>
        <span class="s2">}</span>

        <span class="s0">return </span><span class="s1">babel</span><span class="s2">.</span><span class="s1">buildExternalHelpers</span><span class="s2">(</span><span class="s0">null</span><span class="s2">, </span><span class="s3">'module'</span><span class="s2">);</span>
      <span class="s2">},</span>

      <span class="s1">transform</span><span class="s2">(</span><span class="s1">code</span><span class="s2">, </span><span class="s1">filename</span><span class="s2">) {</span>
        <span class="s0">if </span><span class="s2">(!</span><span class="s1">filter</span><span class="s2">(</span><span class="s1">filename</span><span class="s2">)) </span><span class="s0">return null</span><span class="s2">;</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">filename </span><span class="s2">=== </span><span class="s1">HELPERS</span><span class="s2">) </span><span class="s0">return null</span><span class="s2">;</span>
        <span class="s0">return </span><span class="s1">transformCode</span><span class="s2">(</span><span class="s1">code</span><span class="s2">, </span><span class="s1">_objectSpread2</span><span class="s2">(</span><span class="s1">_objectSpread2</span><span class="s2">({}, </span><span class="s1">babelOptions</span><span class="s2">), {}, {</span>
          <span class="s1">filename</span>
        <span class="s2">}), </span><span class="s1">overrides</span><span class="s2">, </span><span class="s1">customOptions</span><span class="s2">, </span><span class="s0">this</span><span class="s2">, </span><span class="s1">async transformOptions </span><span class="s2">=&gt; {</span>
          <span class="s0">if </span><span class="s2">(!</span><span class="s1">skipPreflightCheck</span><span class="s2">) {</span>
            <span class="s0">await </span><span class="s1">preflightCheck</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s1">babelHelpers</span><span class="s2">, </span><span class="s1">transformOptions</span><span class="s2">);</span>
          <span class="s2">}</span>

          <span class="s0">return </span><span class="s1">babelHelpers </span><span class="s2">=== </span><span class="s1">BUNDLED </span><span class="s2">? </span><span class="s1">addBabelPlugin</span><span class="s2">(</span><span class="s1">transformOptions</span><span class="s2">, </span><span class="s1">importHelperPlugin</span><span class="s2">) : </span><span class="s1">transformOptions</span><span class="s2">;</span>
        <span class="s2">});</span>
      <span class="s2">}</span>

    <span class="s2">};</span>
  <span class="s2">};</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">getRecommendedFormat</span><span class="s2">(</span><span class="s1">rollupFormat</span><span class="s2">) {</span>
  <span class="s0">switch </span><span class="s2">(</span><span class="s1">rollupFormat</span><span class="s2">) {</span>
    <span class="s0">case </span><span class="s3">'amd'</span><span class="s2">:</span>
      <span class="s0">return </span><span class="s3">'amd'</span><span class="s2">;</span>

    <span class="s0">case </span><span class="s3">'iife'</span><span class="s2">:</span>
    <span class="s0">case </span><span class="s3">'umd'</span><span class="s2">:</span>
      <span class="s0">return </span><span class="s3">'umd'</span><span class="s2">;</span>

    <span class="s0">case </span><span class="s3">'system'</span><span class="s2">:</span>
      <span class="s0">return </span><span class="s3">'systemjs'</span><span class="s2">;</span>

    <span class="s0">default</span><span class="s2">:</span>
      <span class="s0">return </span><span class="s3">'&lt;module format&gt;'</span><span class="s2">;</span>
  <span class="s2">}</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">createBabelOutputPluginFactory</span><span class="s2">(</span><span class="s1">customCallback </span><span class="s2">= </span><span class="s1">returnObject</span><span class="s2">) {</span>
  <span class="s0">const </span><span class="s1">overrides </span><span class="s2">= </span><span class="s1">customCallback</span><span class="s2">(</span><span class="s1">babel</span><span class="s2">);</span>
  <span class="s0">return </span><span class="s1">pluginOptions </span><span class="s2">=&gt; {</span>
    <span class="s0">const </span><span class="s2">{</span>
      <span class="s1">customOptions</span><span class="s2">,</span>
      <span class="s1">pluginOptionsWithOverrides</span>
    <span class="s2">} = </span><span class="s1">getOptionsWithOverrides</span><span class="s2">(</span><span class="s1">pluginOptions</span><span class="s2">, </span><span class="s1">overrides</span><span class="s2">);</span>
    <span class="s0">return </span><span class="s2">{</span>
      <span class="s1">name</span><span class="s2">: </span><span class="s3">'babel'</span><span class="s2">,</span>

      <span class="s1">renderStart</span><span class="s2">(</span><span class="s1">outputOptions</span><span class="s2">) {</span>
        <span class="s0">const </span><span class="s2">{</span>
          <span class="s1">extensions</span><span class="s2">,</span>
          <span class="s1">include</span><span class="s2">,</span>
          <span class="s1">exclude</span><span class="s2">,</span>
          <span class="s1">allowAllFormats</span>
        <span class="s2">} = </span><span class="s1">pluginOptionsWithOverrides</span><span class="s2">;</span>

        <span class="s0">if </span><span class="s2">(</span><span class="s1">extensions </span><span class="s2">|| </span><span class="s1">include </span><span class="s2">|| </span><span class="s1">exclude</span><span class="s2">) {</span>
          <span class="s1">warnOnce</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s3">'The &quot;include&quot;, &quot;exclude&quot; and &quot;extensions&quot; options are ignored when transforming the output.'</span><span class="s2">);</span>
        <span class="s2">}</span>

        <span class="s0">if </span><span class="s2">(!</span><span class="s1">allowAllFormats </span><span class="s2">&amp;&amp; </span><span class="s1">outputOptions</span><span class="s2">.</span><span class="s1">format </span><span class="s2">!== </span><span class="s3">'es' </span><span class="s2">&amp;&amp; </span><span class="s1">outputOptions</span><span class="s2">.</span><span class="s1">format </span><span class="s2">!== </span><span class="s3">'cjs'</span><span class="s2">) {</span>
          <span class="s0">this</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s3">`Using Babel on the generated chunks is strongly discouraged for formats other than &quot;esm&quot; or &quot;cjs&quot; as it can easily break wrapper code and lead to accidentally created global variables. Instead, you should set &quot;output.format&quot; to &quot;esm&quot; and use Babel to transform to another format, e.g. by adding &quot;presets: [['@babel/env', { modules: '</span><span class="s1">$</span><span class="s2">{</span><span class="s1">getRecommendedFormat</span><span class="s2">(</span><span class="s1">outputOptions</span><span class="s2">.</span><span class="s1">format</span><span class="s2">)}</span><span class="s3">' }]]&quot; to your Babel options. If you still want to proceed, add &quot;allowAllFormats: true&quot; to your plugin options.`</span><span class="s2">);</span>
        <span class="s2">}</span>
      <span class="s2">},</span>

      <span class="s1">renderChunk</span><span class="s2">(</span><span class="s1">code</span><span class="s2">, </span><span class="s1">chunk</span><span class="s2">, </span><span class="s1">outputOptions</span><span class="s2">) {</span>
        <span class="s5">/* eslint-disable no-unused-vars */</span>
        <span class="s0">const </span><span class="s1">_unpackOutputPluginOp </span><span class="s2">= </span><span class="s1">unpackOutputPluginOptions</span><span class="s2">(</span><span class="s1">pluginOptionsWithOverrides</span><span class="s2">, </span><span class="s1">outputOptions</span><span class="s2">),</span>
              <span class="s1">babelOptions </span><span class="s2">= </span><span class="s1">_objectWithoutProperties</span><span class="s2">(</span><span class="s1">_unpackOutputPluginOp</span><span class="s2">, [</span><span class="s3">&quot;allowAllFormats&quot;</span><span class="s2">, </span><span class="s3">&quot;exclude&quot;</span><span class="s2">, </span><span class="s3">&quot;extensions&quot;</span><span class="s2">, </span><span class="s3">&quot;externalHelpers&quot;</span><span class="s2">, </span><span class="s3">&quot;externalHelpersWhitelist&quot;</span><span class="s2">, </span><span class="s3">&quot;include&quot;</span><span class="s2">, </span><span class="s3">&quot;runtimeHelpers&quot;</span><span class="s2">]);</span>
        <span class="s5">/* eslint-enable no-unused-vars */</span>


        <span class="s0">return </span><span class="s1">transformCode</span><span class="s2">(</span><span class="s1">code</span><span class="s2">, </span><span class="s1">babelOptions</span><span class="s2">, </span><span class="s1">overrides</span><span class="s2">, </span><span class="s1">customOptions</span><span class="s2">, </span><span class="s0">this</span><span class="s2">);</span>
      <span class="s2">}</span>

    <span class="s2">};</span>
  <span class="s2">};</span>
<span class="s2">} </span><span class="s5">// export this for symmetry with output-related exports</span>


<span class="s0">const </span><span class="s1">getBabelInputPlugin </span><span class="s2">= </span><span class="s1">createBabelInputPluginFactory</span><span class="s2">();</span>
<span class="s0">const </span><span class="s1">getBabelOutputPlugin </span><span class="s2">= </span><span class="s1">createBabelOutputPluginFactory</span><span class="s2">();</span>

<span class="s0">export </span><span class="s2">{ </span><span class="s1">getBabelInputPlugin </span><span class="s2">as </span><span class="s1">babel</span><span class="s2">, </span><span class="s1">createBabelInputPluginFactory</span><span class="s2">, </span><span class="s1">createBabelOutputPluginFactory</span><span class="s2">, </span><span class="s1">getBabelInputPlugin </span><span class="s2">as </span><span class="s0">default</span><span class="s2">, </span><span class="s1">getBabelInputPlugin</span><span class="s2">, </span><span class="s1">getBabelOutputPlugin </span><span class="s2">};</span>
</pre>
</body>
</html>