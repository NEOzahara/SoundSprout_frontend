<html>
<head>
<title>index.mjs.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #cf8e6d;}
.s3 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
index.mjs.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;src/index.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;src/parse/index.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;src/CssParseError.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;src/CssPosition.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;src/type.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;src/stringify/index.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;src/stringify/compiler.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {default as parseFn} from './parse';</span><span class="s2">\n</span><span class="s1">import {default as stringifyFn} from './stringify';</span><span class="s2">\n</span><span class="s1">export const parse = parseFn;</span><span class="s2">\n</span><span class="s1">export const stringify = stringifyFn;</span><span class="s2">\n</span><span class="s1">export * from './type';</span><span class="s2">\n</span><span class="s1">export * from './CssParseError';</span><span class="s2">\n</span><span class="s1">export * from './CssPosition';</span><span class="s2">\n</span><span class="s1">export default {parse, stringify};</span><span class="s2">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import CssParseError from '../CssParseError';</span><span class="s2">\n</span><span class="s1">import Position from '../CssPosition';</span><span class="s2">\n</span><span class="s1">import {</span><span class="s2">\n  </span><span class="s1">CssAtRuleAST,</span><span class="s2">\n  </span><span class="s1">CssCharsetAST,</span><span class="s2">\n  </span><span class="s1">CssCommentAST,</span><span class="s2">\n  </span><span class="s1">CssCommonPositionAST,</span><span class="s2">\n  </span><span class="s1">CssContainerAST,</span><span class="s2">\n  </span><span class="s1">CssCustomMediaAST,</span><span class="s2">\n  </span><span class="s1">CssDeclarationAST,</span><span class="s2">\n  </span><span class="s1">CssDocumentAST,</span><span class="s2">\n  </span><span class="s1">CssFontFaceAST,</span><span class="s2">\n  </span><span class="s1">CssHostAST,</span><span class="s2">\n  </span><span class="s1">CssImportAST,</span><span class="s2">\n  </span><span class="s1">CssKeyframeAST,</span><span class="s2">\n  </span><span class="s1">CssKeyframesAST,</span><span class="s2">\n  </span><span class="s1">CssLayerAST,</span><span class="s2">\n  </span><span class="s1">CssMediaAST,</span><span class="s2">\n  </span><span class="s1">CssNamespaceAST,</span><span class="s2">\n  </span><span class="s1">CssPageAST,</span><span class="s2">\n  </span><span class="s1">CssRuleAST,</span><span class="s2">\n  </span><span class="s1">CssStartingStyleAST,</span><span class="s2">\n  </span><span class="s1">CssStylesheetAST,</span><span class="s2">\n  </span><span class="s1">CssSupportsAST,</span><span class="s2">\n  </span><span class="s1">CssTypes,</span><span class="s2">\n</span><span class="s1">} from '../type';</span><span class="s2">\n\n</span><span class="s1">// http://www.w3.org/TR/CSS21/grammar.html</span><span class="s2">\n</span><span class="s1">// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027</span><span class="s2">\n</span><span class="s1">// New rule =&gt; https://www.w3.org/TR/CSS22/syndata.html#comments</span><span class="s2">\n</span><span class="s1">// [^] is equivalent to [.</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">r]</span><span class="s2">\n</span><span class="s1">const commentre = /</span><span class="s2">\\</span><span class="s1">/</span><span class="s2">\\</span><span class="s1">*[^]*?(?:</span><span class="s2">\\</span><span class="s1">*</span><span class="s2">\\</span><span class="s1">/|$)/g;</span><span class="s2">\n\n</span><span class="s1">export const parse = (</span><span class="s2">\n  </span><span class="s1">css: string,</span><span class="s2">\n  </span><span class="s1">options?: {source?: string; silent?: boolean},</span><span class="s2">\n</span><span class="s1">): CssStylesheetAST =&gt; {</span><span class="s2">\n  </span><span class="s1">options = options || {};</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Positional.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">let lineno = 1;</span><span class="s2">\n  </span><span class="s1">let column = 1;</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Update lineno and column based on `str`.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function updatePosition(str: string) {</span><span class="s2">\n    </span><span class="s1">const lines = str.match(/</span><span class="s2">\\</span><span class="s1">n/g);</span><span class="s2">\n    </span><span class="s1">if (lines) lineno += lines.length;</span><span class="s2">\n    </span><span class="s1">const i = str.lastIndexOf('</span><span class="s2">\\</span><span class="s1">n');</span><span class="s2">\n    </span><span class="s1">column = ~i ? str.length - i : column + str.length;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Mark position and patch `node.position`.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function position() {</span><span class="s2">\n    </span><span class="s1">const start = {line: lineno, column: column};</span><span class="s2">\n    </span><span class="s1">return function &lt;T1 extends CssCommonPositionAST&gt;(</span><span class="s2">\n      </span><span class="s1">node: Omit&lt;T1, 'position'&gt;,</span><span class="s2">\n    </span><span class="s1">): T1 {</span><span class="s2">\n      </span><span class="s1">(node as T1).position = new Position(</span><span class="s2">\n        </span><span class="s1">start,</span><span class="s2">\n        </span><span class="s1">{line: lineno, column: column},</span><span class="s2">\n        </span><span class="s1">options?.source || '',</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n      </span><span class="s1">whitespace();</span><span class="s2">\n      </span><span class="s1">return node as T1;</span><span class="s2">\n    </span><span class="s1">};</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Error `msg`.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">const errorsList: Array&lt;CssParseError&gt; = [];</span><span class="s2">\n\n  </span><span class="s1">function error(msg: string) {</span><span class="s2">\n    </span><span class="s1">const err = new CssParseError(</span><span class="s2">\n      </span><span class="s1">options?.source || '',</span><span class="s2">\n      </span><span class="s1">msg,</span><span class="s2">\n      </span><span class="s1">lineno,</span><span class="s2">\n      </span><span class="s1">column,</span><span class="s2">\n      </span><span class="s1">css,</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n\n    </span><span class="s1">if (options?.silent) {</span><span class="s2">\n      </span><span class="s1">errorsList.push(err);</span><span class="s2">\n    </span><span class="s1">} else {</span><span class="s2">\n      </span><span class="s1">throw err;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse stylesheet.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function stylesheet(): CssStylesheetAST {</span><span class="s2">\n    </span><span class="s1">const rulesList = rules();</span><span class="s2">\n\n    </span><span class="s1">const result: CssStylesheetAST = {</span><span class="s2">\n      </span><span class="s1">type: CssTypes.stylesheet,</span><span class="s2">\n      </span><span class="s1">stylesheet: {</span><span class="s2">\n        </span><span class="s1">source: options?.source,</span><span class="s2">\n        </span><span class="s1">rules: rulesList,</span><span class="s2">\n        </span><span class="s1">parsingErrors: errorsList,</span><span class="s2">\n      </span><span class="s1">},</span><span class="s2">\n    </span><span class="s1">};</span><span class="s2">\n\n    </span><span class="s1">return result;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Opening brace.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function open() {</span><span class="s2">\n    </span><span class="s1">return match(/^{</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Closing brace.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function close() {</span><span class="s2">\n    </span><span class="s1">return match(/^}/);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse ruleset.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function rules() {</span><span class="s2">\n    </span><span class="s1">let node: CssRuleAST | CssAtRuleAST | void;</span><span class="s2">\n    </span><span class="s1">const rules: Array&lt;CssRuleAST | CssAtRuleAST&gt; = [];</span><span class="s2">\n    </span><span class="s1">whitespace();</span><span class="s2">\n    </span><span class="s1">comments(rules);</span><span class="s2">\n    </span><span class="s1">while (css.length &amp;&amp; css.charAt(0) !== '}' &amp;&amp; (node = atrule() || rule())) {</span><span class="s2">\n      </span><span class="s1">if (node) {</span><span class="s2">\n        </span><span class="s1">rules.push(node);</span><span class="s2">\n        </span><span class="s1">comments(rules);</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return rules;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Match `re` and return captures.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function match(re: RegExp) {</span><span class="s2">\n    </span><span class="s1">const m = re.exec(css);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const str = m[0];</span><span class="s2">\n    </span><span class="s1">updatePosition(str);</span><span class="s2">\n    </span><span class="s1">css = css.slice(str.length);</span><span class="s2">\n    </span><span class="s1">return m;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse whitespace.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function whitespace() {</span><span class="s2">\n    </span><span class="s1">match(/^</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse comments;</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function comments&lt;T1 extends CssCommonPositionAST&gt;(</span><span class="s2">\n    </span><span class="s1">rules?: Array&lt;T1 | CssCommentAST&gt;,</span><span class="s2">\n  </span><span class="s1">) {</span><span class="s2">\n    </span><span class="s1">let c;</span><span class="s2">\n    </span><span class="s1">rules = rules || [];</span><span class="s2">\n    </span><span class="s1">while ((c = comment())) {</span><span class="s2">\n      </span><span class="s1">if (c) {</span><span class="s2">\n        </span><span class="s1">rules.push(c);</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return rules;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse comment.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function comment(): CssCommentAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const m = match(/^</span><span class="s2">\\</span><span class="s1">/</span><span class="s2">\\</span><span class="s1">*[^]*?</span><span class="s2">\\</span><span class="s1">*</span><span class="s2">\\</span><span class="s1">//);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return error('End of comment missing');</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssCommentAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.comment,</span><span class="s2">\n      </span><span class="s1">comment: m[0].slice(2, -2),</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">function findClosingParenthese(</span><span class="s2">\n    </span><span class="s1">str: string,</span><span class="s2">\n    </span><span class="s1">start: number,</span><span class="s2">\n    </span><span class="s1">depth: number,</span><span class="s2">\n  </span><span class="s1">): number {</span><span class="s2">\n    </span><span class="s1">let ptr = start + 1;</span><span class="s2">\n    </span><span class="s1">let found = false;</span><span class="s2">\n    </span><span class="s1">let closeParentheses = str.indexOf(')', ptr);</span><span class="s2">\n    </span><span class="s1">while (!found &amp;&amp; closeParentheses !== -1) {</span><span class="s2">\n      </span><span class="s1">const nextParentheses = str.indexOf('(', ptr);</span><span class="s2">\n      </span><span class="s1">if (nextParentheses !== -1 &amp;&amp; nextParentheses &lt; closeParentheses) {</span><span class="s2">\n        </span><span class="s1">const nextSearch = findClosingParenthese(</span><span class="s2">\n          </span><span class="s1">str,</span><span class="s2">\n          </span><span class="s1">nextParentheses + 1,</span><span class="s2">\n          </span><span class="s1">depth + 1,</span><span class="s2">\n        </span><span class="s1">);</span><span class="s2">\n        </span><span class="s1">ptr = nextSearch + 1;</span><span class="s2">\n        </span><span class="s1">closeParentheses = str.indexOf(')', ptr);</span><span class="s2">\n      </span><span class="s1">} else {</span><span class="s2">\n        </span><span class="s1">found = true;</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">if (found &amp;&amp; closeParentheses !== -1) {</span><span class="s2">\n      </span><span class="s1">return closeParentheses;</span><span class="s2">\n    </span><span class="s1">} else {</span><span class="s2">\n      </span><span class="s1">return -1;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse selector.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function selector() {</span><span class="s2">\n    </span><span class="s1">const m = match(/^([^{]+)/);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">// remove comment in selector;</span><span class="s2">\n    </span><span class="s1">let res = trim(m[0]).replace(commentre, '');</span><span class="s2">\n\n    </span><span class="s1">// Optimisation: If there is no ',' no need to split or post-process (this is less costly)</span><span class="s2">\n    </span><span class="s1">if (res.indexOf(',') === -1) {</span><span class="s2">\n      </span><span class="s1">return [res];</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">// Replace all the , in the parentheses by </span><span class="s2">\\</span><span class="s1">u200C</span><span class="s2">\n    </span><span class="s1">let ptr = 0;</span><span class="s2">\n    </span><span class="s1">let startParentheses = res.indexOf('(', ptr);</span><span class="s2">\n    </span><span class="s1">while (startParentheses !== -1) {</span><span class="s2">\n      </span><span class="s1">const closeParentheses = findClosingParenthese(res, startParentheses, 0);</span><span class="s2">\n      </span><span class="s1">if (closeParentheses === -1) {</span><span class="s2">\n        </span><span class="s1">break;</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n      </span><span class="s1">ptr = closeParentheses + 1;</span><span class="s2">\n      </span><span class="s1">res =</span><span class="s2">\n        </span><span class="s1">res.substring(0, startParentheses) +</span><span class="s2">\n        </span><span class="s1">res</span><span class="s2">\n          </span><span class="s1">.substring(startParentheses, closeParentheses)</span><span class="s2">\n          </span><span class="s1">.replace(/,/g, '</span><span class="s2">\\</span><span class="s1">u200C') +</span><span class="s2">\n        </span><span class="s1">res.substring(closeParentheses);</span><span class="s2">\n      </span><span class="s1">startParentheses = res.indexOf('(', ptr);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">// Replace all the , in ' and </span><span class="s2">\&quot; </span><span class="s1">by </span><span class="s2">\\</span><span class="s1">u200C</span><span class="s2">\n    </span><span class="s1">res = res</span><span class="s2">\n      </span><span class="s1">/**</span><span class="s2">\n       </span><span class="s1">* replace ',' by </span><span class="s2">\\</span><span class="s1">u200C for data selector (div[data-lang=</span><span class="s2">\&quot;</span><span class="s1">fr,de,us</span><span class="s2">\&quot;</span><span class="s1">])</span><span class="s2">\n       </span><span class="s1">*</span><span class="s2">\n       </span><span class="s1">* Examples:</span><span class="s2">\n       </span><span class="s1">* div[data-lang=</span><span class="s2">\&quot;</span><span class="s1">fr,</span><span class="s2">\\\&quot;</span><span class="s1">de,us</span><span class="s2">\&quot;</span><span class="s1">]</span><span class="s2">\n       </span><span class="s1">* div[data-lang='fr,</span><span class="s2">\\</span><span class="s1">'de,us']</span><span class="s2">\n       </span><span class="s1">*</span><span class="s2">\n       </span><span class="s1">* Regex logic:</span><span class="s2">\n       </span><span class="s1">*  (</span><span class="s2">\&quot;</span><span class="s1">|')(?:</span><span class="s2">\\\\\\</span><span class="s1">1|.)*?</span><span class="s2">\\</span><span class="s1">1 =&gt; Handle the </span><span class="s2">\&quot; </span><span class="s1">and '</span><span class="s2">\n       </span><span class="s1">*</span><span class="s2">\n       </span><span class="s1">* Optimization 1:</span><span class="s2">\n       </span><span class="s1">* No greedy capture (see docs about the difference between .* and .*?)</span><span class="s2">\n       </span><span class="s1">*</span><span class="s2">\n       </span><span class="s1">* Optimization 2:</span><span class="s2">\n       </span><span class="s1">* (</span><span class="s2">\&quot;</span><span class="s1">|')(?:</span><span class="s2">\\\\\\</span><span class="s1">1|.)*?</span><span class="s2">\\</span><span class="s1">1 this use reference to capture group, it work faster.</span><span class="s2">\n       </span><span class="s1">*/</span><span class="s2">\n      </span><span class="s1">.replace(/(</span><span class="s2">\&quot;</span><span class="s1">|')(?:</span><span class="s2">\\\\\\</span><span class="s1">1|.)*?</span><span class="s2">\\</span><span class="s1">1/g, m =&gt; m.replace(/,/g, '</span><span class="s2">\\</span><span class="s1">u200C'));</span><span class="s2">\n\n    </span><span class="s1">// Split all the left , and replace all the </span><span class="s2">\\</span><span class="s1">u200C by ,</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">res</span><span class="s2">\n        </span><span class="s1">// Split the selector by ','</span><span class="s2">\n        </span><span class="s1">.split(',')</span><span class="s2">\n        </span><span class="s1">// Replace back </span><span class="s2">\\</span><span class="s1">u200C by ','</span><span class="s2">\n        </span><span class="s1">.map(s =&gt; {</span><span class="s2">\n          </span><span class="s1">return trim(s.replace(/</span><span class="s2">\\</span><span class="s1">u200C/g, ','));</span><span class="s2">\n        </span><span class="s1">})</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse declaration.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function declaration(): CssDeclarationAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n\n    </span><span class="s1">// prop</span><span class="s2">\n    </span><span class="s1">const propMatch = match(/^(</span><span class="s2">\\</span><span class="s1">*?[-#/*</span><span class="s2">\\\\\\</span><span class="s1">w]+(</span><span class="s2">\\</span><span class="s1">[[0-9a-z_-]+</span><span class="s2">\\</span><span class="s1">])?)</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n    </span><span class="s1">if (!propMatch) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const propValue = trim(propMatch[0]);</span><span class="s2">\n\n    </span><span class="s1">// :</span><span class="s2">\n    </span><span class="s1">if (!match(/^:</span><span class="s2">\\</span><span class="s1">s*/)) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">property missing ':'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">// val</span><span class="s2">\n    </span><span class="s1">const val = match(</span><span class="s2">\n      </span><span class="s1">/^((?:'(?:</span><span class="s2">\\\\</span><span class="s1">'|.)*?'|</span><span class="s2">\&quot;</span><span class="s1">(?:</span><span class="s2">\\\\\&quot;</span><span class="s1">|.)*?</span><span class="s2">\&quot;</span><span class="s1">|</span><span class="s2">\\</span><span class="s1">((?:'(?:</span><span class="s2">\\\\</span><span class="s1">'|.)*?'|</span><span class="s2">\&quot;</span><span class="s1">(?:</span><span class="s2">\\\\\&quot;</span><span class="s1">|.)*?</span><span class="s2">\&quot;</span><span class="s1">|[^)])*?</span><span class="s2">\\</span><span class="s1">)|[^};])+)/,</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n\n    </span><span class="s1">const ret = pos&lt;CssDeclarationAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.declaration,</span><span class="s2">\n      </span><span class="s1">property: propValue.replace(commentre, ''),</span><span class="s2">\n      </span><span class="s1">value: val ? trim(val[0]).replace(commentre, '') : '',</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n\n    </span><span class="s1">// ;</span><span class="s2">\n    </span><span class="s1">match(/^[;</span><span class="s2">\\</span><span class="s1">s]*/);</span><span class="s2">\n\n    </span><span class="s1">return ret;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse declarations.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function declarations() {</span><span class="s2">\n    </span><span class="s1">const decls: Array&lt;CssDeclarationAST | CssCommentAST&gt; = [];</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">comments(decls);</span><span class="s2">\n\n    </span><span class="s1">// declarations</span><span class="s2">\n    </span><span class="s1">let decl;</span><span class="s2">\n    </span><span class="s1">while ((decl = declaration())) {</span><span class="s2">\n      </span><span class="s1">if (decl) {</span><span class="s2">\n        </span><span class="s1">decls.push(decl);</span><span class="s2">\n        </span><span class="s1">comments(decls);</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return decls;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse keyframe.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function keyframe() {</span><span class="s2">\n    </span><span class="s1">let m;</span><span class="s2">\n    </span><span class="s1">const vals = [];</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n\n    </span><span class="s1">while ((m = match(/^((</span><span class="s2">\\</span><span class="s1">d+</span><span class="s2">\\</span><span class="s1">.</span><span class="s2">\\</span><span class="s1">d+|</span><span class="s2">\\</span><span class="s1">.</span><span class="s2">\\</span><span class="s1">d+|</span><span class="s2">\\</span><span class="s1">d+)%?|[a-z]+)</span><span class="s2">\\</span><span class="s1">s*/))) {</span><span class="s2">\n      </span><span class="s1">vals.push(m[1]);</span><span class="s2">\n      </span><span class="s1">match(/^,</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!vals.length) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssKeyframeAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.keyframe,</span><span class="s2">\n      </span><span class="s1">values: vals,</span><span class="s2">\n      </span><span class="s1">declarations: declarations() || [],</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse keyframes.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atkeyframes(): CssKeyframesAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m1 = match(/^@([-</span><span class="s2">\\</span><span class="s1">w]+)?keyframes</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n\n    </span><span class="s1">if (!m1) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const vendor = m1[1];</span><span class="s2">\n\n    </span><span class="s1">// identifier</span><span class="s2">\n    </span><span class="s1">const m2 = match(/^([-</span><span class="s2">\\</span><span class="s1">w]+)</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n    </span><span class="s1">if (!m2) {</span><span class="s2">\n      </span><span class="s1">return error('@keyframes missing name');</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const name = m2[1];</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@keyframes missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">let frame;</span><span class="s2">\n    </span><span class="s1">let frames: Array&lt;CssKeyframeAST | CssCommentAST&gt; = comments();</span><span class="s2">\n    </span><span class="s1">while ((frame = keyframe())) {</span><span class="s2">\n      </span><span class="s1">frames.push(frame);</span><span class="s2">\n      </span><span class="s1">frames = frames.concat(comments());</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@keyframes missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssKeyframesAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.keyframes,</span><span class="s2">\n      </span><span class="s1">name: name,</span><span class="s2">\n      </span><span class="s1">vendor: vendor,</span><span class="s2">\n      </span><span class="s1">keyframes: frames,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse supports.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atsupports(): CssSupportsAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@supports *([^{]+)/);</span><span class="s2">\n\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const supports = trim(m[1]);</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@supports missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const style = comments&lt;CssAtRuleAST&gt;().concat(rules());</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@supports missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssSupportsAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.supports,</span><span class="s2">\n      </span><span class="s1">supports: supports,</span><span class="s2">\n      </span><span class="s1">rules: style,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse host.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function athost() {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@host</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@host missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const style = comments&lt;CssAtRuleAST&gt;().concat(rules());</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@host missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssHostAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.host,</span><span class="s2">\n      </span><span class="s1">rules: style,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse container.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atcontainer(): CssContainerAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@container *([^{]+)/);</span><span class="s2">\n\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const container = trim(m[1]);</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@container missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const style = comments&lt;CssAtRuleAST&gt;().concat(rules());</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@container missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssContainerAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.container,</span><span class="s2">\n      </span><span class="s1">container: container,</span><span class="s2">\n      </span><span class="s1">rules: style,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse container.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atlayer(): CssLayerAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@layer *([^{;@]+)/);</span><span class="s2">\n\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const layer = trim(m[1]);</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">match(/^[;</span><span class="s2">\\</span><span class="s1">s]*/);</span><span class="s2">\n      </span><span class="s1">return pos&lt;CssLayerAST&gt;({</span><span class="s2">\n        </span><span class="s1">type: CssTypes.layer,</span><span class="s2">\n        </span><span class="s1">layer: layer,</span><span class="s2">\n      </span><span class="s1">});</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const style = comments&lt;CssAtRuleAST&gt;().concat(rules());</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@layer missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssLayerAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.layer,</span><span class="s2">\n      </span><span class="s1">layer: layer,</span><span class="s2">\n      </span><span class="s1">rules: style,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse media.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atmedia(): CssMediaAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@media *([^{]+)/);</span><span class="s2">\n\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const media = trim(m[1]);</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@media missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const style = comments&lt;CssAtRuleAST&gt;().concat(rules());</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@media missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssMediaAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.media,</span><span class="s2">\n      </span><span class="s1">media: media,</span><span class="s2">\n      </span><span class="s1">rules: style,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse custom-media.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atcustommedia(): CssCustomMediaAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@custom-media</span><span class="s2">\\</span><span class="s1">s+(--</span><span class="s2">\\</span><span class="s1">S+)</span><span class="s2">\\</span><span class="s1">s*([^{;</span><span class="s2">\\</span><span class="s1">s][^{;]*);/);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssCustomMediaAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.customMedia,</span><span class="s2">\n      </span><span class="s1">name: trim(m[1]),</span><span class="s2">\n      </span><span class="s1">media: trim(m[2]),</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse paged media.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atpage(): CssPageAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@page */);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const sel = selector() || [];</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@page missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">let decls = comments&lt;CssDeclarationAST&gt;();</span><span class="s2">\n\n    </span><span class="s1">// declarations</span><span class="s2">\n    </span><span class="s1">let decl;</span><span class="s2">\n    </span><span class="s1">while ((decl = declaration())) {</span><span class="s2">\n      </span><span class="s1">decls.push(decl);</span><span class="s2">\n      </span><span class="s1">decls = decls.concat(comments());</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@page missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssPageAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.page,</span><span class="s2">\n      </span><span class="s1">selectors: sel,</span><span class="s2">\n      </span><span class="s1">declarations: decls,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse document.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atdocument(): CssDocumentAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@([-</span><span class="s2">\\</span><span class="s1">w]+)?document *([^{]+)/);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const vendor = trim(m[1]);</span><span class="s2">\n    </span><span class="s1">const doc = trim(m[2]);</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@document missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">const style = comments&lt;CssAtRuleAST&gt;().concat(rules());</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@document missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssDocumentAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.document,</span><span class="s2">\n      </span><span class="s1">document: doc,</span><span class="s2">\n      </span><span class="s1">vendor: vendor,</span><span class="s2">\n      </span><span class="s1">rules: style,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse font-face.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atfontface(): CssFontFaceAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@font-face</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@font-face missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">let decls = comments&lt;CssDeclarationAST&gt;();</span><span class="s2">\n\n    </span><span class="s1">// declarations</span><span class="s2">\n    </span><span class="s1">let decl;</span><span class="s2">\n    </span><span class="s1">while ((decl = declaration())) {</span><span class="s2">\n      </span><span class="s1">decls.push(decl);</span><span class="s2">\n      </span><span class="s1">decls = decls.concat(comments());</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@font-face missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssFontFaceAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.fontFace,</span><span class="s2">\n      </span><span class="s1">declarations: decls,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse starting style.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atstartingstyle(): CssStartingStyleAST | void {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const m = match(/^@starting-style</span><span class="s2">\\</span><span class="s1">s*/);</span><span class="s2">\n    </span><span class="s1">if (!m) {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (!open()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@starting-style missing '{'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const style = comments&lt;CssAtRuleAST&gt;().concat(rules());</span><span class="s2">\n\n    </span><span class="s1">if (!close()) {</span><span class="s2">\n      </span><span class="s1">return error(</span><span class="s2">\&quot;</span><span class="s1">@starting-style missing '}'</span><span class="s2">\&quot;</span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssStartingStyleAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.startingStyle,</span><span class="s2">\n      </span><span class="s1">rules: style,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse import</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">const atimport = _compileAtrule&lt;CssImportAST&gt;('import');</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse charset</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">const atcharset = _compileAtrule&lt;CssCharsetAST&gt;('charset');</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse namespace</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">const atnamespace = _compileAtrule&lt;CssNamespaceAST&gt;('namespace');</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse non-block at-rules</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function _compileAtrule&lt;T1 extends CssCommonPositionAST&gt;(</span><span class="s2">\n    </span><span class="s1">name: string,</span><span class="s2">\n  </span><span class="s1">): () =&gt; T1 | void {</span><span class="s2">\n    </span><span class="s1">const re = new RegExp(</span><span class="s2">\n      </span><span class="s1">'^@' +</span><span class="s2">\n        </span><span class="s1">name +</span><span class="s2">\n        </span><span class="s1">'</span><span class="s2">\\\\</span><span class="s1">s*((?::?[^;</span><span class="s2">\\</span><span class="s1">'</span><span class="s2">\&quot;</span><span class="s1">]|</span><span class="s2">\&quot;</span><span class="s1">(?:</span><span class="s2">\\\\\\\\\&quot;</span><span class="s1">|[^</span><span class="s2">\&quot;</span><span class="s1">])*?</span><span class="s2">\&quot;</span><span class="s1">|</span><span class="s2">\\</span><span class="s1">'(?:</span><span class="s2">\\\\\\\\\\</span><span class="s1">'|[^</span><span class="s2">\\</span><span class="s1">'])*?</span><span class="s2">\\</span><span class="s1">')+)(?:;|$)',</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n\n    </span><span class="s1">// ^@import</span><span class="s2">\\</span><span class="s1">s*([^;</span><span class="s2">\&quot;</span><span class="s1">']|(</span><span class="s2">\&quot;</span><span class="s1">|')(?:</span><span class="s2">\\\\\\</span><span class="s1">2|.)*?</span><span class="s2">\\</span><span class="s1">2)+(;|$)</span><span class="s2">\n\n    </span><span class="s1">return function (): T1 | void {</span><span class="s2">\n      </span><span class="s1">const pos = position();</span><span class="s2">\n      </span><span class="s1">const m = match(re);</span><span class="s2">\n      </span><span class="s1">if (!m) {</span><span class="s2">\n        </span><span class="s1">return;</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n      </span><span class="s1">const ret: Record&lt;string, string&gt; = {type: name};</span><span class="s2">\n      </span><span class="s1">ret[name] = m[1].trim();</span><span class="s2">\n      </span><span class="s1">return pos&lt;T1&gt;(ret as unknown as T1) as T1;</span><span class="s2">\n    </span><span class="s1">};</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse at rule.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function atrule(): CssAtRuleAST | void {</span><span class="s2">\n    </span><span class="s1">if (css[0] !== '@') {</span><span class="s2">\n      </span><span class="s1">return;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">atkeyframes() ||</span><span class="s2">\n      </span><span class="s1">atmedia() ||</span><span class="s2">\n      </span><span class="s1">atcustommedia() ||</span><span class="s2">\n      </span><span class="s1">atsupports() ||</span><span class="s2">\n      </span><span class="s1">atimport() ||</span><span class="s2">\n      </span><span class="s1">atcharset() ||</span><span class="s2">\n      </span><span class="s1">atnamespace() ||</span><span class="s2">\n      </span><span class="s1">atdocument() ||</span><span class="s2">\n      </span><span class="s1">atpage() ||</span><span class="s2">\n      </span><span class="s1">athost() ||</span><span class="s2">\n      </span><span class="s1">atfontface() ||</span><span class="s2">\n      </span><span class="s1">atcontainer() ||</span><span class="s2">\n      </span><span class="s1">atstartingstyle() ||</span><span class="s2">\n      </span><span class="s1">atlayer()</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Parse rule.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">function rule() {</span><span class="s2">\n    </span><span class="s1">const pos = position();</span><span class="s2">\n    </span><span class="s1">const sel = selector();</span><span class="s2">\n\n    </span><span class="s1">if (!sel) {</span><span class="s2">\n      </span><span class="s1">return error('selector missing');</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">comments();</span><span class="s2">\n\n    </span><span class="s1">return pos&lt;CssRuleAST&gt;({</span><span class="s2">\n      </span><span class="s1">type: CssTypes.rule,</span><span class="s2">\n      </span><span class="s1">selectors: sel,</span><span class="s2">\n      </span><span class="s1">declarations: declarations() || [],</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">return addParent(stylesheet());</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">/**</span><span class="s2">\n </span><span class="s1">* Trim `str`.</span><span class="s2">\n </span><span class="s1">*/</span><span class="s2">\n</span><span class="s1">function trim(str: string) {</span><span class="s2">\n  </span><span class="s1">return str ? str.trim() : '';</span><span class="s2">\n</span><span class="s1">}</span><span class="s2">\n\n</span><span class="s1">/**</span><span class="s2">\n </span><span class="s1">* Adds non-enumerable parent node reference to each node.</span><span class="s2">\n </span><span class="s1">*/</span><span class="s2">\n</span><span class="s1">function addParent&lt;T1 extends {type?: string}&gt;(obj: T1, parent?: unknown): T1 {</span><span class="s2">\n  </span><span class="s1">const isNode = obj &amp;&amp; typeof obj.type === 'string';</span><span class="s2">\n  </span><span class="s1">const childParent = isNode ? obj : parent;</span><span class="s2">\n\n  </span><span class="s1">for (const k in obj) {</span><span class="s2">\n    </span><span class="s1">const value = obj[k];</span><span class="s2">\n    </span><span class="s1">if (Array.isArray(value)) {</span><span class="s2">\n      </span><span class="s1">value.forEach(v =&gt; {</span><span class="s2">\n        </span><span class="s1">addParent(v, childParent);</span><span class="s2">\n      </span><span class="s1">});</span><span class="s2">\n    </span><span class="s1">} else if (value &amp;&amp; typeof value === 'object') {</span><span class="s2">\n      </span><span class="s1">addParent(value, childParent);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">if (isNode) {</span><span class="s2">\n    </span><span class="s1">Object.defineProperty(obj, 'parent', {</span><span class="s2">\n      </span><span class="s1">configurable: true,</span><span class="s2">\n      </span><span class="s1">writable: true,</span><span class="s2">\n      </span><span class="s1">enumerable: false,</span><span class="s2">\n      </span><span class="s1">value: parent || null,</span><span class="s2">\n    </span><span class="s1">});</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">return obj;</span><span class="s2">\n</span><span class="s1">}</span><span class="s2">\n\n</span><span class="s1">export default parse;</span><span class="s2">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;export default class CssParseError extends Error {</span><span class="s2">\n  </span><span class="s1">readonly reason: string;</span><span class="s2">\n  </span><span class="s1">readonly filename?: string;</span><span class="s2">\n  </span><span class="s1">readonly line: number;</span><span class="s2">\n  </span><span class="s1">readonly column: number;</span><span class="s2">\n  </span><span class="s1">readonly source: string;</span><span class="s2">\n\n  </span><span class="s1">constructor(</span><span class="s2">\n    </span><span class="s1">filename: string,</span><span class="s2">\n    </span><span class="s1">msg: string,</span><span class="s2">\n    </span><span class="s1">lineno: number,</span><span class="s2">\n    </span><span class="s1">column: number,</span><span class="s2">\n    </span><span class="s1">css: string,</span><span class="s2">\n  </span><span class="s1">) {</span><span class="s2">\n    </span><span class="s1">super(filename + ':' + lineno + ':' + column + ': ' + msg);</span><span class="s2">\n    </span><span class="s1">this.reason = msg;</span><span class="s2">\n    </span><span class="s1">this.filename = filename;</span><span class="s2">\n    </span><span class="s1">this.line = lineno;</span><span class="s2">\n    </span><span class="s1">this.column = column;</span><span class="s2">\n    </span><span class="s1">this.source = css;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n</span><span class="s1">}</span><span class="s2">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;/**</span><span class="s2">\n </span><span class="s1">* Store position information for a node</span><span class="s2">\n </span><span class="s1">*/</span><span class="s2">\n</span><span class="s1">export default class Position {</span><span class="s2">\n  </span><span class="s1">start: {line: number; column: number};</span><span class="s2">\n  </span><span class="s1">end: {line: number; column: number};</span><span class="s2">\n  </span><span class="s1">source?: string;</span><span class="s2">\n\n  </span><span class="s1">constructor(</span><span class="s2">\n    </span><span class="s1">start: {line: number; column: number},</span><span class="s2">\n    </span><span class="s1">end: {line: number; column: number},</span><span class="s2">\n    </span><span class="s1">source: string,</span><span class="s2">\n  </span><span class="s1">) {</span><span class="s2">\n    </span><span class="s1">this.start = start;</span><span class="s2">\n    </span><span class="s1">this.end = end;</span><span class="s2">\n    </span><span class="s1">this.source = source;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n</span><span class="s1">}</span><span class="s2">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import CssParseError from './CssParseError';</span><span class="s2">\n</span><span class="s1">import Position from './CssPosition';</span><span class="s2">\n\n</span><span class="s1">export enum CssTypes {</span><span class="s2">\n  </span><span class="s1">stylesheet = 'stylesheet',</span><span class="s2">\n  </span><span class="s1">rule = 'rule',</span><span class="s2">\n  </span><span class="s1">declaration = 'declaration',</span><span class="s2">\n  </span><span class="s1">comment = 'comment',</span><span class="s2">\n  </span><span class="s1">container = 'container',</span><span class="s2">\n  </span><span class="s1">charset = 'charset',</span><span class="s2">\n  </span><span class="s1">document = 'document',</span><span class="s2">\n  </span><span class="s1">customMedia = 'custom-media',</span><span class="s2">\n  </span><span class="s1">fontFace = 'font-face',</span><span class="s2">\n  </span><span class="s1">host = 'host',</span><span class="s2">\n  </span><span class="s1">import = 'import',</span><span class="s2">\n  </span><span class="s1">keyframes = 'keyframes',</span><span class="s2">\n  </span><span class="s1">keyframe = 'keyframe',</span><span class="s2">\n  </span><span class="s1">layer = 'layer',</span><span class="s2">\n  </span><span class="s1">media = 'media',</span><span class="s2">\n  </span><span class="s1">namespace = 'namespace',</span><span class="s2">\n  </span><span class="s1">page = 'page',</span><span class="s2">\n  </span><span class="s1">startingStyle = 'starting-style',</span><span class="s2">\n  </span><span class="s1">supports = 'supports',</span><span class="s2">\n</span><span class="s1">}</span><span class="s2">\n\n</span><span class="s1">export type CssCommonAST = {</span><span class="s2">\n  </span><span class="s1">type: CssTypes;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssCommonPositionAST = CssCommonAST &amp; {</span><span class="s2">\n  </span><span class="s1">position?: Position;</span><span class="s2">\n  </span><span class="s1">parent?: unknown;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssStylesheetAST = CssCommonAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.stylesheet;</span><span class="s2">\n  </span><span class="s1">stylesheet: {</span><span class="s2">\n    </span><span class="s1">source?: string;</span><span class="s2">\n    </span><span class="s1">rules: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n    </span><span class="s1">parsingErrors?: Array&lt;CssParseError&gt;;</span><span class="s2">\n  </span><span class="s1">};</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssRuleAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.rule;</span><span class="s2">\n  </span><span class="s1">selectors: Array&lt;string&gt;;</span><span class="s2">\n  </span><span class="s1">declarations: Array&lt;CssDeclarationAST | CssCommentAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssDeclarationAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.declaration;</span><span class="s2">\n  </span><span class="s1">property: string;</span><span class="s2">\n  </span><span class="s1">value: string;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssCommentAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.comment;</span><span class="s2">\n  </span><span class="s1">comment: string;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssContainerAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.container;</span><span class="s2">\n  </span><span class="s1">container: string;</span><span class="s2">\n  </span><span class="s1">rules: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssCharsetAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.charset;</span><span class="s2">\n  </span><span class="s1">charset: string;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssCustomMediaAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.customMedia;</span><span class="s2">\n  </span><span class="s1">name: string;</span><span class="s2">\n  </span><span class="s1">media: string;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssDocumentAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.document;</span><span class="s2">\n  </span><span class="s1">document: string;</span><span class="s2">\n  </span><span class="s1">vendor?: string;</span><span class="s2">\n  </span><span class="s1">rules: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssFontFaceAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.fontFace;</span><span class="s2">\n  </span><span class="s1">declarations: Array&lt;CssDeclarationAST | CssCommentAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssHostAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.host;</span><span class="s2">\n  </span><span class="s1">rules: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssImportAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.import;</span><span class="s2">\n  </span><span class="s1">import: string;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssKeyframesAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.keyframes;</span><span class="s2">\n  </span><span class="s1">name: string;</span><span class="s2">\n  </span><span class="s1">vendor?: string;</span><span class="s2">\n  </span><span class="s1">keyframes: Array&lt;CssKeyframeAST | CssCommentAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssKeyframeAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.keyframe;</span><span class="s2">\n  </span><span class="s1">values: Array&lt;string&gt;;</span><span class="s2">\n  </span><span class="s1">declarations: Array&lt;CssDeclarationAST | CssCommentAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssLayerAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.layer;</span><span class="s2">\n  </span><span class="s1">layer: string;</span><span class="s2">\n  </span><span class="s1">rules?: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssMediaAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.media;</span><span class="s2">\n  </span><span class="s1">media: string;</span><span class="s2">\n  </span><span class="s1">rules: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssNamespaceAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.namespace;</span><span class="s2">\n  </span><span class="s1">namespace: string;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssPageAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.page;</span><span class="s2">\n  </span><span class="s1">selectors: Array&lt;string&gt;;</span><span class="s2">\n  </span><span class="s1">declarations: Array&lt;CssDeclarationAST | CssCommentAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">export type CssSupportsAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.supports;</span><span class="s2">\n  </span><span class="s1">supports: string;</span><span class="s2">\n  </span><span class="s1">rules: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssStartingStyleAST = CssCommonPositionAST &amp; {</span><span class="s2">\n  </span><span class="s1">type: CssTypes.startingStyle;</span><span class="s2">\n  </span><span class="s1">rules: Array&lt;CssAtRuleAST&gt;;</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n\n</span><span class="s1">export type CssAtRuleAST =</span><span class="s2">\n  </span><span class="s1">| CssRuleAST</span><span class="s2">\n  </span><span class="s1">| CssCommentAST</span><span class="s2">\n  </span><span class="s1">| CssContainerAST</span><span class="s2">\n  </span><span class="s1">| CssCharsetAST</span><span class="s2">\n  </span><span class="s1">| CssCustomMediaAST</span><span class="s2">\n  </span><span class="s1">| CssDocumentAST</span><span class="s2">\n  </span><span class="s1">| CssFontFaceAST</span><span class="s2">\n  </span><span class="s1">| CssHostAST</span><span class="s2">\n  </span><span class="s1">| CssImportAST</span><span class="s2">\n  </span><span class="s1">| CssKeyframesAST</span><span class="s2">\n  </span><span class="s1">| CssLayerAST</span><span class="s2">\n  </span><span class="s1">| CssMediaAST</span><span class="s2">\n  </span><span class="s1">| CssNamespaceAST</span><span class="s2">\n  </span><span class="s1">| CssPageAST</span><span class="s2">\n  </span><span class="s1">| CssSupportsAST</span><span class="s2">\n  </span><span class="s1">| CssStartingStyleAST;</span><span class="s2">\n\n</span><span class="s1">export type CssAllNodesAST =</span><span class="s2">\n  </span><span class="s1">| CssAtRuleAST</span><span class="s2">\n  </span><span class="s1">| CssStylesheetAST</span><span class="s2">\n  </span><span class="s1">| CssDeclarationAST</span><span class="s2">\n  </span><span class="s1">| CssKeyframeAST;</span><span class="s2">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import {CssStylesheetAST} from '../type';</span><span class="s2">\n</span><span class="s1">import Compiler from './compiler';</span><span class="s2">\n\n</span><span class="s1">export default (</span><span class="s2">\n  </span><span class="s1">node: CssStylesheetAST,</span><span class="s2">\n  </span><span class="s1">options?: ConstructorParameters&lt;typeof Compiler&gt;[0],</span><span class="s2">\n</span><span class="s1">) =&gt; {</span><span class="s2">\n  </span><span class="s1">const compiler = new Compiler(options || {});</span><span class="s2">\n  </span><span class="s1">return compiler.compile(node);</span><span class="s2">\n</span><span class="s1">};</span><span class="s2">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import {</span><span class="s2">\n  </span><span class="s1">CssAllNodesAST,</span><span class="s2">\n  </span><span class="s1">CssCharsetAST,</span><span class="s2">\n  </span><span class="s1">CssCommentAST,</span><span class="s2">\n  </span><span class="s1">CssCommonPositionAST,</span><span class="s2">\n  </span><span class="s1">CssContainerAST,</span><span class="s2">\n  </span><span class="s1">CssCustomMediaAST,</span><span class="s2">\n  </span><span class="s1">CssDeclarationAST,</span><span class="s2">\n  </span><span class="s1">CssDocumentAST,</span><span class="s2">\n  </span><span class="s1">CssFontFaceAST,</span><span class="s2">\n  </span><span class="s1">CssHostAST,</span><span class="s2">\n  </span><span class="s1">CssImportAST,</span><span class="s2">\n  </span><span class="s1">CssKeyframeAST,</span><span class="s2">\n  </span><span class="s1">CssKeyframesAST,</span><span class="s2">\n  </span><span class="s1">CssLayerAST,</span><span class="s2">\n  </span><span class="s1">CssMediaAST,</span><span class="s2">\n  </span><span class="s1">CssNamespaceAST,</span><span class="s2">\n  </span><span class="s1">CssPageAST,</span><span class="s2">\n  </span><span class="s1">CssRuleAST,</span><span class="s2">\n  </span><span class="s1">CssStartingStyleAST,</span><span class="s2">\n  </span><span class="s1">CssStylesheetAST,</span><span class="s2">\n  </span><span class="s1">CssSupportsAST,</span><span class="s2">\n  </span><span class="s1">CssTypes,</span><span class="s2">\n</span><span class="s1">} from '../type';</span><span class="s2">\n\n</span><span class="s1">class Compiler {</span><span class="s2">\n  </span><span class="s1">level = 0;</span><span class="s2">\n  </span><span class="s1">indentation = '  ';</span><span class="s2">\n  </span><span class="s1">compress = false;</span><span class="s2">\n\n  </span><span class="s1">constructor(options?: {indent?: string; compress?: boolean}) {</span><span class="s2">\n    </span><span class="s1">if (typeof options?.indent === 'string') {</span><span class="s2">\n      </span><span class="s1">this.indentation = options?.indent;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">if (options?.compress) {</span><span class="s2">\n      </span><span class="s1">this.compress = true;</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">// We disable no-unused-vars for _position. We keep position for potential reintroduction of source-map</span><span class="s2">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-unused-vars</span><span class="s2">\n  </span><span class="s1">emit(str: string, _position?: CssCommonPositionAST['position']) {</span><span class="s2">\n    </span><span class="s1">return str;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Increase, decrease or return current indentation.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">indent(level?: number) {</span><span class="s2">\n    </span><span class="s1">this.level = this.level || 1;</span><span class="s2">\n\n    </span><span class="s1">if (level) {</span><span class="s2">\n      </span><span class="s1">this.level += level;</span><span class="s2">\n      </span><span class="s1">return '';</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return Array(this.level).join(this.indentation);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">visit(node: CssAllNodesAST): string {</span><span class="s2">\n    </span><span class="s1">switch (node.type) {</span><span class="s2">\n      </span><span class="s1">case CssTypes.stylesheet:</span><span class="s2">\n        </span><span class="s1">return this.stylesheet(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.rule:</span><span class="s2">\n        </span><span class="s1">return this.rule(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.declaration:</span><span class="s2">\n        </span><span class="s1">return this.declaration(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.comment:</span><span class="s2">\n        </span><span class="s1">return this.comment(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.container:</span><span class="s2">\n        </span><span class="s1">return this.container(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.charset:</span><span class="s2">\n        </span><span class="s1">return this.charset(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.document:</span><span class="s2">\n        </span><span class="s1">return this.document(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.customMedia:</span><span class="s2">\n        </span><span class="s1">return this.customMedia(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.fontFace:</span><span class="s2">\n        </span><span class="s1">return this.fontFace(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.host:</span><span class="s2">\n        </span><span class="s1">return this.host(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.import:</span><span class="s2">\n        </span><span class="s1">return this.import(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.keyframes:</span><span class="s2">\n        </span><span class="s1">return this.keyframes(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.keyframe:</span><span class="s2">\n        </span><span class="s1">return this.keyframe(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.layer:</span><span class="s2">\n        </span><span class="s1">return this.layer(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.media:</span><span class="s2">\n        </span><span class="s1">return this.media(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.namespace:</span><span class="s2">\n        </span><span class="s1">return this.namespace(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.page:</span><span class="s2">\n        </span><span class="s1">return this.page(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.startingStyle:</span><span class="s2">\n        </span><span class="s1">return this.startingStyle(node);</span><span class="s2">\n      </span><span class="s1">case CssTypes.supports:</span><span class="s2">\n        </span><span class="s1">return this.supports(node);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">mapVisit(nodes: Array&lt;CssAllNodesAST&gt;, delim?: string) {</span><span class="s2">\n    </span><span class="s1">let buf = '';</span><span class="s2">\n    </span><span class="s1">delim = delim || '';</span><span class="s2">\n\n    </span><span class="s1">for (let i = 0, length = nodes.length; i &lt; length; i++) {</span><span class="s2">\n      </span><span class="s1">buf += this.visit(nodes[i]);</span><span class="s2">\n      </span><span class="s1">if (delim &amp;&amp; i &lt; length - 1) {</span><span class="s2">\n        </span><span class="s1">buf += this.emit(delim);</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return buf;</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">compile(node: CssStylesheetAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return node.stylesheet.rules.map(this.visit, this).join('');</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return this.stylesheet(node);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit stylesheet node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">stylesheet(node: CssStylesheetAST) {</span><span class="s2">\n    </span><span class="s1">return this.mapVisit(node.stylesheet.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n');</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit comment node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">comment(node: CssCommentAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return this.emit('', node.position);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return this.emit(this.indent() + '/*' + node.comment + '*/', node.position);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit container node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">container(node: CssContainerAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@container ' + node.container, node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.rules) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent() + '@container ' + node.container, node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n' + this.indent(-1) + this.indent() + '}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit container node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">layer(node: CssLayerAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@layer ' + node.layer, node.position) +</span><span class="s2">\n        </span><span class="s1">(node.rules</span><span class="s2">\n          </span><span class="s1">? this.emit('{') +</span><span class="s2">\n            </span><span class="s1">this.mapVisit(&lt;CssAllNodesAST[]&gt;node.rules) +</span><span class="s2">\n            </span><span class="s1">this.emit('}')</span><span class="s2">\n          </span><span class="s1">: ';')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent() + '@layer ' + node.layer, node.position) +</span><span class="s2">\n      </span><span class="s1">(node.rules</span><span class="s2">\n        </span><span class="s1">? this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n          </span><span class="s1">this.mapVisit(&lt;CssAllNodesAST[]&gt;node.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n          </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n' + this.indent(-1) + this.indent() + '}')</span><span class="s2">\n        </span><span class="s1">: ';')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit import node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">import(node: CssImportAST) {</span><span class="s2">\n    </span><span class="s1">return this.emit('@import ' + node.import + ';', node.position);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit media node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">media(node: CssMediaAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@media ' + node.media, node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.rules) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent() + '@media ' + node.media, node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n' + this.indent(-1) + this.indent() + '}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit document node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">document(node: CssDocumentAST) {</span><span class="s2">\n    </span><span class="s1">const doc = '@' + (node.vendor || '') + 'document ' + node.document;</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit(doc, node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.rules) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(doc, node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(' ' + ' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(-1) + '</span><span class="s2">\\</span><span class="s1">n}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit charset node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">charset(node: CssCharsetAST) {</span><span class="s2">\n    </span><span class="s1">return this.emit('@charset ' + node.charset + ';', node.position);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit namespace node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">namespace(node: CssNamespaceAST) {</span><span class="s2">\n    </span><span class="s1">return this.emit('@namespace ' + node.namespace + ';', node.position);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit container node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">startingStyle(node: CssStartingStyleAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@starting-style', node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.rules) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent() + '@starting-style', node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n' + this.indent(-1) + this.indent() + '}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit supports node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">supports(node: CssSupportsAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@supports ' + node.supports, node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.rules) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent() + '@supports ' + node.supports, node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n' + this.indent(-1) + this.indent() + '}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit keyframes node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">keyframes(node: CssKeyframesAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit(</span><span class="s2">\n          </span><span class="s1">'@' + (node.vendor || '') + 'keyframes ' + node.name,</span><span class="s2">\n          </span><span class="s1">node.position,</span><span class="s2">\n        </span><span class="s1">) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.keyframes) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(</span><span class="s2">\n        </span><span class="s1">'@' + (node.vendor || '') + 'keyframes ' + node.name,</span><span class="s2">\n        </span><span class="s1">node.position,</span><span class="s2">\n      </span><span class="s1">) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.keyframes, '</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(-1) + '}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit keyframe node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">keyframe(node: CssKeyframeAST) {</span><span class="s2">\n    </span><span class="s1">const decls = node.declarations;</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit(node.values.join(','), node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(decls) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent()) +</span><span class="s2">\n      </span><span class="s1">this.emit(node.values.join(', '), node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(decls, '</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(-1) + '</span><span class="s2">\\</span><span class="s1">n' + this.indent() + '}</span><span class="s2">\\</span><span class="s1">n')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit page node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">page(node: CssPageAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">const sel = node.selectors.length ? node.selectors.join(', ') : '';</span><span class="s2">\n\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@page ' + sel, node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.declarations) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const sel = node.selectors.length ? node.selectors.join(', ') + ' ' : '';</span><span class="s2">\n\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit('@page ' + sel, node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit('{</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.declarations, '</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(-1)) +</span><span class="s2">\n      </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit font-face node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">fontFace(node: CssFontFaceAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@font-face', node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.declarations) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit('@font-face ', node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit('{</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.declarations, '</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(-1)) +</span><span class="s2">\n      </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit host node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">host(node: CssHostAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit('@host', node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(node.rules) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit('@host', node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n' + this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(node.rules, '</span><span class="s2">\\</span><span class="s1">n</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(-1) + '</span><span class="s2">\\</span><span class="s1">n}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit custom-media node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">customMedia(node: CssCustomMediaAST) {</span><span class="s2">\n    </span><span class="s1">return this.emit(</span><span class="s2">\n      </span><span class="s1">'@custom-media ' + node.name + ' ' + node.media + ';',</span><span class="s2">\n      </span><span class="s1">node.position,</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit rule node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">rule(node: CssRuleAST) {</span><span class="s2">\n    </span><span class="s1">const decls = node.declarations;</span><span class="s2">\n    </span><span class="s1">if (!decls.length) {</span><span class="s2">\n      </span><span class="s1">return '';</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit(node.selectors.join(','), node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit('{') +</span><span class="s2">\n        </span><span class="s1">this.mapVisit(decls) +</span><span class="s2">\n        </span><span class="s1">this.emit('}')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">const indent = this.indent();</span><span class="s2">\n\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(</span><span class="s2">\n        </span><span class="s1">node.selectors</span><span class="s2">\n          </span><span class="s1">.map(s =&gt; {</span><span class="s2">\n            </span><span class="s1">return indent + s;</span><span class="s2">\n          </span><span class="s1">})</span><span class="s2">\n          </span><span class="s1">.join(',</span><span class="s2">\\</span><span class="s1">n'),</span><span class="s2">\n        </span><span class="s1">node.position,</span><span class="s2">\n      </span><span class="s1">) +</span><span class="s2">\n      </span><span class="s1">this.emit(' {</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(1)) +</span><span class="s2">\n      </span><span class="s1">this.mapVisit(decls, '</span><span class="s2">\\</span><span class="s1">n') +</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent(-1)) +</span><span class="s2">\n      </span><span class="s1">this.emit('</span><span class="s2">\\</span><span class="s1">n' + this.indent() + '}')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n\n  </span><span class="s1">/**</span><span class="s2">\n   </span><span class="s1">* Visit declaration node.</span><span class="s2">\n   </span><span class="s1">*/</span><span class="s2">\n  </span><span class="s1">declaration(node: CssDeclarationAST) {</span><span class="s2">\n    </span><span class="s1">if (this.compress) {</span><span class="s2">\n      </span><span class="s1">return (</span><span class="s2">\n        </span><span class="s1">this.emit(node.property + ':' + node.value, node.position) +</span><span class="s2">\n        </span><span class="s1">this.emit(';')</span><span class="s2">\n      </span><span class="s1">);</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">return (</span><span class="s2">\n      </span><span class="s1">this.emit(this.indent()) +</span><span class="s2">\n      </span><span class="s1">this.emit(node.property + ': ' + node.value, node.position) +</span><span class="s2">\n      </span><span class="s1">this.emit(';')</span><span class="s2">\n    </span><span class="s1">);</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n</span><span class="s1">}</span><span class="s2">\n\n</span><span class="s1">export default Compiler;</span><span class="s2">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;index.mjs.map&quot;</span><span class="s0">}</span></pre>
</body>
</html>