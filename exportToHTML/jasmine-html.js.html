<html>
<head>
<title>jasmine-html.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #2aacb8;}
.s4 { color: #6aab73;}
.s5 { color: #7a7e85;}
.s6 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
jasmine-html.js</font>
</center></td></tr></table>
<pre><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers </span><span class="s1">= {};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">createDom </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">type</span><span class="s1">, </span><span class="s0">attrs</span><span class="s1">, </span><span class="s0">childrenVarArgs</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">el </span><span class="s1">= </span><span class="s0">document</span><span class="s1">.</span><span class="s0">createElement</span><span class="s1">(</span><span class="s0">type</span><span class="s1">);</span>

  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">2</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">arguments</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
    <span class="s2">var </span><span class="s0">child </span><span class="s1">= </span><span class="s0">arguments</span><span class="s1">[</span><span class="s0">i</span><span class="s1">];</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s0">child </span><span class="s1">=== </span><span class="s4">'string'</span><span class="s1">) {</span>
      <span class="s0">el</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">document</span><span class="s1">.</span><span class="s0">createTextNode</span><span class="s1">(</span><span class="s0">child</span><span class="s1">));</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s0">child</span><span class="s1">) {</span>
        <span class="s0">el</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">child</span><span class="s1">);</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">attr </span><span class="s2">in </span><span class="s0">attrs</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">attr </span><span class="s1">== </span><span class="s4">&quot;className&quot;</span><span class="s1">) {</span>
      <span class="s0">el</span><span class="s1">[</span><span class="s0">attr</span><span class="s1">] = </span><span class="s0">attrs</span><span class="s1">[</span><span class="s0">attr</span><span class="s1">];</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">el</span><span class="s1">.</span><span class="s0">setAttribute</span><span class="s1">(</span><span class="s0">attr</span><span class="s1">, </span><span class="s0">attrs</span><span class="s1">[</span><span class="s0">attr</span><span class="s1">]);</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s0">el</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">getSpecStatus </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">child</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">results </span><span class="s1">= </span><span class="s0">child</span><span class="s1">.</span><span class="s0">results</span><span class="s1">();</span>
  <span class="s2">var </span><span class="s0">status </span><span class="s1">= </span><span class="s0">results</span><span class="s1">.</span><span class="s0">passed</span><span class="s1">() ? </span><span class="s4">'passed' </span><span class="s1">: </span><span class="s4">'failed'</span><span class="s1">;</span>
  <span class="s2">if </span><span class="s1">(</span><span class="s0">results</span><span class="s1">.</span><span class="s0">skipped</span><span class="s1">) {</span>
    <span class="s0">status </span><span class="s1">= </span><span class="s4">'skipped'</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s0">status</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">appendToSummary </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">child</span><span class="s1">, </span><span class="s0">childElement</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">parentDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">dom</span><span class="s1">.</span><span class="s0">summary</span><span class="s1">;</span>
  <span class="s2">var </span><span class="s0">parentSuite </span><span class="s1">= (</span><span class="s2">typeof </span><span class="s0">child</span><span class="s1">.</span><span class="s0">parentSuite </span><span class="s1">== </span><span class="s4">'undefined'</span><span class="s1">) ? </span><span class="s4">'suite' </span><span class="s1">: </span><span class="s4">'parentSuite'</span><span class="s1">;</span>
  <span class="s2">var </span><span class="s0">parent </span><span class="s1">= </span><span class="s0">child</span><span class="s1">[</span><span class="s0">parentSuite</span><span class="s1">];</span>

  <span class="s2">if </span><span class="s1">(</span><span class="s0">parent</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">suites</span><span class="s1">[</span><span class="s0">parent</span><span class="s1">.</span><span class="s0">id</span><span class="s1">] == </span><span class="s4">'undefined'</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">suites</span><span class="s1">[</span><span class="s0">parent</span><span class="s1">.</span><span class="s0">id</span><span class="s1">] = </span><span class="s2">new </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SuiteView</span><span class="s1">(</span><span class="s0">parent</span><span class="s1">, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">dom</span><span class="s1">, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s0">parentDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">suites</span><span class="s1">[</span><span class="s0">parent</span><span class="s1">.</span><span class="s0">id</span><span class="s1">].</span><span class="s0">element</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s0">parentDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">childElement</span><span class="s1">);</span>
<span class="s1">};</span>


<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">addHelpers </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">ctor</span><span class="s1">) {</span>
  <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s0">fn </span><span class="s2">in </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">) {</span>
    <span class="s0">ctor</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">[</span><span class="s0">fn</span><span class="s1">] = </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">[</span><span class="s0">fn</span><span class="s1">];</span>
  <span class="s1">}</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">_doc</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">self </span><span class="s1">= </span><span class="s2">this</span><span class="s1">;</span>
  <span class="s2">var </span><span class="s0">doc </span><span class="s1">= </span><span class="s0">_doc </span><span class="s1">|| </span><span class="s0">window</span><span class="s1">.</span><span class="s0">document</span><span class="s1">;</span>

  <span class="s2">var </span><span class="s0">reporterView</span><span class="s1">;</span>

  <span class="s2">var </span><span class="s0">dom </span><span class="s1">= {};</span>

  <span class="s5">// Jasmine Reporter Public Interface</span>
  <span class="s0">self</span><span class="s1">.</span><span class="s0">logRunningSpecs </span><span class="s1">= </span><span class="s2">false</span><span class="s1">;</span>

  <span class="s0">self</span><span class="s1">.</span><span class="s0">reportRunnerStarting </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">runner</span><span class="s1">) {</span>
    <span class="s2">var </span><span class="s0">specs </span><span class="s1">= </span><span class="s0">runner</span><span class="s1">.</span><span class="s0">specs</span><span class="s1">() || [];</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s0">specs</span><span class="s1">.</span><span class="s0">length </span><span class="s1">== </span><span class="s3">0</span><span class="s1">) {</span>
      <span class="s2">return</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">createReporterDom</span><span class="s1">(</span><span class="s0">runner</span><span class="s1">.</span><span class="s0">env</span><span class="s1">.</span><span class="s0">versionString</span><span class="s1">());</span>
    <span class="s0">doc</span><span class="s1">.</span><span class="s0">body</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">dom</span><span class="s1">.</span><span class="s0">reporter</span><span class="s1">);</span>
    <span class="s0">setExceptionHandling</span><span class="s1">();</span>

    <span class="s0">reporterView </span><span class="s1">= </span><span class="s2">new </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">ReporterView</span><span class="s1">(</span><span class="s0">dom</span><span class="s1">);</span>
    <span class="s0">reporterView</span><span class="s1">.</span><span class="s0">addSpecs</span><span class="s1">(</span><span class="s0">specs</span><span class="s1">, </span><span class="s0">self</span><span class="s1">.</span><span class="s0">specFilter</span><span class="s1">);</span>
  <span class="s1">};</span>

  <span class="s0">self</span><span class="s1">.</span><span class="s0">reportRunnerResults </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">runner</span><span class="s1">) {</span>
    <span class="s0">reporterView </span><span class="s1">&amp;&amp; </span><span class="s0">reporterView</span><span class="s1">.</span><span class="s0">complete</span><span class="s1">();</span>
  <span class="s1">};</span>

  <span class="s0">self</span><span class="s1">.</span><span class="s0">reportSuiteResults </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">suite</span><span class="s1">) {</span>
    <span class="s0">reporterView</span><span class="s1">.</span><span class="s0">suiteComplete</span><span class="s1">(</span><span class="s0">suite</span><span class="s1">);</span>
  <span class="s1">};</span>

  <span class="s0">self</span><span class="s1">.</span><span class="s0">reportSpecStarting </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">self</span><span class="s1">.</span><span class="s0">logRunningSpecs</span><span class="s1">) {</span>
      <span class="s0">self</span><span class="s1">.</span><span class="s0">log</span><span class="s1">(</span><span class="s4">'&gt;&gt; Jasmine Running ' </span><span class="s1">+ </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">description </span><span class="s1">+ </span><span class="s4">' ' </span><span class="s1">+ </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">description </span><span class="s1">+ </span><span class="s4">'...'</span><span class="s1">);</span>
    <span class="s1">}</span>
  <span class="s1">};</span>

  <span class="s0">self</span><span class="s1">.</span><span class="s0">reportSpecResults </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">) {</span>
    <span class="s0">reporterView</span><span class="s1">.</span><span class="s0">specComplete</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">);</span>
  <span class="s1">};</span>

  <span class="s0">self</span><span class="s1">.</span><span class="s0">log </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s0">console </span><span class="s1">= </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">getGlobal</span><span class="s1">().</span><span class="s0">console</span><span class="s1">;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">console </span><span class="s1">&amp;&amp; </span><span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">.</span><span class="s0">apply</span><span class="s1">) {</span>
        <span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">.</span><span class="s0">apply</span><span class="s1">(</span><span class="s0">console</span><span class="s1">, </span><span class="s0">arguments</span><span class="s1">);</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">(</span><span class="s0">arguments</span><span class="s1">); </span><span class="s5">// ie fix: console.log.apply doesn't exist on ie</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">};</span>

  <span class="s0">self</span><span class="s1">.</span><span class="s0">specFilter </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(!</span><span class="s0">focusedSpecName</span><span class="s1">()) {</span>
      <span class="s2">return true</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">().</span><span class="s0">indexOf</span><span class="s1">(</span><span class="s0">focusedSpecName</span><span class="s1">()) === </span><span class="s3">0</span><span class="s1">;</span>
  <span class="s1">};</span>

  <span class="s2">return </span><span class="s0">self</span><span class="s1">;</span>

  <span class="s2">function </span><span class="s0">focusedSpecName</span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s0">specName</span><span class="s1">;</span>

    <span class="s1">(</span><span class="s2">function </span><span class="s0">memoizeFocusedSpec</span><span class="s1">() {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s0">specName</span><span class="s1">) {</span>
        <span class="s2">return</span><span class="s1">;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s0">paramMap </span><span class="s1">= [];</span>
      <span class="s2">var </span><span class="s0">params </span><span class="s1">= </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">parameters</span><span class="s1">(</span><span class="s0">doc</span><span class="s1">);</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">params</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
        <span class="s2">var </span><span class="s0">p </span><span class="s1">= </span><span class="s0">params</span><span class="s1">[</span><span class="s0">i</span><span class="s1">].</span><span class="s0">split</span><span class="s1">(</span><span class="s4">'='</span><span class="s1">);</span>
        <span class="s0">paramMap</span><span class="s1">[</span><span class="s0">decodeURIComponent</span><span class="s1">(</span><span class="s0">p</span><span class="s1">[</span><span class="s3">0</span><span class="s1">])] = </span><span class="s0">decodeURIComponent</span><span class="s1">(</span><span class="s0">p</span><span class="s1">[</span><span class="s3">1</span><span class="s1">]);</span>
      <span class="s1">}</span>

      <span class="s0">specName </span><span class="s1">= </span><span class="s0">paramMap</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">;</span>
    <span class="s1">})();</span>

    <span class="s2">return </span><span class="s0">specName</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s0">createReporterDom</span><span class="s1">(</span><span class="s0">version</span><span class="s1">) {</span>
    <span class="s0">dom</span><span class="s1">.</span><span class="s0">reporter </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">id</span><span class="s1">: </span><span class="s4">'HTMLReporter'</span><span class="s1">, </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'jasmine_reporter' </span><span class="s1">},</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">banner </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'banner' </span><span class="s1">},</span>
        <span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'title' </span><span class="s1">}, </span><span class="s4">&quot;Jasmine &quot;</span><span class="s1">),</span>
        <span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'version' </span><span class="s1">}, </span><span class="s0">version</span><span class="s1">)),</span>

      <span class="s0">dom</span><span class="s1">.</span><span class="s0">symbolSummary </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'ul'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'symbolSummary'</span><span class="s1">}),</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">alert </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'alert'</span><span class="s1">},</span>
        <span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'exceptions' </span><span class="s1">},</span>
          <span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'label'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'label'</span><span class="s1">, </span><span class="s4">'for'</span><span class="s1">: </span><span class="s4">'no_try_catch' </span><span class="s1">}, </span><span class="s4">'No try/catch'</span><span class="s1">),</span>
          <span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'input'</span><span class="s1">, { </span><span class="s0">id</span><span class="s1">: </span><span class="s4">'no_try_catch'</span><span class="s1">, </span><span class="s0">type</span><span class="s1">: </span><span class="s4">'checkbox' </span><span class="s1">}))),</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">results </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'results'</span><span class="s1">},</span>
        <span class="s0">dom</span><span class="s1">.</span><span class="s0">summary </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'summary' </span><span class="s1">}),</span>
        <span class="s0">dom</span><span class="s1">.</span><span class="s0">details </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">id</span><span class="s1">: </span><span class="s4">'details' </span><span class="s1">}))</span>
    <span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s0">noTryCatch</span><span class="s1">() {</span>
    <span class="s2">return </span><span class="s0">window</span><span class="s1">.</span><span class="s0">location</span><span class="s1">.</span><span class="s0">search</span><span class="s1">.</span><span class="s0">match</span><span class="s1">(</span><span class="s6">/catch=false/</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s0">searchWithCatch</span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s0">params </span><span class="s1">= </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">parameters</span><span class="s1">(</span><span class="s0">window</span><span class="s1">.</span><span class="s0">document</span><span class="s1">);</span>
    <span class="s2">var </span><span class="s0">removed </span><span class="s1">= </span><span class="s2">false</span><span class="s1">;</span>
    <span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">;</span>

    <span class="s2">while </span><span class="s1">(!</span><span class="s0">removed </span><span class="s1">&amp;&amp; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">params</span><span class="s1">.</span><span class="s0">length</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s0">params</span><span class="s1">[</span><span class="s0">i</span><span class="s1">].</span><span class="s0">match</span><span class="s1">(</span><span class="s6">/catch=/</span><span class="s1">)) {</span>
        <span class="s0">params</span><span class="s1">.</span><span class="s0">splice</span><span class="s1">(</span><span class="s0">i</span><span class="s1">, </span><span class="s3">1</span><span class="s1">);</span>
        <span class="s0">removed </span><span class="s1">= </span><span class="s2">true</span><span class="s1">;</span>
      <span class="s1">}</span>
      <span class="s0">i</span><span class="s1">++;</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">CATCH_EXCEPTIONS</span><span class="s1">) {</span>
      <span class="s0">params</span><span class="s1">.</span><span class="s0">push</span><span class="s1">(</span><span class="s4">&quot;catch=false&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s0">params</span><span class="s1">.</span><span class="s0">join</span><span class="s1">(</span><span class="s4">&quot;&amp;&quot;</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s0">setExceptionHandling</span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s0">chxCatch </span><span class="s1">= </span><span class="s0">document</span><span class="s1">.</span><span class="s0">getElementById</span><span class="s1">(</span><span class="s4">'no_try_catch'</span><span class="s1">);</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s0">noTryCatch</span><span class="s1">()) {</span>
      <span class="s0">chxCatch</span><span class="s1">.</span><span class="s0">setAttribute</span><span class="s1">(</span><span class="s4">'checked'</span><span class="s1">, </span><span class="s2">true</span><span class="s1">);</span>
      <span class="s0">jasmine</span><span class="s1">.</span><span class="s0">CATCH_EXCEPTIONS </span><span class="s1">= </span><span class="s2">false</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s0">chxCatch</span><span class="s1">.</span><span class="s0">onclick </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
      <span class="s0">window</span><span class="s1">.</span><span class="s0">location</span><span class="s1">.</span><span class="s0">search </span><span class="s1">= </span><span class="s0">searchWithCatch</span><span class="s1">();</span>
    <span class="s1">};</span>
  <span class="s1">}</span>
<span class="s1">};</span>
<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">parameters </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">doc</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">paramStr </span><span class="s1">= </span><span class="s0">doc</span><span class="s1">.</span><span class="s0">location</span><span class="s1">.</span><span class="s0">search</span><span class="s1">.</span><span class="s0">substring</span><span class="s1">(</span><span class="s3">1</span><span class="s1">);</span>
  <span class="s2">var </span><span class="s0">params </span><span class="s1">= [];</span>

  <span class="s2">if </span><span class="s1">(</span><span class="s0">paramStr</span><span class="s1">.</span><span class="s0">length </span><span class="s1">&gt; </span><span class="s3">0</span><span class="s1">) {</span>
    <span class="s0">params </span><span class="s1">= </span><span class="s0">paramStr</span><span class="s1">.</span><span class="s0">split</span><span class="s1">(</span><span class="s4">'&amp;'</span><span class="s1">);</span>
  <span class="s1">}</span>
  <span class="s2">return </span><span class="s0">params</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">sectionLink </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">sectionName</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">link </span><span class="s1">= </span><span class="s4">'?'</span><span class="s1">;</span>
  <span class="s2">var </span><span class="s0">params </span><span class="s1">= [];</span>

  <span class="s2">if </span><span class="s1">(</span><span class="s0">sectionName</span><span class="s1">) {</span>
    <span class="s0">params</span><span class="s1">.</span><span class="s0">push</span><span class="s1">(</span><span class="s4">'spec=' </span><span class="s1">+ </span><span class="s0">encodeURIComponent</span><span class="s1">(</span><span class="s0">sectionName</span><span class="s1">));</span>
  <span class="s1">}</span>
  <span class="s2">if </span><span class="s1">(!</span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">CATCH_EXCEPTIONS</span><span class="s1">) {</span>
    <span class="s0">params</span><span class="s1">.</span><span class="s0">push</span><span class="s1">(</span><span class="s4">&quot;catch=false&quot;</span><span class="s1">);</span>
  <span class="s1">}</span>
  <span class="s2">if </span><span class="s1">(</span><span class="s0">params</span><span class="s1">.</span><span class="s0">length </span><span class="s1">&gt; </span><span class="s3">0</span><span class="s1">) {</span>
    <span class="s0">link </span><span class="s1">+= </span><span class="s0">params</span><span class="s1">.</span><span class="s0">join</span><span class="s1">(</span><span class="s4">&quot;&amp;&quot;</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s0">link</span><span class="s1">;</span>
<span class="s1">};</span>
<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">addHelpers</span><span class="s1">(</span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">);</span>
<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">ReporterView </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">dom</span><span class="s1">) {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">startedAt </span><span class="s1">= </span><span class="s2">new </span><span class="s0">Date</span><span class="s1">();</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">runningSpecCount </span><span class="s1">= </span><span class="s3">0</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">completeSpecCount </span><span class="s1">= </span><span class="s3">0</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">passedCount </span><span class="s1">= </span><span class="s3">0</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">failedCount </span><span class="s1">= </span><span class="s3">0</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">skippedCount </span><span class="s1">= </span><span class="s3">0</span><span class="s1">;</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">createResultsMenu </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">resultsMenu </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'resultsMenu bar'</span><span class="s1">},</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">summaryMenuItem </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'summaryMenuItem'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s4">&quot;#&quot;</span><span class="s1">}, </span><span class="s4">'0 specs'</span><span class="s1">),</span>
      <span class="s4">' | '</span><span class="s1">,</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">detailsMenuItem </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'detailsMenuItem'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s4">&quot;#&quot;</span><span class="s1">}, </span><span class="s4">'0 failing'</span><span class="s1">));</span>

    <span class="s2">this</span><span class="s1">.</span><span class="s0">summaryMenuItem</span><span class="s1">.</span><span class="s0">onclick </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">reporter</span><span class="s1">.</span><span class="s0">className </span><span class="s1">= </span><span class="s0">dom</span><span class="s1">.</span><span class="s0">reporter</span><span class="s1">.</span><span class="s0">className</span><span class="s1">.</span><span class="s0">replace</span><span class="s1">(</span><span class="s6">/ showDetails/g</span><span class="s1">, </span><span class="s4">''</span><span class="s1">);</span>
    <span class="s1">};</span>

    <span class="s2">this</span><span class="s1">.</span><span class="s0">detailsMenuItem</span><span class="s1">.</span><span class="s0">onclick </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
      <span class="s0">showDetails</span><span class="s1">();</span>
    <span class="s1">};</span>
  <span class="s1">};</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">addSpecs </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">specs</span><span class="s1">, </span><span class="s0">specFilter</span><span class="s1">) {</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">totalSpecCount </span><span class="s1">= </span><span class="s0">specs</span><span class="s1">.</span><span class="s0">length</span><span class="s1">;</span>

    <span class="s2">this</span><span class="s1">.</span><span class="s0">views </span><span class="s1">= {</span>
      <span class="s0">specs</span><span class="s1">: {},</span>
      <span class="s0">suites</span><span class="s1">: {}</span>
    <span class="s1">};</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">specs</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
      <span class="s2">var </span><span class="s0">spec </span><span class="s1">= </span><span class="s0">specs</span><span class="s1">[</span><span class="s0">i</span><span class="s1">];</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">specs</span><span class="s1">[</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">id</span><span class="s1">] = </span><span class="s2">new </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">, </span><span class="s0">dom</span><span class="s1">, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">);</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s0">specFilter</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">)) {</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">runningSpecCount</span><span class="s1">++;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">};</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">specComplete </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">) {</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">completeSpecCount</span><span class="s1">++;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">specs</span><span class="s1">[</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">id</span><span class="s1">])) {</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">specs</span><span class="s1">[</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">id</span><span class="s1">] = </span><span class="s2">new </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">, </span><span class="s0">dom</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s0">specView </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">specs</span><span class="s1">[</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">id</span><span class="s1">];</span>

    <span class="s2">switch </span><span class="s1">(</span><span class="s0">specView</span><span class="s1">.</span><span class="s0">status</span><span class="s1">()) {</span>
      <span class="s2">case </span><span class="s4">'passed'</span><span class="s1">:</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">passedCount</span><span class="s1">++;</span>
        <span class="s2">break</span><span class="s1">;</span>

      <span class="s2">case </span><span class="s4">'failed'</span><span class="s1">:</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">failedCount</span><span class="s1">++;</span>
        <span class="s2">break</span><span class="s1">;</span>

      <span class="s2">case </span><span class="s4">'skipped'</span><span class="s1">:</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">skippedCount</span><span class="s1">++;</span>
        <span class="s2">break</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">specView</span><span class="s1">.</span><span class="s0">refresh</span><span class="s1">();</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">refresh</span><span class="s1">();</span>
  <span class="s1">};</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">suiteComplete </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">suite</span><span class="s1">) {</span>
    <span class="s2">var </span><span class="s0">suiteView </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">views</span><span class="s1">.</span><span class="s0">suites</span><span class="s1">[</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">id</span><span class="s1">];</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s0">suiteView</span><span class="s1">)) {</span>
      <span class="s2">return</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s0">suiteView</span><span class="s1">.</span><span class="s0">refresh</span><span class="s1">();</span>
  <span class="s1">};</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">refresh </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">resultsMenu</span><span class="s1">)) {</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">createResultsMenu</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s5">// currently running UI</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">runningAlert</span><span class="s1">)) {</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">runningAlert </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">href</span><span class="s1">: </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">sectionLink</span><span class="s1">(), </span><span class="s0">className</span><span class="s1">: </span><span class="s4">&quot;runningAlert bar&quot; </span><span class="s1">});</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">runningAlert</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">runningAlert</span><span class="s1">.</span><span class="s0">innerHTML </span><span class="s1">= </span><span class="s4">&quot;Running &quot; </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.</span><span class="s0">completeSpecCount </span><span class="s1">+ </span><span class="s4">&quot; of &quot; </span><span class="s1">+ </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">totalSpecCount</span><span class="s1">);</span>

    <span class="s5">// skipped specs UI</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">skippedAlert</span><span class="s1">)) {</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">skippedAlert </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">href</span><span class="s1">: </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">sectionLink</span><span class="s1">(), </span><span class="s0">className</span><span class="s1">: </span><span class="s4">&quot;skippedAlert bar&quot; </span><span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.</span><span class="s0">skippedAlert</span><span class="s1">.</span><span class="s0">innerHTML </span><span class="s1">= </span><span class="s4">&quot;Skipping &quot; </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.</span><span class="s0">skippedCount </span><span class="s1">+ </span><span class="s4">&quot; of &quot; </span><span class="s1">+ </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">totalSpecCount</span><span class="s1">) + </span><span class="s4">&quot; - run all&quot;</span><span class="s1">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">skippedCount </span><span class="s1">=== </span><span class="s3">1 </span><span class="s1">&amp;&amp; </span><span class="s0">isDefined</span><span class="s1">(</span><span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">)) {</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">skippedAlert</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">// passing specs UI</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">passedAlert</span><span class="s1">)) {</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">passedAlert </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, { </span><span class="s0">href</span><span class="s1">: </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">sectionLink</span><span class="s1">(), </span><span class="s0">className</span><span class="s1">: </span><span class="s4">&quot;passingAlert bar&quot; </span><span class="s1">});</span>
    <span class="s1">}</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">passedAlert</span><span class="s1">.</span><span class="s0">innerHTML </span><span class="s1">= </span><span class="s4">&quot;Passing &quot; </span><span class="s1">+ </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">passedCount</span><span class="s1">);</span>

    <span class="s5">// failing specs UI</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">failedAlert</span><span class="s1">)) {</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">failedAlert </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, {</span><span class="s0">href</span><span class="s1">: </span><span class="s4">&quot;?&quot;</span><span class="s1">, </span><span class="s0">className</span><span class="s1">: </span><span class="s4">&quot;failingAlert bar&quot;</span><span class="s1">});</span>
    <span class="s1">}</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">failedAlert</span><span class="s1">.</span><span class="s0">innerHTML </span><span class="s1">= </span><span class="s4">&quot;Failing &quot; </span><span class="s1">+ </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">failedCount</span><span class="s1">);</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">failedCount </span><span class="s1">=== </span><span class="s3">1 </span><span class="s1">&amp;&amp; </span><span class="s0">isDefined</span><span class="s1">(</span><span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">)) {</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">failedAlert</span><span class="s1">);</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">resultsMenu</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">// summary info</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">summaryMenuItem</span><span class="s1">.</span><span class="s0">innerHTML </span><span class="s1">= </span><span class="s4">&quot;&quot; </span><span class="s1">+ </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">runningSpecCount</span><span class="s1">);</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">detailsMenuItem</span><span class="s1">.</span><span class="s0">innerHTML </span><span class="s1">= </span><span class="s4">&quot;&quot; </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.</span><span class="s0">failedCount </span><span class="s1">+ </span><span class="s4">&quot; failing&quot;</span><span class="s1">;</span>
  <span class="s1">};</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">complete </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
    <span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">.</span><span class="s0">removeChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">runningAlert</span><span class="s1">);</span>

    <span class="s2">this</span><span class="s1">.</span><span class="s0">skippedAlert</span><span class="s1">.</span><span class="s0">innerHTML </span><span class="s1">= </span><span class="s4">&quot;Ran &quot; </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.</span><span class="s0">runningSpecCount </span><span class="s1">+ </span><span class="s4">&quot; of &quot; </span><span class="s1">+ </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">totalSpecCount</span><span class="s1">) + </span><span class="s4">&quot; - run all&quot;</span><span class="s1">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">failedCount </span><span class="s1">=== </span><span class="s3">0</span><span class="s1">) {</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">alert</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'passingAlert bar'</span><span class="s1">}, </span><span class="s4">&quot;Passing &quot; </span><span class="s1">+ </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">passedCount</span><span class="s1">)));</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">showDetails</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s0">dom</span><span class="s1">.</span><span class="s0">banner</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'duration'</span><span class="s1">}, </span><span class="s4">&quot;finished in &quot; </span><span class="s1">+ ((</span><span class="s2">new </span><span class="s0">Date</span><span class="s1">().</span><span class="s0">getTime</span><span class="s1">() - </span><span class="s2">this</span><span class="s1">.</span><span class="s0">startedAt</span><span class="s1">.</span><span class="s0">getTime</span><span class="s1">()) / </span><span class="s3">1000</span><span class="s1">) + </span><span class="s4">&quot;s&quot;</span><span class="s1">));</span>
  <span class="s1">};</span>

  <span class="s2">return this</span><span class="s1">;</span>

  <span class="s2">function </span><span class="s0">showDetails</span><span class="s1">() {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">dom</span><span class="s1">.</span><span class="s0">reporter</span><span class="s1">.</span><span class="s0">className</span><span class="s1">.</span><span class="s0">search</span><span class="s1">(</span><span class="s6">/showDetails/</span><span class="s1">) === -</span><span class="s3">1</span><span class="s1">) {</span>
      <span class="s0">dom</span><span class="s1">.</span><span class="s0">reporter</span><span class="s1">.</span><span class="s0">className </span><span class="s1">+= </span><span class="s4">&quot; showDetails&quot;</span><span class="s1">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s0">obj</span><span class="s1">) {</span>
    <span class="s2">return typeof </span><span class="s0">obj </span><span class="s1">=== </span><span class="s4">'undefined'</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s0">isDefined</span><span class="s1">(</span><span class="s0">obj</span><span class="s1">) {</span>
    <span class="s2">return </span><span class="s1">!</span><span class="s0">isUndefined</span><span class="s1">(</span><span class="s0">obj</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s0">specPluralizedFor</span><span class="s1">(</span><span class="s0">count</span><span class="s1">) {</span>
    <span class="s2">var </span><span class="s0">str </span><span class="s1">= </span><span class="s0">count </span><span class="s1">+ </span><span class="s4">&quot; spec&quot;</span><span class="s1">;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">count </span><span class="s1">&gt; </span><span class="s3">1</span><span class="s1">) {</span>
      <span class="s0">str </span><span class="s1">+= </span><span class="s4">&quot;s&quot;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s0">str</span><span class="s1">;</span>
  <span class="s1">}</span>

<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">addHelpers</span><span class="s1">(</span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">ReporterView</span><span class="s1">);</span>


<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">, </span><span class="s0">dom</span><span class="s1">, </span><span class="s0">views</span><span class="s1">) {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">spec </span><span class="s1">= </span><span class="s0">spec</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">dom </span><span class="s1">= </span><span class="s0">dom</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">views </span><span class="s1">= </span><span class="s0">views</span><span class="s1">;</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">symbol </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'li'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'pending' </span><span class="s1">});</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">dom</span><span class="s1">.</span><span class="s0">symbolSummary</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">symbol</span><span class="s1">);</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">summary </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'specSummary' </span><span class="s1">},</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, {</span>
      <span class="s0">className</span><span class="s1">: </span><span class="s4">'description'</span><span class="s1">,</span>
      <span class="s0">href</span><span class="s1">: </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">sectionLink</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()),</span>
      <span class="s0">title</span><span class="s1">: </span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()</span>
    <span class="s1">}, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">description</span><span class="s1">)</span>
  <span class="s1">);</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">detail </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'specDetail' </span><span class="s1">},</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, {</span>
        <span class="s0">className</span><span class="s1">: </span><span class="s4">'description'</span><span class="s1">,</span>
        <span class="s0">href</span><span class="s1">: </span><span class="s4">'?spec=' </span><span class="s1">+ </span><span class="s0">encodeURIComponent</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()),</span>
        <span class="s0">title</span><span class="s1">: </span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()</span>
      <span class="s1">}, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">())</span>
  <span class="s1">);</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">status </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">return this</span><span class="s1">.</span><span class="s0">getSpecStatus</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">);</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">refresh </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">symbol</span><span class="s1">.</span><span class="s0">className </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">status</span><span class="s1">();</span>

  <span class="s2">switch </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">status</span><span class="s1">()) {</span>
    <span class="s2">case </span><span class="s4">'skipped'</span><span class="s1">:</span>
      <span class="s2">break</span><span class="s1">;</span>

    <span class="s2">case </span><span class="s4">'passed'</span><span class="s1">:</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">appendSummaryToSuiteDiv</span><span class="s1">();</span>
      <span class="s2">break</span><span class="s1">;</span>

    <span class="s2">case </span><span class="s4">'failed'</span><span class="s1">:</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">appendSummaryToSuiteDiv</span><span class="s1">();</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">appendFailureDetail</span><span class="s1">();</span>
      <span class="s2">break</span><span class="s1">;</span>
  <span class="s1">}</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">appendSummaryToSuiteDiv </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">summary</span><span class="s1">.</span><span class="s0">className </span><span class="s1">+= </span><span class="s4">' ' </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.</span><span class="s0">status</span><span class="s1">();</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">appendToSummary</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">summary</span><span class="s1">);</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">appendFailureDetail </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">detail</span><span class="s1">.</span><span class="s0">className </span><span class="s1">+= </span><span class="s4">' ' </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.</span><span class="s0">status</span><span class="s1">();</span>

  <span class="s2">var </span><span class="s0">resultItems </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">results</span><span class="s1">().</span><span class="s0">getItems</span><span class="s1">();</span>
  <span class="s2">var </span><span class="s0">messagesDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'messages' </span><span class="s1">});</span>

  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">resultItems</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
    <span class="s2">var </span><span class="s0">result </span><span class="s1">= </span><span class="s0">resultItems</span><span class="s1">[</span><span class="s0">i</span><span class="s1">];</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s0">result</span><span class="s1">.</span><span class="s0">type </span><span class="s1">== </span><span class="s4">'log'</span><span class="s1">) {</span>
      <span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'resultMessage log'</span><span class="s1">}, </span><span class="s0">result</span><span class="s1">.</span><span class="s0">toString</span><span class="s1">()));</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s0">result</span><span class="s1">.</span><span class="s0">type </span><span class="s1">== </span><span class="s4">'expect' </span><span class="s1">&amp;&amp; </span><span class="s0">result</span><span class="s1">.</span><span class="s0">passed </span><span class="s1">&amp;&amp; !</span><span class="s0">result</span><span class="s1">.</span><span class="s0">passed</span><span class="s1">()) {</span>
      <span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'resultMessage fail'</span><span class="s1">}, </span><span class="s0">result</span><span class="s1">.</span><span class="s0">message</span><span class="s1">));</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s0">result</span><span class="s1">.</span><span class="s0">trace</span><span class="s1">.</span><span class="s0">stack</span><span class="s1">) {</span>
        <span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'stackTrace'</span><span class="s1">}, </span><span class="s0">result</span><span class="s1">.</span><span class="s0">trace</span><span class="s1">.</span><span class="s0">stack</span><span class="s1">));</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">if </span><span class="s1">(</span><span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">childNodes</span><span class="s1">.</span><span class="s0">length </span><span class="s1">&gt; </span><span class="s3">0</span><span class="s1">) {</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">detail</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">messagesDiv</span><span class="s1">);</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">dom</span><span class="s1">.</span><span class="s0">details</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">detail</span><span class="s1">);</span>
  <span class="s1">}</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">addHelpers</span><span class="s1">(</span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SpecView</span><span class="s1">);</span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SuiteView </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">suite</span><span class="s1">, </span><span class="s0">dom</span><span class="s1">, </span><span class="s0">views</span><span class="s1">) {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">suite </span><span class="s1">= </span><span class="s0">suite</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">dom </span><span class="s1">= </span><span class="s0">dom</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">views </span><span class="s1">= </span><span class="s0">views</span><span class="s1">;</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">element </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'suite' </span><span class="s1">},</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'description'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">sectionLink</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()) }, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">description</span><span class="s1">)</span>
  <span class="s1">);</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">appendToSummary</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">suite</span><span class="s1">, </span><span class="s2">this</span><span class="s1">.</span><span class="s0">element</span><span class="s1">);</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SuiteView</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">status </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">return this</span><span class="s1">.</span><span class="s0">getSpecStatus</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">suite</span><span class="s1">);</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SuiteView</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">refresh </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">element</span><span class="s1">.</span><span class="s0">className </span><span class="s1">+= </span><span class="s4">&quot; &quot; </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.</span><span class="s0">status</span><span class="s1">();</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporterHelpers</span><span class="s1">.</span><span class="s0">addHelpers</span><span class="s1">(</span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">HtmlReporter</span><span class="s1">.</span><span class="s0">SuiteView</span><span class="s1">);</span>

<span class="s5">/* @deprecated Use jasmine.HtmlReporter instead 
 */</span>
<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">doc</span><span class="s1">) {</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">document </span><span class="s1">= </span><span class="s0">doc </span><span class="s1">|| </span><span class="s0">document</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">suiteDivs </span><span class="s1">= {};</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">logRunningSpecs </span><span class="s1">= </span><span class="s2">false</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">createDom </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">type</span><span class="s1">, </span><span class="s0">attrs</span><span class="s1">, </span><span class="s0">childrenVarArgs</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">el </span><span class="s1">= </span><span class="s0">document</span><span class="s1">.</span><span class="s0">createElement</span><span class="s1">(</span><span class="s0">type</span><span class="s1">);</span>

  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">2</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">arguments</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
    <span class="s2">var </span><span class="s0">child </span><span class="s1">= </span><span class="s0">arguments</span><span class="s1">[</span><span class="s0">i</span><span class="s1">];</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s0">child </span><span class="s1">=== </span><span class="s4">'string'</span><span class="s1">) {</span>
      <span class="s0">el</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">document</span><span class="s1">.</span><span class="s0">createTextNode</span><span class="s1">(</span><span class="s0">child</span><span class="s1">));</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s0">child</span><span class="s1">) { </span><span class="s0">el</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">child</span><span class="s1">); }</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">attr </span><span class="s2">in </span><span class="s0">attrs</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">attr </span><span class="s1">== </span><span class="s4">&quot;className&quot;</span><span class="s1">) {</span>
      <span class="s0">el</span><span class="s1">[</span><span class="s0">attr</span><span class="s1">] = </span><span class="s0">attrs</span><span class="s1">[</span><span class="s0">attr</span><span class="s1">];</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">el</span><span class="s1">.</span><span class="s0">setAttribute</span><span class="s1">(</span><span class="s0">attr</span><span class="s1">, </span><span class="s0">attrs</span><span class="s1">[</span><span class="s0">attr</span><span class="s1">]);</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s0">el</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">reportRunnerStarting </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">runner</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">showPassed</span><span class="s1">, </span><span class="s0">showSkipped</span><span class="s1">;</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">outerDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">id</span><span class="s1">: </span><span class="s4">'TrivialReporter'</span><span class="s1">, </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'jasmine_reporter' </span><span class="s1">},</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'banner' </span><span class="s1">},</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'logo' </span><span class="s1">},</span>
            <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'title' </span><span class="s1">}, </span><span class="s4">&quot;Jasmine&quot;</span><span class="s1">),</span>
            <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'version' </span><span class="s1">}, </span><span class="s0">runner</span><span class="s1">.</span><span class="s0">env</span><span class="s1">.</span><span class="s0">versionString</span><span class="s1">())),</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'options' </span><span class="s1">},</span>
            <span class="s4">&quot;Show &quot;</span><span class="s1">,</span>
            <span class="s0">showPassed </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'input'</span><span class="s1">, { </span><span class="s0">id</span><span class="s1">: </span><span class="s4">&quot;__jasmine_TrivialReporter_showPassed__&quot;</span><span class="s1">, </span><span class="s0">type</span><span class="s1">: </span><span class="s4">'checkbox' </span><span class="s1">}),</span>
            <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'label'</span><span class="s1">, { </span><span class="s4">&quot;for&quot;</span><span class="s1">: </span><span class="s4">&quot;__jasmine_TrivialReporter_showPassed__&quot; </span><span class="s1">}, </span><span class="s4">&quot; passed &quot;</span><span class="s1">),</span>
            <span class="s0">showSkipped </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'input'</span><span class="s1">, { </span><span class="s0">id</span><span class="s1">: </span><span class="s4">&quot;__jasmine_TrivialReporter_showSkipped__&quot;</span><span class="s1">, </span><span class="s0">type</span><span class="s1">: </span><span class="s4">'checkbox' </span><span class="s1">}),</span>
            <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'label'</span><span class="s1">, { </span><span class="s4">&quot;for&quot;</span><span class="s1">: </span><span class="s4">&quot;__jasmine_TrivialReporter_showSkipped__&quot; </span><span class="s1">}, </span><span class="s4">&quot; skipped&quot;</span><span class="s1">)</span>
            <span class="s1">)</span>
          <span class="s1">),</span>

      <span class="s2">this</span><span class="s1">.</span><span class="s0">runnerDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'runner running' </span><span class="s1">},</span>
          <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'run_spec'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s4">'?' </span><span class="s1">}, </span><span class="s4">&quot;run all&quot;</span><span class="s1">),</span>
          <span class="s2">this</span><span class="s1">.</span><span class="s0">runnerMessageSpan </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, {}, </span><span class="s4">&quot;Running...&quot;</span><span class="s1">),</span>
          <span class="s2">this</span><span class="s1">.</span><span class="s0">finishedAtSpan </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'span'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'finished-at' </span><span class="s1">}, </span><span class="s4">&quot;&quot;</span><span class="s1">))</span>
      <span class="s1">);</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">document</span><span class="s1">.</span><span class="s0">body</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">);</span>

  <span class="s2">var </span><span class="s0">suites </span><span class="s1">= </span><span class="s0">runner</span><span class="s1">.</span><span class="s0">suites</span><span class="s1">();</span>
  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">suites</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
    <span class="s2">var </span><span class="s0">suite </span><span class="s1">= </span><span class="s0">suites</span><span class="s1">[</span><span class="s0">i</span><span class="s1">];</span>
    <span class="s2">var </span><span class="s0">suiteDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'suite' </span><span class="s1">},</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'run_spec'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s4">'?spec=' </span><span class="s1">+ </span><span class="s0">encodeURIComponent</span><span class="s1">(</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()) }, </span><span class="s4">&quot;run&quot;</span><span class="s1">),</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'description'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s4">'?spec=' </span><span class="s1">+ </span><span class="s0">encodeURIComponent</span><span class="s1">(</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()) }, </span><span class="s0">suite</span><span class="s1">.</span><span class="s0">description</span><span class="s1">));</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">suiteDivs</span><span class="s1">[</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">id</span><span class="s1">] = </span><span class="s0">suiteDiv</span><span class="s1">;</span>
    <span class="s2">var </span><span class="s0">parentDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">parentSuite</span><span class="s1">) {</span>
      <span class="s0">parentDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">suiteDivs</span><span class="s1">[</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">parentSuite</span><span class="s1">.</span><span class="s0">id</span><span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s0">parentDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">suiteDiv</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">startedAt </span><span class="s1">= </span><span class="s2">new </span><span class="s0">Date</span><span class="s1">();</span>

  <span class="s2">var </span><span class="s0">self </span><span class="s1">= </span><span class="s2">this</span><span class="s1">;</span>
  <span class="s0">showPassed</span><span class="s1">.</span><span class="s0">onclick </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">evt</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">showPassed</span><span class="s1">.</span><span class="s0">checked</span><span class="s1">) {</span>
      <span class="s0">self</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">.</span><span class="s0">className </span><span class="s1">+= </span><span class="s4">' show-passed'</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">self</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">.</span><span class="s0">className </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">.</span><span class="s0">className</span><span class="s1">.</span><span class="s0">replace</span><span class="s1">(</span><span class="s6">/ show-passed/</span><span class="s1">, </span><span class="s4">''</span><span class="s1">);</span>
    <span class="s1">}</span>
  <span class="s1">};</span>

  <span class="s0">showSkipped</span><span class="s1">.</span><span class="s0">onclick </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">evt</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">showSkipped</span><span class="s1">.</span><span class="s0">checked</span><span class="s1">) {</span>
      <span class="s0">self</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">.</span><span class="s0">className </span><span class="s1">+= </span><span class="s4">' show-skipped'</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">self</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">.</span><span class="s0">className </span><span class="s1">= </span><span class="s0">self</span><span class="s1">.</span><span class="s0">outerDiv</span><span class="s1">.</span><span class="s0">className</span><span class="s1">.</span><span class="s0">replace</span><span class="s1">(</span><span class="s6">/ show-skipped/</span><span class="s1">, </span><span class="s4">''</span><span class="s1">);</span>
    <span class="s1">}</span>
  <span class="s1">};</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">reportRunnerResults </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">runner</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">results </span><span class="s1">= </span><span class="s0">runner</span><span class="s1">.</span><span class="s0">results</span><span class="s1">();</span>
  <span class="s2">var </span><span class="s0">className </span><span class="s1">= (</span><span class="s0">results</span><span class="s1">.</span><span class="s0">failedCount </span><span class="s1">&gt; </span><span class="s3">0</span><span class="s1">) ? </span><span class="s4">&quot;runner failed&quot; </span><span class="s1">: </span><span class="s4">&quot;runner passed&quot;</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">runnerDiv</span><span class="s1">.</span><span class="s0">setAttribute</span><span class="s1">(</span><span class="s4">&quot;class&quot;</span><span class="s1">, </span><span class="s0">className</span><span class="s1">);</span>
  <span class="s5">//do it twice for IE</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">runnerDiv</span><span class="s1">.</span><span class="s0">setAttribute</span><span class="s1">(</span><span class="s4">&quot;className&quot;</span><span class="s1">, </span><span class="s0">className</span><span class="s1">);</span>
  <span class="s2">var </span><span class="s0">specs </span><span class="s1">= </span><span class="s0">runner</span><span class="s1">.</span><span class="s0">specs</span><span class="s1">();</span>
  <span class="s2">var </span><span class="s0">specCount </span><span class="s1">= </span><span class="s3">0</span><span class="s1">;</span>
  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">specs</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">specFilter</span><span class="s1">(</span><span class="s0">specs</span><span class="s1">[</span><span class="s0">i</span><span class="s1">])) {</span>
      <span class="s0">specCount</span><span class="s1">++;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>
  <span class="s2">var </span><span class="s0">message </span><span class="s1">= </span><span class="s4">&quot;&quot; </span><span class="s1">+ </span><span class="s0">specCount </span><span class="s1">+ </span><span class="s4">&quot; spec&quot; </span><span class="s1">+ (</span><span class="s0">specCount </span><span class="s1">== </span><span class="s3">1 </span><span class="s1">? </span><span class="s4">&quot;&quot; </span><span class="s1">: </span><span class="s4">&quot;s&quot; </span><span class="s1">) + </span><span class="s4">&quot;, &quot; </span><span class="s1">+ </span><span class="s0">results</span><span class="s1">.</span><span class="s0">failedCount </span><span class="s1">+ </span><span class="s4">&quot; failure&quot; </span><span class="s1">+ ((</span><span class="s0">results</span><span class="s1">.</span><span class="s0">failedCount </span><span class="s1">== </span><span class="s3">1</span><span class="s1">) ? </span><span class="s4">&quot;&quot; </span><span class="s1">: </span><span class="s4">&quot;s&quot;</span><span class="s1">);</span>
  <span class="s0">message </span><span class="s1">+= </span><span class="s4">&quot; in &quot; </span><span class="s1">+ ((</span><span class="s2">new </span><span class="s0">Date</span><span class="s1">().</span><span class="s0">getTime</span><span class="s1">() - </span><span class="s2">this</span><span class="s1">.</span><span class="s0">startedAt</span><span class="s1">.</span><span class="s0">getTime</span><span class="s1">()) / </span><span class="s3">1000</span><span class="s1">) + </span><span class="s4">&quot;s&quot;</span><span class="s1">;</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">runnerMessageSpan</span><span class="s1">.</span><span class="s0">replaceChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'description'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s4">'?'</span><span class="s1">}, </span><span class="s0">message</span><span class="s1">), </span><span class="s2">this</span><span class="s1">.</span><span class="s0">runnerMessageSpan</span><span class="s1">.</span><span class="s0">firstChild</span><span class="s1">);</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">finishedAtSpan</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">document</span><span class="s1">.</span><span class="s0">createTextNode</span><span class="s1">(</span><span class="s4">&quot;Finished at &quot; </span><span class="s1">+ </span><span class="s2">new </span><span class="s0">Date</span><span class="s1">().</span><span class="s0">toString</span><span class="s1">()));</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">reportSuiteResults </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">suite</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">results </span><span class="s1">= </span><span class="s0">suite</span><span class="s1">.</span><span class="s0">results</span><span class="s1">();</span>
  <span class="s2">var </span><span class="s0">status </span><span class="s1">= </span><span class="s0">results</span><span class="s1">.</span><span class="s0">passed</span><span class="s1">() ? </span><span class="s4">'passed' </span><span class="s1">: </span><span class="s4">'failed'</span><span class="s1">;</span>
  <span class="s2">if </span><span class="s1">(</span><span class="s0">results</span><span class="s1">.</span><span class="s0">totalCount </span><span class="s1">=== </span><span class="s3">0</span><span class="s1">) { </span><span class="s5">// todo: change this to check results.skipped</span>
    <span class="s0">status </span><span class="s1">= </span><span class="s4">'skipped'</span><span class="s1">;</span>
  <span class="s1">}</span>
  <span class="s2">this</span><span class="s1">.</span><span class="s0">suiteDivs</span><span class="s1">[</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">id</span><span class="s1">].</span><span class="s0">className </span><span class="s1">+= </span><span class="s4">&quot; &quot; </span><span class="s1">+ </span><span class="s0">status</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">reportSpecStarting </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">) {</span>
  <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">logRunningSpecs</span><span class="s1">) {</span>
    <span class="s2">this</span><span class="s1">.</span><span class="s0">log</span><span class="s1">(</span><span class="s4">'&gt;&gt; Jasmine Running ' </span><span class="s1">+ </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">description </span><span class="s1">+ </span><span class="s4">' ' </span><span class="s1">+ </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">description </span><span class="s1">+ </span><span class="s4">'...'</span><span class="s1">);</span>
  <span class="s1">}</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">reportSpecResults </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">results </span><span class="s1">= </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">results</span><span class="s1">();</span>
  <span class="s2">var </span><span class="s0">status </span><span class="s1">= </span><span class="s0">results</span><span class="s1">.</span><span class="s0">passed</span><span class="s1">() ? </span><span class="s4">'passed' </span><span class="s1">: </span><span class="s4">'failed'</span><span class="s1">;</span>
  <span class="s2">if </span><span class="s1">(</span><span class="s0">results</span><span class="s1">.</span><span class="s0">skipped</span><span class="s1">) {</span>
    <span class="s0">status </span><span class="s1">= </span><span class="s4">'skipped'</span><span class="s1">;</span>
  <span class="s1">}</span>
  <span class="s2">var </span><span class="s0">specDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'spec '  </span><span class="s1">+ </span><span class="s0">status </span><span class="s1">},</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'run_spec'</span><span class="s1">, </span><span class="s0">href</span><span class="s1">: </span><span class="s4">'?spec=' </span><span class="s1">+ </span><span class="s0">encodeURIComponent</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()) }, </span><span class="s4">&quot;run&quot;</span><span class="s1">),</span>
      <span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">, {</span>
        <span class="s0">className</span><span class="s1">: </span><span class="s4">'description'</span><span class="s1">,</span>
        <span class="s0">href</span><span class="s1">: </span><span class="s4">'?spec=' </span><span class="s1">+ </span><span class="s0">encodeURIComponent</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()),</span>
        <span class="s0">title</span><span class="s1">: </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">()</span>
      <span class="s1">}, </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">description</span><span class="s1">));</span>


  <span class="s2">var </span><span class="s0">resultItems </span><span class="s1">= </span><span class="s0">results</span><span class="s1">.</span><span class="s0">getItems</span><span class="s1">();</span>
  <span class="s2">var </span><span class="s0">messagesDiv </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, { </span><span class="s0">className</span><span class="s1">: </span><span class="s4">'messages' </span><span class="s1">});</span>
  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">resultItems</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
    <span class="s2">var </span><span class="s0">result </span><span class="s1">= </span><span class="s0">resultItems</span><span class="s1">[</span><span class="s0">i</span><span class="s1">];</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s0">result</span><span class="s1">.</span><span class="s0">type </span><span class="s1">== </span><span class="s4">'log'</span><span class="s1">) {</span>
      <span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'resultMessage log'</span><span class="s1">}, </span><span class="s0">result</span><span class="s1">.</span><span class="s0">toString</span><span class="s1">()));</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s0">result</span><span class="s1">.</span><span class="s0">type </span><span class="s1">== </span><span class="s4">'expect' </span><span class="s1">&amp;&amp; </span><span class="s0">result</span><span class="s1">.</span><span class="s0">passed </span><span class="s1">&amp;&amp; !</span><span class="s0">result</span><span class="s1">.</span><span class="s0">passed</span><span class="s1">()) {</span>
      <span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'resultMessage fail'</span><span class="s1">}, </span><span class="s0">result</span><span class="s1">.</span><span class="s0">message</span><span class="s1">));</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s0">result</span><span class="s1">.</span><span class="s0">trace</span><span class="s1">.</span><span class="s0">stack</span><span class="s1">) {</span>
        <span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s0">createDom</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">, {</span><span class="s0">className</span><span class="s1">: </span><span class="s4">'stackTrace'</span><span class="s1">}, </span><span class="s0">result</span><span class="s1">.</span><span class="s0">trace</span><span class="s1">.</span><span class="s0">stack</span><span class="s1">));</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">if </span><span class="s1">(</span><span class="s0">messagesDiv</span><span class="s1">.</span><span class="s0">childNodes</span><span class="s1">.</span><span class="s0">length </span><span class="s1">&gt; </span><span class="s3">0</span><span class="s1">) {</span>
    <span class="s0">specDiv</span><span class="s1">.</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">messagesDiv</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s2">this</span><span class="s1">.</span><span class="s0">suiteDivs</span><span class="s1">[</span><span class="s0">spec</span><span class="s1">.</span><span class="s0">suite</span><span class="s1">.</span><span class="s0">id</span><span class="s1">].</span><span class="s0">appendChild</span><span class="s1">(</span><span class="s0">specDiv</span><span class="s1">);</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">log </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">var </span><span class="s0">console </span><span class="s1">= </span><span class="s0">jasmine</span><span class="s1">.</span><span class="s0">getGlobal</span><span class="s1">().</span><span class="s0">console</span><span class="s1">;</span>
  <span class="s2">if </span><span class="s1">(</span><span class="s0">console </span><span class="s1">&amp;&amp; </span><span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">.</span><span class="s0">apply</span><span class="s1">) {</span>
      <span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">.</span><span class="s0">apply</span><span class="s1">(</span><span class="s0">console</span><span class="s1">, </span><span class="s0">arguments</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">console</span><span class="s1">.</span><span class="s0">log</span><span class="s1">(</span><span class="s0">arguments</span><span class="s1">); </span><span class="s5">// ie fix: console.log.apply doesn't exist on ie</span>
    <span class="s1">}</span>
  <span class="s1">}</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">getLocation </span><span class="s1">= </span><span class="s2">function</span><span class="s1">() {</span>
  <span class="s2">return this</span><span class="s1">.</span><span class="s0">document</span><span class="s1">.</span><span class="s0">location</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s0">jasmine</span><span class="s1">.</span><span class="s0">TrivialReporter</span><span class="s1">.</span><span class="s0">prototype</span><span class="s1">.</span><span class="s0">specFilter </span><span class="s1">= </span><span class="s2">function</span><span class="s1">(</span><span class="s0">spec</span><span class="s1">) {</span>
  <span class="s2">var </span><span class="s0">paramMap </span><span class="s1">= {};</span>
  <span class="s2">var </span><span class="s0">params </span><span class="s1">= </span><span class="s2">this</span><span class="s1">.</span><span class="s0">getLocation</span><span class="s1">().</span><span class="s0">search</span><span class="s1">.</span><span class="s0">substring</span><span class="s1">(</span><span class="s3">1</span><span class="s1">).</span><span class="s0">split</span><span class="s1">(</span><span class="s4">'&amp;'</span><span class="s1">);</span>
  <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s0">i </span><span class="s1">= </span><span class="s3">0</span><span class="s1">; </span><span class="s0">i </span><span class="s1">&lt; </span><span class="s0">params</span><span class="s1">.</span><span class="s0">length</span><span class="s1">; </span><span class="s0">i</span><span class="s1">++) {</span>
    <span class="s2">var </span><span class="s0">p </span><span class="s1">= </span><span class="s0">params</span><span class="s1">[</span><span class="s0">i</span><span class="s1">].</span><span class="s0">split</span><span class="s1">(</span><span class="s4">'='</span><span class="s1">);</span>
    <span class="s0">paramMap</span><span class="s1">[</span><span class="s0">decodeURIComponent</span><span class="s1">(</span><span class="s0">p</span><span class="s1">[</span><span class="s3">0</span><span class="s1">])] = </span><span class="s0">decodeURIComponent</span><span class="s1">(</span><span class="s0">p</span><span class="s1">[</span><span class="s3">1</span><span class="s1">]);</span>
  <span class="s1">}</span>

  <span class="s2">if </span><span class="s1">(!</span><span class="s0">paramMap</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">) {</span>
    <span class="s2">return true</span><span class="s1">;</span>
  <span class="s1">}</span>
  <span class="s2">return </span><span class="s0">spec</span><span class="s1">.</span><span class="s0">getFullName</span><span class="s1">().</span><span class="s0">indexOf</span><span class="s1">(</span><span class="s0">paramMap</span><span class="s1">.</span><span class="s0">spec</span><span class="s1">) === </span><span class="s3">0</span><span class="s1">;</span>
<span class="s1">};</span>
</pre>
</body>
</html>