<html>
<head>
<title>jsesc.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6aab73;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #cf8e6d;}
.s4 { color: #2aacb8;}
.s5 { color: #7a7e85;}
.s6 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
jsesc.js</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s3">const </span><span class="s2">object </span><span class="s1">= {};</span>
<span class="s3">const </span><span class="s2">hasOwnProperty </span><span class="s1">= </span><span class="s2">object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">forOwn </span><span class="s1">= (</span><span class="s2">object</span><span class="s1">, </span><span class="s2">callback</span><span class="s1">) =&gt; {</span>
	<span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">key </span><span class="s3">in </span><span class="s2">object</span><span class="s1">) {</span>
		<span class="s3">if </span><span class="s1">(</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">object</span><span class="s1">, </span><span class="s2">key</span><span class="s1">)) {</span>
			<span class="s2">callback</span><span class="s1">(</span><span class="s2">key</span><span class="s1">, </span><span class="s2">object</span><span class="s1">[</span><span class="s2">key</span><span class="s1">]);</span>
		<span class="s1">}</span>
	<span class="s1">}</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">extend </span><span class="s1">= (</span><span class="s2">destination</span><span class="s1">, </span><span class="s2">source</span><span class="s1">) =&gt; {</span>
	<span class="s3">if </span><span class="s1">(!</span><span class="s2">source</span><span class="s1">) {</span>
		<span class="s3">return </span><span class="s2">destination</span><span class="s1">;</span>
	<span class="s1">}</span>
	<span class="s2">forOwn</span><span class="s1">(</span><span class="s2">source</span><span class="s1">, (</span><span class="s2">key</span><span class="s1">, </span><span class="s2">value</span><span class="s1">) =&gt; {</span>
		<span class="s2">destination</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] = </span><span class="s2">value</span><span class="s1">;</span>
	<span class="s1">});</span>
	<span class="s3">return </span><span class="s2">destination</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">forEach </span><span class="s1">= (</span><span class="s2">array</span><span class="s1">, </span><span class="s2">callback</span><span class="s1">) =&gt; {</span>
	<span class="s3">const </span><span class="s2">length </span><span class="s1">= </span><span class="s2">array</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
	<span class="s3">let </span><span class="s2">index </span><span class="s1">= -</span><span class="s4">1</span><span class="s1">;</span>
	<span class="s3">while </span><span class="s1">(++</span><span class="s2">index </span><span class="s1">&lt; </span><span class="s2">length</span><span class="s1">) {</span>
		<span class="s2">callback</span><span class="s1">(</span><span class="s2">array</span><span class="s1">[</span><span class="s2">index</span><span class="s1">]);</span>
	<span class="s1">}</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">fourHexEscape </span><span class="s1">= (</span><span class="s2">hex</span><span class="s1">) =&gt; {</span>
	<span class="s3">return </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">u' </span><span class="s1">+ (</span><span class="s0">'0000' </span><span class="s1">+ </span><span class="s2">hex</span><span class="s1">).</span><span class="s2">slice</span><span class="s1">(-</span><span class="s4">4</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s3">const </span><span class="s2">hexadecimal </span><span class="s1">= (</span><span class="s2">code</span><span class="s1">, </span><span class="s2">lowercase</span><span class="s1">) =&gt; {</span>
	<span class="s3">let </span><span class="s2">hexadecimal </span><span class="s1">= </span><span class="s2">code</span><span class="s1">.</span><span class="s2">toString</span><span class="s1">(</span><span class="s4">16</span><span class="s1">);</span>
	<span class="s3">if </span><span class="s1">(</span><span class="s2">lowercase</span><span class="s1">) </span><span class="s3">return </span><span class="s2">hexadecimal</span><span class="s1">;</span>
	<span class="s3">return </span><span class="s2">hexadecimal</span><span class="s1">.</span><span class="s2">toUpperCase</span><span class="s1">();</span>
<span class="s1">};</span>

<span class="s3">const </span><span class="s2">toString </span><span class="s1">= </span><span class="s2">object</span><span class="s1">.</span><span class="s2">toString</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">isArray </span><span class="s1">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">isBuffer </span><span class="s1">= (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
	<span class="s3">return typeof </span><span class="s2">Buffer </span><span class="s1">=== </span><span class="s0">'function' </span><span class="s1">&amp;&amp; </span><span class="s2">Buffer</span><span class="s1">.</span><span class="s2">isBuffer</span><span class="s1">(</span><span class="s2">value</span><span class="s1">);</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">isObject </span><span class="s1">= (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
	<span class="s5">// This is a very simple check, but itâ€™s good enough for what we need.</span>
	<span class="s3">return </span><span class="s2">toString</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) == </span><span class="s0">'[object Object]'</span><span class="s1">;</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">isString </span><span class="s1">= (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
	<span class="s3">return typeof </span><span class="s2">value </span><span class="s1">== </span><span class="s0">'string' </span><span class="s1">||</span>
		<span class="s2">toString</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) == </span><span class="s0">'[object String]'</span><span class="s1">;</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">isNumber </span><span class="s1">= (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
	<span class="s3">return typeof </span><span class="s2">value </span><span class="s1">== </span><span class="s0">'number' </span><span class="s1">||</span>
		<span class="s2">toString</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) == </span><span class="s0">'[object Number]'</span><span class="s1">;</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">isFunction </span><span class="s1">= (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
	<span class="s3">return typeof </span><span class="s2">value </span><span class="s1">== </span><span class="s0">'function'</span><span class="s1">;</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">isMap </span><span class="s1">= (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
	<span class="s3">return </span><span class="s2">toString</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) == </span><span class="s0">'[object Map]'</span><span class="s1">;</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">isSet </span><span class="s1">= (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
	<span class="s3">return </span><span class="s2">toString</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) == </span><span class="s0">'[object Set]'</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s5">/*--------------------------------------------------------------------------*/</span>

<span class="s5">// https://mathiasbynens.be/notes/javascript-escapes#single</span>
<span class="s3">const </span><span class="s2">singleEscapes </span><span class="s1">= {</span>
	<span class="s0">'</span><span class="s3">\\</span><span class="s0">'</span><span class="s1">: </span><span class="s0">'</span><span class="s3">\\\\</span><span class="s0">'</span><span class="s1">,</span>
	<span class="s0">'</span><span class="s3">\b</span><span class="s0">'</span><span class="s1">: </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">b'</span><span class="s1">,</span>
	<span class="s0">'</span><span class="s3">\f</span><span class="s0">'</span><span class="s1">: </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">f'</span><span class="s1">,</span>
	<span class="s0">'</span><span class="s3">\n</span><span class="s0">'</span><span class="s1">: </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">n'</span><span class="s1">,</span>
	<span class="s0">'</span><span class="s3">\r</span><span class="s0">'</span><span class="s1">: </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">r'</span><span class="s1">,</span>
	<span class="s0">'</span><span class="s3">\t</span><span class="s0">'</span><span class="s1">: </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">t'</span>
	<span class="s5">// `\v` is omitted intentionally, because in IE &lt; 9, '\v' == 'v'.</span>
	<span class="s5">// '\v': '\\x0B'</span>
<span class="s1">};</span>
<span class="s3">const </span><span class="s2">regexSingleEscape </span><span class="s1">= </span><span class="s6">/[\\\b\f\n\r\t]/</span><span class="s1">;</span>

<span class="s3">const </span><span class="s2">regexDigit </span><span class="s1">= </span><span class="s6">/[0-9]/</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">regexWhitespace </span><span class="s1">= </span><span class="s6">/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/</span><span class="s1">;</span>

<span class="s3">const </span><span class="s2">escapeEverythingRegex </span><span class="s1">= </span><span class="s6">/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['&quot;`])|[^]/g</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">escapeNonAsciiRegex </span><span class="s1">= </span><span class="s6">/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['&quot;`])|[^ !#-&amp;\(-\[\]-_a-~]/g</span><span class="s1">;</span>

<span class="s3">const </span><span class="s2">jsesc </span><span class="s1">= (</span><span class="s2">argument</span><span class="s1">, </span><span class="s2">options</span><span class="s1">) =&gt; {</span>
	<span class="s3">const </span><span class="s2">increaseIndentation </span><span class="s1">= () =&gt; {</span>
		<span class="s2">oldIndent </span><span class="s1">= </span><span class="s2">indent</span><span class="s1">;</span>
		<span class="s1">++</span><span class="s2">options</span><span class="s1">.</span><span class="s2">indentLevel</span><span class="s1">;</span>
		<span class="s2">indent </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">indent</span><span class="s1">.</span><span class="s2">repeat</span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">indentLevel</span><span class="s1">)</span>
	<span class="s1">};</span>
	<span class="s5">// Handle options</span>
	<span class="s3">const </span><span class="s2">defaults </span><span class="s1">= {</span>
		<span class="s0">'escapeEverything'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'minimal'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'isScriptContext'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'quotes'</span><span class="s1">: </span><span class="s0">'single'</span><span class="s1">,</span>
		<span class="s0">'wrap'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'es6'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'json'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'compact'</span><span class="s1">: </span><span class="s3">true</span><span class="s1">,</span>
		<span class="s0">'lowercaseHex'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'numbers'</span><span class="s1">: </span><span class="s0">'decimal'</span><span class="s1">,</span>
		<span class="s0">'indent'</span><span class="s1">: </span><span class="s0">'</span><span class="s3">\t</span><span class="s0">'</span><span class="s1">,</span>
		<span class="s0">'indentLevel'</span><span class="s1">: </span><span class="s4">0</span><span class="s1">,</span>
		<span class="s0">'__inline1__'</span><span class="s1">: </span><span class="s3">false</span><span class="s1">,</span>
		<span class="s0">'__inline2__'</span><span class="s1">: </span><span class="s3">false</span>
	<span class="s1">};</span>
	<span class="s3">const </span><span class="s2">json </span><span class="s1">= </span><span class="s2">options </span><span class="s1">&amp;&amp; </span><span class="s2">options</span><span class="s1">.</span><span class="s2">json</span><span class="s1">;</span>
	<span class="s3">if </span><span class="s1">(</span><span class="s2">json</span><span class="s1">) {</span>
		<span class="s2">defaults</span><span class="s1">.</span><span class="s2">quotes </span><span class="s1">= </span><span class="s0">'double'</span><span class="s1">;</span>
		<span class="s2">defaults</span><span class="s1">.</span><span class="s2">wrap </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
	<span class="s1">}</span>
	<span class="s2">options </span><span class="s1">= </span><span class="s2">extend</span><span class="s1">(</span><span class="s2">defaults</span><span class="s1">, </span><span class="s2">options</span><span class="s1">);</span>
	<span class="s3">if </span><span class="s1">(</span>
		<span class="s2">options</span><span class="s1">.</span><span class="s2">quotes </span><span class="s1">!= </span><span class="s0">'single' </span><span class="s1">&amp;&amp;</span>
		<span class="s2">options</span><span class="s1">.</span><span class="s2">quotes </span><span class="s1">!= </span><span class="s0">'double' </span><span class="s1">&amp;&amp;</span>
		<span class="s2">options</span><span class="s1">.</span><span class="s2">quotes </span><span class="s1">!= </span><span class="s0">'backtick'</span>
	<span class="s1">) {</span>
		<span class="s2">options</span><span class="s1">.</span><span class="s2">quotes </span><span class="s1">= </span><span class="s0">'single'</span><span class="s1">;</span>
	<span class="s1">}</span>
	<span class="s3">const </span><span class="s2">quote </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">quotes </span><span class="s1">== </span><span class="s0">'double' </span><span class="s1">?</span>
		<span class="s0">'&quot;' </span><span class="s1">:</span>
		<span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">quotes </span><span class="s1">== </span><span class="s0">'backtick' </span><span class="s1">?</span>
			<span class="s0">'`' </span><span class="s1">:</span>
			<span class="s0">'</span><span class="s3">\'</span><span class="s0">'</span>
		<span class="s1">);</span>
	<span class="s3">const </span><span class="s2">compact </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">compact</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">lowercaseHex </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">lowercaseHex</span><span class="s1">;</span>
	<span class="s3">let </span><span class="s2">indent </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">indent</span><span class="s1">.</span><span class="s2">repeat</span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">indentLevel</span><span class="s1">);</span>
	<span class="s3">let </span><span class="s2">oldIndent </span><span class="s1">= </span><span class="s0">''</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">inline1 </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">__inline1__</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">inline2 </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">__inline2__</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">newLine </span><span class="s1">= </span><span class="s2">compact </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s0">'</span><span class="s3">\n</span><span class="s0">'</span><span class="s1">;</span>
	<span class="s3">let </span><span class="s2">result</span><span class="s1">;</span>
	<span class="s3">let </span><span class="s2">isEmpty </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">useBinNumbers </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">numbers </span><span class="s1">== </span><span class="s0">'binary'</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">useOctNumbers </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">numbers </span><span class="s1">== </span><span class="s0">'octal'</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">useDecNumbers </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">numbers </span><span class="s1">== </span><span class="s0">'decimal'</span><span class="s1">;</span>
	<span class="s3">const </span><span class="s2">useHexNumbers </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">numbers </span><span class="s1">== </span><span class="s0">'hexadecimal'</span><span class="s1">;</span>

	<span class="s3">if </span><span class="s1">(</span><span class="s2">json </span><span class="s1">&amp;&amp; </span><span class="s2">argument </span><span class="s1">&amp;&amp; </span><span class="s2">isFunction</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">.</span><span class="s2">toJSON</span><span class="s1">)) {</span>
		<span class="s2">argument </span><span class="s1">= </span><span class="s2">argument</span><span class="s1">.</span><span class="s2">toJSON</span><span class="s1">();</span>
	<span class="s1">}</span>

	<span class="s3">if </span><span class="s1">(!</span><span class="s2">isString</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">)) {</span>
		<span class="s3">if </span><span class="s1">(</span><span class="s2">isMap</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">)) {</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">argument</span><span class="s1">.</span><span class="s2">size </span><span class="s1">== </span><span class="s4">0</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'new Map()'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">if </span><span class="s1">(!</span><span class="s2">compact</span><span class="s1">) {</span>
				<span class="s2">options</span><span class="s1">.</span><span class="s2">__inline1__ </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
				<span class="s2">options</span><span class="s1">.</span><span class="s2">__inline2__ </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s0">'new Map(' </span><span class="s1">+ </span><span class="s2">jsesc</span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">from</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">), </span><span class="s2">options</span><span class="s1">) + </span><span class="s0">')'</span><span class="s1">;</span>
		<span class="s1">}</span>
		<span class="s3">if </span><span class="s1">(</span><span class="s2">isSet</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">)) {</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">argument</span><span class="s1">.</span><span class="s2">size </span><span class="s1">== </span><span class="s4">0</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'new Set()'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s0">'new Set(' </span><span class="s1">+ </span><span class="s2">jsesc</span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">from</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">), </span><span class="s2">options</span><span class="s1">) + </span><span class="s0">')'</span><span class="s1">;</span>
		<span class="s1">}</span>
		<span class="s3">if </span><span class="s1">(</span><span class="s2">isBuffer</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">)) {</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">argument</span><span class="s1">.</span><span class="s2">length </span><span class="s1">== </span><span class="s4">0</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'Buffer.from([])'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s0">'Buffer.from(' </span><span class="s1">+ </span><span class="s2">jsesc</span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">from</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">), </span><span class="s2">options</span><span class="s1">) + </span><span class="s0">')'</span><span class="s1">;</span>
		<span class="s1">}</span>
		<span class="s3">if </span><span class="s1">(</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">)) {</span>
			<span class="s2">result </span><span class="s1">= [];</span>
			<span class="s2">options</span><span class="s1">.</span><span class="s2">wrap </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">inline1</span><span class="s1">) {</span>
				<span class="s2">options</span><span class="s1">.</span><span class="s2">__inline1__ </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
				<span class="s2">options</span><span class="s1">.</span><span class="s2">__inline2__ </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">if </span><span class="s1">(!</span><span class="s2">inline2</span><span class="s1">) {</span>
				<span class="s2">increaseIndentation</span><span class="s1">();</span>
			<span class="s1">}</span>
			<span class="s2">forEach</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">, (</span><span class="s2">value</span><span class="s1">) =&gt; {</span>
				<span class="s2">isEmpty </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
				<span class="s3">if </span><span class="s1">(</span><span class="s2">inline2</span><span class="s1">) {</span>
					<span class="s2">options</span><span class="s1">.</span><span class="s2">__inline2__ </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
				<span class="s1">}</span>
				<span class="s2">result</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span>
					<span class="s1">(</span><span class="s2">compact </span><span class="s1">|| </span><span class="s2">inline2 </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s2">indent</span><span class="s1">) +</span>
					<span class="s2">jsesc</span><span class="s1">(</span><span class="s2">value</span><span class="s1">, </span><span class="s2">options</span><span class="s1">)</span>
				<span class="s1">);</span>
			<span class="s1">});</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">isEmpty</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'[]'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">inline2</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'[' </span><span class="s1">+ </span><span class="s2">result</span><span class="s1">.</span><span class="s2">join</span><span class="s1">(</span><span class="s0">', '</span><span class="s1">) + </span><span class="s0">']'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s0">'[' </span><span class="s1">+ </span><span class="s2">newLine </span><span class="s1">+ </span><span class="s2">result</span><span class="s1">.</span><span class="s2">join</span><span class="s1">(</span><span class="s0">',' </span><span class="s1">+ </span><span class="s2">newLine</span><span class="s1">) + </span><span class="s2">newLine </span><span class="s1">+</span>
				<span class="s1">(</span><span class="s2">compact </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s2">oldIndent</span><span class="s1">) + </span><span class="s0">']'</span><span class="s1">;</span>
		<span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">isNumber</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">)) {</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">json</span><span class="s1">) {</span>
				<span class="s5">// Some number values (e.g. `Infinity`) cannot be represented in JSON.</span>
				<span class="s3">return </span><span class="s2">JSON</span><span class="s1">.</span><span class="s2">stringify</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">);</span>
			<span class="s1">}</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">useDecNumbers</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s2">String</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">);</span>
			<span class="s1">}</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">useHexNumbers</span><span class="s1">) {</span>
				<span class="s3">let </span><span class="s2">hexadecimal </span><span class="s1">= </span><span class="s2">argument</span><span class="s1">.</span><span class="s2">toString</span><span class="s1">(</span><span class="s4">16</span><span class="s1">);</span>
				<span class="s3">if </span><span class="s1">(!</span><span class="s2">lowercaseHex</span><span class="s1">) {</span>
					<span class="s2">hexadecimal </span><span class="s1">= </span><span class="s2">hexadecimal</span><span class="s1">.</span><span class="s2">toUpperCase</span><span class="s1">();</span>
				<span class="s1">}</span>
				<span class="s3">return </span><span class="s0">'0x' </span><span class="s1">+ </span><span class="s2">hexadecimal</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">useBinNumbers</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'0b' </span><span class="s1">+ </span><span class="s2">argument</span><span class="s1">.</span><span class="s2">toString</span><span class="s1">(</span><span class="s4">2</span><span class="s1">);</span>
			<span class="s1">}</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">useOctNumbers</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'0o' </span><span class="s1">+ </span><span class="s2">argument</span><span class="s1">.</span><span class="s2">toString</span><span class="s1">(</span><span class="s4">8</span><span class="s1">);</span>
			<span class="s1">}</span>
		<span class="s1">} </span><span class="s3">else if </span><span class="s1">(!</span><span class="s2">isObject</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">)) {</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">json</span><span class="s1">) {</span>
				<span class="s5">// For some values (e.g. `undefined`, `function` objects),</span>
				<span class="s5">// `JSON.stringify(value)` returns `undefined` (which isnâ€™t valid</span>
				<span class="s5">// JSON) instead of `'null'`.</span>
				<span class="s3">return </span><span class="s2">JSON</span><span class="s1">.</span><span class="s2">stringify</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">) || </span><span class="s0">'null'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s2">String</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">);</span>
		<span class="s1">} </span><span class="s3">else </span><span class="s1">{ </span><span class="s5">// itâ€™s an object</span>
			<span class="s2">result </span><span class="s1">= [];</span>
			<span class="s2">options</span><span class="s1">.</span><span class="s2">wrap </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
			<span class="s2">increaseIndentation</span><span class="s1">();</span>
			<span class="s2">forOwn</span><span class="s1">(</span><span class="s2">argument</span><span class="s1">, (</span><span class="s2">key</span><span class="s1">, </span><span class="s2">value</span><span class="s1">) =&gt; {</span>
				<span class="s2">isEmpty </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
				<span class="s2">result</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span>
					<span class="s1">(</span><span class="s2">compact </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s2">indent</span><span class="s1">) +</span>
					<span class="s2">jsesc</span><span class="s1">(</span><span class="s2">key</span><span class="s1">, </span><span class="s2">options</span><span class="s1">) + </span><span class="s0">':' </span><span class="s1">+</span>
					<span class="s1">(</span><span class="s2">compact </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s0">' '</span><span class="s1">) +</span>
					<span class="s2">jsesc</span><span class="s1">(</span><span class="s2">value</span><span class="s1">, </span><span class="s2">options</span><span class="s1">)</span>
				<span class="s1">);</span>
			<span class="s1">});</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">isEmpty</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'{}'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s0">'{' </span><span class="s1">+ </span><span class="s2">newLine </span><span class="s1">+ </span><span class="s2">result</span><span class="s1">.</span><span class="s2">join</span><span class="s1">(</span><span class="s0">',' </span><span class="s1">+ </span><span class="s2">newLine</span><span class="s1">) + </span><span class="s2">newLine </span><span class="s1">+</span>
				<span class="s1">(</span><span class="s2">compact </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s2">oldIndent</span><span class="s1">) + </span><span class="s0">'}'</span><span class="s1">;</span>
		<span class="s1">}</span>
	<span class="s1">}</span>

	<span class="s3">const </span><span class="s2">regex </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">escapeEverything </span><span class="s1">? </span><span class="s2">escapeEverythingRegex </span><span class="s1">: </span><span class="s2">escapeNonAsciiRegex</span><span class="s1">;</span>
	<span class="s2">result </span><span class="s1">= </span><span class="s2">argument</span><span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s2">regex</span><span class="s1">, (</span><span class="s2">char</span><span class="s1">, </span><span class="s2">pair</span><span class="s1">, </span><span class="s2">lone</span><span class="s1">, </span><span class="s2">quoteChar</span><span class="s1">, </span><span class="s2">index</span><span class="s1">, </span><span class="s2">string</span><span class="s1">) =&gt; {</span>
		<span class="s3">if </span><span class="s1">(</span><span class="s2">pair</span><span class="s1">) {</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">minimal</span><span class="s1">) </span><span class="s3">return </span><span class="s2">pair</span><span class="s1">;</span>
			<span class="s3">const </span><span class="s2">first </span><span class="s1">= </span><span class="s2">pair</span><span class="s1">.</span><span class="s2">charCodeAt</span><span class="s1">(</span><span class="s4">0</span><span class="s1">);</span>
			<span class="s3">const </span><span class="s2">second </span><span class="s1">= </span><span class="s2">pair</span><span class="s1">.</span><span class="s2">charCodeAt</span><span class="s1">(</span><span class="s4">1</span><span class="s1">);</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">es6</span><span class="s1">) {</span>
				<span class="s5">// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae</span>
				<span class="s3">const </span><span class="s2">codePoint </span><span class="s1">= (</span><span class="s2">first </span><span class="s1">- </span><span class="s4">0xD800</span><span class="s1">) * </span><span class="s4">0x400 </span><span class="s1">+ </span><span class="s2">second </span><span class="s1">- </span><span class="s4">0xDC00 </span><span class="s1">+ </span><span class="s4">0x10000</span><span class="s1">;</span>
				<span class="s3">const </span><span class="s2">hex </span><span class="s1">= </span><span class="s2">hexadecimal</span><span class="s1">(</span><span class="s2">codePoint</span><span class="s1">, </span><span class="s2">lowercaseHex</span><span class="s1">);</span>
				<span class="s3">return </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">u{' </span><span class="s1">+ </span><span class="s2">hex </span><span class="s1">+ </span><span class="s0">'}'</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s2">fourHexEscape</span><span class="s1">(</span><span class="s2">hexadecimal</span><span class="s1">(</span><span class="s2">first</span><span class="s1">, </span><span class="s2">lowercaseHex</span><span class="s1">)) + </span><span class="s2">fourHexEscape</span><span class="s1">(</span><span class="s2">hexadecimal</span><span class="s1">(</span><span class="s2">second</span><span class="s1">, </span><span class="s2">lowercaseHex</span><span class="s1">));</span>
		<span class="s1">}</span>

		<span class="s3">if </span><span class="s1">(</span><span class="s2">lone</span><span class="s1">) {</span>
			<span class="s3">return </span><span class="s2">fourHexEscape</span><span class="s1">(</span><span class="s2">hexadecimal</span><span class="s1">(</span><span class="s2">lone</span><span class="s1">.</span><span class="s2">charCodeAt</span><span class="s1">(</span><span class="s4">0</span><span class="s1">), </span><span class="s2">lowercaseHex</span><span class="s1">));</span>
		<span class="s1">}</span>

		<span class="s3">if </span><span class="s1">(</span>
			<span class="s2">char </span><span class="s1">== </span><span class="s0">'</span><span class="s3">\0</span><span class="s0">' </span><span class="s1">&amp;&amp;</span>
			<span class="s1">!</span><span class="s2">json </span><span class="s1">&amp;&amp;</span>
			<span class="s1">!</span><span class="s2">regexDigit</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">string</span><span class="s1">.</span><span class="s2">charAt</span><span class="s1">(</span><span class="s2">index </span><span class="s1">+ </span><span class="s4">1</span><span class="s1">))</span>
		<span class="s1">) {</span>
			<span class="s3">return </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">0'</span><span class="s1">;</span>
		<span class="s1">}</span>

		<span class="s3">if </span><span class="s1">(</span><span class="s2">quoteChar</span><span class="s1">) {</span>
			<span class="s3">if </span><span class="s1">(</span><span class="s2">quoteChar </span><span class="s1">== </span><span class="s2">quote </span><span class="s1">|| </span><span class="s2">options</span><span class="s1">.</span><span class="s2">escapeEverything</span><span class="s1">) {</span>
				<span class="s3">return </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">' </span><span class="s1">+ </span><span class="s2">quoteChar</span><span class="s1">;</span>
			<span class="s1">}</span>
			<span class="s3">return </span><span class="s2">quoteChar</span><span class="s1">;</span>
		<span class="s1">}</span>

		<span class="s3">if </span><span class="s1">(</span><span class="s2">regexSingleEscape</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">char</span><span class="s1">)) {</span>
			<span class="s5">// no need for a `hasOwnProperty` check here</span>
			<span class="s3">return </span><span class="s2">singleEscapes</span><span class="s1">[</span><span class="s2">char</span><span class="s1">];</span>
		<span class="s1">}</span>

		<span class="s3">if </span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">minimal </span><span class="s1">&amp;&amp; !</span><span class="s2">regexWhitespace</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">char</span><span class="s1">)) {</span>
			<span class="s3">return </span><span class="s2">char</span><span class="s1">;</span>
		<span class="s1">}</span>

		<span class="s3">const </span><span class="s2">hex </span><span class="s1">= </span><span class="s2">hexadecimal</span><span class="s1">(</span><span class="s2">char</span><span class="s1">.</span><span class="s2">charCodeAt</span><span class="s1">(</span><span class="s4">0</span><span class="s1">), </span><span class="s2">lowercaseHex</span><span class="s1">);</span>
		<span class="s3">if </span><span class="s1">(</span><span class="s2">json </span><span class="s1">|| </span><span class="s2">hex</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s4">2</span><span class="s1">) {</span>
			<span class="s3">return </span><span class="s2">fourHexEscape</span><span class="s1">(</span><span class="s2">hex</span><span class="s1">);</span>
		<span class="s1">}</span>

		<span class="s3">return </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">x' </span><span class="s1">+ (</span><span class="s0">'00' </span><span class="s1">+ </span><span class="s2">hex</span><span class="s1">).</span><span class="s2">slice</span><span class="s1">(-</span><span class="s4">2</span><span class="s1">);</span>
	<span class="s1">});</span>

	<span class="s3">if </span><span class="s1">(</span><span class="s2">quote </span><span class="s1">== </span><span class="s0">'`'</span><span class="s1">) {</span>
		<span class="s2">result </span><span class="s1">= </span><span class="s2">result</span><span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s6">/\$\{/g</span><span class="s1">, </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">${'</span><span class="s1">);</span>
	<span class="s1">}</span>
	<span class="s3">if </span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">isScriptContext</span><span class="s1">) {</span>
		<span class="s5">// https://mathiasbynens.be/notes/etago</span>
		<span class="s2">result </span><span class="s1">= </span><span class="s2">result</span>
			<span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s6">/&lt;\/(script|style)/gi</span><span class="s1">, </span><span class="s0">'&lt;</span><span class="s3">\\</span><span class="s0">/$1'</span><span class="s1">)</span>
			<span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s6">/&lt;!--/g</span><span class="s1">, </span><span class="s2">json </span><span class="s1">? </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">u003C!--' </span><span class="s1">: </span><span class="s0">'</span><span class="s3">\\</span><span class="s0">x3C!--'</span><span class="s1">);</span>
	<span class="s1">}</span>
	<span class="s3">if </span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">wrap</span><span class="s1">) {</span>
		<span class="s2">result </span><span class="s1">= </span><span class="s2">quote </span><span class="s1">+ </span><span class="s2">result </span><span class="s1">+ </span><span class="s2">quote</span><span class="s1">;</span>
	<span class="s1">}</span>
	<span class="s3">return </span><span class="s2">result</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s2">jsesc</span><span class="s1">.</span><span class="s2">version </span><span class="s1">= </span><span class="s0">'3.0.2'</span><span class="s1">;</span>

<span class="s2">module</span><span class="s1">.</span><span class="s2">exports </span><span class="s1">= </span><span class="s2">jsesc</span><span class="s1">;</span>
</pre>
</body>
</html>