<html>
<head>
<title>rollup</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #bcbec4;}
.s4 { color: #cf8e6d;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #67a37c; font-style: italic;}
.s7 { color: #2aacb8;}
.s8 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
rollup</font>
</center></td></tr></table>
<pre><span class="s0">#!/usr/bin/env node</span>

<span class="s0">/* 
  @license 
    Rollup.js v2.79.2 
    Thu, 26 Sep 2024 18:44:14 GMT - commit 48aef33cf2f2a6dfb175afb3bcd6a977c81f1d5c 
 
    https://github.com/rollup/rollup 
 
    Released under the MIT License. 
*/</span>
<span class="s2">'use strict'</span><span class="s3">;</span>

<span class="s1">Object</span><span class="s3">.</span><span class="s1">defineProperties</span><span class="s3">(</span><span class="s1">exports</span><span class="s3">, { </span><span class="s1">__esModule</span><span class="s3">: { </span><span class="s1">value</span><span class="s3">: </span><span class="s4">true </span><span class="s3">}, [</span><span class="s1">Symbol</span><span class="s3">.</span><span class="s1">toStringTag</span><span class="s3">]: { </span><span class="s1">value</span><span class="s3">: </span><span class="s2">'Module' </span><span class="s3">} });</span>

<span class="s4">const </span><span class="s1">process$1 </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'process'</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">rollup </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'../shared/rollup.js'</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">require$$2 </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'util'</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">require$$0$1 </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'fs'</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">require$$0 </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'path'</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">mergeOptions </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'../shared/mergeOptions.js'</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">loadConfigFile_js </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'../shared/loadConfigFile.js'</span><span class="s3">);</span>
<span class="s1">require</span><span class="s3">(</span><span class="s2">'perf_hooks'</span><span class="s3">);</span>
<span class="s1">require</span><span class="s3">(</span><span class="s2">'crypto'</span><span class="s3">);</span>
<span class="s1">require</span><span class="s3">(</span><span class="s2">'events'</span><span class="s3">);</span>
<span class="s1">require</span><span class="s3">(</span><span class="s2">'url'</span><span class="s3">);</span>
<span class="s1">require</span><span class="s3">(</span><span class="s2">'tty'</span><span class="s3">);</span>

<span class="s4">const </span><span class="s1">help </span><span class="s3">= </span><span class="s2">&quot;rollup version __VERSION__</span><span class="s4">\n</span><span class="s2">=====================================</span><span class="s4">\n\n</span><span class="s2">Usage: rollup [options] &lt;entry file&gt;</span><span class="s4">\n\n</span><span class="s2">Basic options:</span><span class="s4">\n\n</span><span class="s2">-c, --config &lt;filename&gt;     Use this config file (if argument is used but value</span><span class="s4">\n                              </span><span class="s2">is unspecified, defaults to rollup.config.js)</span><span class="s4">\n</span><span class="s2">-d, --dir &lt;dirname&gt;         Directory for chunks (if absent, prints to stdout)</span><span class="s4">\n</span><span class="s2">-e, --external &lt;ids&gt;        Comma-separate list of module IDs to exclude</span><span class="s4">\n</span><span class="s2">-f, --format &lt;format&gt;       Type of output (amd, cjs, es, iife, umd, system)</span><span class="s4">\n</span><span class="s2">-g, --globals &lt;pairs&gt;       Comma-separate list of `moduleID:Global` pairs</span><span class="s4">\n</span><span class="s2">-h, --help                  Show this help message</span><span class="s4">\n</span><span class="s2">-i, --input &lt;filename&gt;      Input (alternative to &lt;entry file&gt;)</span><span class="s4">\n</span><span class="s2">-m, --sourcemap             Generate sourcemap (`-m inline` for inline map)</span><span class="s4">\n</span><span class="s2">-n, --name &lt;name&gt;           Name for UMD export</span><span class="s4">\n</span><span class="s2">-o, --file &lt;output&gt;         Single output file (if absent, prints to stdout)</span><span class="s4">\n</span><span class="s2">-p, --plugin &lt;plugin&gt;       Use the plugin specified (may be repeated)</span><span class="s4">\n</span><span class="s2">-v, --version               Show version number</span><span class="s4">\n</span><span class="s2">-w, --watch                 Watch files in bundle and rebuild on changes</span><span class="s4">\n</span><span class="s2">--amd.id &lt;id&gt;               ID for AMD module (default is anonymous)</span><span class="s4">\n</span><span class="s2">--amd.autoId                Generate the AMD ID based off the chunk name</span><span class="s4">\n</span><span class="s2">--amd.basePath &lt;prefix&gt;     Path to prepend to auto generated AMD ID</span><span class="s4">\n</span><span class="s2">--amd.define &lt;name&gt;         Function to use in place of `define`</span><span class="s4">\n</span><span class="s2">--amd.forceJsExtensionForImports Use `.js` extension in AMD imports</span><span class="s4">\n</span><span class="s2">--assetFileNames &lt;pattern&gt;  Name pattern for emitted assets</span><span class="s4">\n</span><span class="s2">--banner &lt;text&gt;             Code to insert at top of bundle (outside wrapper)</span><span class="s4">\n</span><span class="s2">--chunkFileNames &lt;pattern&gt;  Name pattern for emitted secondary chunks</span><span class="s4">\n</span><span class="s2">--compact                   Minify wrapper code</span><span class="s4">\n</span><span class="s2">--context &lt;variable&gt;        Specify top-level `this` value</span><span class="s4">\n</span><span class="s2">--entryFileNames &lt;pattern&gt;  Name pattern for emitted entry chunks</span><span class="s4">\n</span><span class="s2">--environment &lt;values&gt;      Settings passed to config file (see example)</span><span class="s4">\n</span><span class="s2">--no-esModule               Do not add __esModule property</span><span class="s4">\n</span><span class="s2">--exports &lt;mode&gt;            Specify export mode (auto, default, named, none)</span><span class="s4">\n</span><span class="s2">--extend                    Extend global variable defined by --name</span><span class="s4">\n</span><span class="s2">--no-externalLiveBindings   Do not generate code to support live bindings</span><span class="s4">\n</span><span class="s2">--failAfterWarnings         Exit with an error if the build produced warnings</span><span class="s4">\n</span><span class="s2">--footer &lt;text&gt;             Code to insert at end of bundle (outside wrapper)</span><span class="s4">\n</span><span class="s2">--no-freeze                 Do not freeze namespace objects</span><span class="s4">\n</span><span class="s2">--no-hoistTransitiveImports Do not hoist transitive imports into entry chunks</span><span class="s4">\n</span><span class="s2">--no-indent                 Don't indent result</span><span class="s4">\n</span><span class="s2">--no-interop                Do not include interop block</span><span class="s4">\n</span><span class="s2">--inlineDynamicImports      Create single bundle when using dynamic imports</span><span class="s4">\n</span><span class="s2">--intro &lt;text&gt;              Code to insert at top of bundle (inside wrapper)</span><span class="s4">\n</span><span class="s2">--minifyInternalExports     Force or disable minification of internal exports</span><span class="s4">\n</span><span class="s2">--namespaceToStringTag      Create proper `.toString` methods for namespaces</span><span class="s4">\n</span><span class="s2">--noConflict                Generate a noConflict method for UMD globals</span><span class="s4">\n</span><span class="s2">--outro &lt;text&gt;              Code to insert at end of bundle (inside wrapper)</span><span class="s4">\n</span><span class="s2">--preferConst               Use `const` instead of `var` for exports</span><span class="s4">\n</span><span class="s2">--no-preserveEntrySignatures Avoid facade chunks for entry points</span><span class="s4">\n</span><span class="s2">--preserveModules           Preserve module structure</span><span class="s4">\n</span><span class="s2">--preserveModulesRoot       Put preserved modules under this path at root level</span><span class="s4">\n</span><span class="s2">--preserveSymlinks          Do not follow symlinks when resolving files</span><span class="s4">\n</span><span class="s2">--no-sanitizeFileName       Do not replace invalid characters in file names</span><span class="s4">\n</span><span class="s2">--shimMissingExports        Create shim variables for missing exports</span><span class="s4">\n</span><span class="s2">--silent                    Don't print warnings</span><span class="s4">\n</span><span class="s2">--sourcemapBaseUrl &lt;url&gt;    Emit absolute sourcemap URLs with given base</span><span class="s4">\n</span><span class="s2">--sourcemapExcludeSources   Do not include source code in source maps</span><span class="s4">\n</span><span class="s2">--sourcemapFile &lt;file&gt;      Specify bundle position for source maps</span><span class="s4">\n</span><span class="s2">--stdin=ext                 Specify file extension used for stdin input</span><span class="s4">\n</span><span class="s2">--no-stdin                  Do not read </span><span class="s4">\&quot;</span><span class="s2">-</span><span class="s4">\&quot; </span><span class="s2">from stdin</span><span class="s4">\n</span><span class="s2">--no-strict                 Don't emit `</span><span class="s4">\&quot;</span><span class="s2">use strict</span><span class="s4">\&quot;</span><span class="s2">;` in the generated modules</span><span class="s4">\n</span><span class="s2">--strictDeprecations        Throw errors for deprecated features</span><span class="s4">\n</span><span class="s2">--systemNullSetters         Replace empty SystemJS setters with `null`</span><span class="s4">\n</span><span class="s2">--no-treeshake              Disable tree-shaking optimisations</span><span class="s4">\n</span><span class="s2">--no-treeshake.annotations  Ignore pure call annotations</span><span class="s4">\n</span><span class="s2">--no-treeshake.moduleSideEffects Assume modules have no side-effects</span><span class="s4">\n</span><span class="s2">--no-treeshake.propertyReadSideEffects Ignore property access side-effects</span><span class="s4">\n</span><span class="s2">--no-treeshake.tryCatchDeoptimization Do not turn off try-catch-tree-shaking</span><span class="s4">\n</span><span class="s2">--no-treeshake.unknownGlobalSideEffects Assume unknown globals do not throw</span><span class="s4">\n</span><span class="s2">--waitForBundleInput        Wait for bundle input files</span><span class="s4">\n</span><span class="s2">--watch.buildDelay &lt;number&gt; Throttle watch rebuilds</span><span class="s4">\n</span><span class="s2">--no-watch.clearScreen      Do not clear the screen when rebuilding</span><span class="s4">\n</span><span class="s2">--watch.skipWrite           Do not write files to disk when watching</span><span class="s4">\n</span><span class="s2">--watch.exclude &lt;files&gt;     Exclude files from being watched</span><span class="s4">\n</span><span class="s2">--watch.include &lt;files&gt;     Limit watching to specified files</span><span class="s4">\n</span><span class="s2">--watch.onStart &lt;cmd&gt;       Shell command to run on `</span><span class="s4">\&quot;</span><span class="s2">START</span><span class="s4">\&quot;</span><span class="s2">` event</span><span class="s4">\n</span><span class="s2">--watch.onBundleStart &lt;cmd&gt; Shell command to run on `</span><span class="s4">\&quot;</span><span class="s2">BUNDLE_START</span><span class="s4">\&quot;</span><span class="s2">` event</span><span class="s4">\n</span><span class="s2">--watch.onBundleEnd &lt;cmd&gt;   Shell command to run on `</span><span class="s4">\&quot;</span><span class="s2">BUNDLE_END</span><span class="s4">\&quot;</span><span class="s2">` event</span><span class="s4">\n</span><span class="s2">--watch.onEnd &lt;cmd&gt;         Shell command to run on `</span><span class="s4">\&quot;</span><span class="s2">END</span><span class="s4">\&quot;</span><span class="s2">` event</span><span class="s4">\n</span><span class="s2">--watch.onError &lt;cmd&gt;       Shell command to run on `</span><span class="s4">\&quot;</span><span class="s2">ERROR</span><span class="s4">\&quot;</span><span class="s2">` event</span><span class="s4">\n</span><span class="s2">--validate                  Validate output</span><span class="s4">\n\n</span><span class="s2">Examples:</span><span class="s4">\n\n</span><span class="s2"># use settings in config file</span><span class="s4">\n</span><span class="s2">rollup -c</span><span class="s4">\n\n</span><span class="s2"># in config file, process.env.INCLUDE_DEPS === 'true'</span><span class="s4">\n</span><span class="s2"># and process.env.BUILD === 'production'</span><span class="s4">\n</span><span class="s2">rollup -c --environment INCLUDE_DEPS,BUILD:production</span><span class="s4">\n\n</span><span class="s2"># create CommonJS bundle.js from src/main.js</span><span class="s4">\n</span><span class="s2">rollup --format=cjs --file=bundle.js -- src/main.js</span><span class="s4">\n\n</span><span class="s2"># create self-executing IIFE using `window.jQuery`</span><span class="s4">\n</span><span class="s2"># and `window._` as external globals</span><span class="s4">\n</span><span class="s2">rollup -f iife --globals jquery:jQuery,lodash:_ </span><span class="s4">\\\n  </span><span class="s2">-i src/app.js -o build/app.js -m build/app.js.map</span><span class="s4">\n\n</span><span class="s2">Notes:</span><span class="s4">\n\n</span><span class="s2">* When piping to stdout, only inline sourcemaps are permitted</span><span class="s4">\n\n</span><span class="s2">For more information visit https://rollupjs.org</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s3">;</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@license</span>
 <span class="s5">* Copyright (c) 2016, Contributors</span>
 <span class="s5">* SPDX-License-Identifier: ISC</span>
 <span class="s5">*/</span>
<span class="s4">function </span><span class="s1">camelCase</span><span class="s3">(</span><span class="s1">str</span><span class="s3">) {</span>
    <span class="s0">// Handle the case where an argument is provided as camel case, e.g., fooBar.</span>
    <span class="s0">// by ensuring that the string isn't already mixed case:</span>
    <span class="s4">const </span><span class="s1">isCamelCase </span><span class="s3">= </span><span class="s1">str </span><span class="s3">!== </span><span class="s1">str</span><span class="s3">.</span><span class="s1">toLowerCase</span><span class="s3">() &amp;&amp; </span><span class="s1">str </span><span class="s3">!== </span><span class="s1">str</span><span class="s3">.</span><span class="s1">toUpperCase</span><span class="s3">();</span>
    <span class="s4">if </span><span class="s3">(!</span><span class="s1">isCamelCase</span><span class="s3">) {</span>
        <span class="s1">str </span><span class="s3">= </span><span class="s1">str</span><span class="s3">.</span><span class="s1">toLowerCase</span><span class="s3">();</span>
    <span class="s3">}</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">str</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s2">'-'</span><span class="s3">) === -</span><span class="s7">1 </span><span class="s3">&amp;&amp; </span><span class="s1">str</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s2">'_'</span><span class="s3">) === -</span><span class="s7">1</span><span class="s3">) {</span>
        <span class="s4">return </span><span class="s1">str</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s4">else </span><span class="s3">{</span>
        <span class="s4">let </span><span class="s1">camelcase </span><span class="s3">= </span><span class="s2">''</span><span class="s3">;</span>
        <span class="s4">let </span><span class="s1">nextChrUpper </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
        <span class="s4">const </span><span class="s1">leadingHyphens </span><span class="s3">= </span><span class="s1">str</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-+/</span><span class="s3">);</span>
        <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s1">leadingHyphens </span><span class="s3">? </span><span class="s1">leadingHyphens</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">length </span><span class="s3">: </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">str</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
            <span class="s4">let </span><span class="s1">chr </span><span class="s3">= </span><span class="s1">str</span><span class="s3">.</span><span class="s1">charAt</span><span class="s3">(</span><span class="s1">i</span><span class="s3">);</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">nextChrUpper</span><span class="s3">) {</span>
                <span class="s1">nextChrUpper </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
                <span class="s1">chr </span><span class="s3">= </span><span class="s1">chr</span><span class="s3">.</span><span class="s1">toUpperCase</span><span class="s3">();</span>
            <span class="s3">}</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">i </span><span class="s3">!== </span><span class="s7">0 </span><span class="s3">&amp;&amp; (</span><span class="s1">chr </span><span class="s3">=== </span><span class="s2">'-' </span><span class="s3">|| </span><span class="s1">chr </span><span class="s3">=== </span><span class="s2">'_'</span><span class="s3">)) {</span>
                <span class="s1">nextChrUpper </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">chr </span><span class="s3">!== </span><span class="s2">'-' </span><span class="s3">&amp;&amp; </span><span class="s1">chr </span><span class="s3">!== </span><span class="s2">'_'</span><span class="s3">) {</span>
                <span class="s1">camelcase </span><span class="s3">+= </span><span class="s1">chr</span><span class="s3">;</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s4">return </span><span class="s1">camelcase</span><span class="s3">;</span>
    <span class="s3">}</span>
<span class="s3">}</span>
<span class="s4">function </span><span class="s1">decamelize</span><span class="s3">(</span><span class="s1">str</span><span class="s3">, </span><span class="s1">joinString</span><span class="s3">) {</span>
    <span class="s4">const </span><span class="s1">lowercase </span><span class="s3">= </span><span class="s1">str</span><span class="s3">.</span><span class="s1">toLowerCase</span><span class="s3">();</span>
    <span class="s1">joinString </span><span class="s3">= </span><span class="s1">joinString </span><span class="s3">|| </span><span class="s2">'-'</span><span class="s3">;</span>
    <span class="s4">let </span><span class="s1">notCamelcase </span><span class="s3">= </span><span class="s2">''</span><span class="s3">;</span>
    <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">str</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
        <span class="s4">const </span><span class="s1">chrLower </span><span class="s3">= </span><span class="s1">lowercase</span><span class="s3">.</span><span class="s1">charAt</span><span class="s3">(</span><span class="s1">i</span><span class="s3">);</span>
        <span class="s4">const </span><span class="s1">chrString </span><span class="s3">= </span><span class="s1">str</span><span class="s3">.</span><span class="s1">charAt</span><span class="s3">(</span><span class="s1">i</span><span class="s3">);</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">chrLower </span><span class="s3">!== </span><span class="s1">chrString </span><span class="s3">&amp;&amp; </span><span class="s1">i </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
            <span class="s1">notCamelcase </span><span class="s3">+= </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">joinString</span><span class="s3">}</span><span class="s1">$</span><span class="s3">{</span><span class="s1">lowercase</span><span class="s3">.</span><span class="s1">charAt</span><span class="s3">(</span><span class="s1">i</span><span class="s3">)}</span><span class="s2">`</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">else </span><span class="s3">{</span>
            <span class="s1">notCamelcase </span><span class="s3">+= </span><span class="s1">chrString</span><span class="s3">;</span>
        <span class="s3">}</span>
    <span class="s3">}</span>
    <span class="s4">return </span><span class="s1">notCamelcase</span><span class="s3">;</span>
<span class="s3">}</span>
<span class="s4">function </span><span class="s1">looksLikeNumber</span><span class="s3">(</span><span class="s1">x</span><span class="s3">) {</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">x </span><span class="s3">=== </span><span class="s4">null </span><span class="s3">|| </span><span class="s1">x </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">)</span>
        <span class="s4">return false</span><span class="s3">;</span>
    <span class="s0">// if loaded from config, may already be a number.</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">x </span><span class="s3">=== </span><span class="s2">'number'</span><span class="s3">)</span>
        <span class="s4">return true</span><span class="s3">;</span>
    <span class="s0">// hexadecimal.</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s8">/^0x[0-9a-f]+$/i</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">x</span><span class="s3">))</span>
        <span class="s4">return true</span><span class="s3">;</span>
    <span class="s0">// don't treat 0123 as a number; as it drops the leading '0'.</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s8">/^0[^.]/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">x</span><span class="s3">))</span>
        <span class="s4">return false</span><span class="s3">;</span>
    <span class="s4">return </span><span class="s8">/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">x</span><span class="s3">);</span>
<span class="s3">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@license</span>
 <span class="s5">* Copyright (c) 2016, Contributors</span>
 <span class="s5">* SPDX-License-Identifier: ISC</span>
 <span class="s5">*/</span>
<span class="s0">// take an un-split argv string and tokenize it.</span>
<span class="s4">function </span><span class="s1">tokenizeArgString</span><span class="s3">(</span><span class="s1">argString</span><span class="s3">) {</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">argString</span><span class="s3">)) {</span>
        <span class="s4">return </span><span class="s1">argString</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">e </span><span class="s3">=&gt; </span><span class="s4">typeof </span><span class="s1">e </span><span class="s3">!== </span><span class="s2">'string' </span><span class="s3">? </span><span class="s1">e </span><span class="s3">+ </span><span class="s2">'' </span><span class="s3">: </span><span class="s1">e</span><span class="s3">);</span>
    <span class="s3">}</span>
    <span class="s1">argString </span><span class="s3">= </span><span class="s1">argString</span><span class="s3">.</span><span class="s1">trim</span><span class="s3">();</span>
    <span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
    <span class="s4">let </span><span class="s1">prevC </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
    <span class="s4">let </span><span class="s1">c </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
    <span class="s4">let </span><span class="s1">opening </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
    <span class="s4">const </span><span class="s1">args </span><span class="s3">= [];</span>
    <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">ii </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">ii </span><span class="s3">&lt; </span><span class="s1">argString</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">ii</span><span class="s3">++) {</span>
        <span class="s1">prevC </span><span class="s3">= </span><span class="s1">c</span><span class="s3">;</span>
        <span class="s1">c </span><span class="s3">= </span><span class="s1">argString</span><span class="s3">.</span><span class="s1">charAt</span><span class="s3">(</span><span class="s1">ii</span><span class="s3">);</span>
        <span class="s0">// split on spaces unless we're in quotes.</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">c </span><span class="s3">=== </span><span class="s2">' ' </span><span class="s3">&amp;&amp; !</span><span class="s1">opening</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(!(</span><span class="s1">prevC </span><span class="s3">=== </span><span class="s2">' '</span><span class="s3">)) {</span>
                <span class="s1">i</span><span class="s3">++;</span>
            <span class="s3">}</span>
            <span class="s4">continue</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s0">// don't split the string if we're in matching</span>
        <span class="s0">// opening or closing single and double quotes.</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">c </span><span class="s3">=== </span><span class="s1">opening</span><span class="s3">) {</span>
            <span class="s1">opening </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">else if </span><span class="s3">((</span><span class="s1">c </span><span class="s3">=== </span><span class="s2">&quot;'&quot; </span><span class="s3">|| </span><span class="s1">c </span><span class="s3">=== </span><span class="s2">'&quot;'</span><span class="s3">) &amp;&amp; !</span><span class="s1">opening</span><span class="s3">) {</span>
            <span class="s1">opening </span><span class="s3">= </span><span class="s1">c</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">if </span><span class="s3">(!</span><span class="s1">args</span><span class="s3">[</span><span class="s1">i</span><span class="s3">])</span>
            <span class="s1">args</span><span class="s3">[</span><span class="s1">i</span><span class="s3">] = </span><span class="s2">''</span><span class="s3">;</span>
        <span class="s1">args</span><span class="s3">[</span><span class="s1">i</span><span class="s3">] += </span><span class="s1">c</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s4">return </span><span class="s1">args</span><span class="s3">;</span>
<span class="s3">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@license</span>
 <span class="s5">* Copyright (c) 2016, Contributors</span>
 <span class="s5">* SPDX-License-Identifier: ISC</span>
 <span class="s5">*/</span>
<span class="s4">var </span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">;</span>
<span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">) {</span>
    <span class="s1">DefaultValuesForTypeKey</span><span class="s3">[</span><span class="s2">&quot;BOOLEAN&quot;</span><span class="s3">] = </span><span class="s2">&quot;boolean&quot;</span><span class="s3">;</span>
    <span class="s1">DefaultValuesForTypeKey</span><span class="s3">[</span><span class="s2">&quot;STRING&quot;</span><span class="s3">] = </span><span class="s2">&quot;string&quot;</span><span class="s3">;</span>
    <span class="s1">DefaultValuesForTypeKey</span><span class="s3">[</span><span class="s2">&quot;NUMBER&quot;</span><span class="s3">] = </span><span class="s2">&quot;number&quot;</span><span class="s3">;</span>
    <span class="s1">DefaultValuesForTypeKey</span><span class="s3">[</span><span class="s2">&quot;ARRAY&quot;</span><span class="s3">] = </span><span class="s2">&quot;array&quot;</span><span class="s3">;</span>
<span class="s3">})(</span><span class="s1">DefaultValuesForTypeKey </span><span class="s3">|| (</span><span class="s1">DefaultValuesForTypeKey </span><span class="s3">= {}));</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@license</span>
 <span class="s5">* Copyright (c) 2016, Contributors</span>
 <span class="s5">* SPDX-License-Identifier: ISC</span>
 <span class="s5">*/</span>
<span class="s4">let </span><span class="s1">mixin</span><span class="s3">;</span>
<span class="s4">class </span><span class="s1">YargsParser </span><span class="s3">{</span>
    <span class="s1">constructor</span><span class="s3">(</span><span class="s1">_mixin</span><span class="s3">) {</span>
        <span class="s1">mixin </span><span class="s3">= </span><span class="s1">_mixin</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s1">parse</span><span class="s3">(</span><span class="s1">argsInput</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) {</span>
        <span class="s4">const </span><span class="s1">opts </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">({</span>
            <span class="s1">alias</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">array</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">boolean</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">config</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">configObjects</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">configuration</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">coerce</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">count</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s4">default</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">envPrefix</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">narg</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">normalize</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">string</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">number</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">__</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
            <span class="s1">key</span><span class="s3">: </span><span class="s1">undefined</span>
        <span class="s3">}, </span><span class="s1">options</span><span class="s3">);</span>
        <span class="s0">// allow a string argument to be passed in rather</span>
        <span class="s0">// than an argv array.</span>
        <span class="s4">const </span><span class="s1">args </span><span class="s3">= </span><span class="s1">tokenizeArgString</span><span class="s3">(</span><span class="s1">argsInput</span><span class="s3">);</span>
        <span class="s0">// aliases might have transitive relationships, normalize this.</span>
        <span class="s4">const </span><span class="s1">aliases </span><span class="s3">= </span><span class="s1">combineAliases</span><span class="s3">(</span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">), </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">alias</span><span class="s3">));</span>
        <span class="s4">const </span><span class="s1">configuration </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">({</span>
            <span class="s2">'boolean-negation'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'camel-case-expansion'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'combine-arrays'</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
            <span class="s2">'dot-notation'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'duplicate-arguments-array'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'flatten-duplicate-arrays'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'greedy-arrays'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'halt-at-non-option'</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
            <span class="s2">'nargs-eats-options'</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
            <span class="s2">'negation-prefix'</span><span class="s3">: </span><span class="s2">'no-'</span><span class="s3">,</span>
            <span class="s2">'parse-numbers'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'parse-positional-numbers'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'populate--'</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
            <span class="s2">'set-placeholder-key'</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
            <span class="s2">'short-option-groups'</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
            <span class="s2">'strip-aliased'</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
            <span class="s2">'strip-dashed'</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
            <span class="s2">'unknown-options-as-args'</span><span class="s3">: </span><span class="s4">false</span>
        <span class="s3">}, </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">configuration</span><span class="s3">);</span>
        <span class="s4">const </span><span class="s1">defaults </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">), </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">default</span><span class="s3">);</span>
        <span class="s4">const </span><span class="s1">configObjects </span><span class="s3">= </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">configObjects </span><span class="s3">|| [];</span>
        <span class="s4">const </span><span class="s1">envPrefix </span><span class="s3">= </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">envPrefix</span><span class="s3">;</span>
        <span class="s4">const </span><span class="s1">notFlagsOption </span><span class="s3">= </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'populate--'</span><span class="s3">];</span>
        <span class="s4">const </span><span class="s1">notFlagsArgv </span><span class="s3">= </span><span class="s1">notFlagsOption </span><span class="s3">? </span><span class="s2">'--' </span><span class="s3">: </span><span class="s2">'_'</span><span class="s3">;</span>
        <span class="s4">const </span><span class="s1">newAliases </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">);</span>
        <span class="s4">const </span><span class="s1">defaulted </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">);</span>
        <span class="s0">// allow a i18n handler to be passed in, default to a fake one (util.format).</span>
        <span class="s4">const </span><span class="s1">__ </span><span class="s3">= </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">__ </span><span class="s3">|| </span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">format</span><span class="s3">;</span>
        <span class="s4">const </span><span class="s1">flags </span><span class="s3">= {</span>
            <span class="s1">aliases</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">arrays</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">bools</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">strings</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">numbers</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">counts</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">normalize</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">configs</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">nargs</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">coercions</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">),</span>
            <span class="s1">keys</span><span class="s3">: []</span>
        <span class="s3">};</span>
        <span class="s4">const </span><span class="s1">negative </span><span class="s3">= </span><span class="s8">/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/</span><span class="s3">;</span>
        <span class="s4">const </span><span class="s1">negatedBoolean </span><span class="s3">= </span><span class="s4">new </span><span class="s1">RegExp</span><span class="s3">(</span><span class="s2">'^--' </span><span class="s3">+ </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'negation-prefix'</span><span class="s3">] + </span><span class="s2">'(.+)'</span><span class="s3">);</span>
        <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">array </span><span class="s3">|| []).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">opt</span><span class="s3">) {</span>
            <span class="s4">const </span><span class="s1">key </span><span class="s3">= </span><span class="s4">typeof </span><span class="s1">opt </span><span class="s3">=== </span><span class="s2">'object' </span><span class="s3">? </span><span class="s1">opt</span><span class="s3">.</span><span class="s1">key </span><span class="s3">: </span><span class="s1">opt</span><span class="s3">;</span>
            <span class="s0">// assign to flags[bools|strings|numbers]</span>
            <span class="s4">const </span><span class="s1">assignment </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">opt</span><span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                <span class="s4">const </span><span class="s1">arrayFlagKeys </span><span class="s3">= {</span>
                    <span class="s1">boolean</span><span class="s3">: </span><span class="s2">'bools'</span><span class="s3">,</span>
                    <span class="s1">string</span><span class="s3">: </span><span class="s2">'strings'</span><span class="s3">,</span>
                    <span class="s1">number</span><span class="s3">: </span><span class="s2">'numbers'</span>
                <span class="s3">};</span>
                <span class="s4">return </span><span class="s1">arrayFlagKeys</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
            <span class="s3">}).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">pop</span><span class="s3">();</span>
            <span class="s0">// assign key to be coerced</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">assignment</span><span class="s3">) {</span>
                <span class="s1">flags</span><span class="s3">[</span><span class="s1">assignment</span><span class="s3">][</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">boolean </span><span class="s3">|| []).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">string </span><span class="s3">|| []).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">strings</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">number </span><span class="s3">|| []).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">numbers</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">count </span><span class="s3">|| []).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">normalize </span><span class="s3">|| []).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">normalize</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">narg </span><span class="s3">=== </span><span class="s2">'object'</span><span class="s3">) {</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">narg</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">]) =&gt; {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">value </span><span class="s3">=== </span><span class="s2">'number'</span><span class="s3">) {</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">;</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">coerce </span><span class="s3">=== </span><span class="s2">'object'</span><span class="s3">) {</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">coerce</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">]) =&gt; {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">value </span><span class="s3">=== </span><span class="s2">'function'</span><span class="s3">) {</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">coercions</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">;</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">config </span><span class="s3">!== </span><span class="s2">'undefined'</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">config</span><span class="s3">) || </span><span class="s4">typeof </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">config </span><span class="s3">=== </span><span class="s2">'string'</span><span class="s3">) {</span>
                <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">config</span><span class="s3">).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">configs</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
                <span class="s3">});</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">config </span><span class="s3">=== </span><span class="s2">'object'</span><span class="s3">) {</span>
                <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">config</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">]) =&gt; {</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">value </span><span class="s3">=== </span><span class="s2">'boolean' </span><span class="s3">|| </span><span class="s4">typeof </span><span class="s1">value </span><span class="s3">=== </span><span class="s2">'function'</span><span class="s3">) {</span>
                        <span class="s1">flags</span><span class="s3">.</span><span class="s1">configs</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">;</span>
                    <span class="s3">}</span>
                <span class="s3">});</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s0">// create a lookup table that takes into account all</span>
        <span class="s0">// combinations of aliases: {f: ['foo'], foo: ['f']}</span>
        <span class="s1">extendAliases</span><span class="s3">(</span><span class="s1">opts</span><span class="s3">.</span><span class="s1">key</span><span class="s3">, </span><span class="s1">aliases</span><span class="s3">, </span><span class="s1">opts</span><span class="s3">.</span><span class="s1">default</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">);</span>
        <span class="s0">// apply default values to all aliases.</span>
        <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">defaults</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || []).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">alias</span><span class="s3">) {</span>
                <span class="s1">defaults</span><span class="s3">[</span><span class="s1">alias</span><span class="s3">] = </span><span class="s1">defaults</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
            <span class="s3">});</span>
        <span class="s3">});</span>
        <span class="s4">let </span><span class="s1">error </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
        <span class="s1">checkConfiguration</span><span class="s3">();</span>
        <span class="s4">let </span><span class="s1">notFlags </span><span class="s3">= [];</span>
        <span class="s4">const </span><span class="s1">argv </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">), { </span><span class="s1">_</span><span class="s3">: [] });</span>
        <span class="s0">// TODO(bcoe): for the first pass at removing object prototype  we didn't</span>
        <span class="s0">// remove all prototypes from objects returned by this API, we might want</span>
        <span class="s0">// to gradually move towards doing so.</span>
        <span class="s4">const </span><span class="s1">argvReturn </span><span class="s3">= {};</span>
        <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">args</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
            <span class="s4">const </span><span class="s1">arg </span><span class="s3">= </span><span class="s1">args</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
            <span class="s4">const </span><span class="s1">truncatedArg </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s8">/^-{3,}/</span><span class="s3">, </span><span class="s2">'---'</span><span class="s3">);</span>
            <span class="s4">let </span><span class="s1">broken</span><span class="s3">;</span>
            <span class="s4">let </span><span class="s1">key</span><span class="s3">;</span>
            <span class="s4">let </span><span class="s1">letters</span><span class="s3">;</span>
            <span class="s4">let </span><span class="s1">m</span><span class="s3">;</span>
            <span class="s4">let </span><span class="s1">next</span><span class="s3">;</span>
            <span class="s4">let </span><span class="s1">value</span><span class="s3">;</span>
            <span class="s0">// any unknown option (except for end-of-options, &quot;--&quot;)</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">arg </span><span class="s3">!== </span><span class="s2">'--' </span><span class="s3">&amp;&amp; </span><span class="s1">isUnknownOptionAsArg</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">)) {</span>
                <span class="s1">pushPositional</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">);</span>
                <span class="s0">// ---, ---=, ----, etc,</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">truncatedArg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/---+(=|$)/</span><span class="s3">)) {</span>
                <span class="s0">// options without key name are invalid.</span>
                <span class="s1">pushPositional</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">);</span>
                <span class="s4">continue</span><span class="s3">;</span>
                <span class="s0">// -- separated by =</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^--.+=/</span><span class="s3">) || (!</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'short-option-groups'</span><span class="s3">] &amp;&amp; </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-.+=/</span><span class="s3">))) {</span>
                <span class="s0">// Using [\s\S] instead of . because js doesn't support the</span>
                <span class="s0">// 'dotall' regex modifier. See:</span>
                <span class="s0">// http://stackoverflow.com/a/1068308/13216</span>
                <span class="s1">m </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^--?([^=]+)=([\s\S]*)$/</span><span class="s3">);</span>
                <span class="s0">// arrays format = '--f=a b c'</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">m </span><span class="s3">!== </span><span class="s4">null </span><span class="s3">&amp;&amp; </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">m</span><span class="s3">) &amp;&amp; </span><span class="s1">m</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s7">3</span><span class="s3">) {</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">], </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">)) {</span>
                        <span class="s1">i </span><span class="s3">= </span><span class="s1">eatArray</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">], </span><span class="s1">args</span><span class="s3">, </span><span class="s1">m</span><span class="s3">[</span><span class="s7">2</span><span class="s3">]);</span>
                    <span class="s3">}</span>
                    <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">], </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">) !== </span><span class="s4">false</span><span class="s3">) {</span>
                        <span class="s0">// nargs format = '--f=monkey washing cat'</span>
                        <span class="s1">i </span><span class="s3">= </span><span class="s1">eatNargs</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">], </span><span class="s1">args</span><span class="s3">, </span><span class="s1">m</span><span class="s3">[</span><span class="s7">2</span><span class="s3">]);</span>
                    <span class="s3">}</span>
                    <span class="s4">else </span><span class="s3">{</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">], </span><span class="s1">m</span><span class="s3">[</span><span class="s7">2</span><span class="s3">]);</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negatedBoolean</span><span class="s3">) &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'boolean-negation'</span><span class="s3">]) {</span>
                <span class="s1">m </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negatedBoolean</span><span class="s3">);</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">m </span><span class="s3">!== </span><span class="s4">null </span><span class="s3">&amp;&amp; </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">m</span><span class="s3">) &amp;&amp; </span><span class="s1">m</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s7">2</span><span class="s3">) {</span>
                    <span class="s1">key </span><span class="s3">= </span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">];</span>
                    <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">) ? [</span><span class="s4">false</span><span class="s3">] : </span><span class="s4">false</span><span class="s3">);</span>
                <span class="s3">}</span>
                <span class="s0">// -- separated by space.</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^--.+/</span><span class="s3">) || (!</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'short-option-groups'</span><span class="s3">] &amp;&amp; </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-[^-]+/</span><span class="s3">))) {</span>
                <span class="s1">m </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^--?(.+)/</span><span class="s3">);</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">m </span><span class="s3">!== </span><span class="s4">null </span><span class="s3">&amp;&amp; </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">m</span><span class="s3">) &amp;&amp; </span><span class="s1">m</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s7">2</span><span class="s3">) {</span>
                    <span class="s1">key </span><span class="s3">= </span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">];</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">)) {</span>
                        <span class="s0">// array format = '--foo a b c'</span>
                        <span class="s1">i </span><span class="s3">= </span><span class="s1">eatArray</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">);</span>
                    <span class="s3">}</span>
                    <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">) !== </span><span class="s4">false</span><span class="s3">) {</span>
                        <span class="s0">// nargs format = '--foo a b c'</span>
                        <span class="s0">// should be truthy even if: flags.nargs[key] === 0</span>
                        <span class="s1">i </span><span class="s3">= </span><span class="s1">eatNargs</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">);</span>
                    <span class="s3">}</span>
                    <span class="s4">else </span><span class="s3">{</span>
                        <span class="s1">next </span><span class="s3">= </span><span class="s1">args</span><span class="s3">[</span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">];</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s1">next </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">&amp;&amp; (!</span><span class="s1">next</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-/</span><span class="s3">) ||</span>
                            <span class="s1">next</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">)) &amp;&amp;</span>
                            <span class="s3">!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) &amp;&amp;</span>
                            <span class="s3">!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">)) {</span>
                            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">next</span><span class="s3">);</span>
                            <span class="s1">i</span><span class="s3">++;</span>
                        <span class="s3">}</span>
                        <span class="s4">else if </span><span class="s3">(</span><span class="s8">/^(true|false)$/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">)) {</span>
                            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">next</span><span class="s3">);</span>
                            <span class="s1">i</span><span class="s3">++;</span>
                        <span class="s3">}</span>
                        <span class="s4">else </span><span class="s3">{</span>
                            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">defaultValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
                        <span class="s3">}</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
                <span class="s0">// dot-notation flag separated by '='.</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-.\..+=/</span><span class="s3">)) {</span>
                <span class="s1">m </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-([^=]+)=([\s\S]*)$/</span><span class="s3">);</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">m </span><span class="s3">!== </span><span class="s4">null </span><span class="s3">&amp;&amp; </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">m</span><span class="s3">) &amp;&amp; </span><span class="s1">m</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s7">3</span><span class="s3">) {</span>
                    <span class="s1">setArg</span><span class="s3">(</span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">], </span><span class="s1">m</span><span class="s3">[</span><span class="s7">2</span><span class="s3">]);</span>
                <span class="s3">}</span>
                <span class="s0">// dot-notation flag separated by space.</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-.\..+/</span><span class="s3">) &amp;&amp; !</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">)) {</span>
                <span class="s1">next </span><span class="s3">= </span><span class="s1">args</span><span class="s3">[</span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">];</span>
                <span class="s1">m </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-(.\..+)/</span><span class="s3">);</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">m </span><span class="s3">!== </span><span class="s4">null </span><span class="s3">&amp;&amp; </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">m</span><span class="s3">) &amp;&amp; </span><span class="s1">m</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s7">2</span><span class="s3">) {</span>
                    <span class="s1">key </span><span class="s3">= </span><span class="s1">m</span><span class="s3">[</span><span class="s7">1</span><span class="s3">];</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">next </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">&amp;&amp; !</span><span class="s1">next</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-/</span><span class="s3">) &amp;&amp;</span>
                        <span class="s3">!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) &amp;&amp;</span>
                        <span class="s3">!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">)) {</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">next</span><span class="s3">);</span>
                        <span class="s1">i</span><span class="s3">++;</span>
                    <span class="s3">}</span>
                    <span class="s4">else </span><span class="s3">{</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">defaultValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-[^-]+/</span><span class="s3">) &amp;&amp; !</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">)) {</span>
                <span class="s1">letters </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">, -</span><span class="s7">1</span><span class="s3">).</span><span class="s1">split</span><span class="s3">(</span><span class="s2">''</span><span class="s3">);</span>
                <span class="s1">broken </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
                <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">j </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">j </span><span class="s3">&lt; </span><span class="s1">letters</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">j</span><span class="s3">++) {</span>
                    <span class="s1">next </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">2</span><span class="s3">);</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">] &amp;&amp; </span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">] === </span><span class="s2">'='</span><span class="s3">) {</span>
                        <span class="s1">value </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">3</span><span class="s3">);</span>
                        <span class="s1">key </span><span class="s3">= </span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">];</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">)) {</span>
                            <span class="s0">// array format = '-f=a b c'</span>
                            <span class="s1">i </span><span class="s3">= </span><span class="s1">eatArray</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">, </span><span class="s1">value</span><span class="s3">);</span>
                        <span class="s3">}</span>
                        <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">) !== </span><span class="s4">false</span><span class="s3">) {</span>
                            <span class="s0">// nargs format = '-f=monkey washing cat'</span>
                            <span class="s1">i </span><span class="s3">= </span><span class="s1">eatNargs</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">, </span><span class="s1">value</span><span class="s3">);</span>
                        <span class="s3">}</span>
                        <span class="s4">else </span><span class="s3">{</span>
                            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">);</span>
                        <span class="s3">}</span>
                        <span class="s1">broken </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
                        <span class="s4">break</span><span class="s3">;</span>
                    <span class="s3">}</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">next </span><span class="s3">=== </span><span class="s2">'-'</span><span class="s3">) {</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">], </span><span class="s1">next</span><span class="s3">);</span>
                        <span class="s4">continue</span><span class="s3">;</span>
                    <span class="s3">}</span>
                    <span class="s0">// current letter is an alphabetic character and next value is a number</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s8">/[A-Za-z]/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">]) &amp;&amp;</span>
                        <span class="s8">/^-?\d+(\.\d*)?(e-?\d+)?$/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">) &amp;&amp;</span>
                        <span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">next</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) === </span><span class="s4">false</span><span class="s3">) {</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">], </span><span class="s1">next</span><span class="s3">);</span>
                        <span class="s1">broken </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
                        <span class="s4">break</span><span class="s3">;</span>
                    <span class="s3">}</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">] &amp;&amp; </span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">].</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/\W/</span><span class="s3">)) {</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">], </span><span class="s1">next</span><span class="s3">);</span>
                        <span class="s1">broken </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
                        <span class="s4">break</span><span class="s3">;</span>
                    <span class="s3">}</span>
                    <span class="s4">else </span><span class="s3">{</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">], </span><span class="s1">defaultValue</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">]));</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
                <span class="s1">key </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(-</span><span class="s7">1</span><span class="s3">)[</span><span class="s7">0</span><span class="s3">];</span>
                <span class="s4">if </span><span class="s3">(!</span><span class="s1">broken </span><span class="s3">&amp;&amp; </span><span class="s1">key </span><span class="s3">!== </span><span class="s2">'-'</span><span class="s3">) {</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">)) {</span>
                        <span class="s0">// array format = '-f a b c'</span>
                        <span class="s1">i </span><span class="s3">= </span><span class="s1">eatArray</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">);</span>
                    <span class="s3">}</span>
                    <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">) !== </span><span class="s4">false</span><span class="s3">) {</span>
                        <span class="s0">// nargs format = '-f a b c'</span>
                        <span class="s0">// should be truthy even if: flags.nargs[key] === 0</span>
                        <span class="s1">i </span><span class="s3">= </span><span class="s1">eatNargs</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">);</span>
                    <span class="s3">}</span>
                    <span class="s4">else </span><span class="s3">{</span>
                        <span class="s1">next </span><span class="s3">= </span><span class="s1">args</span><span class="s3">[</span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">];</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s1">next </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">&amp;&amp; (!</span><span class="s8">/^(-|--)[^-]/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">) ||</span>
                            <span class="s1">next</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">)) &amp;&amp;</span>
                            <span class="s3">!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) &amp;&amp;</span>
                            <span class="s3">!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">)) {</span>
                            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">next</span><span class="s3">);</span>
                            <span class="s1">i</span><span class="s3">++;</span>
                        <span class="s3">}</span>
                        <span class="s4">else if </span><span class="s3">(</span><span class="s8">/^(true|false)$/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">)) {</span>
                            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">next</span><span class="s3">);</span>
                            <span class="s1">i</span><span class="s3">++;</span>
                        <span class="s3">}</span>
                        <span class="s4">else </span><span class="s3">{</span>
                            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">defaultValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
                        <span class="s3">}</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-[0-9]$/</span><span class="s3">) &amp;&amp;</span>
                <span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">) &amp;&amp;</span>
                <span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">), </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">)) {</span>
                <span class="s0">// single-digit boolean alias, e.g: xargs -0</span>
                <span class="s1">key </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">);</span>
                <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">defaultValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">arg </span><span class="s3">=== </span><span class="s2">'--'</span><span class="s3">) {</span>
                <span class="s1">notFlags </span><span class="s3">= </span><span class="s1">args</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">);</span>
                <span class="s4">break</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'halt-at-non-option'</span><span class="s3">]) {</span>
                <span class="s1">notFlags </span><span class="s3">= </span><span class="s1">args</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s1">i</span><span class="s3">);</span>
                <span class="s4">break</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">else </span><span class="s3">{</span>
                <span class="s1">pushPositional</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">);</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s0">// order of precedence:</span>
        <span class="s0">// 1. command line arg</span>
        <span class="s0">// 2. value from env var</span>
        <span class="s0">// 3. value from config file</span>
        <span class="s0">// 4. value from config objects</span>
        <span class="s0">// 5. configured default value</span>
        <span class="s1">applyEnvVars</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s4">true</span><span class="s3">); </span><span class="s0">// special case: check env vars that point to config file</span>
        <span class="s1">applyEnvVars</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s4">false</span><span class="s3">);</span>
        <span class="s1">setConfig</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">);</span>
        <span class="s1">setConfigObjects</span><span class="s3">();</span>
        <span class="s1">applyDefaultsAndAliases</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">, </span><span class="s1">defaults</span><span class="s3">, </span><span class="s4">true</span><span class="s3">);</span>
        <span class="s1">applyCoercions</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">);</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'set-placeholder-key'</span><span class="s3">])</span>
            <span class="s1">setPlaceholderKeys</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">);</span>
        <span class="s0">// for any counts either not in args or without an explicit default, set to 0</span>
        <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">hasKey</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">key</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)))</span>
                <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s7">0</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s0">// '--' defaults to undefined.</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">notFlagsOption </span><span class="s3">&amp;&amp; </span><span class="s1">notFlags</span><span class="s3">.</span><span class="s1">length</span><span class="s3">)</span>
            <span class="s1">argv</span><span class="s3">[</span><span class="s1">notFlagsArgv</span><span class="s3">] = [];</span>
        <span class="s1">notFlags</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s1">argv</span><span class="s3">[</span><span class="s1">notFlagsArgv</span><span class="s3">].</span><span class="s1">push</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
        <span class="s3">});</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'camel-case-expansion'</span><span class="s3">] &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'strip-dashed'</span><span class="s3">]) {</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">).</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">key </span><span class="s3">=&gt; </span><span class="s1">key </span><span class="s3">!== </span><span class="s2">'--' </span><span class="s3">&amp;&amp; </span><span class="s1">key</span><span class="s3">.</span><span class="s1">includes</span><span class="s3">(</span><span class="s2">'-'</span><span class="s3">)).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s1">key </span><span class="s3">=&gt; {</span>
                <span class="s4">delete </span><span class="s1">argv</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'strip-aliased'</span><span class="s3">]) {</span>
            <span class="s3">[].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">...Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">aliases</span><span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s1">k </span><span class="s3">=&gt; </span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">k</span><span class="s3">])).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s1">alias </span><span class="s3">=&gt; {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'camel-case-expansion'</span><span class="s3">] &amp;&amp; </span><span class="s1">alias</span><span class="s3">.</span><span class="s1">includes</span><span class="s3">(</span><span class="s2">'-'</span><span class="s3">)) {</span>
                    <span class="s4">delete </span><span class="s1">argv</span><span class="s3">[</span><span class="s1">alias</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s1">prop </span><span class="s3">=&gt; </span><span class="s1">camelCase</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">)).</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)];</span>
                <span class="s3">}</span>
                <span class="s4">delete </span><span class="s1">argv</span><span class="s3">[</span><span class="s1">alias</span><span class="s3">];</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s0">// Push argument into positional array, applying numeric coercion:</span>
        <span class="s4">function </span><span class="s1">pushPositional</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">) {</span>
            <span class="s4">const </span><span class="s1">maybeCoercedNumber </span><span class="s3">= </span><span class="s1">maybeCoerceNumber</span><span class="s3">(</span><span class="s2">'_'</span><span class="s3">, </span><span class="s1">arg</span><span class="s3">);</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">maybeCoercedNumber </span><span class="s3">=== </span><span class="s2">'string' </span><span class="s3">|| </span><span class="s4">typeof </span><span class="s1">maybeCoercedNumber </span><span class="s3">=== </span><span class="s2">'number'</span><span class="s3">) {</span>
                <span class="s1">argv</span><span class="s3">.</span><span class="s1">_</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">maybeCoercedNumber</span><span class="s3">);</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s0">// how many arguments should we consume, based</span>
        <span class="s0">// on the nargs option?</span>
        <span class="s4">function </span><span class="s1">eatNargs</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">, </span><span class="s1">argAfterEqualSign</span><span class="s3">) {</span>
            <span class="s4">let </span><span class="s1">ii</span><span class="s3">;</span>
            <span class="s4">let </span><span class="s1">toEat </span><span class="s3">= </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">);</span>
            <span class="s0">// NaN has a special meaning for the array type, indicating that one or</span>
            <span class="s0">// more values are expected.</span>
            <span class="s1">toEat </span><span class="s3">= </span><span class="s4">typeof </span><span class="s1">toEat </span><span class="s3">!== </span><span class="s2">'number' </span><span class="s3">|| </span><span class="s1">isNaN</span><span class="s3">(</span><span class="s1">toEat</span><span class="s3">) ? </span><span class="s7">1 </span><span class="s3">: </span><span class="s1">toEat</span><span class="s3">;</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">toEat </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) {</span>
                <span class="s4">if </span><span class="s3">(!</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">argAfterEqualSign</span><span class="s3">)) {</span>
                    <span class="s1">error </span><span class="s3">= </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">__</span><span class="s3">(</span><span class="s2">'Argument unexpected for: %s'</span><span class="s3">, </span><span class="s1">key</span><span class="s3">));</span>
                <span class="s3">}</span>
                <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">defaultValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
                <span class="s4">return </span><span class="s1">i</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">let </span><span class="s1">available </span><span class="s3">= </span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">argAfterEqualSign</span><span class="s3">) ? </span><span class="s7">0 </span><span class="s3">: </span><span class="s7">1</span><span class="s3">;</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'nargs-eats-options'</span><span class="s3">]) {</span>
                <span class="s0">// classic behavior, yargs eats positional and dash arguments.</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">args</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- (</span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">) + </span><span class="s1">available </span><span class="s3">&lt; </span><span class="s1">toEat</span><span class="s3">) {</span>
                    <span class="s1">error </span><span class="s3">= </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">__</span><span class="s3">(</span><span class="s2">'Not enough arguments following: %s'</span><span class="s3">, </span><span class="s1">key</span><span class="s3">));</span>
                <span class="s3">}</span>
                <span class="s1">available </span><span class="s3">= </span><span class="s1">toEat</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">else </span><span class="s3">{</span>
                <span class="s0">// nargs will not consume flag arguments, e.g., -abc, --foo,</span>
                <span class="s0">// and terminates when one is observed.</span>
                <span class="s4">for </span><span class="s3">(</span><span class="s1">ii </span><span class="s3">= </span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">; </span><span class="s1">ii </span><span class="s3">&lt; </span><span class="s1">args</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">ii</span><span class="s3">++) {</span>
                    <span class="s4">if </span><span class="s3">(!</span><span class="s1">args</span><span class="s3">[</span><span class="s1">ii</span><span class="s3">].</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-[^0-9]/</span><span class="s3">) || </span><span class="s1">args</span><span class="s3">[</span><span class="s1">ii</span><span class="s3">].</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">) || </span><span class="s1">isUnknownOptionAsArg</span><span class="s3">(</span><span class="s1">args</span><span class="s3">[</span><span class="s1">ii</span><span class="s3">]))</span>
                        <span class="s1">available</span><span class="s3">++;</span>
                    <span class="s4">else</span>
                        <span class="s4">break</span><span class="s3">;</span>
                <span class="s3">}</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">available </span><span class="s3">&lt; </span><span class="s1">toEat</span><span class="s3">)</span>
                    <span class="s1">error </span><span class="s3">= </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">__</span><span class="s3">(</span><span class="s2">'Not enough arguments following: %s'</span><span class="s3">, </span><span class="s1">key</span><span class="s3">));</span>
            <span class="s3">}</span>
            <span class="s4">let </span><span class="s1">consumed </span><span class="s3">= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">min</span><span class="s3">(</span><span class="s1">available</span><span class="s3">, </span><span class="s1">toEat</span><span class="s3">);</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">argAfterEqualSign</span><span class="s3">) &amp;&amp; </span><span class="s1">consumed </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
                <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">argAfterEqualSign</span><span class="s3">);</span>
                <span class="s1">consumed</span><span class="s3">--;</span>
            <span class="s3">}</span>
            <span class="s4">for </span><span class="s3">(</span><span class="s1">ii </span><span class="s3">= </span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">; </span><span class="s1">ii </span><span class="s3">&lt; (</span><span class="s1">consumed </span><span class="s3">+ </span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">); </span><span class="s1">ii</span><span class="s3">++) {</span>
                <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">[</span><span class="s1">ii</span><span class="s3">]);</span>
            <span class="s3">}</span>
            <span class="s4">return </span><span class="s3">(</span><span class="s1">i </span><span class="s3">+ </span><span class="s1">consumed</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s0">// if an option is an array, eat all non-hyphenated arguments</span>
        <span class="s0">// following it... YUM!</span>
        <span class="s0">// e.g., --foo apple banana cat becomes [&quot;apple&quot;, &quot;banana&quot;, &quot;cat&quot;]</span>
        <span class="s4">function </span><span class="s1">eatArray</span><span class="s3">(</span><span class="s1">i</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, </span><span class="s1">args</span><span class="s3">, </span><span class="s1">argAfterEqualSign</span><span class="s3">) {</span>
            <span class="s4">let </span><span class="s1">argsToSet </span><span class="s3">= [];</span>
            <span class="s4">let </span><span class="s1">next </span><span class="s3">= </span><span class="s1">argAfterEqualSign </span><span class="s3">|| </span><span class="s1">args</span><span class="s3">[</span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">];</span>
            <span class="s0">// If both array and nargs are configured, enforce the nargs count:</span>
            <span class="s4">const </span><span class="s1">nargsCount </span><span class="s3">= </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">);</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) &amp;&amp; !(</span><span class="s8">/^(true|false)$/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">))) {</span>
                <span class="s1">argsToSet</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s4">true</span><span class="s3">);</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">next</span><span class="s3">) ||</span>
                <span class="s3">(</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">argAfterEqualSign</span><span class="s3">) &amp;&amp; </span><span class="s8">/^-/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">) &amp;&amp; !</span><span class="s1">negative</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">) &amp;&amp; !</span><span class="s1">isUnknownOptionAsArg</span><span class="s3">(</span><span class="s1">next</span><span class="s3">))) {</span>
                <span class="s0">// for keys without value ==&gt; argsToSet remains an empty []</span>
                <span class="s0">// set user default value, if available</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">defaults</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] !== </span><span class="s1">undefined</span><span class="s3">) {</span>
                    <span class="s4">const </span><span class="s1">defVal </span><span class="s3">= </span><span class="s1">defaults</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
                    <span class="s1">argsToSet </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">defVal</span><span class="s3">) ? </span><span class="s1">defVal </span><span class="s3">: [</span><span class="s1">defVal</span><span class="s3">];</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">else </span><span class="s3">{</span>
                <span class="s0">// value in --option=value is eaten as is</span>
                <span class="s4">if </span><span class="s3">(!</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">argAfterEqualSign</span><span class="s3">)) {</span>
                    <span class="s1">argsToSet</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">processValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">argAfterEqualSign</span><span class="s3">));</span>
                <span class="s3">}</span>
                <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">ii </span><span class="s3">= </span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">; </span><span class="s1">ii </span><span class="s3">&lt; </span><span class="s1">args</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">ii</span><span class="s3">++) {</span>
                    <span class="s4">if </span><span class="s3">((!</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'greedy-arrays'</span><span class="s3">] &amp;&amp; </span><span class="s1">argsToSet</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) ||</span>
                        <span class="s3">(</span><span class="s1">nargsCount </span><span class="s3">&amp;&amp; </span><span class="s4">typeof </span><span class="s1">nargsCount </span><span class="s3">=== </span><span class="s2">'number' </span><span class="s3">&amp;&amp; </span><span class="s1">argsToSet</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s1">nargsCount</span><span class="s3">))</span>
                        <span class="s4">break</span><span class="s3">;</span>
                    <span class="s1">next </span><span class="s3">= </span><span class="s1">args</span><span class="s3">[</span><span class="s1">ii</span><span class="s3">];</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s8">/^-/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">) &amp;&amp; !</span><span class="s1">negative</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">) &amp;&amp; !</span><span class="s1">isUnknownOptionAsArg</span><span class="s3">(</span><span class="s1">next</span><span class="s3">))</span>
                        <span class="s4">break</span><span class="s3">;</span>
                    <span class="s1">i </span><span class="s3">= </span><span class="s1">ii</span><span class="s3">;</span>
                    <span class="s1">argsToSet</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">processValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">next</span><span class="s3">));</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s0">// If both array and nargs are configured, create an error if less than</span>
            <span class="s0">// nargs positionals were found. NaN has special meaning, indicating</span>
            <span class="s0">// that at least one value is required (more are okay).</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">nargsCount </span><span class="s3">=== </span><span class="s2">'number' </span><span class="s3">&amp;&amp; ((</span><span class="s1">nargsCount </span><span class="s3">&amp;&amp; </span><span class="s1">argsToSet</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt; </span><span class="s1">nargsCount</span><span class="s3">) ||</span>
                <span class="s3">(</span><span class="s1">isNaN</span><span class="s3">(</span><span class="s1">nargsCount</span><span class="s3">) &amp;&amp; </span><span class="s1">argsToSet</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">))) {</span>
                <span class="s1">error </span><span class="s3">= </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">__</span><span class="s3">(</span><span class="s2">'Not enough arguments following: %s'</span><span class="s3">, </span><span class="s1">key</span><span class="s3">));</span>
            <span class="s3">}</span>
            <span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">argsToSet</span><span class="s3">);</span>
            <span class="s4">return </span><span class="s1">i</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">setArg</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">val</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s8">/-/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">key</span><span class="s3">) &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'camel-case-expansion'</span><span class="s3">]) {</span>
                <span class="s4">const </span><span class="s1">alias </span><span class="s3">= </span><span class="s1">key</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">prop</span><span class="s3">) {</span>
                    <span class="s4">return </span><span class="s1">camelCase</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">);</span>
                <span class="s3">}).</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">);</span>
                <span class="s1">addNewAlias</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">alias</span><span class="s3">);</span>
            <span class="s3">}</span>
            <span class="s4">const </span><span class="s1">value </span><span class="s3">= </span><span class="s1">processValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">val</span><span class="s3">);</span>
            <span class="s4">const </span><span class="s1">splitKey </span><span class="s3">= </span><span class="s1">key</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">);</span>
            <span class="s1">setKey</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">splitKey</span><span class="s3">, </span><span class="s1">value</span><span class="s3">);</span>
            <span class="s0">// handle populating aliases of the full key</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]) {</span>
                <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">x</span><span class="s3">) {</span>
                    <span class="s4">const </span><span class="s1">keyProperties </span><span class="s3">= </span><span class="s1">x</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">);</span>
                    <span class="s1">setKey</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">keyProperties</span><span class="s3">, </span><span class="s1">value</span><span class="s3">);</span>
                <span class="s3">});</span>
            <span class="s3">}</span>
            <span class="s0">// handle populating aliases of the first element of the dot-notation key</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">splitKey</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">1 </span><span class="s3">&amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'dot-notation'</span><span class="s3">]) {</span>
                <span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">splitKey</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]] || []).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">x</span><span class="s3">) {</span>
                    <span class="s4">let </span><span class="s1">keyProperties </span><span class="s3">= </span><span class="s1">x</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">);</span>
                    <span class="s0">// expand alias with nested objects in key</span>
                    <span class="s4">const </span><span class="s1">a </span><span class="s3">= [].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">splitKey</span><span class="s3">);</span>
                    <span class="s1">a</span><span class="s3">.</span><span class="s1">shift</span><span class="s3">(); </span><span class="s0">// nuke the old key.</span>
                    <span class="s1">keyProperties </span><span class="s3">= </span><span class="s1">keyProperties</span><span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">a</span><span class="s3">);</span>
                    <span class="s0">// populate alias only if is not already an alias of the full key</span>
                    <span class="s0">// (already populated above)</span>
                    <span class="s4">if </span><span class="s3">(!(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || []).</span><span class="s1">includes</span><span class="s3">(</span><span class="s1">keyProperties</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">))) {</span>
                        <span class="s1">setKey</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">keyProperties</span><span class="s3">, </span><span class="s1">value</span><span class="s3">);</span>
                    <span class="s3">}</span>
                <span class="s3">});</span>
            <span class="s3">}</span>
            <span class="s0">// Set normalize getter and setter when key is in 'normalize' but isn't an array</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">normalize</span><span class="s3">) &amp;&amp; !</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">)) {</span>
                <span class="s4">const </span><span class="s1">keys </span><span class="s3">= [</span><span class="s1">key</span><span class="s3">].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || []);</span>
                <span class="s1">keys</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                    <span class="s1">Object</span><span class="s3">.</span><span class="s1">defineProperty</span><span class="s3">(</span><span class="s1">argvReturn</span><span class="s3">, </span><span class="s1">key</span><span class="s3">, {</span>
                        <span class="s1">enumerable</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
                        <span class="s1">get</span><span class="s3">() {</span>
                            <span class="s4">return </span><span class="s1">val</span><span class="s3">;</span>
                        <span class="s3">},</span>
                        <span class="s1">set</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) {</span>
                            <span class="s1">val </span><span class="s3">= </span><span class="s4">typeof </span><span class="s1">value </span><span class="s3">=== </span><span class="s2">'string' </span><span class="s3">? </span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">normalize</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) : </span><span class="s1">value</span><span class="s3">;</span>
                        <span class="s3">}</span>
                    <span class="s3">});</span>
                <span class="s3">});</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">addNewAlias</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">alias</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(!(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] &amp;&amp; </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">length</span><span class="s3">)) {</span>
                <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = [</span><span class="s1">alias</span><span class="s3">];</span>
                <span class="s1">newAliases</span><span class="s3">[</span><span class="s1">alias</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">if </span><span class="s3">(!(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">alias</span><span class="s3">] &amp;&amp; </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">alias</span><span class="s3">].</span><span class="s1">length</span><span class="s3">)) {</span>
                <span class="s1">addNewAlias</span><span class="s3">(</span><span class="s1">alias</span><span class="s3">, </span><span class="s1">key</span><span class="s3">);</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">processValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">val</span><span class="s3">) {</span>
            <span class="s0">// strings may be quoted, clean this up as we assign values.</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">val </span><span class="s3">=== </span><span class="s2">'string' </span><span class="s3">&amp;&amp;</span>
                <span class="s3">(</span><span class="s1">val</span><span class="s3">[</span><span class="s7">0</span><span class="s3">] === </span><span class="s2">&quot;'&quot; </span><span class="s3">|| </span><span class="s1">val</span><span class="s3">[</span><span class="s7">0</span><span class="s3">] === </span><span class="s2">'&quot;'</span><span class="s3">) &amp;&amp;</span>
                <span class="s1">val</span><span class="s3">[</span><span class="s1">val</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">] === </span><span class="s1">val</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]) {</span>
                <span class="s1">val </span><span class="s3">= </span><span class="s1">val</span><span class="s3">.</span><span class="s1">substring</span><span class="s3">(</span><span class="s7">1</span><span class="s3">, </span><span class="s1">val</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">);</span>
            <span class="s3">}</span>
            <span class="s0">// handle parsing boolean arguments --foo=true --bar false.</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) || </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">)) {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">val </span><span class="s3">=== </span><span class="s2">'string'</span><span class="s3">)</span>
                    <span class="s1">val </span><span class="s3">= </span><span class="s1">val </span><span class="s3">=== </span><span class="s2">'true'</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">let </span><span class="s1">value </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">val</span><span class="s3">)</span>
                <span class="s3">? </span><span class="s1">val</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">v</span><span class="s3">) { </span><span class="s4">return </span><span class="s1">maybeCoerceNumber</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">v</span><span class="s3">); })</span>
                <span class="s3">: </span><span class="s1">maybeCoerceNumber</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">val</span><span class="s3">);</span>
            <span class="s0">// increment a count given as arg (either no value or value parsed as boolean)</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">) &amp;&amp; (</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) || </span><span class="s4">typeof </span><span class="s1">value </span><span class="s3">=== </span><span class="s2">'boolean'</span><span class="s3">)) {</span>
                <span class="s1">value </span><span class="s3">= </span><span class="s1">increment</span><span class="s3">();</span>
            <span class="s3">}</span>
            <span class="s0">// Set normalized value when key is in 'normalize' and in 'arrays'</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">normalize</span><span class="s3">) &amp;&amp; </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">)) {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">val</span><span class="s3">))</span>
                    <span class="s1">value </span><span class="s3">= </span><span class="s1">val</span><span class="s3">.</span><span class="s1">map</span><span class="s3">((</span><span class="s1">val</span><span class="s3">) =&gt; { </span><span class="s4">return </span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">normalize</span><span class="s3">(</span><span class="s1">val</span><span class="s3">); });</span>
                <span class="s4">else</span>
                    <span class="s1">value </span><span class="s3">= </span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">normalize</span><span class="s3">(</span><span class="s1">val</span><span class="s3">);</span>
            <span class="s3">}</span>
            <span class="s4">return </span><span class="s1">value</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">maybeCoerceNumber</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'parse-positional-numbers'</span><span class="s3">] &amp;&amp; </span><span class="s1">key </span><span class="s3">=== </span><span class="s2">'_'</span><span class="s3">)</span>
                <span class="s4">return </span><span class="s1">value</span><span class="s3">;</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">strings</span><span class="s3">) &amp;&amp; !</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) &amp;&amp; !</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)) {</span>
                <span class="s4">const </span><span class="s1">shouldCoerceNumber </span><span class="s3">= </span><span class="s1">looksLikeNumber</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'parse-numbers'</span><span class="s3">] &amp;&amp; (</span><span class="s1">Number</span><span class="s3">.</span><span class="s1">isSafeInteger</span><span class="s3">(</span><span class="s1">Math</span><span class="s3">.</span><span class="s1">floor</span><span class="s3">(</span><span class="s1">parseFloat</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">value</span><span class="s3">}</span><span class="s2">`</span><span class="s3">))));</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">shouldCoerceNumber </span><span class="s3">|| (!</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) &amp;&amp; </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">numbers</span><span class="s3">))) {</span>
                    <span class="s1">value </span><span class="s3">= </span><span class="s1">Number</span><span class="s3">(</span><span class="s1">value</span><span class="s3">);</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">return </span><span class="s1">value</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s0">// set args from config.json file, this should be</span>
        <span class="s0">// applied last so that defaults can be applied.</span>
        <span class="s4">function </span><span class="s1">setConfig</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">) {</span>
            <span class="s4">const </span><span class="s1">configLookup </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">);</span>
            <span class="s0">// expand defaults/aliases, in-case any happen to reference</span>
            <span class="s0">// the config.json file.</span>
            <span class="s1">applyDefaultsAndAliases</span><span class="s3">(</span><span class="s1">configLookup</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">, </span><span class="s1">defaults</span><span class="s3">);</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">configs</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">configKey</span><span class="s3">) {</span>
                <span class="s4">const </span><span class="s1">configPath </span><span class="s3">= </span><span class="s1">argv</span><span class="s3">[</span><span class="s1">configKey</span><span class="s3">] || </span><span class="s1">configLookup</span><span class="s3">[</span><span class="s1">configKey</span><span class="s3">];</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">configPath</span><span class="s3">) {</span>
                    <span class="s4">try </span><span class="s3">{</span>
                        <span class="s4">let </span><span class="s1">config </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
                        <span class="s4">const </span><span class="s1">resolvedConfigPath </span><span class="s3">= </span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">resolve</span><span class="s3">(</span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">cwd</span><span class="s3">(), </span><span class="s1">configPath</span><span class="s3">);</span>
                        <span class="s4">const </span><span class="s1">resolveConfig </span><span class="s3">= </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">configs</span><span class="s3">[</span><span class="s1">configKey</span><span class="s3">];</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">resolveConfig </span><span class="s3">=== </span><span class="s2">'function'</span><span class="s3">) {</span>
                            <span class="s4">try </span><span class="s3">{</span>
                                <span class="s1">config </span><span class="s3">= </span><span class="s1">resolveConfig</span><span class="s3">(</span><span class="s1">resolvedConfigPath</span><span class="s3">);</span>
                            <span class="s3">}</span>
                            <span class="s4">catch </span><span class="s3">(</span><span class="s1">e</span><span class="s3">) {</span>
                                <span class="s1">config </span><span class="s3">= </span><span class="s1">e</span><span class="s3">;</span>
                            <span class="s3">}</span>
                            <span class="s4">if </span><span class="s3">(</span><span class="s1">config </span><span class="s4">instanceof </span><span class="s1">Error</span><span class="s3">) {</span>
                                <span class="s1">error </span><span class="s3">= </span><span class="s1">config</span><span class="s3">;</span>
                                <span class="s4">return</span><span class="s3">;</span>
                            <span class="s3">}</span>
                        <span class="s3">}</span>
                        <span class="s4">else </span><span class="s3">{</span>
                            <span class="s1">config </span><span class="s3">= </span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">require</span><span class="s3">(</span><span class="s1">resolvedConfigPath</span><span class="s3">);</span>
                        <span class="s3">}</span>
                        <span class="s1">setConfigObject</span><span class="s3">(</span><span class="s1">config</span><span class="s3">);</span>
                    <span class="s3">}</span>
                    <span class="s4">catch </span><span class="s3">(</span><span class="s1">ex</span><span class="s3">) {</span>
                        <span class="s0">// Deno will receive a PermissionDenied error if an attempt is</span>
                        <span class="s0">// made to load config without the --allow-read flag:</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s1">ex</span><span class="s3">.</span><span class="s1">name </span><span class="s3">=== </span><span class="s2">'PermissionDenied'</span><span class="s3">)</span>
                            <span class="s1">error </span><span class="s3">= </span><span class="s1">ex</span><span class="s3">;</span>
                        <span class="s4">else if </span><span class="s3">(</span><span class="s1">argv</span><span class="s3">[</span><span class="s1">configKey</span><span class="s3">])</span>
                            <span class="s1">error </span><span class="s3">= </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">__</span><span class="s3">(</span><span class="s2">'Invalid JSON config file: %s'</span><span class="s3">, </span><span class="s1">configPath</span><span class="s3">));</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s0">// set args from config object.</span>
        <span class="s0">// it recursively checks nested objects.</span>
        <span class="s4">function </span><span class="s1">setConfigObject</span><span class="s3">(</span><span class="s1">config</span><span class="s3">, </span><span class="s1">prev</span><span class="s3">) {</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">config</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                <span class="s4">const </span><span class="s1">value </span><span class="s3">= </span><span class="s1">config</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
                <span class="s4">const </span><span class="s1">fullKey </span><span class="s3">= </span><span class="s1">prev </span><span class="s3">? </span><span class="s1">prev </span><span class="s3">+ </span><span class="s2">'.' </span><span class="s3">+ </span><span class="s1">key </span><span class="s3">: </span><span class="s1">key</span><span class="s3">;</span>
                <span class="s0">// if the value is an inner object and we have dot-notation</span>
                <span class="s0">// enabled, treat inner objects in config the same as</span>
                <span class="s0">// heavily nested dot notations (foo.bar.apple).</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">value </span><span class="s3">=== </span><span class="s2">'object' </span><span class="s3">&amp;&amp; </span><span class="s1">value </span><span class="s3">!== </span><span class="s4">null </span><span class="s3">&amp;&amp; !</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'dot-notation'</span><span class="s3">]) {</span>
                    <span class="s0">// if the value is an object but not an array, check nested object</span>
                    <span class="s1">setConfigObject</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">fullKey</span><span class="s3">);</span>
                <span class="s3">}</span>
                <span class="s4">else </span><span class="s3">{</span>
                    <span class="s0">// setting arguments via CLI takes precedence over</span>
                    <span class="s0">// values within the config file.</span>
                    <span class="s4">if </span><span class="s3">(!</span><span class="s1">hasKey</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">fullKey</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)) || (</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">fullKey</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">) &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'combine-arrays'</span><span class="s3">])) {</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">fullKey</span><span class="s3">, </span><span class="s1">value</span><span class="s3">);</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s0">// set all config objects passed in opts</span>
        <span class="s4">function </span><span class="s1">setConfigObjects</span><span class="s3">() {</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">configObjects </span><span class="s3">!== </span><span class="s2">'undefined'</span><span class="s3">) {</span>
                <span class="s1">configObjects</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">configObject</span><span class="s3">) {</span>
                    <span class="s1">setConfigObject</span><span class="s3">(</span><span class="s1">configObject</span><span class="s3">);</span>
                <span class="s3">});</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">applyEnvVars</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">configOnly</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">envPrefix </span><span class="s3">=== </span><span class="s2">'undefined'</span><span class="s3">)</span>
                <span class="s4">return</span><span class="s3">;</span>
            <span class="s4">const </span><span class="s1">prefix </span><span class="s3">= </span><span class="s4">typeof </span><span class="s1">envPrefix </span><span class="s3">=== </span><span class="s2">'string' </span><span class="s3">? </span><span class="s1">envPrefix </span><span class="s3">: </span><span class="s2">''</span><span class="s3">;</span>
            <span class="s4">const </span><span class="s1">env </span><span class="s3">= </span><span class="s1">mixin</span><span class="s3">.</span><span class="s1">env</span><span class="s3">();</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">env</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">envVar</span><span class="s3">) {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">prefix </span><span class="s3">=== </span><span class="s2">'' </span><span class="s3">|| </span><span class="s1">envVar</span><span class="s3">.</span><span class="s1">lastIndexOf</span><span class="s3">(</span><span class="s1">prefix</span><span class="s3">, </span><span class="s7">0</span><span class="s3">) === </span><span class="s7">0</span><span class="s3">) {</span>
                    <span class="s0">// get array of nested keys and convert them to camel case</span>
                    <span class="s4">const </span><span class="s1">keys </span><span class="s3">= </span><span class="s1">envVar</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'__'</span><span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">i</span><span class="s3">) {</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s1">i </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) {</span>
                            <span class="s1">key </span><span class="s3">= </span><span class="s1">key</span><span class="s3">.</span><span class="s1">substring</span><span class="s3">(</span><span class="s1">prefix</span><span class="s3">.</span><span class="s1">length</span><span class="s3">);</span>
                        <span class="s3">}</span>
                        <span class="s4">return </span><span class="s1">camelCase</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
                    <span class="s3">});</span>
                    <span class="s4">if </span><span class="s3">(((</span><span class="s1">configOnly </span><span class="s3">&amp;&amp; </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">configs</span><span class="s3">[</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)]) || !</span><span class="s1">configOnly</span><span class="s3">) &amp;&amp; !</span><span class="s1">hasKey</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">, </span><span class="s1">keys</span><span class="s3">)) {</span>
                        <span class="s1">setArg</span><span class="s3">(</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">), </span><span class="s1">env</span><span class="s3">[</span><span class="s1">envVar</span><span class="s3">]);</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">applyCoercions</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">) {</span>
            <span class="s4">let </span><span class="s1">coerce</span><span class="s3">;</span>
            <span class="s4">const </span><span class="s1">applied </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                <span class="s4">if </span><span class="s3">(!</span><span class="s1">applied</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">key</span><span class="s3">)) { </span><span class="s0">// If we haven't already coerced this option via one of its aliases</span>
                    <span class="s1">coerce </span><span class="s3">= </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">coercions</span><span class="s3">);</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">coerce </span><span class="s3">=== </span><span class="s2">'function'</span><span class="s3">) {</span>
                        <span class="s4">try </span><span class="s3">{</span>
                            <span class="s4">const </span><span class="s1">value </span><span class="s3">= </span><span class="s1">maybeCoerceNumber</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">coerce</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]));</span>
                            <span class="s3">([].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || [], </span><span class="s1">key</span><span class="s3">)).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s1">ali </span><span class="s3">=&gt; {</span>
                                <span class="s1">applied</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">ali</span><span class="s3">);</span>
                                <span class="s1">argv</span><span class="s3">[</span><span class="s1">ali</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">;</span>
                            <span class="s3">});</span>
                        <span class="s3">}</span>
                        <span class="s4">catch </span><span class="s3">(</span><span class="s1">err</span><span class="s3">) {</span>
                            <span class="s1">error </span><span class="s3">= </span><span class="s1">err</span><span class="s3">;</span>
                        <span class="s3">}</span>
                    <span class="s3">}</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">setPlaceholderKeys</span><span class="s3">(</span><span class="s1">argv</span><span class="s3">) {</span>
            <span class="s1">flags</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">((</span><span class="s1">key</span><span class="s3">) =&gt; {</span>
                <span class="s0">// don't set placeholder keys for dot notation options 'foo.bar'.</span>
                <span class="s4">if </span><span class="s3">(~</span><span class="s1">key</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">))</span>
                    <span class="s4">return</span><span class="s3">;</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">argv</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] === </span><span class="s2">'undefined'</span><span class="s3">)</span>
                    <span class="s1">argv</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">undefined</span><span class="s3">;</span>
            <span class="s3">});</span>
            <span class="s4">return </span><span class="s1">argv</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">applyDefaultsAndAliases</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">aliases</span><span class="s3">, </span><span class="s1">defaults</span><span class="s3">, </span><span class="s1">canLog </span><span class="s3">= </span><span class="s4">false</span><span class="s3">) {</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">defaults</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                <span class="s4">if </span><span class="s3">(!</span><span class="s1">hasKey</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">key</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">))) {</span>
                    <span class="s1">setKey</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">key</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">), </span><span class="s1">defaults</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]);</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">canLog</span><span class="s3">)</span>
                        <span class="s1">defaulted</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
                    <span class="s3">(</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || []).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">x</span><span class="s3">) {</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s1">hasKey</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">x</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)))</span>
                            <span class="s4">return</span><span class="s3">;</span>
                        <span class="s1">setKey</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">x</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">), </span><span class="s1">defaults</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]);</span>
                    <span class="s3">});</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">hasKey</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">keys</span><span class="s3">) {</span>
            <span class="s4">let </span><span class="s1">o </span><span class="s3">= </span><span class="s1">obj</span><span class="s3">;</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'dot-notation'</span><span class="s3">])</span>
                <span class="s1">keys </span><span class="s3">= [</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)];</span>
            <span class="s1">keys</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s7">1</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                <span class="s1">o </span><span class="s3">= (</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || {});</span>
            <span class="s3">});</span>
            <span class="s4">const </span><span class="s1">key </span><span class="s3">= </span><span class="s1">keys</span><span class="s3">[</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">];</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">o </span><span class="s3">!== </span><span class="s2">'object'</span><span class="s3">)</span>
                <span class="s4">return false</span><span class="s3">;</span>
            <span class="s4">else</span>
                <span class="s4">return </span><span class="s1">key </span><span class="s4">in </span><span class="s1">o</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">setKey</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">keys</span><span class="s3">, </span><span class="s1">value</span><span class="s3">) {</span>
            <span class="s4">let </span><span class="s1">o </span><span class="s3">= </span><span class="s1">obj</span><span class="s3">;</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'dot-notation'</span><span class="s3">])</span>
                <span class="s1">keys </span><span class="s3">= [</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)];</span>
            <span class="s1">keys</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s7">1</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                <span class="s0">// TODO(bcoe): in the next major version of yargs, switch to</span>
                <span class="s0">// Object.create(null) for dot notation:</span>
                <span class="s1">key </span><span class="s3">= </span><span class="s1">sanitizeKey</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">o </span><span class="s3">=== </span><span class="s2">'object' </span><span class="s3">&amp;&amp; </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] === </span><span class="s1">undefined</span><span class="s3">) {</span>
                    <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = {};</span>
                <span class="s3">}</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] !== </span><span class="s2">'object' </span><span class="s3">|| </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">])) {</span>
                    <span class="s0">// ensure that o[key] is an array, and that the last item is an empty object.</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">])) {</span>
                        <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">push</span><span class="s3">({});</span>
                    <span class="s3">}</span>
                    <span class="s4">else </span><span class="s3">{</span>
                        <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = [</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">], {}];</span>
                    <span class="s3">}</span>
                    <span class="s0">// we want to update the empty object at the end of the o[key] array, so set o to that object</span>
                    <span class="s1">o </span><span class="s3">= </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">][</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">];</span>
                <span class="s3">}</span>
                <span class="s4">else </span><span class="s3">{</span>
                    <span class="s1">o </span><span class="s3">= </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
                <span class="s3">}</span>
            <span class="s3">});</span>
            <span class="s0">// TODO(bcoe): in the next major version of yargs, switch to</span>
            <span class="s0">// Object.create(null) for dot notation:</span>
            <span class="s4">const </span><span class="s1">key </span><span class="s3">= </span><span class="s1">sanitizeKey</span><span class="s3">(</span><span class="s1">keys</span><span class="s3">[</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">]);</span>
            <span class="s4">const </span><span class="s1">isTypeArray </span><span class="s3">= </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">keys</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">), </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">);</span>
            <span class="s4">const </span><span class="s1">isValueArray </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">value</span><span class="s3">);</span>
            <span class="s4">let </span><span class="s1">duplicate </span><span class="s3">= </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'duplicate-arguments-array'</span><span class="s3">];</span>
            <span class="s0">// nargs has higher priority than duplicate</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">duplicate </span><span class="s3">&amp;&amp; </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">)) {</span>
                <span class="s1">duplicate </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
                <span class="s4">if </span><span class="s3">((!</span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]) &amp;&amp; </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] === </span><span class="s7">1</span><span class="s3">) || (</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]) &amp;&amp; </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">length </span><span class="s3">=== </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">[</span><span class="s1">key</span><span class="s3">])) {</span>
                    <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">undefined</span><span class="s3">;</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">value </span><span class="s3">=== </span><span class="s1">increment</span><span class="s3">()) {</span>
                <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">increment</span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]);</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">])) {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">duplicate </span><span class="s3">&amp;&amp; </span><span class="s1">isTypeArray </span><span class="s3">&amp;&amp; </span><span class="s1">isValueArray</span><span class="s3">) {</span>
                    <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'flatten-duplicate-arrays'</span><span class="s3">] ? </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) : (</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">][</span><span class="s7">0</span><span class="s3">]) ? </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] : [</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]]).</span><span class="s1">concat</span><span class="s3">([</span><span class="s1">value</span><span class="s3">]);</span>
                <span class="s3">}</span>
                <span class="s4">else if </span><span class="s3">(!</span><span class="s1">duplicate </span><span class="s3">&amp;&amp; </span><span class="s1">Boolean</span><span class="s3">(</span><span class="s1">isTypeArray</span><span class="s3">) === </span><span class="s1">Boolean</span><span class="s3">(</span><span class="s1">isValueArray</span><span class="s3">)) {</span>
                    <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">;</span>
                <span class="s3">}</span>
                <span class="s4">else </span><span class="s3">{</span>
                    <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">concat</span><span class="s3">([</span><span class="s1">value</span><span class="s3">]);</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] === </span><span class="s1">undefined </span><span class="s3">&amp;&amp; </span><span class="s1">isTypeArray</span><span class="s3">) {</span>
                <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">isValueArray </span><span class="s3">? </span><span class="s1">value </span><span class="s3">: [</span><span class="s1">value</span><span class="s3">];</span>
            <span class="s3">}</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">duplicate </span><span class="s3">&amp;&amp; !(</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] === </span><span class="s1">undefined </span><span class="s3">||</span>
                <span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">) ||</span>
                <span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">))) {</span>
                <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = [</span><span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">], </span><span class="s1">value</span><span class="s3">];</span>
            <span class="s3">}</span>
            <span class="s4">else </span><span class="s3">{</span>
                <span class="s1">o</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">;</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s0">// extend the aliases list with inferred aliases.</span>
        <span class="s4">function </span><span class="s1">extendAliases</span><span class="s3">(</span><span class="s1">...args</span><span class="s3">) {</span>
            <span class="s1">args</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">obj</span><span class="s3">) {</span>
                <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">obj </span><span class="s3">|| {}).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
                    <span class="s0">// short-circuit if we've already added a key</span>
                    <span class="s0">// to the aliases array, for example it might</span>
                    <span class="s0">// exist in both 'opts.default' and 'opts.key'.</span>
                    <span class="s4">if </span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">])</span>
                        <span class="s4">return</span><span class="s3">;</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = [].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || []);</span>
                    <span class="s0">// For &quot;--option-name&quot;, also set argv.optionName</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">key</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">x</span><span class="s3">) {</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s8">/-/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">x</span><span class="s3">) &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'camel-case-expansion'</span><span class="s3">]) {</span>
                            <span class="s4">const </span><span class="s1">c </span><span class="s3">= </span><span class="s1">camelCase</span><span class="s3">(</span><span class="s1">x</span><span class="s3">);</span>
                            <span class="s4">if </span><span class="s3">(</span><span class="s1">c </span><span class="s3">!== </span><span class="s1">key </span><span class="s3">&amp;&amp; </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s1">c</span><span class="s3">) === -</span><span class="s7">1</span><span class="s3">) {</span>
                                <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">push</span><span class="s3">(</span><span class="s1">c</span><span class="s3">);</span>
                                <span class="s1">newAliases</span><span class="s3">[</span><span class="s1">c</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
                            <span class="s3">}</span>
                        <span class="s3">}</span>
                    <span class="s3">});</span>
                    <span class="s0">// For &quot;--optionName&quot;, also set argv['option-name']</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">key</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">x</span><span class="s3">) {</span>
                        <span class="s4">if </span><span class="s3">(</span><span class="s1">x</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">1 </span><span class="s3">&amp;&amp; </span><span class="s8">/[A-Z]/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">x</span><span class="s3">) &amp;&amp; </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'camel-case-expansion'</span><span class="s3">]) {</span>
                            <span class="s4">const </span><span class="s1">c </span><span class="s3">= </span><span class="s1">decamelize</span><span class="s3">(</span><span class="s1">x</span><span class="s3">, </span><span class="s2">'-'</span><span class="s3">);</span>
                            <span class="s4">if </span><span class="s3">(</span><span class="s1">c </span><span class="s3">!== </span><span class="s1">key </span><span class="s3">&amp;&amp; </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s1">c</span><span class="s3">) === -</span><span class="s7">1</span><span class="s3">) {</span>
                                <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">push</span><span class="s3">(</span><span class="s1">c</span><span class="s3">);</span>
                                <span class="s1">newAliases</span><span class="s3">[</span><span class="s1">c</span><span class="s3">] = </span><span class="s4">true</span><span class="s3">;</span>
                            <span class="s3">}</span>
                        <span class="s3">}</span>
                    <span class="s3">});</span>
                    <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">x</span><span class="s3">) {</span>
                        <span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">x</span><span class="s3">] = [</span><span class="s1">key</span><span class="s3">].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">].</span><span class="s1">filter</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">y</span><span class="s3">) {</span>
                            <span class="s4">return </span><span class="s1">x </span><span class="s3">!== </span><span class="s1">y</span><span class="s3">;</span>
                        <span class="s3">}));</span>
                    <span class="s3">});</span>
                <span class="s3">});</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flag</span><span class="s3">) {</span>
            <span class="s4">const </span><span class="s1">toCheck </span><span class="s3">= [].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || [], </span><span class="s1">key</span><span class="s3">);</span>
            <span class="s4">const </span><span class="s1">keys </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">flag</span><span class="s3">);</span>
            <span class="s4">const </span><span class="s1">setAlias </span><span class="s3">= </span><span class="s1">toCheck</span><span class="s3">.</span><span class="s1">find</span><span class="s3">(</span><span class="s1">key </span><span class="s3">=&gt; </span><span class="s1">keys</span><span class="s3">.</span><span class="s1">includes</span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
            <span class="s4">return </span><span class="s1">setAlias </span><span class="s3">? </span><span class="s1">flag</span><span class="s3">[</span><span class="s1">setAlias</span><span class="s3">] : </span><span class="s4">false</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">hasAnyFlag</span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s4">const </span><span class="s1">flagsKeys </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">);</span>
            <span class="s4">const </span><span class="s1">toCheck </span><span class="s3">= [].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">flagsKeys</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">k </span><span class="s3">=&gt; </span><span class="s1">flags</span><span class="s3">[</span><span class="s1">k</span><span class="s3">]));</span>
            <span class="s4">return </span><span class="s1">toCheck</span><span class="s3">.</span><span class="s1">some</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">flag</span><span class="s3">) {</span>
                <span class="s4">return </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">flag</span><span class="s3">) ? </span><span class="s1">flag</span><span class="s3">.</span><span class="s1">includes</span><span class="s3">(</span><span class="s1">key</span><span class="s3">) : </span><span class="s1">flag</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">hasFlagsMatching</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">, </span><span class="s1">...patterns</span><span class="s3">) {</span>
            <span class="s4">const </span><span class="s1">toCheck </span><span class="s3">= [].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">...patterns</span><span class="s3">);</span>
            <span class="s4">return </span><span class="s1">toCheck</span><span class="s3">.</span><span class="s1">some</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">) {</span>
                <span class="s4">const </span><span class="s1">match </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">);</span>
                <span class="s4">return </span><span class="s1">match </span><span class="s3">&amp;&amp; </span><span class="s1">hasAnyFlag</span><span class="s3">(</span><span class="s1">match</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]);</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s0">// based on a simplified version of the short flag group parsing logic</span>
        <span class="s4">function </span><span class="s1">hasAllShortFlags</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">) {</span>
            <span class="s0">// if this is a negative number, or doesn't start with a single hyphen, it's not a short flag group</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">) || !</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/^-[^-]+/</span><span class="s3">)) {</span>
                <span class="s4">return false</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">let </span><span class="s1">hasAllFlags </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
            <span class="s4">let </span><span class="s1">next</span><span class="s3">;</span>
            <span class="s4">const </span><span class="s1">letters </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">).</span><span class="s1">split</span><span class="s3">(</span><span class="s2">''</span><span class="s3">);</span>
            <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">j </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">j </span><span class="s3">&lt; </span><span class="s1">letters</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">j</span><span class="s3">++) {</span>
                <span class="s1">next </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">2</span><span class="s3">);</span>
                <span class="s4">if </span><span class="s3">(!</span><span class="s1">hasAnyFlag</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">])) {</span>
                    <span class="s1">hasAllFlags </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
                    <span class="s4">break</span><span class="s3">;</span>
                <span class="s3">}</span>
                <span class="s4">if </span><span class="s3">((</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">] &amp;&amp; </span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">] === </span><span class="s2">'='</span><span class="s3">) ||</span>
                    <span class="s1">next </span><span class="s3">=== </span><span class="s2">'-' </span><span class="s3">||</span>
                    <span class="s3">(</span><span class="s8">/[A-Za-z]/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j</span><span class="s3">]) &amp;&amp; </span><span class="s8">/^-?\d+(\.\d*)?(e-?\d+)?$/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">next</span><span class="s3">)) ||</span>
                    <span class="s3">(</span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">] &amp;&amp; </span><span class="s1">letters</span><span class="s3">[</span><span class="s1">j </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">].</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/\W/</span><span class="s3">))) {</span>
                    <span class="s4">break</span><span class="s3">;</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">return </span><span class="s1">hasAllFlags</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">isUnknownOptionAsArg</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">) {</span>
            <span class="s4">return </span><span class="s1">configuration</span><span class="s3">[</span><span class="s2">'unknown-options-as-args'</span><span class="s3">] &amp;&amp; </span><span class="s1">isUnknownOption</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">isUnknownOption</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">) {</span>
            <span class="s1">arg </span><span class="s3">= </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s8">/^-{3,}/</span><span class="s3">, </span><span class="s2">'--'</span><span class="s3">);</span>
            <span class="s0">// ignore negative numbers</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">negative</span><span class="s3">)) {</span>
                <span class="s4">return false</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s0">// if this is a short option group and all of them are configured, it isn't unknown</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">hasAllShortFlags</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">)) {</span>
                <span class="s4">return false</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s0">// e.g. '--count=2'</span>
            <span class="s4">const </span><span class="s1">flagWithEquals </span><span class="s3">= </span><span class="s8">/^-+([^=]+?)=[\s\S]*$/</span><span class="s3">;</span>
            <span class="s0">// e.g. '-a' or '--arg'</span>
            <span class="s4">const </span><span class="s1">normalFlag </span><span class="s3">= </span><span class="s8">/^-+([^=]+?)$/</span><span class="s3">;</span>
            <span class="s0">// e.g. '-a-'</span>
            <span class="s4">const </span><span class="s1">flagEndingInHyphen </span><span class="s3">= </span><span class="s8">/^-+([^=]+?)-$/</span><span class="s3">;</span>
            <span class="s0">// e.g. '-abc123'</span>
            <span class="s4">const </span><span class="s1">flagEndingInDigits </span><span class="s3">= </span><span class="s8">/^-+([^=]+?\d+)$/</span><span class="s3">;</span>
            <span class="s0">// e.g. '-a/usr/local'</span>
            <span class="s4">const </span><span class="s1">flagEndingInNonWordCharacters </span><span class="s3">= </span><span class="s8">/^-+([^=]+?)\W+.*$/</span><span class="s3">;</span>
            <span class="s0">// check the different types of flag styles, including negatedBoolean, a pattern defined near the start of the parse method</span>
            <span class="s4">return </span><span class="s3">!</span><span class="s1">hasFlagsMatching</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">, </span><span class="s1">flagWithEquals</span><span class="s3">, </span><span class="s1">negatedBoolean</span><span class="s3">, </span><span class="s1">normalFlag</span><span class="s3">, </span><span class="s1">flagEndingInHyphen</span><span class="s3">, </span><span class="s1">flagEndingInDigits</span><span class="s3">, </span><span class="s1">flagEndingInNonWordCharacters</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s0">// make a best effort to pick a default value</span>
        <span class="s0">// for an option based on name and type.</span>
        <span class="s4">function </span><span class="s1">defaultValue</span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s4">if </span><span class="s3">(!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">) &amp;&amp;</span>
                <span class="s3">!</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">) &amp;&amp;</span>
                <span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">key</span><span class="s3">}</span><span class="s2">` </span><span class="s4">in </span><span class="s1">defaults</span><span class="s3">) {</span>
                <span class="s4">return </span><span class="s1">defaults</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
            <span class="s3">}</span>
            <span class="s4">else </span><span class="s3">{</span>
                <span class="s4">return </span><span class="s1">defaultForType</span><span class="s3">(</span><span class="s1">guessType</span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s0">// return a default value, given the type of a flag.,</span>
        <span class="s4">function </span><span class="s1">defaultForType</span><span class="s3">(</span><span class="s1">type</span><span class="s3">) {</span>
            <span class="s4">const </span><span class="s1">def </span><span class="s3">= {</span>
                <span class="s3">[</span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">BOOLEAN</span><span class="s3">]: </span><span class="s4">true</span><span class="s3">,</span>
                <span class="s3">[</span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">STRING</span><span class="s3">]: </span><span class="s2">''</span><span class="s3">,</span>
                <span class="s3">[</span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">NUMBER</span><span class="s3">]: </span><span class="s1">undefined</span><span class="s3">,</span>
                <span class="s3">[</span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">ARRAY</span><span class="s3">]: []</span>
            <span class="s3">};</span>
            <span class="s4">return </span><span class="s1">def</span><span class="s3">[</span><span class="s1">type</span><span class="s3">];</span>
        <span class="s3">}</span>
        <span class="s0">// given a flag, enforce a default type.</span>
        <span class="s4">function </span><span class="s1">guessType</span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
            <span class="s4">let </span><span class="s1">type </span><span class="s3">= </span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">BOOLEAN</span><span class="s3">;</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">strings</span><span class="s3">))</span>
                <span class="s1">type </span><span class="s3">= </span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">STRING</span><span class="s3">;</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">numbers</span><span class="s3">))</span>
                <span class="s1">type </span><span class="s3">= </span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">NUMBER</span><span class="s3">;</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">bools</span><span class="s3">))</span>
                <span class="s1">type </span><span class="s3">= </span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">BOOLEAN</span><span class="s3">;</span>
            <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">))</span>
                <span class="s1">type </span><span class="s3">= </span><span class="s1">DefaultValuesForTypeKey</span><span class="s3">.</span><span class="s1">ARRAY</span><span class="s3">;</span>
            <span class="s4">return </span><span class="s1">type</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">function </span><span class="s1">isUndefined</span><span class="s3">(</span><span class="s1">num</span><span class="s3">) {</span>
            <span class="s4">return </span><span class="s1">num </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s0">// check user configuration settings for inconsistencies</span>
        <span class="s4">function </span><span class="s1">checkConfiguration</span><span class="s3">() {</span>
            <span class="s0">// count keys should not be set as array/narg</span>
            <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">.</span><span class="s1">counts</span><span class="s3">).</span><span class="s1">find</span><span class="s3">(</span><span class="s1">key </span><span class="s3">=&gt; {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">arrays</span><span class="s3">)) {</span>
                    <span class="s1">error </span><span class="s3">= </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">__</span><span class="s3">(</span><span class="s2">'Invalid configuration: %s, opts.count excludes opts.array.'</span><span class="s3">, </span><span class="s1">key</span><span class="s3">));</span>
                    <span class="s4">return true</span><span class="s3">;</span>
                <span class="s3">}</span>
                <span class="s4">else if </span><span class="s3">(</span><span class="s1">checkAllAliases</span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">nargs</span><span class="s3">)) {</span>
                    <span class="s1">error </span><span class="s3">= </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">__</span><span class="s3">(</span><span class="s2">'Invalid configuration: %s, opts.count excludes opts.narg.'</span><span class="s3">, </span><span class="s1">key</span><span class="s3">));</span>
                    <span class="s4">return true</span><span class="s3">;</span>
                <span class="s3">}</span>
                <span class="s4">return false</span><span class="s3">;</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">return </span><span class="s3">{</span>
            <span class="s1">aliases</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">({}, </span><span class="s1">flags</span><span class="s3">.</span><span class="s1">aliases</span><span class="s3">),</span>
            <span class="s1">argv</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">argvReturn</span><span class="s3">, </span><span class="s1">argv</span><span class="s3">),</span>
            <span class="s1">configuration</span><span class="s3">: </span><span class="s1">configuration</span><span class="s3">,</span>
            <span class="s1">defaulted</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">({}, </span><span class="s1">defaulted</span><span class="s3">),</span>
            <span class="s1">error</span><span class="s3">: </span><span class="s1">error</span><span class="s3">,</span>
            <span class="s1">newAliases</span><span class="s3">: </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">({}, </span><span class="s1">newAliases</span><span class="s3">)</span>
        <span class="s3">};</span>
    <span class="s3">}</span>
<span class="s3">}</span>
<span class="s0">// if any aliases reference each other, we should</span>
<span class="s0">// merge them together.</span>
<span class="s4">function </span><span class="s1">combineAliases</span><span class="s3">(</span><span class="s1">aliases</span><span class="s3">) {</span>
    <span class="s4">const </span><span class="s1">aliasArrays </span><span class="s3">= [];</span>
    <span class="s4">const </span><span class="s1">combined </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">);</span>
    <span class="s4">let </span><span class="s1">change </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
    <span class="s0">// turn alias lookup hash {key: ['alias1', 'alias2']} into</span>
    <span class="s0">// a simple array ['key', 'alias1', 'alias2']</span>
    <span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">aliases</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
        <span class="s1">aliasArrays</span><span class="s3">.</span><span class="s1">push</span><span class="s3">([].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">aliases</span><span class="s3">[</span><span class="s1">key</span><span class="s3">], </span><span class="s1">key</span><span class="s3">));</span>
    <span class="s3">});</span>
    <span class="s0">// combine arrays until zero changes are</span>
    <span class="s0">// made in an iteration.</span>
    <span class="s4">while </span><span class="s3">(</span><span class="s1">change</span><span class="s3">) {</span>
        <span class="s1">change </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
        <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">aliasArrays</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
            <span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">ii </span><span class="s3">= </span><span class="s1">i </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">; </span><span class="s1">ii </span><span class="s3">&lt; </span><span class="s1">aliasArrays</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">ii</span><span class="s3">++) {</span>
                <span class="s4">const </span><span class="s1">intersect </span><span class="s3">= </span><span class="s1">aliasArrays</span><span class="s3">[</span><span class="s1">i</span><span class="s3">].</span><span class="s1">filter</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">v</span><span class="s3">) {</span>
                    <span class="s4">return </span><span class="s1">aliasArrays</span><span class="s3">[</span><span class="s1">ii</span><span class="s3">].</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s1">v</span><span class="s3">) !== -</span><span class="s7">1</span><span class="s3">;</span>
                <span class="s3">});</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">intersect</span><span class="s3">.</span><span class="s1">length</span><span class="s3">) {</span>
                    <span class="s1">aliasArrays</span><span class="s3">[</span><span class="s1">i</span><span class="s3">] = </span><span class="s1">aliasArrays</span><span class="s3">[</span><span class="s1">i</span><span class="s3">].</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">aliasArrays</span><span class="s3">[</span><span class="s1">ii</span><span class="s3">]);</span>
                    <span class="s1">aliasArrays</span><span class="s3">.</span><span class="s1">splice</span><span class="s3">(</span><span class="s1">ii</span><span class="s3">, </span><span class="s7">1</span><span class="s3">);</span>
                    <span class="s1">change </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
                    <span class="s4">break</span><span class="s3">;</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
    <span class="s3">}</span>
    <span class="s0">// map arrays back to the hash-lookup (de-dupe while</span>
    <span class="s0">// we're at it).</span>
    <span class="s1">aliasArrays</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">aliasArray</span><span class="s3">) {</span>
        <span class="s1">aliasArray </span><span class="s3">= </span><span class="s1">aliasArray</span><span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span><span class="s4">function </span><span class="s3">(</span><span class="s1">v</span><span class="s3">, </span><span class="s1">i</span><span class="s3">, </span><span class="s1">self</span><span class="s3">) {</span>
            <span class="s4">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s1">v</span><span class="s3">) === </span><span class="s1">i</span><span class="s3">;</span>
        <span class="s3">});</span>
        <span class="s4">const </span><span class="s1">lastAlias </span><span class="s3">= </span><span class="s1">aliasArray</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">lastAlias </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">&amp;&amp; </span><span class="s4">typeof </span><span class="s1">lastAlias </span><span class="s3">=== </span><span class="s2">'string'</span><span class="s3">) {</span>
            <span class="s1">combined</span><span class="s3">[</span><span class="s1">lastAlias</span><span class="s3">] = </span><span class="s1">aliasArray</span><span class="s3">;</span>
        <span class="s3">}</span>
    <span class="s3">});</span>
    <span class="s4">return </span><span class="s1">combined</span><span class="s3">;</span>
<span class="s3">}</span>
<span class="s0">// this function should only be called when a count is given as an arg</span>
<span class="s0">// it is NOT called to set a default value</span>
<span class="s0">// thus we can start the count at 1 instead of 0</span>
<span class="s4">function </span><span class="s1">increment</span><span class="s3">(</span><span class="s1">orig</span><span class="s3">) {</span>
    <span class="s4">return </span><span class="s1">orig </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">? </span><span class="s1">orig </span><span class="s3">+ </span><span class="s7">1 </span><span class="s3">: </span><span class="s7">1</span><span class="s3">;</span>
<span class="s3">}</span>
<span class="s0">// TODO(bcoe): in the next major version of yargs, switch to</span>
<span class="s0">// Object.create(null) for dot notation:</span>
<span class="s4">function </span><span class="s1">sanitizeKey</span><span class="s3">(</span><span class="s1">key</span><span class="s3">) {</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">key </span><span class="s3">=== </span><span class="s2">'__proto__'</span><span class="s3">)</span>
        <span class="s4">return </span><span class="s2">'___proto___'</span><span class="s3">;</span>
    <span class="s4">return </span><span class="s1">key</span><span class="s3">;</span>
<span class="s3">}</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@fileoverview </span><span class="s5">Main entrypoint for libraries using yargs-parser in Node.js</span>
 <span class="s5">* CJS and ESM environments.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@license</span>
 <span class="s5">* Copyright (c) 2016, Contributors</span>
 <span class="s5">* SPDX-License-Identifier: ISC</span>
 <span class="s5">*/</span>
<span class="s0">// See https://github.com/yargs/yargs-parser#supported-nodejs-versions for our</span>
<span class="s0">// version support policy. The YARGS_MIN_NODE_VERSION is used for testing only.</span>
<span class="s4">const </span><span class="s1">minNodeVersion </span><span class="s3">= (</span><span class="s1">process </span><span class="s3">&amp;&amp; </span><span class="s1">process</span><span class="s3">.</span><span class="s1">env </span><span class="s3">&amp;&amp; </span><span class="s1">process</span><span class="s3">.</span><span class="s1">env</span><span class="s3">.</span><span class="s1">YARGS_MIN_NODE_VERSION</span><span class="s3">)</span>
    <span class="s3">? </span><span class="s1">Number</span><span class="s3">(</span><span class="s1">process</span><span class="s3">.</span><span class="s1">env</span><span class="s3">.</span><span class="s1">YARGS_MIN_NODE_VERSION</span><span class="s3">)</span>
    <span class="s3">: </span><span class="s7">10</span><span class="s3">;</span>
<span class="s4">if </span><span class="s3">(</span><span class="s1">process </span><span class="s3">&amp;&amp; </span><span class="s1">process</span><span class="s3">.</span><span class="s1">version</span><span class="s3">) {</span>
    <span class="s4">const </span><span class="s1">major </span><span class="s3">= </span><span class="s1">Number</span><span class="s3">(</span><span class="s1">process</span><span class="s3">.</span><span class="s1">version</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/v([^.]+)/</span><span class="s3">)[</span><span class="s7">1</span><span class="s3">]);</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">major </span><span class="s3">&lt; </span><span class="s1">minNodeVersion</span><span class="s3">) {</span>
        <span class="s4">throw </span><span class="s1">Error</span><span class="s3">(</span><span class="s2">`yargs parser supports a minimum Node.js version of </span><span class="s1">$</span><span class="s3">{</span><span class="s1">minNodeVersion</span><span class="s3">}</span><span class="s2">. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`</span><span class="s3">);</span>
    <span class="s3">}</span>
<span class="s3">}</span>
<span class="s0">// Creates a yargs-parser instance using Node.js standard libraries:</span>
<span class="s4">const </span><span class="s1">env </span><span class="s3">= </span><span class="s1">process </span><span class="s3">? </span><span class="s1">process</span><span class="s3">.</span><span class="s1">env </span><span class="s3">: {};</span>
<span class="s4">const </span><span class="s1">parser </span><span class="s3">= </span><span class="s4">new </span><span class="s1">YargsParser</span><span class="s3">({</span>
    <span class="s1">cwd</span><span class="s3">: </span><span class="s1">process</span><span class="s3">.</span><span class="s1">cwd</span><span class="s3">,</span>
    <span class="s1">env</span><span class="s3">: () =&gt; {</span>
        <span class="s4">return </span><span class="s1">env</span><span class="s3">;</span>
    <span class="s3">},</span>
    <span class="s1">format</span><span class="s3">: </span><span class="s1">require$$2</span><span class="s3">.</span><span class="s1">format</span><span class="s3">,</span>
    <span class="s1">normalize</span><span class="s3">: </span><span class="s1">require$$0</span><span class="s3">.</span><span class="s1">normalize</span><span class="s3">,</span>
    <span class="s1">resolve</span><span class="s3">: </span><span class="s1">require$$0</span><span class="s3">.</span><span class="s1">resolve</span><span class="s3">,</span>
    <span class="s0">// TODO: figure  out a  way to combine ESM and CJS coverage, such  that</span>
    <span class="s0">// we can exercise all the lines below:</span>
    <span class="s1">require</span><span class="s3">: (</span><span class="s1">path</span><span class="s3">) =&gt; {</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">require </span><span class="s3">!== </span><span class="s2">'undefined'</span><span class="s3">) {</span>
            <span class="s4">return </span><span class="s1">require</span><span class="s3">(</span><span class="s1">path</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s4">else if </span><span class="s3">(</span><span class="s1">path</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s8">/\.json$/</span><span class="s3">)) {</span>
            <span class="s4">return </span><span class="s1">require$$0$1</span><span class="s3">.</span><span class="s1">readFileSync</span><span class="s3">(</span><span class="s1">path</span><span class="s3">, </span><span class="s2">'utf8'</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s4">else </span><span class="s3">{</span>
            <span class="s4">throw </span><span class="s1">Error</span><span class="s3">(</span><span class="s2">'only .json config files are supported in ESM'</span><span class="s3">);</span>
        <span class="s3">}</span>
    <span class="s3">}</span>
<span class="s3">});</span>
<span class="s4">const </span><span class="s1">yargsParser </span><span class="s3">= </span><span class="s4">function </span><span class="s1">Parser</span><span class="s3">(</span><span class="s1">args</span><span class="s3">, </span><span class="s1">opts</span><span class="s3">) {</span>
    <span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s1">parser</span><span class="s3">.</span><span class="s1">parse</span><span class="s3">(</span><span class="s1">args</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(), </span><span class="s1">opts</span><span class="s3">);</span>
    <span class="s4">return </span><span class="s1">result</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">;</span>
<span class="s3">};</span>
<span class="s1">yargsParser</span><span class="s3">.</span><span class="s1">detailed </span><span class="s3">= </span><span class="s4">function </span><span class="s3">(</span><span class="s1">args</span><span class="s3">, </span><span class="s1">opts</span><span class="s3">) {</span>
    <span class="s4">return </span><span class="s1">parser</span><span class="s3">.</span><span class="s1">parse</span><span class="s3">(</span><span class="s1">args</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(), </span><span class="s1">opts</span><span class="s3">);</span>
<span class="s3">};</span>
<span class="s1">yargsParser</span><span class="s3">.</span><span class="s1">camelCase </span><span class="s3">= </span><span class="s1">camelCase</span><span class="s3">;</span>
<span class="s1">yargsParser</span><span class="s3">.</span><span class="s1">decamelize </span><span class="s3">= </span><span class="s1">decamelize</span><span class="s3">;</span>
<span class="s1">yargsParser</span><span class="s3">.</span><span class="s1">looksLikeNumber </span><span class="s3">= </span><span class="s1">looksLikeNumber</span><span class="s3">;</span>
<span class="s4">const </span><span class="s1">argParser </span><span class="s3">= </span><span class="s1">yargsParser</span><span class="s3">;</span>

<span class="s4">var </span><span class="s1">parseMs </span><span class="s3">= </span><span class="s1">milliseconds </span><span class="s3">=&gt; {</span>
	<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">milliseconds </span><span class="s3">!== </span><span class="s2">'number'</span><span class="s3">) {</span>
		<span class="s4">throw new </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s2">'Expected a number'</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">const </span><span class="s1">roundTowardsZero </span><span class="s3">= </span><span class="s1">milliseconds </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">? </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">floor </span><span class="s3">: </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">ceil</span><span class="s3">;</span>

	<span class="s4">return </span><span class="s3">{</span>
		<span class="s1">days</span><span class="s3">: </span><span class="s1">roundTowardsZero</span><span class="s3">(</span><span class="s1">milliseconds </span><span class="s3">/ </span><span class="s7">86400000</span><span class="s3">),</span>
		<span class="s1">hours</span><span class="s3">: </span><span class="s1">roundTowardsZero</span><span class="s3">(</span><span class="s1">milliseconds </span><span class="s3">/ </span><span class="s7">3600000</span><span class="s3">) % </span><span class="s7">24</span><span class="s3">,</span>
		<span class="s1">minutes</span><span class="s3">: </span><span class="s1">roundTowardsZero</span><span class="s3">(</span><span class="s1">milliseconds </span><span class="s3">/ </span><span class="s7">60000</span><span class="s3">) % </span><span class="s7">60</span><span class="s3">,</span>
		<span class="s1">seconds</span><span class="s3">: </span><span class="s1">roundTowardsZero</span><span class="s3">(</span><span class="s1">milliseconds </span><span class="s3">/ </span><span class="s7">1000</span><span class="s3">) % </span><span class="s7">60</span><span class="s3">,</span>
		<span class="s1">milliseconds</span><span class="s3">: </span><span class="s1">roundTowardsZero</span><span class="s3">(</span><span class="s1">milliseconds</span><span class="s3">) % </span><span class="s7">1000</span><span class="s3">,</span>
		<span class="s1">microseconds</span><span class="s3">: </span><span class="s1">roundTowardsZero</span><span class="s3">(</span><span class="s1">milliseconds </span><span class="s3">* </span><span class="s7">1000</span><span class="s3">) % </span><span class="s7">1000</span><span class="s3">,</span>
		<span class="s1">nanoseconds</span><span class="s3">: </span><span class="s1">roundTowardsZero</span><span class="s3">(</span><span class="s1">milliseconds </span><span class="s3">* </span><span class="s7">1e6</span><span class="s3">) % </span><span class="s7">1000</span>
	<span class="s3">};</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">parseMilliseconds </span><span class="s3">= </span><span class="s1">parseMs</span><span class="s3">;</span>

<span class="s4">const </span><span class="s1">pluralize </span><span class="s3">= (</span><span class="s1">word</span><span class="s3">, </span><span class="s1">count</span><span class="s3">) =&gt; </span><span class="s1">count </span><span class="s3">=== </span><span class="s7">1 </span><span class="s3">? </span><span class="s1">word </span><span class="s3">: </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">word</span><span class="s3">}</span><span class="s2">s`</span><span class="s3">;</span>

<span class="s4">const </span><span class="s1">SECOND_ROUNDING_EPSILON </span><span class="s3">= </span><span class="s7">0.0000001</span><span class="s3">;</span>

<span class="s4">var </span><span class="s1">prettyMs </span><span class="s3">= (</span><span class="s1">milliseconds</span><span class="s3">, </span><span class="s1">options </span><span class="s3">= {}) =&gt; {</span>
	<span class="s4">if </span><span class="s3">(!</span><span class="s1">Number</span><span class="s3">.</span><span class="s1">isFinite</span><span class="s3">(</span><span class="s1">milliseconds</span><span class="s3">)) {</span>
		<span class="s4">throw new </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s2">'Expected a finite number'</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">colonNotation</span><span class="s3">) {</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">compact </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">formatSubMilliseconds </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">separateMilliseconds </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">verbose </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">compact</span><span class="s3">) {</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">secondsDecimalDigits </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">millisecondsDecimalDigits </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s4">const </span><span class="s1">result </span><span class="s3">= [];</span>

	<span class="s4">const </span><span class="s1">floorDecimals </span><span class="s3">= (</span><span class="s1">value</span><span class="s3">, </span><span class="s1">decimalDigits</span><span class="s3">) =&gt; {</span>
		<span class="s4">const </span><span class="s1">flooredInterimValue </span><span class="s3">= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">floor</span><span class="s3">((</span><span class="s1">value </span><span class="s3">* (</span><span class="s7">10 </span><span class="s3">** </span><span class="s1">decimalDigits</span><span class="s3">)) + </span><span class="s1">SECOND_ROUNDING_EPSILON</span><span class="s3">);</span>
		<span class="s4">const </span><span class="s1">flooredValue </span><span class="s3">= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">round</span><span class="s3">(</span><span class="s1">flooredInterimValue</span><span class="s3">) / (</span><span class="s7">10 </span><span class="s3">** </span><span class="s1">decimalDigits</span><span class="s3">);</span>
		<span class="s4">return </span><span class="s1">flooredValue</span><span class="s3">.</span><span class="s1">toFixed</span><span class="s3">(</span><span class="s1">decimalDigits</span><span class="s3">);</span>
	<span class="s3">};</span>

	<span class="s4">const </span><span class="s1">add </span><span class="s3">= (</span><span class="s1">value</span><span class="s3">, </span><span class="s1">long</span><span class="s3">, </span><span class="s1">short</span><span class="s3">, </span><span class="s1">valueString</span><span class="s3">) =&gt; {</span>
		<span class="s4">if </span><span class="s3">((</span><span class="s1">result</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0 </span><span class="s3">|| !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">colonNotation</span><span class="s3">) &amp;&amp; </span><span class="s1">value </span><span class="s3">=== </span><span class="s7">0 </span><span class="s3">&amp;&amp; !(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">colonNotation </span><span class="s3">&amp;&amp; </span><span class="s1">short </span><span class="s3">=== </span><span class="s2">'m'</span><span class="s3">)) {</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s3">}</span>

		<span class="s1">valueString </span><span class="s3">= (</span><span class="s1">valueString </span><span class="s3">|| </span><span class="s1">value </span><span class="s3">|| </span><span class="s2">'0'</span><span class="s3">).</span><span class="s1">toString</span><span class="s3">();</span>
		<span class="s4">let </span><span class="s1">prefix</span><span class="s3">;</span>
		<span class="s4">let </span><span class="s1">suffix</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">colonNotation</span><span class="s3">) {</span>
			<span class="s1">prefix </span><span class="s3">= </span><span class="s1">result</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">? </span><span class="s2">':' </span><span class="s3">: </span><span class="s2">''</span><span class="s3">;</span>
			<span class="s1">suffix </span><span class="s3">= </span><span class="s2">''</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">wholeDigits </span><span class="s3">= </span><span class="s1">valueString</span><span class="s3">.</span><span class="s1">includes</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">) ? </span><span class="s1">valueString</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">'.'</span><span class="s3">)[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">length </span><span class="s3">: </span><span class="s1">valueString</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">minLength </span><span class="s3">= </span><span class="s1">result</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">? </span><span class="s7">2 </span><span class="s3">: </span><span class="s7">1</span><span class="s3">;</span>
			<span class="s1">valueString </span><span class="s3">= </span><span class="s2">'0'</span><span class="s3">.</span><span class="s1">repeat</span><span class="s3">(</span><span class="s1">Math</span><span class="s3">.</span><span class="s1">max</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, </span><span class="s1">minLength </span><span class="s3">- </span><span class="s1">wholeDigits</span><span class="s3">)) + </span><span class="s1">valueString</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s1">prefix </span><span class="s3">= </span><span class="s2">''</span><span class="s3">;</span>
			<span class="s1">suffix </span><span class="s3">= </span><span class="s1">options</span><span class="s3">.</span><span class="s1">verbose </span><span class="s3">? </span><span class="s2">' ' </span><span class="s3">+ </span><span class="s1">pluralize</span><span class="s3">(</span><span class="s1">long</span><span class="s3">, </span><span class="s1">value</span><span class="s3">) : </span><span class="s1">short</span><span class="s3">;</span>
		<span class="s3">}</span>

		<span class="s1">result</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">prefix </span><span class="s3">+ </span><span class="s1">valueString </span><span class="s3">+ </span><span class="s1">suffix</span><span class="s3">);</span>
	<span class="s3">};</span>

	<span class="s4">const </span><span class="s1">parsed </span><span class="s3">= </span><span class="s1">parseMilliseconds</span><span class="s3">(</span><span class="s1">milliseconds</span><span class="s3">);</span>

	<span class="s1">add</span><span class="s3">(</span><span class="s1">Math</span><span class="s3">.</span><span class="s1">trunc</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">days </span><span class="s3">/ </span><span class="s7">365</span><span class="s3">), </span><span class="s2">'year'</span><span class="s3">, </span><span class="s2">'y'</span><span class="s3">);</span>
	<span class="s1">add</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">days </span><span class="s3">% </span><span class="s7">365</span><span class="s3">, </span><span class="s2">'day'</span><span class="s3">, </span><span class="s2">'d'</span><span class="s3">);</span>
	<span class="s1">add</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">hours</span><span class="s3">, </span><span class="s2">'hour'</span><span class="s3">, </span><span class="s2">'h'</span><span class="s3">);</span>
	<span class="s1">add</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">minutes</span><span class="s3">, </span><span class="s2">'minute'</span><span class="s3">, </span><span class="s2">'m'</span><span class="s3">);</span>

	<span class="s4">if </span><span class="s3">(</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">separateMilliseconds </span><span class="s3">||</span>
		<span class="s1">options</span><span class="s3">.</span><span class="s1">formatSubMilliseconds </span><span class="s3">||</span>
		<span class="s3">(!</span><span class="s1">options</span><span class="s3">.</span><span class="s1">colonNotation </span><span class="s3">&amp;&amp; </span><span class="s1">milliseconds </span><span class="s3">&lt; </span><span class="s7">1000</span><span class="s3">)</span>
	<span class="s3">) {</span>
		<span class="s1">add</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">seconds</span><span class="s3">, </span><span class="s2">'second'</span><span class="s3">, </span><span class="s2">'s'</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">formatSubMilliseconds</span><span class="s3">) {</span>
			<span class="s1">add</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">milliseconds</span><span class="s3">, </span><span class="s2">'millisecond'</span><span class="s3">, </span><span class="s2">'ms'</span><span class="s3">);</span>
			<span class="s1">add</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">microseconds</span><span class="s3">, </span><span class="s2">'microsecond'</span><span class="s3">, </span><span class="s2">'s'</span><span class="s3">);</span>
			<span class="s1">add</span><span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">nanoseconds</span><span class="s3">, </span><span class="s2">'nanosecond'</span><span class="s3">, </span><span class="s2">'ns'</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">const </span><span class="s1">millisecondsAndBelow </span><span class="s3">=</span>
				<span class="s1">parsed</span><span class="s3">.</span><span class="s1">milliseconds </span><span class="s3">+</span>
				<span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">microseconds </span><span class="s3">/ </span><span class="s7">1000</span><span class="s3">) +</span>
				<span class="s3">(</span><span class="s1">parsed</span><span class="s3">.</span><span class="s1">nanoseconds </span><span class="s3">/ </span><span class="s7">1e6</span><span class="s3">);</span>

			<span class="s4">const </span><span class="s1">millisecondsDecimalDigits </span><span class="s3">=</span>
				<span class="s4">typeof </span><span class="s1">options</span><span class="s3">.</span><span class="s1">millisecondsDecimalDigits </span><span class="s3">=== </span><span class="s2">'number' </span><span class="s3">?</span>
					<span class="s1">options</span><span class="s3">.</span><span class="s1">millisecondsDecimalDigits </span><span class="s3">:</span>
					<span class="s7">0</span><span class="s3">;</span>

			<span class="s4">const </span><span class="s1">roundedMiliseconds </span><span class="s3">= </span><span class="s1">millisecondsAndBelow </span><span class="s3">&gt;= </span><span class="s7">1 </span><span class="s3">?</span>
				<span class="s1">Math</span><span class="s3">.</span><span class="s1">round</span><span class="s3">(</span><span class="s1">millisecondsAndBelow</span><span class="s3">) :</span>
				<span class="s1">Math</span><span class="s3">.</span><span class="s1">ceil</span><span class="s3">(</span><span class="s1">millisecondsAndBelow</span><span class="s3">);</span>

			<span class="s4">const </span><span class="s1">millisecondsString </span><span class="s3">= </span><span class="s1">millisecondsDecimalDigits </span><span class="s3">?</span>
				<span class="s1">millisecondsAndBelow</span><span class="s3">.</span><span class="s1">toFixed</span><span class="s3">(</span><span class="s1">millisecondsDecimalDigits</span><span class="s3">) :</span>
				<span class="s1">roundedMiliseconds</span><span class="s3">;</span>

			<span class="s1">add</span><span class="s3">(</span>
				<span class="s1">Number</span><span class="s3">.</span><span class="s1">parseFloat</span><span class="s3">(</span><span class="s1">millisecondsString</span><span class="s3">, </span><span class="s7">10</span><span class="s3">),</span>
				<span class="s2">'millisecond'</span><span class="s3">,</span>
				<span class="s2">'ms'</span><span class="s3">,</span>
				<span class="s1">millisecondsString</span>
			<span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
		<span class="s4">const </span><span class="s1">seconds </span><span class="s3">= (</span><span class="s1">milliseconds </span><span class="s3">/ </span><span class="s7">1000</span><span class="s3">) % </span><span class="s7">60</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">secondsDecimalDigits </span><span class="s3">=</span>
			<span class="s4">typeof </span><span class="s1">options</span><span class="s3">.</span><span class="s1">secondsDecimalDigits </span><span class="s3">=== </span><span class="s2">'number' </span><span class="s3">?</span>
				<span class="s1">options</span><span class="s3">.</span><span class="s1">secondsDecimalDigits </span><span class="s3">:</span>
				<span class="s7">1</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">secondsFixed </span><span class="s3">= </span><span class="s1">floorDecimals</span><span class="s3">(</span><span class="s1">seconds</span><span class="s3">, </span><span class="s1">secondsDecimalDigits</span><span class="s3">);</span>
		<span class="s4">const </span><span class="s1">secondsString </span><span class="s3">= </span><span class="s1">options</span><span class="s3">.</span><span class="s1">keepDecimalsOnWholeSeconds </span><span class="s3">?</span>
			<span class="s1">secondsFixed </span><span class="s3">:</span>
			<span class="s1">secondsFixed</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s8">/\.0+$/</span><span class="s3">, </span><span class="s2">''</span><span class="s3">);</span>
		<span class="s1">add</span><span class="s3">(</span><span class="s1">Number</span><span class="s3">.</span><span class="s1">parseFloat</span><span class="s3">(</span><span class="s1">secondsString</span><span class="s3">, </span><span class="s7">10</span><span class="s3">), </span><span class="s2">'second'</span><span class="s3">, </span><span class="s2">'s'</span><span class="s3">, </span><span class="s1">secondsString</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">result</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) {</span>
		<span class="s4">return </span><span class="s2">'0' </span><span class="s3">+ (</span><span class="s1">options</span><span class="s3">.</span><span class="s1">verbose </span><span class="s3">? </span><span class="s2">' milliseconds' </span><span class="s3">: </span><span class="s2">'ms'</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">compact</span><span class="s3">) {</span>
		<span class="s4">return </span><span class="s1">result</span><span class="s3">[</span><span class="s7">0</span><span class="s3">];</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">options</span><span class="s3">.</span><span class="s1">unitCount </span><span class="s3">=== </span><span class="s2">'number'</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">separator </span><span class="s3">= </span><span class="s1">options</span><span class="s3">.</span><span class="s1">colonNotation </span><span class="s3">? </span><span class="s2">'' </span><span class="s3">: </span><span class="s2">' '</span><span class="s3">;</span>
		<span class="s4">return </span><span class="s1">result</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">max</span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">unitCount</span><span class="s3">, </span><span class="s7">1</span><span class="s3">)).</span><span class="s1">join</span><span class="s3">(</span><span class="s1">separator</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">return </span><span class="s1">options</span><span class="s3">.</span><span class="s1">colonNotation </span><span class="s3">? </span><span class="s1">result</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">''</span><span class="s3">) : </span><span class="s1">result</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">' '</span><span class="s3">);</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">ms </span><span class="s3">= </span><span class="s1">prettyMs</span><span class="s3">;</span>

<span class="s4">const </span><span class="s1">BYTE_UNITS </span><span class="s3">= [</span>
	<span class="s2">'B'</span><span class="s3">,</span>
	<span class="s2">'kB'</span><span class="s3">,</span>
	<span class="s2">'MB'</span><span class="s3">,</span>
	<span class="s2">'GB'</span><span class="s3">,</span>
	<span class="s2">'TB'</span><span class="s3">,</span>
	<span class="s2">'PB'</span><span class="s3">,</span>
	<span class="s2">'EB'</span><span class="s3">,</span>
	<span class="s2">'ZB'</span><span class="s3">,</span>
	<span class="s2">'YB'</span>
<span class="s3">];</span>

<span class="s4">const </span><span class="s1">BIBYTE_UNITS </span><span class="s3">= [</span>
	<span class="s2">'B'</span><span class="s3">,</span>
	<span class="s2">'kiB'</span><span class="s3">,</span>
	<span class="s2">'MiB'</span><span class="s3">,</span>
	<span class="s2">'GiB'</span><span class="s3">,</span>
	<span class="s2">'TiB'</span><span class="s3">,</span>
	<span class="s2">'PiB'</span><span class="s3">,</span>
	<span class="s2">'EiB'</span><span class="s3">,</span>
	<span class="s2">'ZiB'</span><span class="s3">,</span>
	<span class="s2">'YiB'</span>
<span class="s3">];</span>

<span class="s4">const </span><span class="s1">BIT_UNITS </span><span class="s3">= [</span>
	<span class="s2">'b'</span><span class="s3">,</span>
	<span class="s2">'kbit'</span><span class="s3">,</span>
	<span class="s2">'Mbit'</span><span class="s3">,</span>
	<span class="s2">'Gbit'</span><span class="s3">,</span>
	<span class="s2">'Tbit'</span><span class="s3">,</span>
	<span class="s2">'Pbit'</span><span class="s3">,</span>
	<span class="s2">'Ebit'</span><span class="s3">,</span>
	<span class="s2">'Zbit'</span><span class="s3">,</span>
	<span class="s2">'Ybit'</span>
<span class="s3">];</span>

<span class="s4">const </span><span class="s1">BIBIT_UNITS </span><span class="s3">= [</span>
	<span class="s2">'b'</span><span class="s3">,</span>
	<span class="s2">'kibit'</span><span class="s3">,</span>
	<span class="s2">'Mibit'</span><span class="s3">,</span>
	<span class="s2">'Gibit'</span><span class="s3">,</span>
	<span class="s2">'Tibit'</span><span class="s3">,</span>
	<span class="s2">'Pibit'</span><span class="s3">,</span>
	<span class="s2">'Eibit'</span><span class="s3">,</span>
	<span class="s2">'Zibit'</span><span class="s3">,</span>
	<span class="s2">'Yibit'</span>
<span class="s3">];</span>

<span class="s0">/* 
Formats the given number using `Number#toLocaleString`. 
- If locale is a string, the value is expected to be a locale-key (for example: `de`). 
- If locale is true, the system default locale is used for translation. 
- If no value for locale is specified, the number is returned unmodified. 
*/</span>
<span class="s4">const </span><span class="s1">toLocaleString </span><span class="s3">= (</span><span class="s1">number</span><span class="s3">, </span><span class="s1">locale</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) =&gt; {</span>
	<span class="s4">let </span><span class="s1">result </span><span class="s3">= </span><span class="s1">number</span><span class="s3">;</span>
	<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">locale </span><span class="s3">=== </span><span class="s2">'string' </span><span class="s3">|| </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">locale</span><span class="s3">)) {</span>
		<span class="s1">result </span><span class="s3">= </span><span class="s1">number</span><span class="s3">.</span><span class="s1">toLocaleString</span><span class="s3">(</span><span class="s1">locale</span><span class="s3">, </span><span class="s1">options</span><span class="s3">);</span>
	<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">locale </span><span class="s3">=== </span><span class="s4">true </span><span class="s3">|| </span><span class="s1">options </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
		<span class="s1">result </span><span class="s3">= </span><span class="s1">number</span><span class="s3">.</span><span class="s1">toLocaleString</span><span class="s3">(</span><span class="s1">undefined</span><span class="s3">, </span><span class="s1">options</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">return </span><span class="s1">result</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s4">var </span><span class="s1">prettyBytes </span><span class="s3">= (</span><span class="s1">number</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) =&gt; {</span>
	<span class="s4">if </span><span class="s3">(!</span><span class="s1">Number</span><span class="s3">.</span><span class="s1">isFinite</span><span class="s3">(</span><span class="s1">number</span><span class="s3">)) {</span>
		<span class="s4">throw new </span><span class="s1">TypeError</span><span class="s3">(</span><span class="s2">`Expected a finite number, got </span><span class="s1">$</span><span class="s3">{</span><span class="s4">typeof </span><span class="s1">number</span><span class="s3">}</span><span class="s2">: </span><span class="s1">$</span><span class="s3">{</span><span class="s1">number</span><span class="s3">}</span><span class="s2">`</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s1">options </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">({</span><span class="s1">bits</span><span class="s3">: </span><span class="s4">false</span><span class="s3">, </span><span class="s1">binary</span><span class="s3">: </span><span class="s4">false</span><span class="s3">}, </span><span class="s1">options</span><span class="s3">);</span>

	<span class="s4">const </span><span class="s1">UNITS </span><span class="s3">= </span><span class="s1">options</span><span class="s3">.</span><span class="s1">bits </span><span class="s3">?</span>
		<span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">binary </span><span class="s3">? </span><span class="s1">BIBIT_UNITS </span><span class="s3">: </span><span class="s1">BIT_UNITS</span><span class="s3">) :</span>
		<span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">binary </span><span class="s3">? </span><span class="s1">BIBYTE_UNITS </span><span class="s3">: </span><span class="s1">BYTE_UNITS</span><span class="s3">);</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">signed </span><span class="s3">&amp;&amp; </span><span class="s1">number </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) {</span>
		<span class="s4">return </span><span class="s2">` 0 </span><span class="s1">$</span><span class="s3">{</span><span class="s1">UNITS</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]}</span><span class="s2">`</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s4">const </span><span class="s1">isNegative </span><span class="s3">= </span><span class="s1">number </span><span class="s3">&lt; </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s4">const </span><span class="s1">prefix </span><span class="s3">= </span><span class="s1">isNegative </span><span class="s3">? </span><span class="s2">'-' </span><span class="s3">: (</span><span class="s1">options</span><span class="s3">.</span><span class="s1">signed </span><span class="s3">? </span><span class="s2">'+' </span><span class="s3">: </span><span class="s2">''</span><span class="s3">);</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">isNegative</span><span class="s3">) {</span>
		<span class="s1">number </span><span class="s3">= -</span><span class="s1">number</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s4">let </span><span class="s1">localeOptions</span><span class="s3">;</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">minimumFractionDigits </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
		<span class="s1">localeOptions </span><span class="s3">= {</span><span class="s1">minimumFractionDigits</span><span class="s3">: </span><span class="s1">options</span><span class="s3">.</span><span class="s1">minimumFractionDigits</span><span class="s3">};</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">maximumFractionDigits </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
		<span class="s1">localeOptions </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">({</span><span class="s1">maximumFractionDigits</span><span class="s3">: </span><span class="s1">options</span><span class="s3">.</span><span class="s1">maximumFractionDigits</span><span class="s3">}, </span><span class="s1">localeOptions</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">number </span><span class="s3">&lt; </span><span class="s7">1</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">numberString </span><span class="s3">= </span><span class="s1">toLocaleString</span><span class="s3">(</span><span class="s1">number</span><span class="s3">, </span><span class="s1">options</span><span class="s3">.</span><span class="s1">locale</span><span class="s3">, </span><span class="s1">localeOptions</span><span class="s3">);</span>
		<span class="s4">return </span><span class="s1">prefix </span><span class="s3">+ </span><span class="s1">numberString </span><span class="s3">+ </span><span class="s2">' ' </span><span class="s3">+ </span><span class="s1">UNITS</span><span class="s3">[</span><span class="s7">0</span><span class="s3">];</span>
	<span class="s3">}</span>

	<span class="s4">const </span><span class="s1">exponent </span><span class="s3">= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">min</span><span class="s3">(</span><span class="s1">Math</span><span class="s3">.</span><span class="s1">floor</span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">binary </span><span class="s3">? </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">log</span><span class="s3">(</span><span class="s1">number</span><span class="s3">) / </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">log</span><span class="s3">(</span><span class="s7">1024</span><span class="s3">) : </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">log10</span><span class="s3">(</span><span class="s1">number</span><span class="s3">) / </span><span class="s7">3</span><span class="s3">), </span><span class="s1">UNITS</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">);</span>
	<span class="s0">// eslint-disable-next-line unicorn/prefer-exponentiation-operator</span>
	<span class="s1">number </span><span class="s3">/= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">pow</span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">binary </span><span class="s3">? </span><span class="s7">1024 </span><span class="s3">: </span><span class="s7">1000</span><span class="s3">, </span><span class="s1">exponent</span><span class="s3">);</span>

	<span class="s4">if </span><span class="s3">(!</span><span class="s1">localeOptions</span><span class="s3">) {</span>
		<span class="s1">number </span><span class="s3">= </span><span class="s1">number</span><span class="s3">.</span><span class="s1">toPrecision</span><span class="s3">(</span><span class="s7">3</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">const </span><span class="s1">numberString </span><span class="s3">= </span><span class="s1">toLocaleString</span><span class="s3">(</span><span class="s1">Number</span><span class="s3">(</span><span class="s1">number</span><span class="s3">), </span><span class="s1">options</span><span class="s3">.</span><span class="s1">locale</span><span class="s3">, </span><span class="s1">localeOptions</span><span class="s3">);</span>

	<span class="s4">const </span><span class="s1">unit </span><span class="s3">= </span><span class="s1">UNITS</span><span class="s3">[</span><span class="s1">exponent</span><span class="s3">];</span>

	<span class="s4">return </span><span class="s1">prefix </span><span class="s3">+ </span><span class="s1">numberString </span><span class="s3">+ </span><span class="s2">' ' </span><span class="s3">+ </span><span class="s1">unit</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">prettyBytes$1 </span><span class="s3">= </span><span class="s1">prettyBytes</span><span class="s3">;</span>

<span class="s4">function </span><span class="s1">printTimings</span><span class="s3">(</span><span class="s1">timings</span><span class="s3">) {</span>
    <span class="s1">Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span><span class="s1">timings</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">(([</span><span class="s1">label</span><span class="s3">, [</span><span class="s1">time</span><span class="s3">, </span><span class="s1">memory</span><span class="s3">, </span><span class="s1">total</span><span class="s3">]]) =&gt; {</span>
        <span class="s4">const </span><span class="s1">appliedColor </span><span class="s3">= </span><span class="s1">label</span><span class="s3">[</span><span class="s7">0</span><span class="s3">] === </span><span class="s2">'#' </span><span class="s3">? (</span><span class="s1">label</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] !== </span><span class="s2">'#' </span><span class="s3">? </span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">underline </span><span class="s3">: </span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">bold</span><span class="s3">) : (</span><span class="s1">text</span><span class="s3">) =&gt; </span><span class="s1">text</span><span class="s3">;</span>
        <span class="s4">const </span><span class="s1">row </span><span class="s3">= </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">label</span><span class="s3">}</span><span class="s2">: </span><span class="s1">$</span><span class="s3">{</span><span class="s1">time</span><span class="s3">.</span><span class="s1">toFixed</span><span class="s3">(</span><span class="s7">0</span><span class="s3">)}</span><span class="s2">ms, </span><span class="s1">$</span><span class="s3">{</span><span class="s1">prettyBytes$1</span><span class="s3">(</span><span class="s1">memory</span><span class="s3">)} </span><span class="s2">/ </span><span class="s1">$</span><span class="s3">{</span><span class="s1">prettyBytes$1</span><span class="s3">(</span><span class="s1">total</span><span class="s3">)}</span><span class="s2">`</span><span class="s3">;</span>
        <span class="s1">console</span><span class="s3">.</span><span class="s1">info</span><span class="s3">(</span><span class="s1">appliedColor</span><span class="s3">(</span><span class="s1">row</span><span class="s3">));</span>
    <span class="s3">});</span>
<span class="s3">}</span>

<span class="s1">async </span><span class="s4">function </span><span class="s1">build</span><span class="s3">(</span><span class="s1">inputOptions</span><span class="s3">, </span><span class="s1">warnings</span><span class="s3">, </span><span class="s1">silent </span><span class="s3">= </span><span class="s4">false</span><span class="s3">) {</span>
    <span class="s4">const </span><span class="s1">outputOptions </span><span class="s3">= </span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">output</span><span class="s3">;</span>
    <span class="s4">const </span><span class="s1">useStdout </span><span class="s3">= !</span><span class="s1">outputOptions</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">file </span><span class="s3">&amp;&amp; !</span><span class="s1">outputOptions</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">dir</span><span class="s3">;</span>
    <span class="s4">const </span><span class="s1">start </span><span class="s3">= </span><span class="s1">Date</span><span class="s3">.</span><span class="s1">now</span><span class="s3">();</span>
    <span class="s4">const </span><span class="s1">files </span><span class="s3">= </span><span class="s1">useStdout </span><span class="s3">? [</span><span class="s2">'stdout'</span><span class="s3">] : </span><span class="s1">outputOptions</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">t </span><span class="s3">=&gt; </span><span class="s1">rollup</span><span class="s3">.</span><span class="s1">relativeId</span><span class="s3">(</span><span class="s1">t</span><span class="s3">.</span><span class="s1">file </span><span class="s3">|| </span><span class="s1">t</span><span class="s3">.</span><span class="s1">dir</span><span class="s3">));</span>
    <span class="s4">if </span><span class="s3">(!</span><span class="s1">silent</span><span class="s3">) {</span>
        <span class="s4">let </span><span class="s1">inputFiles</span><span class="s3">;</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">input </span><span class="s3">=== </span><span class="s2">'string'</span><span class="s3">) {</span>
            <span class="s1">inputFiles </span><span class="s3">= </span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">input</span><span class="s3">;</span>
        <span class="s3">}</span>
        <span class="s4">else if </span><span class="s3">(</span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">input </span><span class="s4">instanceof </span><span class="s1">Array</span><span class="s3">) {</span>
            <span class="s1">inputFiles </span><span class="s3">= </span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">input</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">', '</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s4">else if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">input </span><span class="s3">=== </span><span class="s2">'object' </span><span class="s3">&amp;&amp; </span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">input </span><span class="s3">!== </span><span class="s4">null</span><span class="s3">) {</span>
            <span class="s1">inputFiles </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">values</span><span class="s3">(</span><span class="s1">inputOptions</span><span class="s3">.</span><span class="s1">input</span><span class="s3">).</span><span class="s1">join</span><span class="s3">(</span><span class="s2">', '</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">(</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">cyan</span><span class="s3">(</span><span class="s2">`</span><span class="s4">\n</span><span class="s1">$</span><span class="s3">{</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">bold</span><span class="s3">(</span><span class="s1">inputFiles</span><span class="s3">)} </span><span class="s2"> </span><span class="s1">$</span><span class="s3">{</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">bold</span><span class="s3">(</span><span class="s1">files</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">', '</span><span class="s3">))}</span><span class="s2">...`</span><span class="s3">));</span>
    <span class="s3">}</span>
    <span class="s4">const </span><span class="s1">bundle </span><span class="s3">= </span><span class="s4">await </span><span class="s1">rollup</span><span class="s3">.</span><span class="s1">rollup</span><span class="s3">(</span><span class="s1">inputOptions</span><span class="s3">);</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">useStdout</span><span class="s3">) {</span>
        <span class="s4">const </span><span class="s1">output </span><span class="s3">= </span><span class="s1">outputOptions</span><span class="s3">[</span><span class="s7">0</span><span class="s3">];</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">output</span><span class="s3">.</span><span class="s1">sourcemap </span><span class="s3">&amp;&amp; </span><span class="s1">output</span><span class="s3">.</span><span class="s1">sourcemap </span><span class="s3">!== </span><span class="s2">'inline'</span><span class="s3">) {</span>
            <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">handleError</span><span class="s3">({</span>
                <span class="s1">code</span><span class="s3">: </span><span class="s2">'ONLY_INLINE_SOURCEMAPS'</span><span class="s3">,</span>
                <span class="s1">message</span><span class="s3">: </span><span class="s2">'Only inline sourcemaps are supported when bundling to stdout.'</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">const </span><span class="s3">{ </span><span class="s1">output</span><span class="s3">: </span><span class="s1">outputs </span><span class="s3">} = </span><span class="s4">await </span><span class="s1">bundle</span><span class="s3">.</span><span class="s1">generate</span><span class="s3">(</span><span class="s1">output</span><span class="s3">);</span>
        <span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">file of outputs</span><span class="s3">) {</span>
            <span class="s4">let </span><span class="s1">source</span><span class="s3">;</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">file</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">'asset'</span><span class="s3">) {</span>
                <span class="s1">source </span><span class="s3">= </span><span class="s1">file</span><span class="s3">.</span><span class="s1">source</span><span class="s3">;</span>
            <span class="s3">}</span>
            <span class="s4">else </span><span class="s3">{</span>
                <span class="s1">source </span><span class="s3">= </span><span class="s1">file</span><span class="s3">.</span><span class="s1">code</span><span class="s3">;</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">output</span><span class="s3">.</span><span class="s1">sourcemap </span><span class="s3">=== </span><span class="s2">'inline'</span><span class="s3">) {</span>
                    <span class="s1">source </span><span class="s3">+= </span><span class="s2">`</span><span class="s4">\n</span><span class="s2">//# </span><span class="s1">$</span><span class="s3">{</span><span class="s1">rollup</span><span class="s3">.</span><span class="s1">SOURCEMAPPING_URL</span><span class="s3">}</span><span class="s2">=</span><span class="s1">$</span><span class="s3">{</span><span class="s1">file</span><span class="s3">.</span><span class="s1">map</span><span class="s3">.</span><span class="s1">toUrl</span><span class="s3">()}</span><span class="s4">\n</span><span class="s2">`</span><span class="s3">;</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">if </span><span class="s3">(</span><span class="s1">outputs</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">1</span><span class="s3">)</span>
                <span class="s1">process$1</span><span class="s3">.</span><span class="s1">stdout</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s2">`</span><span class="s4">\n</span><span class="s1">$</span><span class="s3">{</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">cyan</span><span class="s3">(</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">bold</span><span class="s3">(</span><span class="s2">`// </span><span class="s1">$</span><span class="s3">{</span><span class="s1">file</span><span class="s3">.</span><span class="s1">fileName</span><span class="s3">}</span><span class="s2">:`</span><span class="s3">))}</span><span class="s4">\n</span><span class="s2">`</span><span class="s3">);</span>
            <span class="s1">process$1</span><span class="s3">.</span><span class="s1">stdout</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">source</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s4">if </span><span class="s3">(!</span><span class="s1">silent</span><span class="s3">) {</span>
            <span class="s1">warnings</span><span class="s3">.</span><span class="s1">flush</span><span class="s3">();</span>
        <span class="s3">}</span>
        <span class="s4">return</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s4">await </span><span class="s1">Promise</span><span class="s3">.</span><span class="s1">all</span><span class="s3">(</span><span class="s1">outputOptions</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">bundle</span><span class="s3">.</span><span class="s1">write</span><span class="s3">));</span>
    <span class="s4">await </span><span class="s1">bundle</span><span class="s3">.</span><span class="s1">close</span><span class="s3">();</span>
    <span class="s4">if </span><span class="s3">(!</span><span class="s1">silent</span><span class="s3">) {</span>
        <span class="s1">warnings</span><span class="s3">.</span><span class="s1">flush</span><span class="s3">();</span>
        <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">stderr</span><span class="s3">(</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">green</span><span class="s3">(</span><span class="s2">`created </span><span class="s1">$</span><span class="s3">{</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">bold</span><span class="s3">(</span><span class="s1">files</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">', '</span><span class="s3">))} </span><span class="s2">in </span><span class="s1">$</span><span class="s3">{</span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">bold</span><span class="s3">(</span><span class="s1">ms</span><span class="s3">(</span><span class="s1">Date</span><span class="s3">.</span><span class="s1">now</span><span class="s3">() - </span><span class="s1">start</span><span class="s3">))}</span><span class="s2">`</span><span class="s3">));</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">bundle </span><span class="s3">&amp;&amp; </span><span class="s1">bundle</span><span class="s3">.</span><span class="s1">getTimings</span><span class="s3">) {</span>
            <span class="s1">printTimings</span><span class="s3">(</span><span class="s1">bundle</span><span class="s3">.</span><span class="s1">getTimings</span><span class="s3">());</span>
        <span class="s3">}</span>
    <span class="s3">}</span>
<span class="s3">}</span>

<span class="s4">const </span><span class="s1">DEFAULT_CONFIG_BASE </span><span class="s3">= </span><span class="s2">'rollup.config'</span><span class="s3">;</span>
<span class="s1">async </span><span class="s4">function </span><span class="s1">getConfigPath</span><span class="s3">(</span><span class="s1">commandConfig</span><span class="s3">) {</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">commandConfig </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) {</span>
        <span class="s4">return </span><span class="s1">require$$0</span><span class="s3">.</span><span class="s1">resolve</span><span class="s3">(</span><span class="s4">await </span><span class="s1">findConfigFileNameInCwd</span><span class="s3">());</span>
    <span class="s3">}</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">commandConfig</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, </span><span class="s7">5</span><span class="s3">) === </span><span class="s2">'node:'</span><span class="s3">) {</span>
        <span class="s4">const </span><span class="s1">pkgName </span><span class="s3">= </span><span class="s1">commandConfig</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">5</span><span class="s3">);</span>
        <span class="s4">try </span><span class="s3">{</span>
            <span class="s4">return </span><span class="s1">require</span><span class="s3">.</span><span class="s1">resolve</span><span class="s3">(</span><span class="s2">`rollup-config-</span><span class="s1">$</span><span class="s3">{</span><span class="s1">pkgName</span><span class="s3">}</span><span class="s2">`</span><span class="s3">, { </span><span class="s1">paths</span><span class="s3">: [</span><span class="s1">process$1</span><span class="s3">.</span><span class="s1">cwd</span><span class="s3">()] });</span>
        <span class="s3">}</span>
        <span class="s4">catch </span><span class="s3">(</span><span class="s1">_a</span><span class="s3">) {</span>
            <span class="s4">try </span><span class="s3">{</span>
                <span class="s4">return </span><span class="s1">require</span><span class="s3">.</span><span class="s1">resolve</span><span class="s3">(</span><span class="s1">pkgName</span><span class="s3">, { </span><span class="s1">paths</span><span class="s3">: [</span><span class="s1">process$1</span><span class="s3">.</span><span class="s1">cwd</span><span class="s3">()] });</span>
            <span class="s3">}</span>
            <span class="s4">catch </span><span class="s3">(</span><span class="s1">err</span><span class="s3">) {</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">err</span><span class="s3">.</span><span class="s1">code </span><span class="s3">=== </span><span class="s2">'MODULE_NOT_FOUND'</span><span class="s3">) {</span>
                    <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">handleError</span><span class="s3">({</span>
                        <span class="s1">code</span><span class="s3">: </span><span class="s2">'MISSING_EXTERNAL_CONFIG'</span><span class="s3">,</span>
                        <span class="s1">message</span><span class="s3">: </span><span class="s2">`Could not resolve config file &quot;</span><span class="s1">$</span><span class="s3">{</span><span class="s1">commandConfig</span><span class="s3">}</span><span class="s2">&quot;`</span>
                    <span class="s3">});</span>
                <span class="s3">}</span>
                <span class="s4">throw </span><span class="s1">err</span><span class="s3">;</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
    <span class="s3">}</span>
    <span class="s4">return </span><span class="s1">require$$0</span><span class="s3">.</span><span class="s1">resolve</span><span class="s3">(</span><span class="s1">commandConfig</span><span class="s3">);</span>
<span class="s3">}</span>
<span class="s1">async </span><span class="s4">function </span><span class="s1">findConfigFileNameInCwd</span><span class="s3">() {</span>
    <span class="s4">const </span><span class="s1">filesInWorkingDir </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">(</span><span class="s4">await </span><span class="s1">require$$0$1</span><span class="s3">.</span><span class="s1">promises</span><span class="s3">.</span><span class="s1">readdir</span><span class="s3">(</span><span class="s1">process$1</span><span class="s3">.</span><span class="s1">cwd</span><span class="s3">()));</span>
    <span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">extension of </span><span class="s3">[</span><span class="s2">'mjs'</span><span class="s3">, </span><span class="s2">'cjs'</span><span class="s3">, </span><span class="s2">'ts'</span><span class="s3">]) {</span>
        <span class="s4">const </span><span class="s1">fileName </span><span class="s3">= </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">DEFAULT_CONFIG_BASE</span><span class="s3">}</span><span class="s2">.</span><span class="s1">$</span><span class="s3">{</span><span class="s1">extension</span><span class="s3">}</span><span class="s2">`</span><span class="s3">;</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">filesInWorkingDir</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">fileName</span><span class="s3">))</span>
            <span class="s4">return </span><span class="s1">fileName</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s4">return </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">DEFAULT_CONFIG_BASE</span><span class="s3">}</span><span class="s2">.js`</span><span class="s3">;</span>
<span class="s3">}</span>

<span class="s1">async </span><span class="s4">function </span><span class="s1">loadConfigFromCommand</span><span class="s3">(</span><span class="s1">command</span><span class="s3">) {</span>
    <span class="s4">const </span><span class="s1">warnings </span><span class="s3">= </span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">batchWarnings</span><span class="s3">();</span>
    <span class="s4">if </span><span class="s3">(!</span><span class="s1">command</span><span class="s3">.</span><span class="s1">input </span><span class="s3">&amp;&amp; (</span><span class="s1">command</span><span class="s3">.</span><span class="s1">stdin </span><span class="s3">|| !</span><span class="s1">process$1</span><span class="s3">.</span><span class="s1">stdin</span><span class="s3">.</span><span class="s1">isTTY</span><span class="s3">)) {</span>
        <span class="s1">command</span><span class="s3">.</span><span class="s1">input </span><span class="s3">= </span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">stdinName</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s4">const </span><span class="s1">options </span><span class="s3">= </span><span class="s1">mergeOptions</span><span class="s3">.</span><span class="s1">mergeOptions</span><span class="s3">({ </span><span class="s1">input</span><span class="s3">: [] }, </span><span class="s1">command</span><span class="s3">, </span><span class="s1">warnings</span><span class="s3">.</span><span class="s1">add</span><span class="s3">);</span>
    <span class="s4">await </span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">addCommandPluginsToInputOptions</span><span class="s3">(</span><span class="s1">options</span><span class="s3">, </span><span class="s1">command</span><span class="s3">);</span>
    <span class="s4">return </span><span class="s3">{ </span><span class="s1">options</span><span class="s3">: [</span><span class="s1">options</span><span class="s3">], </span><span class="s1">warnings </span><span class="s3">};</span>
<span class="s3">}</span>

<span class="s1">async </span><span class="s4">function </span><span class="s1">runRollup</span><span class="s3">(</span><span class="s1">command</span><span class="s3">) {</span>
    <span class="s4">let </span><span class="s1">inputSource</span><span class="s3">;</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">_</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">input</span><span class="s3">) {</span>
            <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">handleError</span><span class="s3">({</span>
                <span class="s1">code</span><span class="s3">: </span><span class="s2">'DUPLICATE_IMPORT_OPTIONS'</span><span class="s3">,</span>
                <span class="s1">message</span><span class="s3">: </span><span class="s2">'Either use --input, or pass input path as argument'</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s1">inputSource </span><span class="s3">= </span><span class="s1">command</span><span class="s3">.</span><span class="s1">_</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s4">else if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">command</span><span class="s3">.</span><span class="s1">input </span><span class="s3">=== </span><span class="s2">'string'</span><span class="s3">) {</span>
        <span class="s1">inputSource </span><span class="s3">= [</span><span class="s1">command</span><span class="s3">.</span><span class="s1">input</span><span class="s3">];</span>
    <span class="s3">}</span>
    <span class="s4">else </span><span class="s3">{</span>
        <span class="s1">inputSource </span><span class="s3">= </span><span class="s1">command</span><span class="s3">.</span><span class="s1">input</span><span class="s3">;</span>
    <span class="s3">}</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">inputSource </span><span class="s3">&amp;&amp; </span><span class="s1">inputSource</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
        <span class="s4">if </span><span class="s3">(</span><span class="s1">inputSource</span><span class="s3">.</span><span class="s1">some</span><span class="s3">((</span><span class="s1">input</span><span class="s3">) =&gt; </span><span class="s1">input</span><span class="s3">.</span><span class="s1">includes</span><span class="s3">(</span><span class="s2">'='</span><span class="s3">))) {</span>
            <span class="s1">command</span><span class="s3">.</span><span class="s1">input </span><span class="s3">= {};</span>
            <span class="s1">inputSource</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">((</span><span class="s1">input</span><span class="s3">) =&gt; {</span>
                <span class="s4">const </span><span class="s1">equalsIndex </span><span class="s3">= </span><span class="s1">input</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s2">'='</span><span class="s3">);</span>
                <span class="s4">const </span><span class="s1">value </span><span class="s3">= </span><span class="s1">input</span><span class="s3">.</span><span class="s1">substring</span><span class="s3">(</span><span class="s1">equalsIndex </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">);</span>
                <span class="s4">const </span><span class="s1">key </span><span class="s3">= </span><span class="s1">input</span><span class="s3">.</span><span class="s1">substring</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, </span><span class="s1">equalsIndex</span><span class="s3">) || </span><span class="s1">rollup</span><span class="s3">.</span><span class="s1">getAliasName</span><span class="s3">(</span><span class="s1">input</span><span class="s3">);</span>
                <span class="s1">command</span><span class="s3">.</span><span class="s1">input</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">;</span>
            <span class="s3">});</span>
        <span class="s3">}</span>
        <span class="s4">else </span><span class="s3">{</span>
            <span class="s1">command</span><span class="s3">.</span><span class="s1">input </span><span class="s3">= </span><span class="s1">inputSource</span><span class="s3">;</span>
        <span class="s3">}</span>
    <span class="s3">}</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">environment</span><span class="s3">) {</span>
        <span class="s4">const </span><span class="s1">environment </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">environment</span><span class="s3">)</span>
            <span class="s3">? </span><span class="s1">command</span><span class="s3">.</span><span class="s1">environment</span>
            <span class="s3">: [</span><span class="s1">command</span><span class="s3">.</span><span class="s1">environment</span><span class="s3">];</span>
        <span class="s1">environment</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">((</span><span class="s1">arg</span><span class="s3">) =&gt; {</span>
            <span class="s1">arg</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">','</span><span class="s3">).</span><span class="s1">forEach</span><span class="s3">((</span><span class="s1">pair</span><span class="s3">) =&gt; {</span>
                <span class="s4">const </span><span class="s3">[</span><span class="s1">key</span><span class="s3">, </span><span class="s1">...value</span><span class="s3">] = </span><span class="s1">pair</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">':'</span><span class="s3">);</span>
                <span class="s1">process$1</span><span class="s3">.</span><span class="s1">env</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">value</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0 </span><span class="s3">? </span><span class="s1">String</span><span class="s3">(</span><span class="s4">true</span><span class="s3">) : </span><span class="s1">value</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">':'</span><span class="s3">);</span>
            <span class="s3">});</span>
        <span class="s3">});</span>
    <span class="s3">}</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">mergeOptions</span><span class="s3">.</span><span class="s1">isWatchEnabled</span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">watch</span><span class="s3">)) {</span>
        <span class="s4">await </span><span class="s1">rollup</span><span class="s3">.</span><span class="s1">loadFsEvents</span><span class="s3">();</span>
        <span class="s4">const </span><span class="s3">{ </span><span class="s1">watch </span><span class="s3">} = </span><span class="s4">await </span><span class="s1">Promise</span><span class="s3">.</span><span class="s1">resolve</span><span class="s3">().</span><span class="s1">then</span><span class="s3">(() =&gt; </span><span class="s1">require</span><span class="s3">(</span><span class="s2">'../shared/watch-cli.js'</span><span class="s3">));</span>
        <span class="s1">watch</span><span class="s3">(</span><span class="s1">command</span><span class="s3">);</span>
    <span class="s3">}</span>
    <span class="s4">else </span><span class="s3">{</span>
        <span class="s4">try </span><span class="s3">{</span>
            <span class="s4">const </span><span class="s3">{ </span><span class="s1">options</span><span class="s3">, </span><span class="s1">warnings </span><span class="s3">} = </span><span class="s4">await </span><span class="s1">getConfigs</span><span class="s3">(</span><span class="s1">command</span><span class="s3">);</span>
            <span class="s4">try </span><span class="s3">{</span>
                <span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">inputOptions of options</span><span class="s3">) {</span>
                    <span class="s4">await </span><span class="s1">build</span><span class="s3">(</span><span class="s1">inputOptions</span><span class="s3">, </span><span class="s1">warnings</span><span class="s3">, </span><span class="s1">command</span><span class="s3">.</span><span class="s1">silent</span><span class="s3">);</span>
                <span class="s3">}</span>
                <span class="s4">if </span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">failAfterWarnings </span><span class="s3">&amp;&amp; </span><span class="s1">warnings</span><span class="s3">.</span><span class="s1">warningOccurred</span><span class="s3">) {</span>
                    <span class="s1">warnings</span><span class="s3">.</span><span class="s1">flush</span><span class="s3">();</span>
                    <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">handleError</span><span class="s3">({</span>
                        <span class="s1">code</span><span class="s3">: </span><span class="s2">'FAIL_AFTER_WARNINGS'</span><span class="s3">,</span>
                        <span class="s1">message</span><span class="s3">: </span><span class="s2">'Warnings occurred and --failAfterWarnings flag present'</span>
                    <span class="s3">});</span>
                <span class="s3">}</span>
            <span class="s3">}</span>
            <span class="s4">catch </span><span class="s3">(</span><span class="s1">err</span><span class="s3">) {</span>
                <span class="s1">warnings</span><span class="s3">.</span><span class="s1">flush</span><span class="s3">();</span>
                <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">handleError</span><span class="s3">(</span><span class="s1">err</span><span class="s3">);</span>
            <span class="s3">}</span>
        <span class="s3">}</span>
        <span class="s4">catch </span><span class="s3">(</span><span class="s1">err</span><span class="s3">) {</span>
            <span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">handleError</span><span class="s3">(</span><span class="s1">err</span><span class="s3">);</span>
        <span class="s3">}</span>
    <span class="s3">}</span>
<span class="s3">}</span>
<span class="s1">async </span><span class="s4">function </span><span class="s1">getConfigs</span><span class="s3">(</span><span class="s1">command</span><span class="s3">) {</span>
    <span class="s4">if </span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">config</span><span class="s3">) {</span>
        <span class="s4">const </span><span class="s1">configFile </span><span class="s3">= </span><span class="s4">await </span><span class="s1">getConfigPath</span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">config</span><span class="s3">);</span>
        <span class="s4">const </span><span class="s3">{ </span><span class="s1">options</span><span class="s3">, </span><span class="s1">warnings </span><span class="s3">} = </span><span class="s4">await </span><span class="s1">loadConfigFile_js</span><span class="s3">.</span><span class="s1">loadAndParseConfigFile</span><span class="s3">(</span><span class="s1">configFile</span><span class="s3">, </span><span class="s1">command</span><span class="s3">);</span>
        <span class="s4">return </span><span class="s3">{ </span><span class="s1">options</span><span class="s3">, </span><span class="s1">warnings </span><span class="s3">};</span>
    <span class="s3">}</span>
    <span class="s4">return await </span><span class="s1">loadConfigFromCommand</span><span class="s3">(</span><span class="s1">command</span><span class="s3">);</span>
<span class="s3">}</span>

<span class="s4">const </span><span class="s1">command </span><span class="s3">= </span><span class="s1">argParser</span><span class="s3">(</span><span class="s1">process$1</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">2</span><span class="s3">), {</span>
    <span class="s1">alias</span><span class="s3">: </span><span class="s1">mergeOptions</span><span class="s3">.</span><span class="s1">commandAliases</span><span class="s3">,</span>
    <span class="s1">configuration</span><span class="s3">: { </span><span class="s2">'camel-case-expansion'</span><span class="s3">: </span><span class="s4">false </span><span class="s3">}</span>
<span class="s3">});</span>
<span class="s4">if </span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">help </span><span class="s3">|| (</span><span class="s1">process$1</span><span class="s3">.</span><span class="s1">argv</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s7">2 </span><span class="s3">&amp;&amp; </span><span class="s1">process$1</span><span class="s3">.</span><span class="s1">stdin</span><span class="s3">.</span><span class="s1">isTTY</span><span class="s3">)) {</span>
    <span class="s1">console</span><span class="s3">.</span><span class="s1">log</span><span class="s3">(</span><span class="s2">`</span><span class="s4">\n</span><span class="s1">$</span><span class="s3">{</span><span class="s1">help</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s2">'__VERSION__'</span><span class="s3">, </span><span class="s1">rollup</span><span class="s3">.</span><span class="s1">version</span><span class="s3">)}</span><span class="s4">\n</span><span class="s2">`</span><span class="s3">);</span>
<span class="s3">}</span>
<span class="s4">else if </span><span class="s3">(</span><span class="s1">command</span><span class="s3">.</span><span class="s1">version</span><span class="s3">) {</span>
    <span class="s1">console</span><span class="s3">.</span><span class="s1">log</span><span class="s3">(</span><span class="s2">`rollup v</span><span class="s1">$</span><span class="s3">{</span><span class="s1">rollup</span><span class="s3">.</span><span class="s1">version</span><span class="s3">}</span><span class="s2">`</span><span class="s3">);</span>
<span class="s3">}</span>
<span class="s4">else </span><span class="s3">{</span>
    <span class="s4">try </span><span class="s3">{</span>
        <span class="s1">require</span><span class="s3">(</span><span class="s2">'source-map-support'</span><span class="s3">).</span><span class="s1">install</span><span class="s3">();</span>
    <span class="s3">}</span>
    <span class="s4">catch </span><span class="s3">(</span><span class="s1">_a</span><span class="s3">) {</span>
        <span class="s0">// do nothing</span>
    <span class="s3">}</span>
    <span class="s1">runRollup</span><span class="s3">(</span><span class="s1">command</span><span class="s3">);</span>
<span class="s3">}</span>

<span class="s1">exports</span><span class="s3">.</span><span class="s1">getConfigPath </span><span class="s3">= </span><span class="s1">getConfigPath</span><span class="s3">;</span>
<span class="s1">exports</span><span class="s3">.</span><span class="s1">loadConfigFromCommand </span><span class="s3">= </span><span class="s1">loadConfigFromCommand</span><span class="s3">;</span>
<span class="s1">exports</span><span class="s3">.</span><span class="s1">ms </span><span class="s3">= </span><span class="s1">ms</span><span class="s3">;</span>
<span class="s1">exports</span><span class="s3">.</span><span class="s1">printTimings </span><span class="s3">= </span><span class="s1">printTimings</span><span class="s3">;</span>
<span class="s0">//# sourceMappingURL=rollup.map</span>
</pre>
</body>
</html>